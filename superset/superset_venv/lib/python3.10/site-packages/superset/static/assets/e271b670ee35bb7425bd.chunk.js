(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[7546],{343:e=>{"use strict";const t=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,r=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}function s(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function i(e){const t="https"===String(e.scheme).toLowerCase();return e.port!==(t?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}const a={scheme:"http",domainHost:!0,parse:s,serialize:i},o={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=n(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){if(e.port!==(n(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&"/"!==t?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}},l={http:a,https:{scheme:"https",domainHost:a.domainHost,parse:s,serialize:i},ws:o,wss:{scheme:"wss",domainHost:o.domainHost,parse:o.parse,serialize:o.serialize},urn:{scheme:"urn",parse:function(e,t){if(!e.path)return e.error="URN can not be parsed",e;const n=e.path.match(r);if(n){const r=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];const s=`${r}:${t.nid||e.nid}`,i=l[s];e.path=void 0,i&&(e=i.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){const r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),s=`${r}:${t.nid||n}`,i=l[s];i&&(e=i.serialize(e,t));const a=e,o=e.nss;return a.path=`${n||t.nid}:${o}`,t.skipEscape=!0,a},skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:function(e,r){const n=e;return n.uuid=n.nss,n.nss=void 0,r.tolerant||n.uuid&&t.test(n.uuid)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t},skipNormalize:!0}};e.exports=l},1239:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=r(94227),i={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>n.str`must match "${e.ifClause}" schema`,params:({params:e})=>n._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:r,it:i}=e;void 0===r.then&&void 0===r.else&&(0,s.checkStrictMode)(i,'"if" without "then" and "else" is ignored');const o=a(i,"then"),l=a(i,"else");if(!o&&!l)return;const c=t.let("valid",!0),d=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);e.mergeEvaluated(t)}(),e.reset(),o&&l){const r=t.let("ifClause");e.setParams({ifClause:r}),t.if(d,u("then",r),u("else",r))}else o?t.if(d,u("then")):t.if((0,n.not)(d),u("else"));function u(r,s){return()=>{const i=e.subschema({keyword:r},d);t.assign(c,d),e.mergeValidEvaluated(i,c),s?t.assign(s,n._`${r}`):e.setParams({ifClause:r})}}e.pass(c,(()=>e.error(!0)))}};function a(e,t){const r=e.schema[t];return void 0!==r&&!(0,s.alwaysValidSchema)(e,r)}t.default=i},1838:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>pm});var n=r(2445),s=r(96540),i=r(61225),a=r(17437),o=r(99106),l=r(40115);const c=l.F.injectEndpoints({endpoints:e=>({sqlLabInitialState:e.query({providesTags:["SqlLabInitialState"],query:()=>({endpoint:"/api/v1/sqllab/",headers:{"Content-Type":"application/json"},transformResponse:({json:e})=>e.result})})})}),{useSqlLabInitialStateQuery:d}=c;var u=r(49299),h=r(91412);const m=()=>(0,n.Y)(a.mL,{styles:e=>a.AH`
      body {
        min-height: max(
          100vh,
          ${125*e.sizeUnit}px
        ); // Set a min height so the gutter is always visible when resizing
        overflow: hidden;
      }
    `});var p=r(7350),f=r.n(p),y=r(61574),g=r(6411),v=r.n(g),b=r(50290),w=r(74098),S=r(81237),x=r(25875),$=r(50816),E=r(44383),_=r.n(E),C=r(21325),A=r(84193),k=r.n(A),T=r(95018),O=r(38134),P=r(93590),D=r(32064);const N=(0,s.createContext)({}),{Provider:I}=N,j={},F=({children:e})=>{const t=(0,y.zy)();if(t.state)return(0,n.Y)(I,{value:t.state,children:e});const r=new URLSearchParams(t.search);if(r.size>0){const t={requestedQuery:{dbid:r.get("dbid"),sql:r.get("sql"),name:r.get("name"),schema:r.get("schema"),autorun:"true"===r.get("autorun")},isDataset:!0};return(0,n.Y)(I,{value:t,children:e})}return(0,n.Y)(I,{value:j,children:e})};var R=r(56879),q=r(8558),M=r(62193),z=r.n(M),Y=r(38221),L=r.n(Y),U=r(66991),V=r(58168),B=r(98587),W=r(77387);function H(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var Q=r(28290);const K=s.createContext(null);var G=function(e){return e.scrollTop},J="unmounted",Z="exited",X="entering",ee="entered",te="exiting",re=function(e){function t(t,r){var n;n=e.call(this,t,r)||this;var s,i=r&&!r.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?i?(s=Z,n.appearStatus=X):s=ee:s=t.unmountOnExit||t.mountOnEnter?J:Z,n.state={status:s},n.nextCallback=null,n}(0,W.A)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===J?{status:Z}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var r=this.state.status;this.props.in?r!==X&&r!==ee&&(t=X):r!==X&&r!==ee||(t=te)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,r,n=this.props.timeout;return e=t=r=n,null!=n&&"number"!=typeof n&&(e=n.exit,t=n.enter,r=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:r}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===X){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:Q.findDOMNode(this);r&&G(r)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Z&&this.setState({status:J})},r.performEnter=function(e){var t=this,r=this.props.enter,n=this.context?this.context.isMounting:e,s=this.props.nodeRef?[n]:[Q.findDOMNode(this),n],i=s[0],a=s[1],o=this.getTimeouts(),l=n?o.appear:o.enter;e||r?(this.props.onEnter(i,a),this.safeSetState({status:X},(function(){t.props.onEntering(i,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:ee},(function(){t.props.onEntered(i,a)}))}))}))):this.safeSetState({status:ee},(function(){t.props.onEntered(i)}))},r.performExit=function(){var e=this,t=this.props.exit,r=this.getTimeouts(),n=this.props.nodeRef?void 0:Q.findDOMNode(this);t?(this.props.onExit(n),this.safeSetState({status:te},(function(){e.props.onExiting(n),e.onTransitionEnd(r.exit,(function(){e.safeSetState({status:Z},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:Z},(function(){e.props.onExited(n)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,r=!0;return this.nextCallback=function(n){r&&(r=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var r=this.props.nodeRef?this.props.nodeRef.current:Q.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(r&&!n){if(this.props.addEndListener){var s=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],i=s[0],a=s[1];this.props.addEndListener(i,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===J)return null;var t=this.props,r=t.children,n=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,B.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return s.createElement(K.Provider,{value:null},"function"==typeof r?r(e,n):s.cloneElement(s.Children.only(r),n))},t}(s.Component);function ne(){}re.contextType=K,re.propTypes={},re.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ne,onEntering:ne,onEntered:ne,onExit:ne,onExiting:ne,onExited:ne},re.UNMOUNTED=J,re.EXITED=Z,re.ENTERING=X,re.ENTERED=ee,re.EXITING=te;const se=re;var ie=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return n=t,void((r=e).classList?r.classList.remove(n):"string"==typeof r.className?r.className=H(r.className,n):r.setAttribute("class",H(r.className&&r.className.baseVal||"",n)));var r,n}))},ae=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,r){var n=t.resolveArguments(e,r),s=n[0],i=n[1];t.removeClasses(s,"exit"),t.addClass(s,i?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,r)},t.onEntering=function(e,r){var n=t.resolveArguments(e,r),s=n[0],i=n[1]?"appear":"enter";t.addClass(s,i,"active"),t.props.onEntering&&t.props.onEntering(e,r)},t.onEntered=function(e,r){var n=t.resolveArguments(e,r),s=n[0],i=n[1]?"appear":"enter";t.removeClasses(s,i),t.addClass(s,i,"done"),t.props.onEntered&&t.props.onEntered(e,r)},t.onExit=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"appear"),t.removeClasses(r,"enter"),t.addClass(r,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var r=t.resolveArguments(e)[0];t.addClass(r,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"exit"),t.addClass(r,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,r){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,r]},t.getClassNames=function(e){var r=t.props.classNames,n="string"==typeof r,s=n?(n&&r?r+"-":"")+e:r[e];return{baseClassName:s,activeClassName:n?s+"-active":r[e+"Active"],doneClassName:n?s+"-done":r[e+"Done"]}},t}(0,W.A)(t,e);var r=t.prototype;return r.addClass=function(e,t,r){var n=this.getClassNames(t)[r+"ClassName"],s=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===r&&s&&(n+=" "+s),"active"===r&&e&&G(e),n&&(this.appliedClasses[t][r]=n,function(e,t){e&&t&&t.split(" ").forEach((function(t){return n=t,void((r=e).classList?r.classList.add(n):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,n)||("string"==typeof r.className?r.className=r.className+" "+n:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+n)));var r,n}))}(e,n))},r.removeClasses=function(e,t){var r=this.appliedClasses[t],n=r.base,s=r.active,i=r.done;this.appliedClasses[t]={},n&&ie(e,n),s&&ie(e,s),i&&ie(e,i)},r.render=function(){var e=this.props,t=(e.classNames,(0,B.A)(e,["classNames"]));return s.createElement(se,(0,V.A)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(s.Component);ae.defaultProps={classNames:""},ae.propTypes={};const oe=ae;var le=r(71764),ce=r(1763),de=r(94185),ue=r(53048),he=r(28827),me=r(88217),pe=r(97163),fe=r(17355),ye=r(28429),ge=r(97072),ve=r(15039),be=r(85600),we=r(24777);function Se(e){const t=(0,i.wA)();return(0,s.useCallback)(((r,n)=>t((0,x.logEvent)(r,{payload:{...e,...n}}))),[e,t])}var xe=r(89232),$e=r(52167),Ee=r(23575),_e=r(41876),Ce=r(13410),Ae=r(5250);function ke(e,t){const r=(0,i.d4)((({sqlLab:{queryEditors:e}})=>e),i.bN),n=(0,s.useMemo)((()=>Object.fromEntries(r.map((e=>[e.id,e])))),[r.map((({id:e})=>e)).join(",")]);return(0,i.d4)((({sqlLab:{unsavedQueryEditor:r}})=>_()({...n[e],...e===(null==r?void 0:r.id)&&r},["id"].concat(t))),i.bN)}const Te=(0,b.I4)($e._p)`
  &.ace_editor {
    border: 1px solid ${({theme:e})=>e.colorBorder};
  }
`,Oe=({queryEditorId:e,language:t,onChange:r=()=>{}})=>{const[i,a]=(0,s.useState)({}),[o,l]=(0,s.useState)(!0),{templateParams:c}=ke(e,["templateParams"]),d=null!=c?c:"{}";(0,s.useEffect)((()=>{try{a(JSON.parse(d)),l(!0)}catch{a({}),l(!1)}}),[d]);const u=(0,n.FD)("div",{children:[(0,n.FD)("p",{children:[(0,w.t)("Assign a set of parameters as"),(0,n.Y)("code",{children:"JSON"}),(0,w.t)("below (example:"),(0,n.Y)("code",{children:'{"my_table": "foo"}'}),(0,w.t)("), and they become available in your SQL (example:"),(0,n.FD)("code",{children:["SELECT * FROM ","{{ my_table }}"," "]}),") ",(0,w.t)("by using")," ",(0,n.Y)("a",{href:"https://superset.apache.org/sqllab.html#templating-with-jinja",target:"_blank",rel:"noopener noreferrer",children:(0,w.t)("Jinja templating")})," ",(0,w.t)("syntax.")]}),(0,n.Y)(Te,{mode:t,minLines:25,maxLines:50,onChange:L()(r,Ee.Y.FAST_DEBOUNCE),width:"100%",editorProps:{$blockScrolling:!0},enableLiveAutocompletion:!0,value:d})]}),h=i?Object.keys(i).length:0;return(0,n.Y)(_e.g,{modalTitle:(0,w.t)("Template parameters"),triggerNode:(0,n.Y)(T.m,{id:"parameters-tooltip",placement:"top",title:(0,w.t)("Edit template parameters"),trigger:["hover"],children:(0,n.FD)("div",{role:"button",css:{width:"inherit"},children:[(0,w.t)("Parameters "),(0,n.Y)(Ce.E,{count:h}),!o&&(0,n.Y)(Ae.I,{type:"error",tooltip:(0,w.t)("Invalid JSON"),label:"invalid-json"})]})}),modalBody:u})};var Pe=r(43561),De=r(27509),Ne=r(90179),Ie=r.n(Ne),je=r(85692),Fe=r(4651),Re=r(50659),qe=r(6754);const Me=(0,b.I4)((({striped:e,...t})=>(0,n.Y)(qe.A,{...t})))`
  position: static;
  .ant-progress-inner {
    position: static;
  }
  .ant-progress-bg {
    position: static;
    ${({striped:e})=>e&&"\n        background-image: linear-gradient(45deg,\n            rgba(255, 255, 255, 0.15) 25%,\n            transparent 25%, transparent 50%,\n            rgba(255, 255, 255, 0.15) 50%,\n            rgba(255, 255, 255, 0.15) 75%,\n            transparent 75%, transparent) !important;\n        background-size: 1rem 1rem !important;\n        "};
  }
`;var ze=r(59674),Ye=r(70713);function Le(e){const{className:t,children:r}=e;return(0,n.Y)("div",{role:"group",className:t,css:{display:"flex","& > :nth-of-type(1):not(:nth-last-of-type(1))":{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0,marginLeft:0},"& > :not(:nth-of-type(1)):not(:nth-last-of-type(1))":{borderRadius:0,borderRight:0,marginLeft:0},"& > :nth-last-of-type(1):not(:nth-of-type(1))":{borderTopLeftRadius:0,borderBottomLeftRadius:0,marginLeft:0},...e.expand&&{"& .superset-button":{flexGrow:1}}},children:r})}var Ue=r(92998),Ve=r(67413),Be=r(29898),We=r(88808),He=r(77290),Qe=r(89105),Ke=r(28674),Ge=r(94921),Je=r(85923),Ze=r(90886),Xe=r(5376),et=r(7741),tt=r(89063);const rt=({table:e,schema:t,dbId:r,templateParams:s})=>{const a=(0,i.d4)((e=>e.sqlLab.errorMessage)),o=(0,i.wA)(),l={table_name:e,schema:t,database_id:r,template_params:s};return(0,n.FD)(me.$,{buttonSize:"small",onClick:()=>{o((0,u.createCtasDatasource)(l)).then((e=>{const t={datasource:`${e.table_id}__table`,metrics:["count"],groupby:[],viz_type:et.Y.Table,since:"100 years ago",all_columns:[],row_limit:1e3};o((0,u.addInfoToast)((0,w.t)("Creating a data source and creating a new tab"))),(0,Ke.Cq)(t)})).catch((()=>{o((0,u.addDangerToast)(a||(0,w.t)("An error occurred")))}))},tooltip:(0,w.t)("Explore the result set in the data exploration view"),children:[(0,n.Y)(tt.F,{placement:"top",tooltip:(0,w.t)("Explore")}),(0,n.Y)(q.F.LineChartOutlined,{iconSize:"m"}),(0,w.t)("Explore")]})},nt=({database:e,onClick:t})=>{var r;const s=null!=(r=null==e?void 0:e.allows_subquery)&&r;return(0,n.Y)(me.$,{buttonSize:"small",buttonStyle:"secondary",icon:(0,n.Y)(q.F.LineChartOutlined,{}),onClick:t,disabled:!s,role:"button",tooltip:(0,w.t)("Explore the result set in the data exploration view"),children:(0,w.t)("Create chart")})};var st=r(55204);const it=(e,t,r)=>{let n=(e||"").split("\n");return n.length>=t&&(n=n.slice(0,t),n.push("{...}")),n.map((e=>e.length>r?`${e.slice(0,r)}{...}`:e)).join("\n")};function at({shrink:e,sql:t,maxLines:r,maxWidth:s}){return(0,n.Y)(st.Ay,{language:"sql",children:e?it(t,r,s):t})}function ot({rawSql:e,sql:t}){return(0,n.FD)("div",{children:[(0,n.Y)("h4",{children:(0,w.t)("Source SQL")}),(0,n.Y)(st.Ay,{language:"sql",children:t}),e&&e!==t&&(0,n.FD)("div",{children:[(0,n.Y)("h4",{children:(0,w.t)("Executed SQL")}),(0,n.Y)(st.Ay,{language:"sql",children:e})]})]})}const lt=function({sql:e,rawSql:t,maxWidth:r=50,maxLines:s=5,shrink:i=!1}){return(0,n.Y)(_e.g,{modalTitle:(0,w.t)("SQL"),modalBody:(0,n.Y)(ot,{rawSql:t,sql:e}),triggerNode:(0,n.Y)(at,{shrink:i,sql:e,maxLines:s,maxWidth:r})})},ct=(0,b.I4)(De.JU)`
  margin-right: ${({theme:e})=>e.sizeUnit}px;
`;function dt({query:e}){return(0,n.Y)(ct,{type:S.sA[e.state],children:S.K8[e.state]})}var ut;!function(e){e.Query="QUERY",e.QueryAndDropdown="QUERY_AND_DROPDOWN",e.Dropdown="DROPDOWN",e.NotLimited="NOT_LIMITED"}(ut||(ut={}));const ht=b.I4.div`
  display: flex;
  flex-direction: column;
  row-gap: ${({theme:e})=>2*e.sizeUnit}px;
  height: 100%;
`,mt=b.I4.div`
  position: relative;
  min-height: ${({theme:e})=>25*e.sizeUnit}px;
  [role='alert'] {
    margin-top: ${({theme:e})=>2*e.sizeUnit}px;
  }
  .sql-result-track-job {
    margin-top: ${({theme:e})=>2*e.sizeUnit}px;
  }
`,pt=b.I4.div`
  font-family: ${({theme:e})=>e.fontFamilyCode};
  white-space: pre;
  word-break: break-word;
  overflow-x: auto;
  white-space: pre-wrap;
`,ft=b.I4.div`
  font-size: ${({theme:e})=>e.fontSizeSM}px;
  line-height: 1;
`,yt=b.I4.div`
  display: flex;
  justify-content: space-between;
  padding-left: ${({theme:e})=>4*e.sizeUnit}px;
`,gt=b.I4.div`
  display: grid;
  grid-auto-flow: column;
  padding-right: ${({theme:e})=>2*e.sizeUnit}px;
`,vt=a.AH`
  &:hover {
    text-decoration: unset;
  }
  span > :first-of-type {
    margin: 0px;
  }
`,bt=(0,ce.a)(),wt=({cache:e=!1,csv:t=!0,database:r={},displayLimit:o,height:l,queryId:c,search:d=!0,showSql:m=!1,showSqlInline:p=!1,visualize:f=!0,defaultQueryLimit:g})=>{var v,S,x;const E=(0,i.d4)((({user:e})=>e),i.bN),C=(0,i.d4)((({sqlLab:{queries:e}})=>_()(e[c],["id","errorMessage","cached","results","resultsKey","dbId","tab","sql","executedSql","sqlEditorId","templateParams","schema","rows","queryLimit","limitingFactor","trackingUrl","state","errors","link","ctas","ctas_method","tempSchema","tempTable","isDataPreview","progress","extra"])),i.bN),A=null!=(v=bt.get("sqleditor.extension.resultTable"))?v:xe.TR,k=(0,b.DP)(),[O,D]=(0,s.useState)(""),[N,I]=(0,s.useState)([]),[j,F]=(0,s.useState)(!1),R=(0,y.W6)(),M=(0,i.wA)(),z=Se({queryId:c,sqlEditorId:C.sqlEditorId}),Y=(0,s.useCallback)((()=>{C.errorMessage&&C.errorMessage.indexOf("session timed out")>0&&M((0,u.reRunQuery)(C))}),[]);(0,s.useEffect)((()=>{Y()}),[Y]);const L=(e,t)=>{M((0,u.fetchQueryResults)(e,o,t))},U=(0,Ve.Z)(C);(0,s.useEffect)((()=>{var t;e&&C.cached&&(null==C||null==(t=C.results)||null==(t=t.data)?void 0:t.length)>0&&(I(C.results.data),M((0,u.clearQueryResults)(C))),C.resultsKey&&C.resultsKey!==(null==U?void 0:U.resultsKey)&&L(C)}),[C,e]);const V=e=>{D(e.target.value)},B=async e=>{const{results:t}=C,r=e.metaKey;if(z($.PV,{}),null!=t&&t.query_id){const e=await(0,Ge.T)(t.query_id,"query",{...Qe.V0,datasource:`${t.query_id}__query`,all_columns:t.columns.map((e=>e.column_name))}),n=(0,Ke.eX)(null,{[Je.vX.formDataKey.name]:e});r?window.open(n,"_blank","noreferrer"):R.push(n)}else(0,h.iB)((0,w.t)("Unable to create chart without a query id."))},W=()=>{if(d||f||t){var s;const{results:a,queryLimit:o,limitingFactor:l,rows:c}=C,u=o||a.query.limit,h=Math.min(c||0,(null==a||null==(s=a.data)?void 0:s.length)||0);let{data:m}=C.results;e&&C.cached&&(m=N);const{columns:p}=C.results,y={columns:C.results.columns,name:(null==C?void 0:C.tab)||"Untitled",dbId:null==C?void 0:C.dbId,sql:null==C?void 0:C.sql,templateParams:null==C?void 0:C.templateParams,schema:null==C?void 0:C.schema},g=(0,Ze.L)("can_export_csv","SQLLab",null==E?void 0:E.roles);return(0,n.FD)(yt,{children:[(0,n.Y)(He.D,{visible:j,onHide:()=>F(!1),buttonTextOnSave:(0,w.t)("Save & Explore"),buttonTextOnOverwrite:(0,w.t)("Overwrite & Explore"),modalDescription:(0,w.t)("Save this query as a virtual dataset to continue exploring"),datasource:y}),(0,n.FD)(gt,{children:[f&&(null==r?void 0:r.allows_virtual_table_explore)&&(0,n.Y)(nt,{database:r,onClick:B}),t&&g&&(0,n.FD)(me.$,{css:vt,buttonSize:"small",buttonStyle:"secondary",href:(i=C.id,(0,Xe.A)(`/api/v1/sqllab/export/${i}/`)),onClick:()=>{z($.ft,{}),l===ut.Dropdown&&u===h&&pe.aF.warning({title:(0,w.t)("Download is on the way"),content:(0,w.t)("Downloading %(rows)s rows based on the LIMIT configuration. If you want the entire result set, you need to adjust the LIMIT.",{rows:h.toLocaleString()})})},children:[(0,n.Y)(q.F.DownloadOutlined,{iconSize:"m"})," ",(0,w.t)("Download to CSV")]}),g&&(0,n.Y)(xe.$r,{text:(0,P.L)(m,p),wrapped:!1,copyNode:(0,n.FD)(me.$,{css:vt,buttonSize:"small",buttonStyle:"secondary",children:[(0,n.Y)(q.F.CopyOutlined,{iconSize:"s"})," ",(0,w.t)("Copy to Clipboard")]}),hideTooltip:!0,onCopyEnd:()=>z($.AI,{})})]}),d&&(0,n.Y)(fe.A,{onChange:V,value:O,className:"form-control input-sm",placeholder:(0,w.t)("Filter results")})]})}var i;return(0,n.Y)("div",{})},H=e=>{var r,s;const{results:i,rows:o,queryLimit:l,limitingFactor:c}=C;let d="";const u=null==i?void 0:i.displayLimitReached,h=l||i.query.limit,m=!(null==E||null==(r=E.roles)||!r.Admin),f=Math.min(o||0,(null==i||null==(s=i.data)?void 0:s.length)||0),y={withAdmin:(0,w.t)("The number of results displayed is limited to %(rows)d by the configuration DISPLAY_MAX_ROW. Please add additional limits/filters or download to csv to see more rows up to the %(limit)d limit.",{rows:f,limit:h}),withoutAdmin:(0,w.t)("The number of results displayed is limited to %(rows)d. Please add additional limits/filters, download to csv, or contact an admin to see more rows up to the %(limit)d limit.",{rows:f,limit:h})},v=h===g&&c===ut.Dropdown;c===ut.Query&&t?d=(0,w.t)("The number of rows displayed is limited to %(rows)d by the query",{rows:o}):c!==ut.Dropdown||v?c===ut.QueryAndDropdown&&(d=(0,w.t)("The number of rows displayed is limited to %(rows)d by the query and limit dropdown.",{rows:o})):d=(0,w.t)("The number of rows displayed is limited to %(rows)d by the limit dropdown.",{rows:o});const b=(0,Be.gV)()(o),S=`${(0,w.t)("%(rows)d rows returned",{rows:o})}. ${d}`;if(e)return(0,n.FD)(n.FK,{children:[!u&&v&&(0,n.Y)("div",{children:(0,n.Y)(de.F,{closable:!0,type:"warning",message:(0,w.t)("The number of rows displayed is limited to %(rows)d by the dropdown.",{rows:o})})}),u&&(0,n.Y)("div",{children:(0,n.Y)(de.F,{closable:!0,type:"warning",message:m?y.withAdmin:y.withoutAdmin})})]});const x=p||!u&&!v;return(0,n.Y)(n.FK,{children:x&&(0,n.Y)(ft,{children:(0,n.Y)(T.m,{id:"sqllab-rowcount-tooltip",title:S,placement:"left",children:(0,n.FD)(De.JU,{css:a.AH`
                  line-height: ${k.fontSizeLG}px;
                `,children:[d&&(0,n.Y)(q.F.ExclamationCircleOutlined,{css:a.AH`
                      font-size: ${k.fontSize}px;
                      margin-right: ${k.sizeUnit}px;
                    `}),(0,w.tn)("%s row","%s rows",o,b)]})})})})};let Q,K,G,J=C.dbId;if(null!=r&&r.explore_database_id&&(J=r.explore_database_id),C.trackingUrl&&C.state!==We.kZ.Success&&C.state!==We.kZ.Fetching&&(K=(0,n.Y)(me.$,{className:"sql-result-track-job",buttonSize:"small",href:C.trackingUrl,target:"_blank",children:C.state===We.kZ.Running?(0,w.t)("Track job"):(0,w.t)("See query details")})),m&&(Q=(0,n.Y)(lt,{sql:C.sql,rawSql:C.executedSql,...p&&{maxLines:1,maxWidth:60}})),C.state===We.kZ.Stopped)return(0,n.Y)(de.F,{type:"warning",message:(0,w.t)("Query was stopped")});if(C.state===We.kZ.Failed){var Z;const e=[...(null==(Z=C.extra)?void 0:Z.errors)||[],...C.errors||[]];return(0,n.FD)(mt,{children:[e.map(((e,t)=>(0,n.Y)(xe.x6,{title:(0,w.t)("Database error"),error:e,subtitle:(0,n.Y)(pt,{children:e.message}),copyText:e.message||void 0,link:C.link,source:"sqllab"},t))),e.some((e=>(null==e?void 0:e.error_type)===We.eK.FRONTEND_TIMEOUT_ERROR))?(0,n.Y)(me.$,{className:"sql-result-track-job",buttonSize:"small",onClick:()=>L(C,0),children:(0,w.t)("Retry fetching results")}):K]})}if(C.state===We.kZ.Success&&C.ctas){const{tempSchema:e,tempTable:t}=C;let r="Table";return C.ctas_method===u.CtasEnum.View&&(r="View"),(0,n.Y)("div",{children:(0,n.Y)(de.F,{type:"info",message:(0,n.FD)(n.FK,{children:[(0,w.t)(r)," [",(0,n.FD)("strong",{children:[e?`${e}.`:"",t]}),"] ",(0,w.t)("was created"),"  ",(0,n.FD)(Le,{children:[(0,n.Y)(me.$,{buttonSize:"small",css:{marginRight:k.sizeUnit},onClick:()=>((e,t)=>{const r={id:(0,Pe.Ak)(11),name:t,autorun:!1,dbId:C.dbId,sql:`SELECT * FROM ${e?`${e}.`:""}${t}`};M((0,u.addQueryEditor)(r))})(e,t),children:(0,w.t)("Query in a new tab")}),(0,n.Y)(rt,{table:t,schema:e,dbId:J})]})]})})})}if(C.state===We.kZ.Success&&C.results){const{results:t}=C;let r;if(e&&C.cached?r=N:null!=t&&t.data&&({data:r}=t),r&&r.length>0){const e=t.expanded_columns?t.expanded_columns.map((e=>e.column_name)):[],s=(0,we.Gq)(we.Hh.SqllabIsRenderHtmlEnabled,!0);return(0,n.FD)(ht,{children:[W(),m&&p?(0,n.FD)(n.FK,{children:[(0,n.FD)("div",{css:a.AH`
                  display: flex;
                  justify-content: space-between;
                  padding-left: ${4*k.sizeUnit}px;
                  align-items: center;
                  gap: ${8}px;
                `,children:[(0,n.Y)(Fe.Z,{css:[a.AH`
                      height: 28px;
                      width: calc(100% - ${108}px);
                      code {
                        width: 100%;
                        overflow: hidden;
                        white-space: nowrap !important;
                        text-overflow: ellipsis;
                        display: block;
                      }
                    `],children:Q}),H(!1)]}),H(!0)]}):(0,n.FD)(n.FK,{children:[H(!1),H(!0),Q]}),(0,n.Y)("div",{css:a.AH`
              flex: 1 1 auto;
              padding-left: ${4*k.sizeUnit}px;
            `,children:(0,n.Y)(Ye.Ay,{disableWidth:!0,children:({height:i})=>(0,n.Y)(A,{data:r,queryId:C.id,orderedColumnKeys:t.columns.map((e=>e.column_name)),height:i,filterText:O,expandedColumns:e,allowHTML:s})})})]})}if(r&&0===r.length)return(0,n.Y)(de.F,{type:"warning",message:(0,w.t)("The query returned no data")})}if(C.cached||C.state===We.kZ.Success&&!C.results){if(C.isDataPreview)return(0,n.Y)(me.$,{buttonSize:"small",buttonStyle:"primary",onClick:()=>M((0,u.reFetchQueryResults)({...C,isDataPreview:!0})),children:(0,w.t)("Fetch data preview")});if(C.resultsKey)return(0,n.Y)(me.$,{buttonSize:"small",buttonStyle:"primary",onClick:()=>L(C),children:(0,w.t)("Refetch results")})}C.progress>0&&(G=(0,n.Y)(Me,{percent:parseInt(C.progress.toFixed(0),10),striped:!0}));const X=null!=(S=null==C||null==(x=C.extra)?void 0:x.progress)?S:null;return(0,n.FD)(mt,{children:[(0,n.Y)("div",{children:!G&&(0,n.Y)(Ue.R,{position:"normal"})}),(0,n.Y)("div",{children:100===C.progress&&(0,n.Y)(Ue.R,{position:"normal"})}),(0,n.Y)(dt,{query:C}),(0,n.Y)("div",{children:X&&(0,n.Y)(de.F,{type:"success",message:X})}),(0,n.Y)("div",{children:100!==C.progress&&G}),K&&(0,n.Y)("div",{children:K})]})},St=(0,s.memo)(wt),xt=a.AH`
  position: static;
`,$t=(a.AH`
  vertical-align: 0em;
  svg {
    height: 0.9em;
  }
`,(0,b.I4)(tt.F)`
  padding-right: ${({theme:e})=>2*e.sizeUnit}px;
  span {
    color: ${({theme:e})=>e.colorIcon};
    &: hover {
      color: ${({theme:e})=>e.colorPrimary};
    }
  }
`),Et=({columns:e=["started","duration","rows"],queries:t=[],onUserClicked:r=()=>{},onDbClicked:a=()=>{},displayLimit:o,latestQueryId:l})=>{const c=(0,b.DP)(),d=(0,i.wA)(),h={state:(0,w.t)("State"),started:(0,w.t)("Started"),duration:(0,w.t)("Duration"),progress:(0,w.t)("Progress"),rows:(0,w.t)("Rows"),sql:(0,w.t)("SQL"),results:(0,w.t)("Results"),actions:(0,w.t)("Actions")},m=e=>"sql"===e?e.toUpperCase():e.charAt(0).toUpperCase().concat(e.slice(1)),p=(0,s.useMemo)((()=>e.map((e=>({accessor:e,Header:h[e]||m(e),disableSortBy:!0,id:e})))),[e]),f=(0,i.d4)((e=>e.user)),y=(0,s.useMemo)((()=>{const e={success:{config:{icon:(0,n.Y)(q.F.CheckOutlined,{iconColor:c.colorSuccess,iconSize:"m"}),label:(0,w.t)("Success")}},failed:{config:{icon:(0,n.Y)(q.F.CloseOutlined,{iconColor:c.colorError,iconSize:"m"}),label:(0,w.t)("Failed")}},stopped:{config:{icon:(0,n.Y)(q.F.CloseOutlined,{iconColor:c.colorError,iconSize:"m"}),label:(0,w.t)("Failed")}},running:{config:{icon:(0,n.Y)(q.F.LoadingOutlined,{iconColor:c.colorPrimary,iconSize:"m"}),label:(0,w.t)("Running")}},fetching:{config:{icon:(0,n.Y)(q.F.LoadingOutlined,{iconColor:c.colorPrimary,iconSize:"m"}),label:(0,w.t)("Fetching")}},timed_out:{config:{icon:(0,n.Y)(q.F.ClockCircleOutlined,{iconColor:c.colorError,iconSize:"m"}),label:(0,w.t)("Offline")}},scheduled:{config:{icon:(0,n.Y)(q.F.LoadingOutlined,{iconColor:c.colorWarning,iconSize:"m"}),label:(0,w.t)("Scheduled")}},pending:{config:{icon:(0,n.Y)(q.F.LoadingOutlined,{iconColor:c.colorWarning,iconSize:"m"}),label:(0,w.t)("Scheduled")}},error:{config:{icon:(0,n.Y)(q.F.Error,{iconColor:c.colorError,iconSize:"m"}),label:(0,w.t)("Unknown Status")}},started:{config:{icon:(0,n.Y)(q.F.LoadingOutlined,{iconColor:c.colorPrimary,iconSize:"m"}),label:(0,w.t)("Started")}}};return t.map((t=>{const{state:s,sql:i,progress:h,...m}=t,p=m,f=e[s]||e.error;return p.endDttm&&(p.duration=(0,n.Y)(De.JU,{monospace:!0,children:(0,ze.RW)(p.startDttm,p.endDttm)})),p.user=(0,n.Y)(me.$,{buttonSize:"small",buttonStyle:"link",onClick:()=>r(p.userId),children:p.user}),p.db=(0,n.Y)(me.$,{buttonSize:"small",buttonStyle:"link",onClick:()=>a(p.dbId),children:p.db}),p.started=(0,n.Y)(De.JU,{monospace:!0,children:(0,ze.XV)(p.startDttm).format("L HH:mm:ss")}),p.querylink=(0,n.FD)(me.$,{buttonSize:"small",buttonStyle:"link",onClick:()=>(e=>{const t=`/sqllab?queryId=${e}`;window.open(t)})(p.queryId),children:[(0,n.Y)(q.F.Full,{iconSize:"m",iconColor:c.colorPrimary}),(0,w.t)("Edit")]}),p.sql=(0,n.Y)(Fe.Z,{css:[xt],children:(0,n.Y)(lt,{sql:i,rawSql:p.executedSql,shrink:!0,maxWidth:60})}),p.resultsKey?p.results=(0,n.Y)(_e.g,{className:"ResultsModal",triggerNode:(0,n.Y)(me.$,{buttonSize:"xsmall",buttonStyle:"secondary",children:(0,w.t)("View")}),modalTitle:(0,w.t)("Data preview"),beforeOpen:()=>((e,t)=>{d((0,u.fetchQueryResults)(e,t))})(t,o),onExit:()=>d((0,u.clearQueryResults)(t)),modalBody:(0,n.Y)(St,{showSql:!0,queryId:t.id,height:400,displayLimit:o,defaultQueryLimit:1e3}),responsive:!0}):p.results=(0,n.Y)(n.FK,{}),p.progress="success"===s?(0,n.Y)(Me,{percent:parseInt(h.toFixed(0),10),striped:!0,showInfo:!1}):(0,n.Y)(Me,{percent:parseInt(h.toFixed(0),10),striped:!0}),p.state=(0,n.Y)(T.m,{title:f.config.label,children:f.config.icon}),p.actions=(0,n.FD)("div",{children:[(0,n.Y)($t,{onClick:()=>(e=>{d((0,u.queryEditorSetSql)({id:e.sqlEditorId},e.sql,e.id))})(t),tooltip:(0,w.t)("Overwrite text in the editor with a query on this table"),placement:"top",className:"pointer",children:(0,n.Y)(q.F.EditOutlined,{iconSize:"l"})}),(0,n.Y)($t,{onClick:()=>(e=>{d((0,u.cloneQueryToNewTab)(e,!0))})(t),tooltip:(0,w.t)("Run query in a new tab"),placement:"top",className:"pointer",children:(0,n.Y)(q.F.PlusCircleOutlined,{iconSize:"l"})}),p.id!==l&&(0,n.Y)($t,{tooltip:(0,w.t)("Remove query from log"),onClick:()=>d((0,u.removeQuery)(t)),className:"pointer",children:(0,n.Y)(q.F.DeleteOutlined,{iconSize:"l"})})]}),p})).reverse()}),[t,r,a,f,o]);return(0,n.Y)("div",{className:"QueryTable",children:(0,n.Y)(Re.Q,{columns:p,data:y,className:"table-condensed",pageSize:50})})},_t=e=>({queryId:e.id,id:e.client_id,dbId:e.database.id,db:e.database,executedSql:e.executed_sql,errorMessage:e.error_message,queryLimit:e.limit,ctas:e.select_as_cta,limitingFactor:e.limiting_factor,progress:e.progress,rows:e.rows,schema:e.schema,sql:e.sql,sqlEditorId:e.sql_editor_id,state:e.status,tab:e.tab_name,startDttm:Number(e.start_time),endDttm:Number(e.end_time),tempTable:e.tmp_table_name||"",trackingUrl:e.tracking_url,resultsKey:e.results_key,userId:e.user.id,cached:!1,extra:{progress:null},isDataPreview:!1,user:e.user}),Ct=l.F.injectEndpoints({endpoints:e=>({editorQueries:e.query({providesTags:["EditorQueries"],query:({editorId:e,pageIndex:t=0,pageSize:r=25})=>({method:"GET",endpoint:"/api/v1/query/",urlParams:{keys:["none"],columns:["id","client_id","changed_on","database.id","database.database_name","executed_sql","error_message","limit","limiting_factor","progress","rows","select_as_cta","schema","sql","sql_editor_id","status","tab_name","user.first_name","user.id","user.last_name","start_time","end_time","tmp_table_name","tmp_schema_name","tracking_url","results_key"],order_column:"start_time",order_direction:"desc",page:t,page_size:r,filters:[{col:"sql_editor_id",opr:"eq",value:e}]},headers:{"Content-Type":"application/json"},transformResponse:({json:e})=>({...e,result:e.result.map(_t)})}),serializeQueryArgs:({queryArgs:{editorId:e}})=>({editorId:e}),forceRefetch:({currentArg:e,previousArg:t})=>e!==t,merge:(e,t)=>{e.result.push(...t.result)}})})}),{useEditorQueriesQuery:At}=Ct,kt=b.I4.div`
  height: 100%;
  .ant-empty-image img {
    margin-right: 28px;
  }

  p {
    margin-right: 28px;
  }
`,Tt=(e,t)=>Object.values(e).filter((({sqlEditorId:e})=>String(e)===String(t))),Ot=({queryEditorId:e,displayLimit:t,latestQueryId:r})=>{const{id:l,tabViewId:c}=ke(String(e),["tabViewId"]),d=(0,b.DP)(),u=null!=c?c:l,[h,m]=(0,je.Wx)({threshold:0}),[p,f]=(0,s.useState)(0),y=(0,i.d4)((({sqlLab:{queries:e}})=>e),i.bN),{currentData:g,isLoading:v,isFetching:S}=At({editorId:u,pageIndex:p},{skip:!(0,o.G7)(o.TO.SqllabBackendPersistence)}),x=(0,s.useMemo)((()=>g?Tt(Ie()(y,g.result.map((({id:e})=>e))),u).concat(g.result).sort(((e,t)=>(e.startDttm||0)-(t.startDttm||0))):Tt(y,u)),[y,g,u]),$=(0,U.A)((()=>{f(p+1)})),E=(null==g?void 0:g.result.length)||0,_=(null==g?void 0:g.count)||0;return(0,s.useEffect)((()=>{m&&E<_&&$()}),[m,$,E,_]),!x.length&&v?(0,n.Y)(ge.A,{active:!0}):x.length>0?(0,n.FD)("div",{css:a.AH`
        padding-left: ${4*d.sizeUnit}px;
      `,children:[(0,n.Y)(Et,{columns:["state","started","duration","progress","rows","sql","results","actions"],queries:x,displayLimit:t,latestQueryId:r}),g&&E<_&&(0,n.Y)("div",{ref:h,css:a.AH`
            position: relative;
            top: -150px;
          `}),S&&(0,n.Y)(ge.A,{active:!0})]}):(0,n.Y)(kt,{children:(0,n.Y)(O.p,{title:(0,w.t)("Run a query to display query history"),size:"medium",image:"document.svg"})})},Pt=b.I4.div`
  height: 100%;
  .ant-empty-image img {
    margin-right: 28px;
  }

  p {
    margin-right: 28px;
  }
`,Dt=({latestQueryId:e,height:t,displayLimit:r,defaultQueryLimit:s})=>{const a=(0,i.d4)((({sqlLab:{databases:e}})=>e),i.bN),l=(0,i.d4)((({sqlLab:{queries:t}})=>t[e||""]),i.bN);return!l||Date.now()-l.startDttm>S.Ml?(0,n.Y)(Pt,{children:(0,n.Y)(O.p,{title:(0,w.t)("Run a query to display results"),image:"document.svg"})}):!(0,o.G7)(o.TO.SqllabBackendPersistence)||"success"!==l.state||l.resultsKey||l.results?(0,n.Y)(St,{search:!0,queryId:l.id,height:t+8,database:a[l.dbId],displayLimit:r,defaultQueryLimit:s,showSql:!0,showSqlInline:!0}):(0,n.Y)(de.F,{type:"warning",message:(0,w.t)("No stored results found, you need to re-run your query")})};var Nt=r(76576),It=r(94431),jt=r(7437),Ft=r(98244),Rt=r(99027);function qt({tooltipText:e,title:t,sql:r,triggerNode:i}){return(0,s.useEffect)((()=>{(0,st.Fq)(["sql"])}),[]),(0,n.Y)(_e.g,{modalTitle:t,triggerNode:i||(0,n.Y)(tt.F,{className:"pull-left",tooltip:e,children:(0,n.Y)(q.F.EyeOutlined,{iconSize:"s"})}),modalBody:(0,n.Y)("div",{children:(0,n.Y)(st.Ay,{language:"sql",children:r})})})}const Mt=(0,ce.a)(),zt=["column_name","column_type","keys","comment"],Yt=b.I4.div`
  ${({theme:e})=>a.AH`
    display: flex;
    flex-direction: row;
    align-items: center;
    column-gap: ${e.sizeUnit}px;
    font-size: ${e.fontSizeLG}px;
    font-weight: ${e.fontWeightStrong};
    padding-top: ${2*e.sizeUnit}px;
    padding-left: ${4*e.sizeUnit}px;
  `}
`,Lt=e=>{if(!e)return null;const{partitionQuery:t}=e;let r;if(t){const e=(0,w.t)("Copy partition query to clipboard");r=(0,n.Y)(xe.$r,{text:t,shouldShowText:!1,tooltipText:e,copyNode:(0,n.Y)(q.F.CopyOutlined,{iconSize:"s"})})}const s=Object.entries(e.latest||[]).map((([e,t])=>`${e}=${t}`)).join("/");return(0,n.Y)(Fe.Z,{size:"small",children:(0,n.FD)("div",{children:[(0,n.FD)("small",{children:[(0,w.t)("latest partition:")," ",s]})," ",r]})})},Ut=({dbId:e,catalog:t,schema:r,tableName:o})=>{var l,c;const d=(0,i.wA)(),h=(0,b.DP)(),[m,p,f]=(0,i.d4)((({sqlLab:{databases:t}})=>{var r,n,s;return[null==(r=t[e])?void 0:r.database_name,null==(n=t[e])?void 0:n.backend,null==(s=t[e])?void 0:s.disable_data_preview]}),i.bN),y=(0,s.useRef)(null),g=(0,s.useRef)(null),[v,S]=(0,s.useState)(),{currentData:x,isLoading:$,isFetching:E,isError:_,error:A}=(0,Ft.rq)({dbId:e,catalog:t,schema:null!=r?r:"",table:null!=o?o:""},{skip:!e||!r||!o}),{currentData:k,error:T}=(0,Ft.ii)({dbId:e,catalog:t,schema:null!=r?r:"",table:null!=o?o:""},{skip:!e||!r||!o}),O=(0,s.useMemo)((()=>{var e;return(null!=(e=null==x?void 0:x.columns.length)?e:0)>0?null==x?void 0:x.columns.map((({name:e,type:t,longType:r,keys:n,comment:s})=>({column_name:e,column_type:r||t,keys:n,comment:s}))):void 0}),[x]),P=(0,s.useMemo)((()=>null==O?void 0:O.some((({keys:e})=>Boolean(null==e?void 0:e.length)))),[O]),D=(0,s.useMemo)((()=>P?zt:zt.filter((e=>"keys"!==e))),[P]),N={dataPreviewQueryId:v,...x,...k},I=null!=(l=Mt.get("sqleditor.extension.resultTable"))?l:xe.TR,j=null!=(c=Mt.get("sqleditor.extension.tablePreview"))?c:[],F=(0,s.useCallback)((n=>{if("sample"===n&&!v){const n=(0,Pe.Ak)(11);d((0,u.runTablePreviewQuery)({previewQueryId:n,dbId:e,catalog:t,schema:r,name:o,selectStar:N.selectStar},!0)),S(n)}}),[v,e,t,r,o,N.selectStar,d]);return $?(0,n.Y)(ge.A,{active:!0}):_||T?(0,n.Y)(de.F,{type:"warning",message:null==(R=A||T)?void 0:R.error}):O?(0,n.FD)("div",{css:a.AH`
        height: 100%;
        display: flex;
        flex-direction: column;
      `,children:[(0,n.FD)(It.A,{separator:">",css:a.AH`
          padding-left: ${4*h.sizeUnit}px;
        `,children:[(0,n.Y)(It.A.Item,{children:p}),(0,n.Y)(It.A.Item,{children:m}),t&&(0,n.Y)(It.A.Item,{children:t}),r&&(0,n.Y)(It.A.Item,{children:r}),(0,n.Y)(It.A.Item,{children:" "})]}),(0,n.FD)("div",{style:{display:"none"},children:[(0,n.Y)(xe.$r,{copyNode:(0,n.Y)("button",{type:"button",ref:y,children:"invisible button"}),text:N.selectStar,shouldShowText:!1}),N.view&&(0,n.Y)(qt,{sql:N.view,tooltipText:(0,w.t)("Show CREATE VIEW statement"),title:(0,w.t)("CREATE VIEW statement"),triggerNode:(0,n.Y)("button",{type:"button",ref:g,children:"invisible button"})})]}),(0,n.FD)(Yt,{children:[(0,n.Y)(q.F.InsertRowAboveOutlined,{iconSize:"l"}),o,(0,n.FD)(Nt.s,{align:"center",css:a.AH`
        padding-left: ${2*h.sizeUnit}px;
      `,children:[(0,n.Y)(Rt.r,{label:(0,w.t)("Refresh table schema"),tooltip:(0,w.t)("Refresh table schema"),icon:(0,n.Y)(q.F.SyncOutlined,{iconSize:"m"}),onClick:()=>{d(Ft.z7.invalidateTags([{type:"TableMetadatas",id:o}]))}}),N.selectStar&&(0,n.Y)(Rt.r,{label:(0,w.t)("Copy SELECT statement"),icon:(0,n.Y)(q.F.CopyOutlined,{iconSize:"m"}),tooltip:(0,w.t)("Copy SELECT statement"),onClick:()=>{var e;return null==(e=y.current)?void 0:e.click()}}),N.view&&(0,n.Y)(Rt.r,{label:(0,w.t)("Show CREATE VIEW statement"),icon:(0,n.Y)(q.F.EyeOutlined,{iconSize:"m"}),tooltip:(0,w.t)("Show CREATE VIEW statement"),onClick:()=>{var e;return null==(e=g.current)?void 0:e.click()}})]})]}),E?(0,n.Y)(ge.A,{active:!0}):(0,n.FD)(n.FK,{children:[N.comment&&(0,n.Y)(jt.z,{source:N.comment}),Lt(N.partitions),(0,n.Y)("div",{css:a.AH`
              flex: 1 1 auto;
            `,children:(0,n.Y)(Ye.Ay,{disableWidth:!0,children:({height:t})=>{const s=[];return s.push({key:"columns",label:(0,w.t)("Columns (%s)",O.length),children:(0,n.Y)(I,{queryId:"table-columns",height:t-80,data:O,orderedColumnKeys:D})}),null!=N&&N.selectStar&&!f&&s.push({key:"sample",label:(0,w.t)("Data preview"),children:v&&(0,n.Y)(St,{queryId:v,visualize:!1,csv:!1,cache:!0,height:t-80-30,displayLimit:100,defaultQueryLimit:100})}),null!=N&&N.indexes&&N.indexes.length>0&&s.push({key:"indexes",label:(0,w.t)("Indexes (%s)",N.indexes.length),children:N.indexes.map(((e,t)=>(0,n.Y)("pre",{className:"code",children:JSON.stringify(e,null,"  ")},t)))}),null!=N&&N.metadata&&s.push({key:"metadata",label:(0,w.t)("Metadata"),children:(0,n.Y)(I,{queryId:"table-metadata",height:t-80,data:Object.entries(N.metadata).map((([e,t])=>({name:e,value:t}))),orderedColumnKeys:["name","value"]})}),j.forEach((([t,i])=>{s.push({key:t,label:t,children:(0,n.Y)(i,{dbId:Number(e),schema:null!=r?r:"",tableName:o})})})),(0,n.Y)(C.Ay,{onTabClick:F,css:a.AH`
                      height: ${t}px;
                    `,tabBarStyle:{paddingLeft:4*h.sizeUnit},items:s,contentStyle:a.AH`
                      padding-left: ${4*h.sizeUnit}px;
                    `})}})})]})]}):(0,n.Y)(de.F,{type:"warning",message:(0,w.t)("Cannot find the table (%s) metadata.",o),closable:!1});var R},Vt=b.I4.div`
  width: 100%;
  height: ${e=>e.height}px;
  .ant-tabs .ant-tabs-content-holder {
    overflow: visible;
  }
  .SouthPaneTabs {
    height: 100%;
    display: flex;
    flex-direction: column;
    .scrollable {
      overflow-y: auto;
    }
  }
  .ant-tabs-tabpane {
    .scrollable {
      overflow-y: auto;
    }
  }
  .tab-content {
    .alert {
      margin-top: ${({theme:e})=>2*e.sizeUnit}px;
    }

    button.fetch {
      margin-top: ${({theme:e})=>2*e.sizeUnit}px;
    }
  }
`,Bt=({queryEditorId:e,latestQueryId:t,height:r,displayLimit:o,defaultQueryLimit:l})=>{var c;const{id:d,tabViewId:h}=ke(e,["tabViewId"]),m=null!=h?h:d,p=(0,b.DP)(),f=(0,i.wA)(),{offline:y,tables:g}=(0,i.d4)((({sqlLab:{offline:e,tables:t}})=>({offline:e,tables:t})),i.bN),v=null!=(c=(0,i.d4)((e=>e.sqlLab.activeSouthPaneTab)))?c:"Results",x=(0,s.useMemo)((()=>g.filter((({queryEditorId:e})=>String(m)===e))),[m,g]),$=(0,s.useMemo)((()=>Object.fromEntries(x.map((({id:e,dbId:t,catalog:r,schema:n,name:s})=>[e,[t,r,n,s].join(":")])))),[x]),E=r-130,_=(0,s.createRef)(),A=(0,s.useCallback)(((e,t)=>{if("remove"===t){const t=x.find((({dbId:t,catalog:r,schema:n,name:s})=>[t,r,n,s].join(":")===e));f((0,u.removeTables)([t]))}}),[f,x]);if(y)return(0,n.Y)(De.JU,{type:S.sA[S.yZ.offline],children:S.W8.offline});const k=[{key:"Results",label:(0,w.t)("Results"),children:(0,n.Y)(Dt,{height:E,latestQueryId:t,displayLimit:o,defaultQueryLimit:l}),closable:!1},{key:"History",label:(0,w.t)("Query history"),children:(0,n.Y)(Ot,{queryEditorId:e,displayLimit:o,latestQueryId:t}),closable:!1},...x.map((({id:e,dbId:t,catalog:r,schema:s,name:i})=>({key:$[e],label:(0,n.FD)(n.FK,{children:[(0,n.Y)(q.F.InsertRowAboveOutlined,{iconSize:"l",css:a.AH`
              margin-bottom: ${.5*p.sizeUnit}px;
              margin-right: ${p.sizeUnit}px;
            `}),`${s}.${decodeURIComponent(i)}`]}),children:(0,n.Y)(Ut,{dbId:t,catalog:r,schema:s,tableName:i})})))];return(0,n.Y)(Vt,{className:"SouthPane",height:r,ref:_,children:(0,n.Y)(C.Ay,{type:"editable-card",activeKey:$[v]||v,className:"SouthPaneTabs",onChange:e=>{f((0,u.setActiveSouthPaneTab)(e))},id:(0,Pe.Ak)(11),animated:!1,onEdit:A,hideAdd:!0,items:k})})};var Wt=r(65729),Ht=r(47152),Qt=r(16370),Kt=r(82384),Gt=r(81574);const Jt=({setShowSave:e,overlayMenu:t})=>{const r=(0,b.DP)();return t?(0,n.Y)(Gt.g,{onClick:()=>e(!0),popupRender:()=>t,icon:(0,n.Y)(q.F.DownOutlined,{iconSize:"xs",iconColor:r.colorPrimaryText}),trigger:["click"],children:(0,w.t)("Save")}):(0,n.Y)(me.$,{onClick:()=>e(!0),buttonStyle:"primary",children:(0,w.t)("Save")})};var Zt=r(35509),Xt=r(51692);const er=b.I4.span`
  span[role='img']:not([aria-label='down']) {
    display: flex;
    margin: 0;
    color: ${({theme:e})=>e.colorIcon};
    svg {
      vertical-align: -${({theme:e})=>1.25*e.sizeUnit}px;
      margin: 0;
    }
  }
`,tr=({queryEditorId:e,onSave:t=()=>{},onUpdate:r,saveQueryWarning:i,database:a,columns:o})=>{const l=ke(e,["autorun","name","description","remoteId","dbId","latestQueryId","queryLimit","catalog","schema","selectedText","sql","templateParams"]),c=(0,s.useMemo)((()=>({...l,columns:o})),[l,o]),d=Se({queryEditorId:e}),u=c.name||c.description||(0,w.t)("Undefined"),[h,m]=(0,s.useState)(c.description||""),[p,f]=(0,s.useState)(u),[y,g]=(0,s.useState)(!1),[v,b]=(0,s.useState)(!1),S=!!c.remoteId,x=!(null==a||!a.allows_virtual_table_explore),E=void 0!==(null==a?void 0:a.allows_virtual_table_explore),_=(0,n.Y)(be.W1,{items:[{label:(0,w.t)("Save dataset"),key:"save-dataset",onClick:()=>{d($.PV,{}),b(!0)}}]}),C=()=>{var e;return{name:p,description:h,dbId:null!=(e=c.dbId)?e:0,sql:c.sql,catalog:c.catalog,schema:c.schema,templateParams:c.templateParams,remoteId:(null==c?void 0:c.remoteId)||void 0}};(0,s.useEffect)((()=>{S||f(u)}),[u]);const A=()=>g(!1);return(0,n.FD)(er,{className:"SaveQuery",children:[E&&(0,n.Y)(Jt,{setShowSave:g,overlayMenu:x?_:null}),(0,n.Y)(He.D,{visible:v,onHide:()=>b(!1),buttonTextOnSave:(0,w.t)("Save & Explore"),buttonTextOnOverwrite:(0,w.t)("Overwrite & Explore"),datasource:(0,Zt.l)(c)}),(0,n.Y)(pe.aF,{className:"save-query-modal",onHide:A,width:"620px",show:y,name:(0,w.t)("Save query"),title:(0,n.Y)(Xt.r,{title:(0,w.t)("Save query"),icon:(0,n.Y)(q.F.SaveOutlined,{})}),footer:(0,n.FD)(n.FK,{children:[(0,n.Y)(me.$,{onClick:A,cta:!0,buttonStyle:"secondary",children:(0,w.t)("Cancel")}),(0,n.Y)(me.$,{buttonStyle:S?void 0:"primary",onClick:async()=>{d($.AP,{}),await t(C(),c.id),A()},cta:!0,children:S?(0,w.t)("Save as new"):(0,w.t)("Save")}),S&&(0,n.Y)(me.$,{buttonStyle:"primary",onClick:async()=>{await r(C(),c.id),A()},cta:!0,children:(0,w.t)("Update")})]}),children:(0,n.FD)(Wt.l,{layout:"vertical",children:[(0,n.Y)(Ht.A,{children:(0,n.Y)(Qt.A,{xs:24,children:(0,n.Y)(Kt.e,{label:(0,w.t)("Name"),children:(0,n.Y)(fe.A,{type:"text",value:p,onChange:e=>{f(e.target.value)}})})})}),(0,n.Y)("br",{}),(0,n.Y)(Ht.A,{children:(0,n.Y)(Qt.A,{xs:24,children:(0,n.Y)(Kt.e,{label:(0,w.t)("Description"),children:(0,n.Y)(fe.A.TextArea,{rows:4,value:h,onChange:e=>{m(e.target.value)}})})})}),i&&(0,n.FD)(n.FK,{children:[(0,n.Y)("br",{}),(0,n.FD)("div",{children:[(0,n.Y)(Ht.A,{children:(0,n.Y)(Qt.A,{xs:24,children:(0,n.Y)("small",{children:i})})}),(0,n.Y)("br",{})]})]})]})})]})};var rr=r(74848);function nr(e){return!("object"!=typeof e||null===e||"number"==typeof e.lastModified&&"undefined"!=typeof File&&e instanceof File||"function"==typeof e.getMonth&&"undefined"!=typeof Date&&e instanceof Date||Array.isArray(e))}function sr(e){if(""===e)return;if(null===e)return null;if(/\.$/.test(e))return e;if(/\.0$/.test(e))return e;if(/\.\d*0$/.test(e))return e;const t=Number(e);return"number"!=typeof t||Number.isNaN(t)?e:t}const ir="__additional_property",ar="additionalProperties",or="allOf",lr="anyOf",cr="const",dr="dependencies",ur="__errors",hr="$id",mr="items",pr="$name",fr="oneOf",yr="properties",gr="submitButtonOptions",vr="$ref",br="__rjsf_additionalProperties",wr="__rjsf_rootSchema",Sr="ui:widget",xr="ui:options";function $r(e={},t={}){return Object.keys(e).filter((e=>0===e.indexOf("ui:"))).reduce(((t,r)=>{const n=e[r];return r===Sr&&nr(n)?(console.error("Setting options via ui:widget object is no longer supported, use ui:options instead"),t):r===xr&&nr(n)?{...t,...n}:{...t,[r.substring(3)]:n}}),{...t})}function Er(e,t={},r){if(!e.additionalProperties)return!1;const{expandable:n=!0}=$r(t);return!1===n?n:void 0===e.maxProperties||!r||Object.keys(r).length<e.maxProperties}var _r=r(11331),Cr=r.n(_r);function Ar(e){const t={[ur]:[],addError(e){this[ur].push(e)}};if(Array.isArray(e))return e.reduce(((e,t,r)=>({...e,[r]:Ar(t)})),t);if(Cr()(e)){const r=e;return Object.keys(r).reduce(((e,t)=>({...e,[t]:Ar(r[t])})),t)}return t}var kr=r(29132),Tr=r.n(kr);function Or(e,t){return Tr()(e,t,((e,t)=>{if("function"==typeof e&&"function"==typeof t)return!0}))}var Pr=r(58156),Dr=r.n(Pr),Nr=r(56239);function Ir(e,t){const r=t[e];return[Ie()(t,[e]),r]}function jr(e,t={},r=[]){const n=e||"";let s;if(!n.startsWith("#"))throw new Error(`Could not find a definition for ${e}.`);s=decodeURIComponent(n.substring(1));const i=Nr.get(t,s);if(void 0===i)throw new Error(`Could not find a definition for ${e}.`);const a=i[vr];if(a){if(r.includes(a)){if(1===r.length)throw new Error(`Definition for ${e} is a circular reference`);const[t,...s]=r,i=[...s,n,t].join(" -> ");throw new Error(`Definition for ${t} contains a circular reference through ${i}`)}const[s,o]=Ir(vr,i),l=jr(o,t,[...r,n]);return Object.keys(s).length>0?{...s,...l}:l}return i}function Fr(e,t={}){return jr(e,t,[])}var Rr=r(61448),qr=r.n(Rr),Mr=r(98023),zr=r.n(Mr),Yr=r(23805),Lr=r.n(Yr),Ur=r(85015),Vr=r.n(Ur),Br=r(40860),Wr=r.n(Br),Hr=r(6638),Qr=r.n(Hr);function Kr(e,t,r){var n;if(e&&r){const s=Dr()(e,r);if(void 0===s)return;for(let e=0;e<t.length;e++){const i=t[e],a=Dr()(i,[yr,r],{});if("object"!==a.type&&"array"!==a.type){if(a.const===s)return e;if(null===(n=a.enum)||void 0===n?void 0:n.includes(s))return e}}}}function Gr(e,t,r,n,s){if(void 0===t)return 0;const i=Kr(t,r,s);if(zr()(i))return i;for(let i=0;i<r.length;i++){const a=r[i];if(s&&qr()(a,[yr,s])){const r=Dr()(t,s),o=Dr()(a,[yr,s],{});if(e.isValid(o,r,n))return i}else if(a[yr]){const r={anyOf:Object.keys(a[yr]).map((e=>({required:[e]})))};let s;if(a.anyOf){const{...e}=a;e.allOf?e.allOf=e.allOf.slice():e.allOf=[],e.allOf.push(r),s=e}else s=Object.assign({},a,r);if(delete s.required,e.isValid(s,t,n))return i}else if(e.isValid(a,t,n))return i}return 0}function Jr(e,t,r,n,s){return Gr(e,t,r,n,s)}var Zr=r(63560),Xr=r.n(Zr),en=r(69752),tn=r.n(en),rn=r(55364),nn=r.n(rn),sn=r(80795),an=r.n(sn),on=r(63375),ln=r.n(on),cn=r(33978),dn=r.n(cn);function un(e){let t;const r=Dr()(e,"discriminator.propertyName",void 0);return Vr()(r)?t=r:void 0!==r&&console.warn(`Expecting discriminator to be a string, got "${typeof r}" instead`),t}function hn(e){return Array.isArray(e)?"array":"string"==typeof e?"string":null==e?"null":"boolean"==typeof e?"boolean":isNaN(e)?"object"==typeof e?"object":"string":"number"}var mn=r(80299),pn=r.n(mn);function fn(e){let{type:t}=e;return!t&&e.const?hn(e.const):!t&&e.enum?"string":t||!e.properties&&!e.additionalProperties?(Array.isArray(t)&&(t=2===t.length&&t.includes("null")?t.find((e=>"null"!==e)):t[0]),t):"object"}function yn(e,t){const r=Object.assign({},e);return Object.keys(t).reduce(((r,n)=>{const s=e?e[n]:{},i=t[n];return e&&n in e&&nr(i)?r[n]=yn(s,i):e&&t&&("object"===fn(e)||"object"===fn(t))&&"required"===n&&Array.isArray(s)&&Array.isArray(i)?r[n]=pn()(s,i):r[n]=i,r}),r)}function gn(e,t,r={},n,s){return Sn(e,t,r,n,void 0,void 0,s)[0]}function vn(e){const t=e.reduce(((e,t)=>t.length>1?t.flatMap((t=>Qr()(e.length,(r=>[...e[r]].concat(t))))):(e.forEach((e=>e.push(t[0]))),e)),[[]]);return t}function bn(e,t,r,n,s,i,a){const o=wn(t,r,s);return o!==t?Sn(e,o,r,i,n,s,a):[t]}function wn(e,t,r){if(!nr(e))return e;let n=e;if(vr in n){const{$ref:e,...s}=n;if(r.includes(e))return n;r.push(e),n={...Fr(e,t),...s}}if(yr in n){const e=[],s=tn()(n[yr],((n,s,i)=>{const a=[...r];n[i]=wn(s,t,a),e.push(a)}),{});nn()(r,ln()(an()(e))),n={...n,[yr]:s}}return mr in n&&!Array.isArray(n.items)&&"boolean"!=typeof n.items&&(n={...n,items:wn(n.items,t,r)}),Or(e,n)?e:n}function Sn(e,t,r,n,s=!1,i=[],a){if(!nr(t))return[{}];const o=function(e,t,r,n,s,i,a){const o=bn(e,t,r,n,s,i);return o.length>1||o[0]!==t?o:dr in t?xn(e,t,r,n,s,i).flatMap((t=>Sn(e,t,r,i,n,s,a))):or in t&&Array.isArray(t.allOf)?vn(t.allOf.map((t=>Sn(e,t,r,i,n,s,a)))).map((e=>({...t,allOf:e}))):[t]}(e,t,r,s,i,n,a);return o.flatMap((t=>{var o;let l=t;if("if"in l)return function(e,t,r,n,s,i,a){const{if:o,then:l,else:c,...d}=t,u=e.isValid(o,i||{},r);let h=[d],m=[];if(n)l&&"boolean"!=typeof l&&(m=m.concat(Sn(e,l,r,i,n,s,a))),c&&"boolean"!=typeof c&&(m=m.concat(Sn(e,c,r,i,n,s,a)));else{const t=u?l:c;t&&"boolean"!=typeof t&&(m=m.concat(Sn(e,t,r,i,n,s,a)))}return m.length&&(h=m.map((e=>yn(d,e)))),h.flatMap((t=>Sn(e,t,r,i,n,s,a)))}(e,l,r,s,i,n,a);if(or in l){if(s){const{allOf:e,...t}=l;return[...e,t]}try{const e=[],t=[];null===(o=l.allOf)||void 0===o||o.forEach((r=>{"object"==typeof r&&r.contains?e.push(r):t.push(r)})),e.length&&(l={...l,allOf:t}),l=a?a(l):dn()(l,{deep:!1}),e.length&&(l.allOf=e)}catch(e){console.warn("could not merge subschemas in allOf:\n",e);const{allOf:t,...r}=l;return r}}return ar in l&&!1!==l.additionalProperties?function(e,t,r,n,s){const i={...t,properties:{...t.properties}},a=n&&nr(n)?n:{};return Object.keys(a).forEach((t=>{if(t in i.properties)return;let n={};n="boolean"!=typeof i.additionalProperties?vr in i.additionalProperties?gn(e,{$ref:Dr()(i.additionalProperties,[vr])},r,a,s):"type"in i.additionalProperties?{...i.additionalProperties}:lr in i.additionalProperties||fr in i.additionalProperties?{type:"object",...i.additionalProperties}:{type:hn(Dr()(a,[t]))}:{type:hn(Dr()(a,[t]))},i.properties[t]=n,Xr()(i.properties,[t,ir],!0)})),i}(e,l,r,n,a):l}))}function xn(e,t,r,n,s,i,a){const{dependencies:o,...l}=t,c=function(e,t,r,n,s){let i;const{oneOf:a,anyOf:o,...l}=t;if(Array.isArray(a)?i=a:Array.isArray(o)&&(i=o),i){const a=void 0===s&&n?{}:s,o=un(t);i=i.map((e=>wn(e,r,[])));const c=Jr(e,a,i,r,o);if(n)return i.map((e=>yn(l,e)));t=yn(l,i[c])}return[t]}(e,l,r,n,i);return c.flatMap((t=>$n(e,o,t,r,n,s,i,a)))}function $n(e,t,r,n,s,i,a,o){let l=[r];for(const c in t){if(!s&&void 0===Dr()(a,[c]))continue;if(r.properties&&!(c in r.properties))continue;const[d,u]=Ir(c,t);return Array.isArray(u)?l[0]=En(r,u):nr(u)&&(l=_n(e,r,n,c,u,s,i,a,o)),l.flatMap((t=>$n(e,d,t,n,s,i,a,o)))}return l}function En(e,t){if(!t)return e;const r=Array.isArray(e.required)?Array.from(new Set([...e.required,...t])):t;return{...e,required:r}}function _n(e,t,r,n,s,i,a,o,l){return Sn(e,s,r,o,i,a,l).flatMap((s=>{const{oneOf:c,...d}=s;return t=yn(t,d),void 0===c?t:vn(c.map((t=>"boolean"!=typeof t&&vr in t?bn(e,t,r,i,a,o):[t]))).flatMap((s=>function(e,t,r,n,s,i,a,o,l){const c=s.filter((t=>{if("boolean"==typeof t||!t||!t.properties)return!1;const{[n]:s}=t.properties;if(s){const t={type:"object",properties:{[n]:s}};return e.isValid(t,o,r)||i}return!1}));return i||1===c.length?c.flatMap((s=>{const c=s,[d]=Ir(n,c.properties),u={...c,properties:d};return Sn(e,u,r,o,i,a,l).map((e=>yn(t,e)))})):(console.warn("ignoring oneOf in dependencies because there isn't exactly one subschema that is valid"),[t])}(e,t,r,n,s,i,a,o,l)))}))}const Cn={type:"object",$id:"_$junk_option_schema_id$_",properties:{__not_really_there__:{type:"number"}}};function An(e,t,r,n,s){let i=0;return r&&(Lr()(r.properties)?i+=Wr()(r.properties,((r,i,a)=>{const o=Dr()(n,a);if("boolean"==typeof i)return r;if(qr()(i,vr)){const n=gn(e,i,t,o,s);return r+An(e,t,n,o||{},s)}if((qr()(i,fr)||qr()(i,lr))&&o){const n=qr()(i,fr)?fr:lr,a=un(i);return r+kn(e,t,o,Dr()(i,n),-1,a,s)}if("object"===i.type)return Lr()(o)&&(r+=1),r+An(e,t,i,o,s);if(i.type===hn(o)){let e=r+1;return i.default?e+=o===i.default?1:-1:i.const&&(e+=o===i.const?1:-1),e}return r}),0):Vr()(r.type)&&r.type===hn(n)&&(i+=1)),i}function kn(e,t,r,n,s=-1,i,a){const o=n.map((e=>wn(e,t,[]))),l=Kr(r,n,i);if(zr()(l))return l;const c=o.reduce(((n,s,a)=>(1===Jr(e,r,[Cn,s],t,i)&&n.push(a),n)),[]);if(1===c.length)return c[0];c.length||Qr()(o.length,(e=>c.push(e)));const d=new Set,{bestIndex:u}=c.reduce(((n,s)=>{const{bestScore:i}=n,l=o[s],c=An(e,t,l,r,a);return d.add(c),c>i?{bestIndex:s,bestScore:c}:n}),{bestIndex:s,bestScore:0});return 1===d.size&&s>=0?s:u}function Tn(e){return Array.isArray(e.items)&&e.items.length>0&&e.items.every((e=>nr(e)))}var On=r(69843),Pn=r.n(On);function Dn(e,t,r=!1,n=!1,s=!1){if(Array.isArray(t)){const i=Array.isArray(e)?e:[],a=s?t:i,o=(s?i:t).map(((e,o)=>void 0!==a[o]?Dn(i[o],t[o],r,n,s):e));return(r||s)&&o.length<a.length&&o.push(...a.slice(o.length)),o}if(nr(t)){const i=Object.assign({},e);return Object.keys(t).reduce(((i,a)=>{const o=Dr()(t,a),l=nr(e)&&a in e,c=a in t;return i[a]=Dn(e?Dr()(e,a):{},o,r,n,s&&(l||!c)),i}),i)}return n&&(!Pn()(e)&&Pn()(t)||"number"==typeof t&&isNaN(t))||s&&!Pn()(t)?e:t}function Nn(e,t,r=!1){return Object.keys(t).reduce(((n,s)=>{const i=e?e[s]:{},a=t[s];if(e&&s in e&&nr(a))n[s]=Nn(i,a,r);else if(r&&Array.isArray(i)&&Array.isArray(a)){let e=a;"preventDuplicates"===r&&(e=a.reduce(((e,t)=>(i.includes(t)||e.push(t),e)),[])),n[s]=i.concat(e)}else n[s]=a;return n}),Object.assign({},e))}function In(e){return Array.isArray(e.enum)&&1===e.enum.length||cr in e}function jn(e,t,r={},n){const s=gn(e,t,r,void 0,n),i=s.oneOf||s.anyOf;return!!Array.isArray(s.enum)||!!Array.isArray(i)&&i.every((e=>"boolean"!=typeof e&&In(e)))}function Fn(e,t,r,n){return!(!t.uniqueItems||!t.items||"boolean"==typeof t.items)&&jn(e,t.items,r,n)}function Rn(e){const t=e[cr],r=fn(e);return nr(t)&&Vr()(null==t?void 0:t.$data)&&"object"!==r&&"array"!==r}function qn(e,t){const r=e;if(e.enum){let n;if(t){const{enumNames:e}=$r(t);n=e}return!n&&r.enumNames&&(n=r.enumNames),e.enum.map(((e,t)=>({label:(null==n?void 0:n[t])||String(e),value:e})))}let n,s;return e.anyOf?(n=e.anyOf,s=null==t?void 0:t.anyOf):e.oneOf&&(n=e.oneOf,s=null==t?void 0:t.oneOf),n&&n.map(((e,t)=>{const{title:r}=$r(null==s?void 0:s[t]),n=e,i=function(e){if("enum"in e&&Array.isArray(e.enum)&&1===e.enum.length)return e.enum[0];if(cr in e)return e.const;throw new Error("schema cannot be inferred as a constant")}(n);return{schema:n,label:r||n.title||String(i),value:i}}))}const Mn=["string","number","integer","boolean","null"];var zn;function Yn(e,t=zn.Ignore,r=-1){if(r>=0){if(Array.isArray(e.items)&&r<e.items.length){const t=e.items[r];if("boolean"!=typeof t)return t}}else if(e.items&&!Array.isArray(e.items)&&"boolean"!=typeof e.items)return e.items;return t!==zn.Ignore&&nr(e.additionalItems)?e.additionalItems:{}}function Ln(e,t,r,n,s,i=[],a={},o=!1){const{emptyObjectFields:l="populateAllDefaults"}=a;if(n||o)e[t]=r;else if("skipDefaults"!==l){const n=void 0===s?i.includes(t):s;nr(r)?"skipEmptyDefaults"===l?z()(r)||(e[t]=r):z()(r)&&!i.includes(t)||!n&&"populateRequiredDefaults"===l||(e[t]=r):void 0!==r&&("populateAllDefaults"===l||"skipEmptyDefaults"===l||n&&i.includes(t))&&(e[t]=r)}}function Un(e,t,r={}){const{parentDefaults:n,rawFormData:s,rootSchema:i={},includeUndefinedValues:a=!1,_recurseList:o=[],experimental_defaultFormStateBehavior:l,experimental_customMergeAllOf:c,required:d,shouldMergeDefaultsIntoFormData:u=!1}=r,h=nr(s)?s:{},m=nr(t)?t:{};let p=n,f=null,y=l,g=o;if(m[cr]&&"never"!==(null==l?void 0:l.constAsDefaults)&&!Rn(m))p=m[cr];else if(nr(p)&&nr(m.default))p=Nn(p,m.default);else if("default"in m)p=m.default;else if(vr in m){const e=m[vr];o.includes(e)||(g=o.concat(e),f=Fr(e,i))}else if(dr in m){const t={...Vn(e,m,r,p),...h};f=xn(e,m,i,!1,[],t,c)[0]}else if(Tn(m))p=m.items.map(((t,r)=>Un(e,t,{rootSchema:i,includeUndefinedValues:a,_recurseList:o,experimental_defaultFormStateBehavior:l,experimental_customMergeAllOf:c,parentDefaults:Array.isArray(n)?n[r]:void 0,rawFormData:h,required:d,shouldMergeDefaultsIntoFormData:u})));else if(fr in m){const{oneOf:t,...r}=m;if(0===t.length)return;const n=un(m),{type:a="null"}=r;!Array.isArray(a)&&Mn.includes(a)&&"skipOneOf"===(null==y?void 0:y.constAsDefaults)&&(y={...y,constAsDefaults:"never"}),f=t[kn(e,i,s,t,0,n,c)],f=yn(r,f)}else if(lr in m){const{anyOf:t,...r}=m;if(0===t.length)return;const n=un(m);f=t[kn(e,i,s,t,0,n,c)],f=yn(r,f)}if(f)return Un(e,f,{rootSchema:i,includeUndefinedValues:a,_recurseList:g,experimental_defaultFormStateBehavior:y,experimental_customMergeAllOf:c,parentDefaults:p,rawFormData:h,required:d,shouldMergeDefaultsIntoFormData:u});void 0===p&&(p=m.default);const v=Vn(e,m,r,p);let b=null!=v?v:p;if(u){const{arrayMinItems:t={}}=l||{},{mergeExtraDefaults:r}=t,n=function(e,t,r,n,s){const i=!In(t)&&jn(e,t,r);let a=n;if(i){const e=qn(t);a=(null==e?void 0:e.some((e=>Or(e.value,n))))?n:void 0}return t[cr]&&"always"===(null==s?void 0:s.constAsDefaults)&&(a=t.const),a}(e,m,i,s,l);nr(s)||(b=Dn(b,n,r,!0))}return b}function Vn(e,t,r={},n){switch(fn(t)){case"object":return function(e,t,{rawFormData:r,rootSchema:n={},includeUndefinedValues:s=!1,_recurseList:i=[],experimental_defaultFormStateBehavior:a,experimental_customMergeAllOf:o,required:l,shouldMergeDefaultsIntoFormData:c}={},d){{const u=nr(r)?r:{},h=t,m="populateDefaults"===(null==a?void 0:a.allOf)&&or in h?gn(e,h,n,u,o):h,p=m[cr],f=Object.keys(m.properties||{}).reduce(((t,r)=>{var h;const f=Dr()(m,[yr,r]),y=nr(p)&&void 0!==p[r],g=(nr(f)&&cr in f||y)&&"never"!==(null==a?void 0:a.constAsDefaults)&&!Rn(f);return Ln(t,r,Un(e,f,{rootSchema:n,_recurseList:i,experimental_defaultFormStateBehavior:a,experimental_customMergeAllOf:o,includeUndefinedValues:!0===s,parentDefaults:Dr()(d,[r]),rawFormData:Dr()(u,[r]),required:null===(h=m.required)||void 0===h?void 0:h.includes(r),shouldMergeDefaultsIntoFormData:c}),s,l,m.required,a,g),t}),{});if(m.additionalProperties){const t=nr(m.additionalProperties)?m.additionalProperties:{},r=new Set;nr(d)&&Object.keys(d).filter((e=>!m.properties||!m.properties[e])).forEach((e=>r.add(e)));const h=[];Object.keys(u).filter((e=>!m.properties||!m.properties[e])).forEach((e=>{r.add(e),h.push(e)})),r.forEach((r=>{var p;const y=Un(e,t,{rootSchema:n,_recurseList:i,experimental_defaultFormStateBehavior:a,experimental_customMergeAllOf:o,includeUndefinedValues:!0===s,parentDefaults:Dr()(d,[r]),rawFormData:Dr()(u,[r]),required:null===(p=m.required)||void 0===p?void 0:p.includes(r),shouldMergeDefaultsIntoFormData:c});Ln(f,r,y,s,l,h)}))}return f}}(e,t,r,n);case"array":return function(e,t,{rawFormData:r,rootSchema:n={},_recurseList:s=[],experimental_defaultFormStateBehavior:i,experimental_customMergeAllOf:a,required:o,shouldMergeDefaultsIntoFormData:l}={},c){var d,u;const h=t,m=null!==(d=null==i?void 0:i.arrayMinItems)&&void 0!==d?d:{},{populate:p,mergeExtraDefaults:f}=m,y="never"===p,g="requiredOnly"===p,v="all"===p||!y&&!g,b=null!==(u=null==m?void 0:m.computeSkipPopulate)&&void 0!==u?u:()=>!1,w="skipEmptyDefaults"===(null==i?void 0:i.emptyObjectFields)?void 0:[];if(Array.isArray(c)&&(c=c.map(((t,r)=>{const c=Yn(h,zn.Fallback,r);return Un(e,c,{rootSchema:n,_recurseList:s,experimental_defaultFormStateBehavior:i,experimental_customMergeAllOf:a,parentDefaults:t,required:o,shouldMergeDefaultsIntoFormData:l})}))),Array.isArray(r)){const t=Yn(h);if(y)c=r;else{const d=r.map(((r,d)=>Un(e,t,{rootSchema:n,_recurseList:s,experimental_defaultFormStateBehavior:i,experimental_customMergeAllOf:a,rawFormData:r,parentDefaults:Dr()(c,[d]),required:o,shouldMergeDefaultsIntoFormData:l})));c=Dn(c,d,(g&&o||v)&&f)}}if(!1===(nr(h)&&cr in h&&"never"!==(null==i?void 0:i.constAsDefaults))){if(y)return null!=c?c:w;if(g&&!o)return c||void 0}const S=Array.isArray(c)?c.length:0;if(!h.minItems||Fn(e,h,n,a)||b(e,h,n)||h.minItems<=S)return c||w;const x=c||[],$=Yn(h,zn.Invert),E=$.default,_=new Array(h.minItems-S).fill(Un(e,$,{parentDefaults:E,rootSchema:n,_recurseList:s,experimental_defaultFormStateBehavior:i,experimental_customMergeAllOf:a,required:o,shouldMergeDefaultsIntoFormData:l}));return x.concat(_)}(e,t,r,n)}}function Bn(e,t,r,n,s=!1,i,a){if(!nr(t))throw new Error("Invalid schema: "+t);const o=Un(e,gn(e,t,n,r,a),{rootSchema:n,includeUndefinedValues:s,experimental_defaultFormStateBehavior:i,experimental_customMergeAllOf:a,rawFormData:r,shouldMergeDefaultsIntoFormData:!0});if(nr(r)||Array.isArray(r)){const{mergeDefaultsIntoFormData:e}=i||{};return Dn(o,r,!0,"useDefaultIfFormDataUndefined"===e,!0)}return o}function Wn(e={}){return"widget"in $r(e)&&"hidden"!==$r(e).widget}function Hn(e,t,r={},n,s){if("files"===r[Sr])return!0;if(t.items){const r=gn(e,t.items,n,void 0,s);return"string"===r.type&&"data-url"===r.format}return!1}!function(e){e[e.Ignore=0]="Ignore",e[e.Invert=1]="Invert",e[e.Fallback=2]="Fallback"}(zn||(zn={}));const Qn=Symbol("no Value");function Kn(e,t,r,n,s={},i){let a;if(qr()(r,yr)){const o={};if(qr()(n,yr)){const e=Dr()(n,yr,{});Object.keys(e).forEach((e=>{qr()(s,e)&&(o[e]=void 0)}))}const l=Object.keys(Dr()(r,yr,{})),c={};l.forEach((a=>{const l=Dr()(s,a);let d=Dr()(n,[yr,a],{}),u=Dr()(r,[yr,a],{});qr()(d,vr)&&(d=gn(e,d,t,l,i)),qr()(u,vr)&&(u=gn(e,u,t,l,i));const h=Dr()(d,"type"),m=Dr()(u,"type");if(!h||h===m)if(qr()(o,a)&&delete o[a],"object"===m||"array"===m&&Array.isArray(l)){const r=Kn(e,t,u,d,l,i);void 0===r&&"array"!==m||(c[a]=r)}else{const e=Dr()(u,"default",Qn),t=Dr()(d,"default",Qn);e!==Qn&&e!==l&&(t===l?o[a]=e:!0===Dr()(u,"readOnly")&&(o[a]=void 0));const r=Dr()(u,"const",Qn),n=Dr()(d,"const",Qn);r!==Qn&&r!==l&&(o[a]=n===l?r:void 0)}})),a={..."string"==typeof s||Array.isArray(s)?void 0:s,...o,...c}}else if("array"===Dr()(n,"type")&&"array"===Dr()(r,"type")&&Array.isArray(s)){let o=Dr()(n,"items"),l=Dr()(r,"items");if("object"!=typeof o||"object"!=typeof l||Array.isArray(o)||Array.isArray(l))"boolean"==typeof o&&"boolean"==typeof l&&o===l&&(a=s);else{qr()(o,vr)&&(o=gn(e,o,t,s,i)),qr()(l,vr)&&(l=gn(e,l,t,s,i));const n=Dr()(o,"type"),c=Dr()(l,"type");if(!n||n===c){const n=Dr()(r,"maxItems",-1);a="object"===c?s.reduce(((r,s)=>{const a=Kn(e,t,l,o,s,i);return void 0!==a&&(n<0||r.length<n)&&r.push(a),r}),[]):n>0&&s.length>n?s.slice(0,n):s}}}return a}function Gn(e,t,r,n,s,i,a,o=[],l){if(vr in t||dr in t||or in t){const c=gn(e,t,i,a,l);if(-1===o.findIndex((e=>Or(e,c))))return Gn(e,c,r,n,s,i,a,o.concat(c),l)}if(mr in t&&!Dr()(t,[mr,vr]))return Gn(e,Dr()(t,mr),r,n,s,i,a,o,l);const c={$id:s||r};if("object"===fn(t)&&yr in t)for(const s in t.properties){const d=Dr()(t,[yr,s]),u=c[hr]+n+s;c[s]=Gn(e,nr(d)?d:{},r,n,u,i,Dr()(a,[s]),o,l)}return c}function Jn(e,t,r,n,s,i="root",a="_",o){return Gn(e,t,i,a,r,n,s,void 0,o)}function Zn(e,t,r,n,s,i=[],a){if(vr in t||dr in t||or in t){const o=gn(e,t,n,s,a);if(-1===i.findIndex((e=>Or(e,o))))return Zn(e,o,r,n,s,i.concat(o),a)}let o={[pr]:r.replace(/^\./,"")};if(fr in t||lr in t){const l=fr in t?t.oneOf:t.anyOf,c=un(t),d=l[kn(e,n,s,l,0,c,a)];o={...o,...Zn(e,d,r,n,s,i,a)}}if(ar in t&&!1!==t[ar]&&Xr()(o,br,!0),mr in t&&Array.isArray(s)){const{items:l,additionalItems:c}=t;Array.isArray(l)?s.forEach(((t,s)=>{l[s]?o[s]=Zn(e,l[s],`${r}.${s}`,n,t,i,a):c?o[s]=Zn(e,c,`${r}.${s}`,n,t,i,a):console.warn(`Unable to generate path schema for "${r}.${s}". No schema defined for it`)})):s.forEach(((t,s)=>{o[s]=Zn(e,l,`${r}.${s}`,n,t,i,a)}))}else if(yr in t)for(const l in t.properties){const c=Dr()(t,[yr,l]);o[l]=Zn(e,c,`${r}.${l}`,n,Dr()(s,[l]),i,a)}return o}function Xn(e,t,r="",n,s,i){return Zn(e,t,r,n,s,void 0,i)}class es{constructor(e,t,r,n){this.rootSchema=t,this.validator=e,this.experimental_defaultFormStateBehavior=r,this.experimental_customMergeAllOf=n}getValidator(){return this.validator}doesSchemaUtilsDiffer(e,t,r={},n){return!(!e||!t||this.validator===e&&Or(this.rootSchema,t)&&Or(this.experimental_defaultFormStateBehavior,r)&&this.experimental_customMergeAllOf===n)}getDefaultFormState(e,t,r=!1){return Bn(this.validator,e,t,this.rootSchema,r,this.experimental_defaultFormStateBehavior,this.experimental_customMergeAllOf)}getDisplayLabel(e,t,r){return function(e,t,r={},n,s,i){const a=$r(r,s),{label:o=!0}=a;let l=!!o;const c=fn(t);return"array"===c&&(l=Fn(e,t,n,i)||Hn(e,t,r,n,i)||Wn(r)),"object"===c&&(l=!1),"boolean"!==c||r[Sr]||(l=!1),r["ui:field"]&&(l=!1),l}(this.validator,e,t,this.rootSchema,r,this.experimental_customMergeAllOf)}getClosestMatchingOption(e,t,r,n){return kn(this.validator,this.rootSchema,e,t,r,n,this.experimental_customMergeAllOf)}getFirstMatchingOption(e,t,r){return Jr(this.validator,e,t,this.rootSchema,r)}getMatchingOption(e,t,r){return Gr(this.validator,e,t,this.rootSchema,r)}isFilesArray(e,t){return Hn(this.validator,e,t,this.rootSchema,this.experimental_customMergeAllOf)}isMultiSelect(e){return Fn(this.validator,e,this.rootSchema,this.experimental_customMergeAllOf)}isSelect(e){return jn(this.validator,e,this.rootSchema,this.experimental_customMergeAllOf)}mergeValidationData(e,t){return function(e,t,r){if(!r)return t;const{errors:n,errorSchema:s}=t;let i=e.toErrorList(r),a=r;return z()(s)||(a=Nn(s,r,!0),i=[...n].concat(i)),{errorSchema:a,errors:i}}(this.validator,e,t)}retrieveSchema(e,t){return gn(this.validator,e,this.rootSchema,t,this.experimental_customMergeAllOf)}sanitizeDataForNewSchema(e,t,r){return Kn(this.validator,this.rootSchema,e,t,r,this.experimental_customMergeAllOf)}toIdSchema(e,t,r,n="root",s="_"){return Jn(this.validator,e,t,this.rootSchema,r,n,s,this.experimental_customMergeAllOf)}toPathSchema(e,t,r){return Xn(this.validator,e,t,this.rootSchema,r,this.experimental_customMergeAllOf)}}function ts(e,t){let r=String(e);for(;r.length<t;)r="0"+r;return r}function rs(e,t){if(e<=0&&t<=0)e=(new Date).getFullYear()+e,t=(new Date).getFullYear()+t;else if(e<0||t<0)throw new Error(`Both start (${e}) and stop (${t}) must both be <= 0 or > 0, got one of each`);if(e>t)return rs(t,e).reverse();const r=[];for(let n=e;n<=t;n++)r.push({value:n,label:ts(n,2)});return r}function ns(e,t){return function(e,t){let r=e;if(Array.isArray(t)){const e=r.split(/(%\d)/);t.forEach(((t,r)=>{const n=e.findIndex((e=>e===`%${r+1}`));n>=0&&(e[n]=t)})),r=e.join("")}return r}(e,t)}function ss(e,t=[],r){if(Array.isArray(e))return e.map((e=>ss(e,t))).filter((e=>e!==r));const n=""===e||null===e?-1:Number(e),s=t[n];return s?s.value:r}function is(e,t){return Array.isArray(t)?t.some((t=>Or(t,e))):Or(t,e)}var as=r(88055),os=r.n(as),ls=r(95632),cs=r.n(ls);class ds{constructor(e){this.errorSchema={},this.resetAllErrors(e)}get ErrorSchema(){return this.errorSchema}getOrCreateErrorBlock(e){let t=Array.isArray(e)&&e.length>0||"string"==typeof e?Dr()(this.errorSchema,e):this.errorSchema;return!t&&e&&(t={},cs()(this.errorSchema,e,t,Object)),t}resetAllErrors(e){return this.errorSchema=e?os()(e):{},this}addErrors(e,t){const r=this.getOrCreateErrorBlock(t);let n=Dr()(r,ur);return Array.isArray(n)||(n=[],r[ur]=n),Array.isArray(e)?Xr()(r,ur,[...new Set([...n,...e])]):Xr()(r,ur,[...new Set([...n,e])]),this}setErrors(e,t){const r=this.getOrCreateErrorBlock(t),n=Array.isArray(e)?[...new Set([...e])]:[e];return Xr()(r,ur,n),this}clearErrors(e){const t=this.getOrCreateErrorBlock(e);return Xr()(t,ur,[]),this}}function us(e,t,r=[1900,(new Date).getFullYear()+2],n="YMD"){const{day:s,month:i,year:a,hour:o,minute:l,second:c}=e,d={type:"day",range:[1,31],value:s},u={type:"month",range:[1,12],value:i},h={type:"year",range:r,value:a},m=[];switch(n){case"MDY":m.push(u,d,h);break;case"DMY":m.push(d,u,h);break;default:m.push(h,u,d)}return t&&m.push({type:"hour",range:[0,23],value:o},{type:"minute",range:[0,59],value:l},{type:"second",range:[0,59],value:c}),m}function hs(e){const t={};return e.multipleOf&&(t.step=e.multipleOf),(e.minimum||0===e.minimum)&&(t.min=e.minimum),(e.maximum||0===e.maximum)&&(t.max=e.maximum),t}function ms(e,t,r={},n=!0){const s={type:t||"text",...hs(e)};return r.inputType?s.type=r.inputType:t||("number"===e.type?(s.type="number",n&&void 0===s.step&&(s.step="any")):"integer"===e.type&&(s.type="number",void 0===s.step&&(s.step=1))),r.autocomplete&&(s.autoComplete=r.autocomplete),r.accept&&(s.accept=r.accept),s}const ps={props:{disabled:!1},submitText:"Submit",norender:!1};function fs(e,t,r={}){const{templates:n}=t;return"ButtonTemplates"===e?n[e]:r[e]||n[e]}var ys=r(44363);const gs={boolean:{checkbox:"CheckboxWidget",radio:"RadioWidget",select:"SelectWidget",hidden:"HiddenWidget"},string:{text:"TextWidget",password:"PasswordWidget",email:"EmailWidget",hostname:"TextWidget",ipv4:"TextWidget",ipv6:"TextWidget",uri:"URLWidget","data-url":"FileWidget",radio:"RadioWidget",select:"SelectWidget",textarea:"TextareaWidget",hidden:"HiddenWidget",date:"DateWidget",datetime:"DateTimeWidget","date-time":"DateTimeWidget","alt-date":"AltDateWidget","alt-datetime":"AltDateTimeWidget",time:"TimeWidget",color:"ColorWidget",file:"FileWidget"},number:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},integer:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},array:{select:"SelectWidget",checkboxes:"CheckboxesWidget",files:"FileWidget",hidden:"HiddenWidget"}};function vs(e,t,r={}){const n=fn(e);if("function"==typeof t||t&&ys.isForwardRef((0,s.createElement)(t))||ys.isMemo(t))return function(e){let t=Dr()(e,"MergedWidget");if(!t){const r=e.defaultProps&&e.defaultProps.options||{};t=({options:t,...n})=>(0,rr.jsx)(e,{options:{...r,...t},...n}),Xr()(e,"MergedWidget",t)}return t}(t);if("string"!=typeof t)throw new Error("Unsupported widget definition: "+typeof t);if(t in r)return vs(e,r[t],r);if("string"==typeof n){if(!(n in gs))throw new Error(`No widget for type '${n}'`);if(t in gs[n])return vs(e,r[gs[n][t]],r)}throw new Error(`No widget '${t}' for type '${n}'`)}function bs(e,t){return`${Vr()(e)?e:e[hr]}__${t}`}function ws(e){return bs(e,"description")}function Ss(e){return bs(e,"error")}function xs(e){return bs(e,"examples")}function $s(e){return bs(e,"help")}function Es(e){return bs(e,"title")}function _s(e,t=!1){const r=t?` ${xs(e)}`:"";return`${Ss(e)} ${ws(e)} ${$s(e)}${r}`}function Cs(e,t){return`${e}-${t}`}function As(e,t,r){return t?r:e}function ks(e,t=!0){if(!e)return{year:-1,month:-1,day:-1,hour:t?-1:0,minute:t?-1:0,second:t?-1:0};const r=new Date(e);if(Number.isNaN(r.getTime()))throw new Error("Unable to parse date "+e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:t?r.getUTCHours():0,minute:t?r.getUTCMinutes():0,second:t?r.getUTCSeconds():0}}function Ts(e){if(e.const)return!0;if(e.enum&&1===e.enum.length&&!0===e.enum[0])return!0;if(e.anyOf&&1===e.anyOf.length)return Ts(e.anyOf[0]);if(e.oneOf&&1===e.oneOf.length)return Ts(e.oneOf[0]);if(e.allOf){const t=e=>Ts(e);return e.allOf.some(t)}return!1}function Os(e,t=!0){const{year:r,month:n,day:s,hour:i=0,minute:a=0,second:o=0}=e,l=Date.UTC(r,n-1,s,i,a,o),c=new Date(l).toJSON();return t?c:c.slice(0,10)}function Ps(e,t=[]){if(!e)return[];let r=[];return ur in e&&(r=r.concat(e[ur].map((e=>{const r=`.${t.join(".")}`;return{property:r,message:e,stack:`${r} ${e}`}})))),Object.keys(e).reduce(((r,n)=>{if(n!==ur){const s=e[n];Cr()(s)&&(r=r.concat(Ps(s,[...t,n])))}return r}),r)}var Ds=r(42072),Ns=r.n(Ds);function Is(e){return Object.keys(e).reduce(((t,r)=>{if("addError"===r)return t;{const n=e[r];return Cr()(n)?{...t,[r]:Is(n)}:{...t,[r]:n}}}),{})}function js(e){if(!e)return"";const t=new Date(e);return`${ts(t.getFullYear(),4)}-${ts(t.getMonth()+1,2)}-${ts(t.getDate(),2)}T${ts(t.getHours(),2)}:${ts(t.getMinutes(),2)}:${ts(t.getSeconds(),2)}.${ts(t.getMilliseconds(),3)}`}function Fs(e,t){if(!t)return e;const{errors:r,errorSchema:n}=e;let s=Ps(t),i=t;return z()(n)||(i=Nn(n,t,!0),s=[...r].concat(s)),{errorSchema:i,errors:s}}function Rs(e){return Array.isArray(e)?function(e){for(let t=0;t<e.length;t++)e[t]=Rs(e[t]);return e}([...e]):Lr()(e)?function(e){for(const t in e){const r=e,n=r[t];t===vr&&"string"==typeof n&&n.startsWith("#")?r[t]=wr+n:r[t]=Rs(n)}return e}({...e}):e}var qs,Ms=r(95950),zs=r.n(Ms),Ys=r(71086),Ls=r.n(Ys),Us=r(66245),Vs=r.n(Us);!function(e){e.ArrayItemTitle="Item",e.MissingItems="Missing items definition",e.YesLabel="Yes",e.NoLabel="No",e.CloseLabel="Close",e.ErrorsLabel="Errors",e.NewStringDefault="New Value",e.AddButton="Add",e.AddItemButton="Add Item",e.CopyButton="Copy",e.MoveDownButton="Move down",e.MoveUpButton="Move up",e.RemoveButton="Remove",e.NowLabel="Now",e.ClearLabel="Clear",e.AriaDateLabel="Select a date",e.PreviewLabel="Preview",e.DecrementAriaLabel="Decrease value by 1",e.IncrementAriaLabel="Increase value by 1",e.UnknownFieldType="Unknown field type %1",e.OptionPrefix="Option %1",e.TitleOptionPrefix="%1 option %2",e.KeyLabel="%1 Key",e.InvalidObjectField='Invalid "%1" object field configuration: _%2_.',e.UnsupportedField="Unsupported field schema.",e.UnsupportedFieldWithId="Unsupported field schema for field `%1`.",e.UnsupportedFieldWithReason="Unsupported field schema: _%1_.",e.UnsupportedFieldWithIdAndReason="Unsupported field schema for field `%1`: _%2_.",e.FilesInfo="**%1** (%2, %3 bytes)"}(qs||(qs={}));var Bs=r(39754),Ws=r.n(Bs);function Hs(){return((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),""))()}function Qs(e){return Array.isArray(e)?e.map((e=>({key:Hs(),item:e}))):[]}function Ks(e){return Array.isArray(e)?e.map((e=>e.item)):[]}class Gs extends s.Component{constructor(e){super(e),this._getNewFormDataRow=()=>{const{schema:e,registry:t}=this.props,{schemaUtils:r}=t;let n=e.items;return Tn(e)&&function(e){return!0===e.additionalItems&&console.warn("additionalItems=true is currently not supported"),nr(e.additionalItems)}(e)&&(n=e.additionalItems),r.getDefaultFormState(n)},this.onAddClick=e=>{this._handleAddClick(e)},this.onAddIndexClick=e=>t=>{this._handleAddClick(t,e)},this.onCopyIndexClick=e=>t=>{t&&t.preventDefault();const{onChange:r,errorSchema:n}=this.props,{keyedFormData:s}=this.state;let i;if(n){i={};for(const t in n){const r=parseInt(t);r<=e?Xr()(i,[r],n[t]):r>e&&Xr()(i,[r+1],n[t])}}const a={key:Hs(),item:os()(s[e].item)},o=[...s];void 0!==e?o.splice(e+1,0,a):o.push(a),this.setState({keyedFormData:o,updatedKeyedFormData:!0},(()=>r(Ks(o),i)))},this.onDropIndexClick=e=>t=>{t&&t.preventDefault();const{onChange:r,errorSchema:n}=this.props,{keyedFormData:s}=this.state;let i;if(n){i={};for(const t in n){const r=parseInt(t);r<e?Xr()(i,[r],n[t]):r>e&&Xr()(i,[r-1],n[t])}}const a=s.filter(((t,r)=>r!==e));this.setState({keyedFormData:a,updatedKeyedFormData:!0},(()=>r(Ks(a),i)))},this.onReorderClick=(e,t)=>r=>{r&&(r.preventDefault(),r.currentTarget.blur());const{onChange:n,errorSchema:s}=this.props;let i;if(s){i={};for(const r in s){const n=parseInt(r);n==e?Xr()(i,[t],s[e]):n==t?Xr()(i,[e],s[t]):Xr()(i,[r],s[n])}}const{keyedFormData:a}=this.state,o=function(){const r=a.slice();return r.splice(e,1),r.splice(t,0,a[e]),r}();this.setState({keyedFormData:o},(()=>n(Ks(o),i)))},this.onChangeForIndex=e=>(t,r,n)=>{const{formData:s,onChange:i,errorSchema:a}=this.props,o=(Array.isArray(s)?s:[]).map(((r,n)=>e===n?void 0===t?null:t:r));i(o,a&&a&&{...a,[e]:r},n)},this.onSelectChange=e=>{const{onChange:t,idSchema:r}=this.props;t(e,void 0,r&&r.$id)};const{formData:t=[]}=e,r=Qs(t);this.state={keyedFormData:r,updatedKeyedFormData:!1}}static getDerivedStateFromProps(e,t){if(t.updatedKeyedFormData)return{updatedKeyedFormData:!1};const r=Array.isArray(e.formData)?e.formData:[],n=t.keyedFormData||[];return{keyedFormData:r.length===n.length?n.map(((e,t)=>({key:e.key,item:r[t]}))):Qs(r)}}get itemTitle(){const{schema:e,registry:t}=this.props,{translateString:r}=t;return Dr()(e,[mr,"title"],Dr()(e,[mr,"description"],r(qs.ArrayItemTitle)))}isItemRequired(e){return Array.isArray(e.type)?!e.type.includes("null"):"null"!==e.type}canAddItem(e){const{schema:t,uiSchema:r,registry:n}=this.props;let{addable:s}=$r(r,n.globalUiOptions);return!1!==s&&(s=void 0===t.maxItems||e.length<t.maxItems),s}_handleAddClick(e,t){e&&e.preventDefault();const{onChange:r,errorSchema:n}=this.props,{keyedFormData:s}=this.state;let i;if(n){i={};for(const e in n){const r=parseInt(e);void 0===t||r<t?Xr()(i,[r],n[e]):r>=t&&Xr()(i,[r+1],n[e])}}const a={key:Hs(),item:this._getNewFormDataRow()},o=[...s];void 0!==t?o.splice(t,0,a):o.push(a),this.setState({keyedFormData:o,updatedKeyedFormData:!0},(()=>r(Ks(o),i)))}render(){const{schema:e,uiSchema:t,idSchema:r,registry:n}=this.props,{schemaUtils:s,translateString:i}=n;if(!(mr in e)){const s=fs("UnsupportedFieldTemplate",n,$r(t));return(0,rr.jsx)(s,{schema:e,idSchema:r,reason:i(qs.MissingItems),registry:n})}return s.isMultiSelect(e)?this.renderMultiSelect():Wn(t)?this.renderCustomWidget():Tn(e)?this.renderFixedArray():s.isFilesArray(e,t)?this.renderFiles():this.renderNormalArray()}renderNormalArray(){const{schema:e,uiSchema:t={},errorSchema:r,idSchema:n,name:s,title:i,disabled:a=!1,readonly:o=!1,autofocus:l=!1,required:c=!1,registry:d,onBlur:u,onFocus:h,idPrefix:m,idSeparator:p="_",rawErrors:f}=this.props,{keyedFormData:y}=this.state,g=e.title||i||s,{schemaUtils:v,formContext:b}=d,w=$r(t),S=Lr()(e.items)?e.items:{},x=v.retrieveSchema(S),$=Ks(this.state.keyedFormData),E=this.canAddItem($),_={canAdd:E,items:y.map(((e,i)=>{const{key:a,item:o}=e,c=o,d=v.retrieveSchema(S,c),b=r?r[i]:void 0,w=n.$id+p+i,x=v.toIdSchema(d,w,c,m,p);return this.renderArrayFieldItem({key:a,index:i,name:s&&`${s}-${i}`,title:g?`${g}-${i+1}`:void 0,canAdd:E,canMoveUp:i>0,canMoveDown:i<$.length-1,itemSchema:d,itemIdSchema:x,itemErrorSchema:b,itemData:c,itemUiSchema:t.items,autofocus:l&&0===i,onBlur:u,onFocus:h,rawErrors:f,totalItems:y.length})})),className:`field field-array field-array-of-${x.type}`,disabled:a,idSchema:n,uiSchema:t,onAddClick:this.onAddClick,readonly:o,required:c,schema:e,title:g,formContext:b,formData:$,rawErrors:f,registry:d},C=fs("ArrayFieldTemplate",d,w);return(0,rr.jsx)(C,{..._})}renderCustomWidget(){var e;const{schema:t,idSchema:r,uiSchema:n,disabled:s=!1,readonly:i=!1,autofocus:a=!1,required:o=!1,hideError:l,placeholder:c,onBlur:d,onFocus:u,formData:h=[],registry:m,rawErrors:p,name:f}=this.props,{widgets:y,formContext:g,globalUiOptions:v,schemaUtils:b}=m,{widget:w,title:S,...x}=$r(n,v),$=vs(t,w,y),E=null!==(e=null!=S?S:t.title)&&void 0!==e?e:f,_=b.getDisplayLabel(t,n,v);return(0,rr.jsx)($,{id:r.$id,name:f,multiple:!0,onChange:this.onSelectChange,onBlur:d,onFocus:u,options:x,schema:t,uiSchema:n,registry:m,value:h,disabled:s,readonly:i,hideError:l,required:o,label:E,hideLabel:!_,placeholder:c,formContext:g,autofocus:a,rawErrors:p})}renderMultiSelect(){var e;const{schema:t,idSchema:r,uiSchema:n,formData:s=[],disabled:i=!1,readonly:a=!1,autofocus:o=!1,required:l=!1,placeholder:c,onBlur:d,onFocus:u,registry:h,rawErrors:m,name:p}=this.props,{widgets:f,schemaUtils:y,formContext:g,globalUiOptions:v}=h,b=qn(y.retrieveSchema(t.items,s),n),{widget:w="select",title:S,...x}=$r(n,v),$=vs(t,w,f),E=null!==(e=null!=S?S:t.title)&&void 0!==e?e:p,_=y.getDisplayLabel(t,n,v);return(0,rr.jsx)($,{id:r.$id,name:p,multiple:!0,onChange:this.onSelectChange,onBlur:d,onFocus:u,options:{...x,enumOptions:b},schema:t,uiSchema:n,registry:h,value:s,disabled:i,readonly:a,required:l,label:E,hideLabel:!_,placeholder:c,formContext:g,autofocus:o,rawErrors:m})}renderFiles(){var e;const{schema:t,uiSchema:r,idSchema:n,name:s,disabled:i=!1,readonly:a=!1,autofocus:o=!1,required:l=!1,onBlur:c,onFocus:d,registry:u,formData:h=[],rawErrors:m}=this.props,{widgets:p,formContext:f,globalUiOptions:y,schemaUtils:g}=u,{widget:v="files",title:b,...w}=$r(r,y),S=vs(t,v,p),x=null!==(e=null!=b?b:t.title)&&void 0!==e?e:s,$=g.getDisplayLabel(t,r,y);return(0,rr.jsx)(S,{options:w,id:n.$id,name:s,multiple:!0,onChange:this.onSelectChange,onBlur:c,onFocus:d,schema:t,uiSchema:r,value:h,disabled:i,readonly:a,required:l,registry:u,formContext:f,autofocus:o,rawErrors:m,label:x,hideLabel:!$})}renderFixedArray(){const{schema:e,uiSchema:t={},formData:r=[],errorSchema:n,idPrefix:s,idSeparator:i="_",idSchema:a,name:o,title:l,disabled:c=!1,readonly:d=!1,autofocus:u=!1,required:h=!1,registry:m,onBlur:p,onFocus:f,rawErrors:y}=this.props,{keyedFormData:g}=this.state;let{formData:v=[]}=this.props;const b=e.title||l||o,w=$r(t),{schemaUtils:S,formContext:x}=m,$=(Lr()(e.items)?e.items:[]).map(((e,t)=>S.retrieveSchema(e,r[t]))),E=Lr()(e.additionalItems)?S.retrieveSchema(e.additionalItems,r):null;(!v||v.length<$.length)&&(v=v||[],v=v.concat(new Array($.length-v.length)));const _=this.canAddItem(v)&&!!E,C={canAdd:_,className:"field field-array field-array-fixed-items",disabled:c,idSchema:a,formData:r,items:g.map(((r,l)=>{const{key:c,item:d}=r,h=d,m=l>=$.length,w=(m&&Lr()(e.additionalItems)?S.retrieveSchema(e.additionalItems,h):$[l])||{},x=a.$id+i+l,E=S.toIdSchema(w,x,h,s,i),C=m?t.additionalItems||{}:Array.isArray(t.items)?t.items[l]:t.items||{},A=n?n[l]:void 0;return this.renderArrayFieldItem({key:c,index:l,name:o&&`${o}-${l}`,title:b?`${b}-${l+1}`:void 0,canAdd:_,canRemove:m,canMoveUp:l>=$.length+1,canMoveDown:m&&l<v.length-1,itemSchema:w,itemData:h,itemUiSchema:C,itemIdSchema:E,itemErrorSchema:A,autofocus:u&&0===l,onBlur:p,onFocus:f,rawErrors:y,totalItems:g.length})})),onAddClick:this.onAddClick,readonly:d,required:h,registry:m,schema:e,uiSchema:t,title:b,formContext:x,errorSchema:n,rawErrors:y},A=fs("ArrayFieldTemplate",m,w);return(0,rr.jsx)(A,{...C})}renderArrayFieldItem(e){const{key:t,index:r,name:n,canAdd:s,canRemove:i=!0,canMoveUp:a,canMoveDown:o,itemSchema:l,itemData:c,itemUiSchema:d,itemIdSchema:u,itemErrorSchema:h,autofocus:m,onBlur:p,onFocus:f,rawErrors:y,totalItems:g,title:v}=e,{disabled:b,hideError:w,idPrefix:S,idSeparator:x,readonly:$,uiSchema:E,registry:_,formContext:C}=this.props,{fields:{ArraySchemaField:A,SchemaField:k},globalUiOptions:T}=_,O=A||k,{orderable:P=!0,removable:D=!0,copyable:N=!1}=$r(E,T),I={moveUp:P&&a,moveDown:P&&o,copy:N&&s,remove:D&&i,toolbar:!1};return I.toolbar=Object.keys(I).some((e=>I[e])),{children:(0,rr.jsx)(O,{name:n,title:v,index:r,schema:l,uiSchema:d,formData:c,formContext:C,errorSchema:h,idPrefix:S,idSeparator:x,idSchema:u,required:this.isItemRequired(l),onChange:this.onChangeForIndex(r),onBlur:p,onFocus:f,registry:_,disabled:b,readonly:$,hideError:w,autofocus:m,rawErrors:y}),className:"array-item",disabled:b,canAdd:s,hasCopy:I.copy,hasToolbar:I.toolbar,hasMoveUp:I.moveUp,hasMoveDown:I.moveDown,hasRemove:I.remove,index:r,totalItems:g,key:t,onAddIndexClick:this.onAddIndexClick,onCopyIndexClick:this.onCopyIndexClick,onDropIndexClick:this.onDropIndexClick,onReorderClick:this.onReorderClick,readonly:$,registry:_,schema:l,uiSchema:d}}}const Js=Gs,Zs=function(e){var t,r,n;const{schema:s,name:i,uiSchema:a,idSchema:o,formData:l,registry:c,required:d,disabled:u,readonly:h,hideError:m,autofocus:p,title:f,onChange:y,onFocus:g,onBlur:v,rawErrors:b}=e,{title:w}=s,{widgets:S,formContext:x,translateString:$,globalUiOptions:E}=c,{widget:_="checkbox",title:C,label:A=!0,...k}=$r(a,E),T=vs(s,_,S),O=$(qs.YesLabel),P=$(qs.NoLabel);let D;const N=null!==(r=null!==(t=null!=C?C:w)&&void 0!==t?t:f)&&void 0!==r?r:i;if(Array.isArray(s.oneOf))D=qn({oneOf:s.oneOf.map((e=>{if(Lr()(e))return{...e,title:e.title||(!0===e.const?O:P)}})).filter((e=>e))},a);else{const e=s,t=null!==(n=s.enum)&&void 0!==n?n:[!0,!1];D=!e.enumNames&&2===t.length&&t.every((e=>"boolean"==typeof e))?[{value:t[0],label:t[0]?O:P},{value:t[1],label:t[1]?O:P}]:qn({enum:t,enumNames:e.enumNames},a)}return(0,rr.jsx)(T,{options:{...k,enumOptions:D},schema:s,uiSchema:a,id:o.$id,name:i,onChange:y,onFocus:g,onBlur:v,label:N,hideLabel:!A,value:l,required:d,disabled:u,readonly:h,hideError:m,registry:c,formContext:x,autofocus:p,rawErrors:b})};class Xs extends s.Component{constructor(e){super(e),this.onOptionChange=e=>{const{selectedOption:t,retrievedOptions:r}=this.state,{formData:n,onChange:s,registry:i}=this.props,{schemaUtils:a}=i,o=void 0!==e?parseInt(e,10):-1;if(o===t)return;const l=o>=0?r[o]:void 0,c=t>=0?r[t]:void 0;let d=a.sanitizeDataForNewSchema(l,c,n);l&&(d=a.getDefaultFormState(l,d,"excludeObjectChildren")),this.setState({selectedOption:o},(()=>{s(d,void 0,this.getFieldId())}))};const{formData:t,options:r,registry:{schemaUtils:n}}=this.props,s=r.map((e=>n.retrieveSchema(e,t)));this.state={retrievedOptions:s,selectedOption:this.getMatchingOption(0,t,s)}}componentDidUpdate(e,t){const{formData:r,options:n,idSchema:s}=this.props,{selectedOption:i}=this.state;let a=this.state;if(!Or(e.options,n)){const{registry:{schemaUtils:e}}=this.props;a={selectedOption:i,retrievedOptions:n.map((t=>e.retrieveSchema(t,r)))}}if(!Or(r,e.formData)&&s.$id===e.idSchema.$id){const{retrievedOptions:e}=a,n=this.getMatchingOption(i,r,e);t&&n!==i&&(a={selectedOption:n,retrievedOptions:e})}a!==this.state&&this.setState(a)}getMatchingOption(e,t,r){const{schema:n,registry:{schemaUtils:s}}=this.props,i=un(n);return s.getClosestMatchingOption(t,r,e,i)}getFieldId(){const{idSchema:e,schema:t}=this.props;return`${e.$id}${t.oneOf?"__oneof_select":"__anyof_select"}`}render(){const{name:e,disabled:t=!1,errorSchema:r={},formContext:n,onBlur:s,onFocus:i,registry:a,schema:o,uiSchema:l}=this.props,{widgets:c,fields:d,translateString:u,globalUiOptions:h,schemaUtils:m}=a,{SchemaField:p}=d,{selectedOption:f,retrievedOptions:y}=this.state,{widget:g="select",placeholder:v,autofocus:b,autocomplete:w,title:S=o.title,...x}=$r(l,h),$=vs({type:"number"},g,c),E=Dr()(r,ur,[]),_=Ie()(r,[ur]),C=m.getDisplayLabel(o,l,h),A=f>=0&&y[f]||null;let k;if(A){const{required:e}=o;k=e?yn({required:e},A):A}let T=[];fr in o&&l&&fr in l?Array.isArray(l[fr])?T=l[fr]:console.warn(`uiSchema.oneOf is not an array for "${S||e}"`):lr in o&&l&&lr in l&&(Array.isArray(l[lr])?T=l[lr]:console.warn(`uiSchema.anyOf is not an array for "${S||e}"`));let O=l;f>=0&&T.length>f&&(O=T[f]);const P=S?qs.TitleOptionPrefix:qs.OptionPrefix,D=S?[S]:[],N=y.map(((e,t)=>{const{title:r=e.title}=$r(T[t]);return{label:r||u(P,D.concat(String(t+1))),value:t}}));return(0,rr.jsxs)("div",{className:"panel panel-default panel-body",children:[(0,rr.jsx)("div",{className:"form-group",children:(0,rr.jsx)($,{id:this.getFieldId(),name:`${e}${o.oneOf?"__oneof_select":"__anyof_select"}`,schema:{type:"number",default:0},onChange:this.onOptionChange,onBlur:s,onFocus:i,disabled:t||z()(N),multiple:!1,rawErrors:E,errorSchema:_,value:f>=0?f:void 0,options:{enumOptions:N,...x},registry:a,formContext:n,placeholder:v,autocomplete:w,autofocus:b,label:null!=S?S:e,hideLabel:!C})}),k&&(0,rr.jsx)(p,{...this.props,schema:k,uiSchema:O})]})}}const ei=Xs,ti=/\.([0-9]*0)*$/,ri=/[0.]0*$/,ni=function(e){const{registry:t,onChange:r,formData:n,value:i}=e,[a,o]=(0,s.useState)(i),{StringField:l}=t.fields;let c=n;const d=(0,s.useCallback)(((e,t,n)=>{o(e),"."===`${e}`.charAt(0)&&(e=`0${e}`);const s="string"==typeof e&&e.match(ti)?sr(e.replace(ri,"")):sr(e);r(s,t,n)}),[r]);if("string"==typeof a&&"number"==typeof c){const e=new RegExp(`^(${String(c).replace(".","\\.")})?\\.?0*$`);a.match(e)&&(c=a)}return(0,rr.jsx)(l,{...e,formData:c,onChange:d})};function si(){return si=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},si.apply(this,arguments)}const ii=["children","options"],ai="0",oi="1",li="2",ci="3",di="4",ui="5",hi="6",mi="7",pi="8",fi="9",yi="10",gi="11",vi="12",bi="13",wi="14",Si="15",xi="16",$i="17",Ei="18",_i="19",Ci="20",Ai="21",ki="22",Ti="23",Oi="24",Pi="25",Di="27",Ni="28",Ii="29",ji="30",Fi="31",Ri="32",qi="33";var Mi,zi;(zi=Mi||(Mi={}))[zi.MAX=0]="MAX",zi[zi.HIGH=1]="HIGH",zi[zi.MED=2]="MED",zi[zi.LOW=3]="LOW",zi[zi.MIN=4]="MIN";const Yi=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce(((e,t)=>(e[t.toLowerCase()]=t,e)),{class:"className",for:"htmlFor"}),Li={amp:"&",apos:"'",gt:">",lt:"<",nbsp:" ",quot:"“"},Ui=["style","script"],Vi=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,Bi=/mailto:/i,Wi=/\n{2,}$/,Hi=/^(\s*>[\s\S]*?)(?=\n\n|$)/,Qi=/^ *> ?/gm,Ki=/^(?:\[!([^\]]*)\]\n)?([\s\S]*)/,Gi=/^ {2,}\n/,Ji=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,Zi=/^(?: {1,3})?(`{3,}|~{3,}) *(\S+)? *([^\n]*?)?\n([\s\S]*?)(?:\1\n?|$)/,Xi=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,ea=/^(`+)((?:\\`|[^`])+)\1/,ta=/^(?:\n *)*\n/,ra=/\r\n?/g,na=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,sa=/^\[\^([^\]]+)]/,ia=/\f/g,aa=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,oa=/^\s*?\[(x|\s)\]/,la=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,ca=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,da=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,ua=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,ha=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,ma=/^<!--[\s\S]*?(?:-->)/,pa=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,fa=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,ya=/^\{.*\}$/,ga=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,va=/^<([^ >]+@[^ >]+)>/,ba=/^<([^ >]+:\/[^ >]+)>/,wa=/-([a-z])?/gi,Sa=/^(\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,xa=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,$a=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,Ea=/^\[([^\]]*)\] ?\[([^\]]*)\]/,_a=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,Ca=/\t/g,Aa=/(^ *\||\| *$)/g,ka=/^ *:-+: *$/,Ta=/^ *:-+ *$/,Oa=/^ *-+: *$/,Pa="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|\\\\\\1|[\\s\\S])+?)",Da=new RegExp(`^([*_])\\1${Pa}\\1\\1(?!\\1)`),Na=new RegExp(`^([*_])${Pa}\\1(?!\\1)`),Ia=new RegExp(`^(==)${Pa}\\1`),ja=new RegExp(`^(~~)${Pa}\\1`),Fa=/^\\([^0-9A-Za-z\s])/,Ra=/\\([^0-9A-Za-z\s])/g,qa=/^([\s\S](?:(?!  |[0-9]\.)[^*_~\-\n<`\\\[!])*)/,Ma=/^\n+/,za=/^([ \t]*)/,Ya=/\\([^\\])/g,La=/(?:^|\n)( *)$/,Ua="(?:\\d+\\.)",Va="(?:[*+-])";function Ba(e){return"( *)("+(1===e?Ua:Va)+") +"}const Wa=Ba(1),Ha=Ba(2);function Qa(e){return new RegExp("^"+(1===e?Wa:Ha))}const Ka=Qa(1),Ga=Qa(2);function Ja(e){return new RegExp("^"+(1===e?Wa:Ha)+"[^\\n]*(?:\\n(?!\\1"+(1===e?Ua:Va)+" )[^\\n]*)*(\\n|$)","gm")}const Za=Ja(1),Xa=Ja(2);function eo(e){const t=1===e?Ua:Va;return new RegExp("^( *)("+t+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+t+" (?!"+t+" ))\\n*|\\s*\\n*$)")}const to=eo(1),ro=eo(2);function no(e,t){const r=1===t,n=r?to:ro,s=r?Za:Xa,i=r?Ka:Ga;return{match:fo((function(e,t){const r=La.exec(t.prevCapture);return r&&(t.list||!t.inline&&!t.simple)?n.exec(e=r[1]+e):null})),order:1,parse(e,t,n){const a=r?+e[2]:void 0,o=e[0].replace(Wi,"\n").match(s);let l=!1;return{items:o.map((function(e,r){const s=i.exec(e)[0].length,a=new RegExp("^ {1,"+s+"}","gm"),c=e.replace(a,"").replace(i,""),d=r===o.length-1,u=-1!==c.indexOf("\n\n")||d&&l;l=u;const h=n.inline,m=n.list;let p;n.list=!0,u?(n.inline=!1,p=lo(c)+"\n\n"):(n.inline=!0,p=lo(c));const f=t(p,n);return n.inline=h,n.list=m,f})),ordered:r,start:a}},render:(t,r,n)=>e(t.ordered?"ol":"ul",{key:n.key,start:"20"===t.type?t.start:void 0},t.items.map((function(t,s){return e("li",{key:s},r(t,n))})))}}const so=new RegExp("^\\[((?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*\\)"),io=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,ao=[Hi,Zi,Xi,la,da,ca,Sa,to,ro],oo=[...ao,/^[^\n]+(?:  \n|\n{2,})/,ua,ma,fa];function lo(e){let t=e.length;for(;t>0&&e[t-1]<=" ";)t--;return e.slice(0,t)}function co(e){return e.replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g,"a").replace(/[çÇ]/g,"c").replace(/[ðÐ]/g,"d").replace(/[ÈÉÊËéèêë]/g,"e").replace(/[ÏïÎîÍíÌì]/g,"i").replace(/[Ññ]/g,"n").replace(/[øØœŒÕõÔôÓóÒò]/g,"o").replace(/[ÜüÛûÚúÙù]/g,"u").replace(/[ŸÿÝý]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function uo(e){return Oa.test(e)?"right":ka.test(e)?"center":Ta.test(e)?"left":null}function ho(e,t,r,n){const s=r.inTable;r.inTable=!0;let i=[[]],a="";function o(){if(!a)return;const e=i[i.length-1];e.push.apply(e,t(a,r)),a=""}return e.trim().split(/(`[^`]*`|\\\||\|)/).filter(Boolean).forEach(((e,t,r)=>{"|"===e.trim()&&(o(),n)?0!==t&&t!==r.length-1&&i.push([]):a+=e})),o(),r.inTable=s,i}function mo(e,t,r){r.inline=!0;const n=e[2]?e[2].replace(Aa,"").split("|").map(uo):[],s=e[3]?function(e,t,r){return e.trim().split("\n").map((function(e){return ho(e,t,r,!0)}))}(e[3],t,r):[],i=ho(e[1],t,r,!!s.length);return r.inline=!1,s.length?{align:n,cells:s,header:i,type:"25"}:{children:i,type:"21"}}function po(e,t){return null==e.align[t]?{}:{textAlign:e.align[t]}}function fo(e){return e.inline=1,e}function yo(e){return fo((function(t,r){return r.inline?e.exec(t):null}))}function go(e){return fo((function(t,r){return r.inline||r.simple?e.exec(t):null}))}function vo(e){return function(t,r){return r.inline||r.simple?null:e.exec(t)}}function bo(e){return fo((function(t){return e.exec(t)}))}function wo(e,t){if(t.inline||t.simple)return null;let r="";e.split("\n").every((e=>(e+="\n",!ao.some((t=>t.test(e)))&&(r+=e,!!e.trim()))));const n=lo(r);return""==n?null:[r,,n]}function So(e){try{if(decodeURIComponent(e).replace(/[^A-Za-z0-9/:]/g,"").match(/^\s*(javascript|vbscript|data(?!:image)):/i))return null}catch(e){return null}return e}function xo(e){return e.replace(Ya,"$1")}function $o(e,t,r){const n=r.inline||!1,s=r.simple||!1;r.inline=!0,r.simple=!0;const i=e(t,r);return r.inline=n,r.simple=s,i}function Eo(e,t,r){const n=r.inline||!1,s=r.simple||!1;r.inline=!1,r.simple=!0;const i=e(t,r);return r.inline=n,r.simple=s,i}function _o(e,t,r){const n=r.inline||!1;r.inline=!1;const s=e(t,r);return r.inline=n,s}const Co=(e,t,r)=>({children:$o(t,e[2],r)});function Ao(){return{}}function ko(){return null}function To(...e){return e.filter(Boolean).join(" ")}function Oo(e,t,r){let n=e;const s=t.split(".");for(;s.length&&(n=n[s[0]],void 0!==n);)s.shift();return n||r}function Po(e="",t={}){function r(e,r,...n){const s=Oo(t.overrides,`${e}.props`,{});return t.createElement(function(e,t){const r=Oo(t,e);return r?"function"==typeof r||"object"==typeof r&&"render"in r?r:Oo(t,`${e}.component`,e):e}(e,t.overrides),si({},r,s,{className:To(null==r?void 0:r.className,s.className)||void 0}),...n)}function n(e){e=e.replace(aa,"");let n=!1;t.forceInline?n=!0:t.forceBlock||(n=!1===_a.test(e));const s=d(c(n?e:`${lo(e).replace(Ma,"")}\n\n`,{inline:n}));for(;"string"==typeof s[s.length-1]&&!s[s.length-1].trim();)s.pop();if(null===t.wrapper)return s;const i=t.wrapper||(n?"span":"div");let a;if(s.length>1||t.forceWrapper)a=s;else{if(1===s.length)return a=s[0],"string"==typeof a?r("span",{key:"outer"},a):a;a=null}return t.createElement(i,{key:"outer"},a)}function i(e,r){const s=r.match(Vi);return s?s.reduce((function(r,s){const i=s.indexOf("=");if(-1!==i){const a=function(e){return-1!==e.indexOf("-")&&null===e.match(pa)&&(e=e.replace(wa,(function(e,t){return t.toUpperCase()}))),e}(s.slice(0,i)).trim(),o=function(e){const t=e[0];return('"'===t||"'"===t)&&e.length>=2&&e[e.length-1]===t?e.slice(1,-1):e}(s.slice(i+1).trim()),l=Yi[a]||a;if("ref"===l)return r;const c=r[l]=function(e,t,r,n){return"style"===t?r.split(/;\s?/).reduce((function(e,t){const r=t.slice(0,t.indexOf(":"));return e[r.trim().replace(/(-[a-z])/g,(e=>e[1].toUpperCase()))]=t.slice(r.length+1).trim(),e}),{}):"href"===t||"src"===t?n(r,e,t):(r.match(ya)&&(r=r.slice(1,r.length-1)),"true"===r||"false"!==r&&r)}(e,a,o,t.sanitizer);"string"==typeof c&&(ua.test(c)||fa.test(c))&&(r[l]=n(c.trim()))}else"style"!==s&&(r[Yi[s]||s]=!0);return r}),{}):null}t.overrides=t.overrides||{},t.sanitizer=t.sanitizer||So,t.slugify=t.slugify||co,t.namedCodesToUnicode=t.namedCodesToUnicode?si({},Li,t.namedCodesToUnicode):Li,t.createElement=t.createElement||s.createElement;const a=[],o={},l={[ai]:{match:vo(Hi),order:1,parse(e,t,r){const[,n,s]=e[0].replace(Qi,"").match(Ki);return{alert:n,children:t(s,r)}},render(e,n,s){const i={key:s.key};return e.alert&&(i.className="markdown-alert-"+t.slugify(e.alert.toLowerCase(),co),e.children.unshift({attrs:{},children:[{type:Di,text:e.alert}],noInnerParse:!0,type:gi,tag:"header"})),r("blockquote",i,n(e.children,s))}},[oi]:{match:bo(Gi),order:1,parse:Ao,render:(e,t,n)=>r("br",{key:n.key})},[li]:{match:vo(Ji),order:1,parse:Ao,render:(e,t,n)=>r("hr",{key:n.key})},[ci]:{match:vo(Xi),order:0,parse:e=>({lang:void 0,text:lo(e[0].replace(/^ {4}/gm,"")).replace(Ra,"$1")}),render:(e,t,n)=>r("pre",{key:n.key},r("code",si({},e.attrs,{className:e.lang?`lang-${e.lang}`:""}),e.text))},[di]:{match:vo(Zi),order:0,parse:e=>({attrs:i("code",e[3]||""),lang:e[2]||void 0,text:e[4].replace(Ra,"$1"),type:"3"})},[ui]:{match:go(ea),order:3,parse:e=>({text:e[2].replace(Ra,"$1")}),render:(e,t,n)=>r("code",{key:n.key},e.text)},[hi]:{match:vo(na),order:0,parse:e=>(a.push({footnote:e[2],identifier:e[1]}),{}),render:ko},[mi]:{match:yo(sa),order:1,parse:e=>({target:`#${t.slugify(e[1],co)}`,text:e[1]}),render:(e,n,s)=>r("a",{key:s.key,href:t.sanitizer(e.target,"a","href")},r("sup",{key:s.key},e.text))},[pi]:{match:yo(oa),order:1,parse:e=>({completed:"x"===e[1].toLowerCase()}),render:(e,t,n)=>r("input",{checked:e.completed,key:n.key,readOnly:!0,type:"checkbox"})},[fi]:{match:vo(t.enforceAtxHeadings?ca:la),order:1,parse:(e,r,n)=>({children:$o(r,e[2],n),id:t.slugify(e[2],co),level:e[1].length}),render:(e,t,n)=>r(`h${e.level}`,{id:e.id,key:n.key},t(e.children,n))},[yi]:{match:vo(da),order:0,parse:(e,t,r)=>({children:$o(t,e[1],r),level:"="===e[2]?1:2,type:"9"})},[gi]:{match:bo(ua),order:1,parse(e,t,r){const[,n]=e[3].match(za),s=new RegExp(`^${n}`,"gm"),a=e[3].replace(s,""),o=(l=a,oo.some((e=>e.test(l)))?_o:$o);var l;const c=e[1].toLowerCase(),d=-1!==Ui.indexOf(c),u=(d?c:e[1]).trim(),h={attrs:i(u,e[2]),noInnerParse:d,tag:u};return r.inAnchor=r.inAnchor||"a"===c,d?h.text=e[3]:h.children=o(t,a,r),r.inAnchor=!1,h},render:(e,t,n)=>r(e.tag,si({key:n.key},e.attrs),e.text||(e.children?t(e.children,n):""))},[bi]:{match:bo(fa),order:1,parse(e){const t=e[1].trim();return{attrs:i(t,e[2]||""),tag:t}},render:(e,t,n)=>r(e.tag,si({},e.attrs,{key:n.key}))},[vi]:{match:bo(ma),order:1,parse:()=>({}),render:ko},[wi]:{match:go(io),order:1,parse:e=>({alt:e[1],target:xo(e[2]),title:e[3]}),render:(e,n,s)=>r("img",{key:s.key,alt:e.alt||void 0,title:e.title||void 0,src:t.sanitizer(e.target,"img","src")})},[Si]:{match:yo(so),order:3,parse:(e,t,r)=>({children:Eo(t,e[1],r),target:xo(e[2]),title:e[3]}),render:(e,n,s)=>r("a",{key:s.key,href:t.sanitizer(e.target,"a","href"),title:e.title},n(e.children,s))},[xi]:{match:yo(ba),order:0,parse:e=>({children:[{text:e[1],type:Di}],target:e[1],type:Si})},[$i]:{match:fo(((e,r)=>r.inAnchor||t.disableAutoLink?null:yo(ga)(e,r))),order:0,parse:e=>({children:[{text:e[1],type:Di}],target:e[1],title:void 0,type:Si})},[Ei]:{match:yo(va),order:0,parse(e){let t=e[1],r=e[1];return Bi.test(r)||(r="mailto:"+r),{children:[{text:t.replace("mailto:",""),type:Di}],target:r,type:Si}}},[Ci]:no(r,1),[qi]:no(r,2),[_i]:{match:vo(ta),order:3,parse:Ao,render:()=>"\n"},[Ai]:{match:fo(wo),order:3,parse:Co,render:(e,t,n)=>r("p",{key:n.key},t(e.children,n))},[ki]:{match:yo(xa),order:0,parse:e=>(o[e[1]]={target:e[2],title:e[4]},{}),render:ko},[Ti]:{match:go($a),order:0,parse:e=>({alt:e[1]||void 0,ref:e[2]}),render:(e,n,s)=>o[e.ref]?r("img",{key:s.key,alt:e.alt,src:t.sanitizer(o[e.ref].target,"img","src"),title:o[e.ref].title}):null},[Oi]:{match:yo(Ea),order:0,parse:(e,t,r)=>({children:t(e[1],r),fallbackChildren:e[0],ref:e[2]}),render:(e,n,s)=>o[e.ref]?r("a",{key:s.key,href:t.sanitizer(o[e.ref].target,"a","href"),title:o[e.ref].title},n(e.children,s)):r("span",{key:s.key},e.fallbackChildren)},[Pi]:{match:vo(Sa),order:1,parse:mo,render(e,t,n){const s=e;return r("table",{key:n.key},r("thead",null,r("tr",null,s.header.map((function(e,i){return r("th",{key:i,style:po(s,i)},t(e,n))})))),r("tbody",null,s.cells.map((function(e,i){return r("tr",{key:i},e.map((function(e,i){return r("td",{key:i,style:po(s,i)},t(e,n))})))}))))}},[Di]:{match:bo(qa),order:4,parse:e=>({text:e[0].replace(ha,((e,r)=>t.namedCodesToUnicode[r]?t.namedCodesToUnicode[r]:e))}),render:e=>e.text},[Ni]:{match:go(Da),order:2,parse:(e,t,r)=>({children:t(e[2],r)}),render:(e,t,n)=>r("strong",{key:n.key},t(e.children,n))},[Ii]:{match:go(Na),order:3,parse:(e,t,r)=>({children:t(e[2],r)}),render:(e,t,n)=>r("em",{key:n.key},t(e.children,n))},[ji]:{match:go(Fa),order:1,parse:e=>({text:e[1],type:Di})},[Fi]:{match:go(Ia),order:3,parse:Co,render:(e,t,n)=>r("mark",{key:n.key},t(e.children,n))},[Ri]:{match:go(ja),order:3,parse:Co,render:(e,t,n)=>r("del",{key:n.key},t(e.children,n))}};!0===t.disableParsingRawHTML&&(delete l[gi],delete l[13]);const c=function(e){let t=Object.keys(e);function r(n,s){let i,a,o=[],l="",c="";for(s.prevCapture=s.prevCapture||"";n;){let d=0;for(;d<t.length;){if(l=t[d],i=e[l],s.inline&&!i.match.inline){d++;continue}const u=i.match(n,s);if(u){c=u[0],s.prevCapture+=c,n=n.substring(c.length),a=i.parse(u,r,s),null==a.type&&(a.type=l),o.push(a);break}d++}}return s.prevCapture="",o}return t.sort((function(t,r){let n=e[t].order,s=e[r].order;return n!==s?n-s:t<r?-1:1})),function(e,t){return r(function(e){return e.replace(ra,"\n").replace(ia,"").replace(Ca,"    ")}(e),t)}}(l),d=(u=function(e,t){return function(r,n,s){const i=e[r.type].render;return t?t((()=>i(r,n,s)),r,n,s):i(r,n,s)}}(l,t.renderRule),function e(t,r={}){if(Array.isArray(t)){const n=r.key,s=[];let i=!1;for(let n=0;n<t.length;n++){r.key=n;const a=e(t[n],r),o="string"==typeof a;o&&i?s[s.length-1]+=a:null!==a&&s.push(a),i=o}return r.key=n,s}return u(t,e,r)});var u;const h=n(e);return a.length?r("div",null,h,r("footer",{key:"footer"},a.map((function(e){return r("div",{id:t.slugify(e.identifier,co),key:e.identifier},e.identifier,d(c(e.footnote,{inline:!0})))})))):h}const Do=e=>{let{children:t="",options:r}=e,n=function(e,t){if(null==e)return{};var r,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)t.indexOf(r=i[n])>=0||(s[r]=e[r]);return s}(e,ii);return s.cloneElement(Po(t,r),n)};var No=r(73357),Io=r.n(No);class jo extends s.Component{constructor(){super(...arguments),this.state={wasPropertyKeyModified:!1,additionalProperties:{}},this.onPropertyChange=(e,t=!1)=>(r,n,s)=>{const{formData:i,onChange:a,errorSchema:o}=this.props;void 0===r&&t&&(r=""),a({...i,[e]:r},o&&o&&{...o,[e]:n},s)},this.onDropPropertyClick=e=>t=>{t.preventDefault();const{onChange:r,formData:n}=this.props,s={...n};Io()(s,e),r(s)},this.getAvailableKey=(e,t)=>{const{uiSchema:r,registry:n}=this.props,{duplicateKeySuffixSeparator:s="-"}=$r(r,n.globalUiOptions);let i=0,a=e;for(;qr()(t,a);)a=`${e}${s}${++i}`;return a},this.onKeyChange=e=>(t,r)=>{if(e===t)return;const{formData:n,onChange:s,errorSchema:i}=this.props;t=this.getAvailableKey(t,n);const a={...n},o={[e]:t},l=Object.keys(a).map((e=>{const t=o[e]||e;return{[t]:a[e]}})),c=Object.assign({},...l);this.setState({wasPropertyKeyModified:!0}),s(c,i&&i&&{...i,[t]:r})},this.handleAddClick=e=>()=>{var t;if(!e.additionalProperties)return;const{formData:r,onChange:n,registry:s}=this.props,i={...r};let a,o,l;if(Lr()(e.additionalProperties)){a=e.additionalProperties.type,o=e.additionalProperties.const,l=e.additionalProperties.default;let t=e.additionalProperties;if(vr in t){const{schemaUtils:e}=s;t=e.retrieveSchema({$ref:t[vr]},r),a=t.type,o=t.const,l=t.default}a||!(lr in t)&&!(fr in t)||(a="object")}const c=this.getAvailableKey("newKey",i),d=null!==(t=null!=o?o:l)&&void 0!==t?t:this.getDefaultValue(a);Xr()(i,c,d),n(i)}}isRequired(e){const{schema:t}=this.props;return Array.isArray(t.required)&&-1!==t.required.indexOf(e)}getDefaultValue(e){const{registry:{translateString:t}}=this.props;switch(e){case"array":return[];case"boolean":return!1;case"null":return null;case"number":return 0;case"object":return{};default:return t(qs.NewStringDefault)}}render(){var e,t,r,n;const{schema:s,uiSchema:i={},formData:a,errorSchema:o,idSchema:l,name:c,required:d=!1,disabled:u,readonly:h,hideError:m,idPrefix:p,idSeparator:f,onBlur:y,onFocus:g,registry:v,title:b}=this.props,{fields:w,formContext:S,schemaUtils:x,translateString:$,globalUiOptions:E}=v,{SchemaField:_}=w,C=x.retrieveSchema(s,a),A=$r(i,E),{properties:k={}}=C,T=null!==(r=null!==(t=null!==(e=A.title)&&void 0!==e?e:C.title)&&void 0!==t?t:b)&&void 0!==r?r:c,O=null!==(n=A.description)&&void 0!==n?n:C.description;let P;try{P=function(e,t){if(!Array.isArray(t))return e;const r=e=>e.reduce(((e,t)=>(e[t]=!0,e)),{}),n=r(e),s=t.filter((e=>"*"===e||n[e])),i=r(s),a=e.filter((e=>!i[e])),o=s.indexOf("*");if(-1===o){if(a.length)throw new Error("uiSchema order list does not contain "+((l=a).length>1?`properties '${l.join("', '")}'`:`property '${l[0]}'`));return s}var l;if(o!==s.lastIndexOf("*"))throw new Error("uiSchema order list contains more than one wildcard item");const c=[...s];return c.splice(o,1,...a),c}(Object.keys(k),A.order)}catch(e){return(0,rr.jsxs)("div",{children:[(0,rr.jsx)("p",{className:"config-error",style:{color:"red"},children:(0,rr.jsx)(Do,{options:{disableParsingRawHTML:!0},children:$(qs.InvalidObjectField,[c||"root",e.message])})}),(0,rr.jsx)("pre",{children:JSON.stringify(C)})]})}const D=fs("ObjectFieldTemplate",v,A),N={title:!1===A.label?"":T,description:!1===A.label?void 0:O,properties:P.map((e=>{const t=qr()(C,[yr,e,ir]),r=t?i.additionalProperties:i[e],n="hidden"===$r(r).widget,s=Dr()(l,[e],{});return{content:(0,rr.jsx)(_,{name:e,required:this.isRequired(e),schema:Dr()(C,[yr,e],{}),uiSchema:r,errorSchema:Dr()(o,e),idSchema:s,idPrefix:p,idSeparator:f,formData:Dr()(a,e),formContext:S,wasPropertyKeyModified:this.state.wasPropertyKeyModified,onKeyChange:this.onKeyChange(e),onChange:this.onPropertyChange(e,t),onBlur:y,onFocus:g,registry:v,disabled:u,readonly:h,hideError:m,onDropPropertyClick:this.onDropPropertyClick},e),name:e,readonly:h,disabled:u,required:d,hidden:n}})),readonly:h,disabled:u,required:d,idSchema:l,uiSchema:i,errorSchema:o,schema:C,formData:a,formContext:S,registry:v};return(0,rr.jsx)(D,{...N,onAddClick:this.handleAddClick})}}const Fo=jo,Ro={array:"ArrayField",boolean:"BooleanField",integer:"NumberField",number:"NumberField",object:"ObjectField",string:"StringField",null:"NullField"};function qo(e){var t,r,n;const{schema:i,idSchema:a,uiSchema:o,formData:l,errorSchema:c,idPrefix:d,idSeparator:u,name:h,onChange:m,onKeyChange:p,onDropPropertyClick:f,required:y,registry:g,wasPropertyKeyModified:v=!1}=e,{formContext:b,schemaUtils:w,globalUiOptions:S}=g,x=$r(o,S),$=fs("FieldTemplate",g,x),E=fs("DescriptionFieldTemplate",g,x),_=fs("FieldHelpTemplate",g,x),C=fs("FieldErrorTemplate",g,x),A=w.retrieveSchema(i,l),k=a[hr],T=Nn(w.toIdSchema(A,k,l,d,u),a),O=(0,s.useCallback)(((e,t,r)=>m(e,t,r||k)),[k,m]),P=function(e,t,r,n){const s=t.field,{fields:i,translateString:a}=n;if("function"==typeof s)return s;if("string"==typeof s&&s in i)return i[s];const o=fn(e),l=Array.isArray(o)?o[0]:o||"",c=e.$id;let d=Ro[l];return c&&c in i&&(d=c),d||!e.anyOf&&!e.oneOf?d in i?i[d]:()=>{const s=fs("UnsupportedFieldTemplate",n,t);return(0,rr.jsx)(s,{schema:e,idSchema:r,reason:a(qs.UnknownFieldType,[String(e.type)]),registry:n})}:()=>null}(A,x,T,g),D=Boolean(null!==(t=x.disabled)&&void 0!==t?t:e.disabled),N=Boolean(null!==(r=x.readonly)&&void 0!==r?r:e.readonly||e.schema.readOnly||A.readOnly),I=x.hideError,j=void 0===I?e.hideError:Boolean(I),F=Boolean(null!==(n=x.autofocus)&&void 0!==n?n:e.autofocus);if(0===Object.keys(A).length)return null;const R=w.getDisplayLabel(A,o,S),{__errors:q,...M}=c||{},z=Ie()(o,["ui:classNames","classNames","ui:style"]);xr in z&&(z[xr]=Ie()(z[xr],["classNames","style"]));const Y=(0,rr.jsx)(P,{...e,onChange:O,idSchema:T,schema:A,uiSchema:z,disabled:D,readonly:N,hideError:j,autofocus:F,errorSchema:M,formContext:b,rawErrors:q}),L=T[hr];let U;U=v||ir in A?h:x.title||e.schema.title||A.title||e.title||h;const V=x.description||e.schema.description||A.description||"",B=x.enableMarkdownInDescription?(0,rr.jsx)(Do,{options:{disableParsingRawHTML:!0},children:V}):V,W=x.help,H="hidden"===x.widget,Q=["form-group","field",`field-${fn(A)}`];!j&&q&&q.length>0&&Q.push("field-error has-error has-danger"),(null==o?void 0:o.classNames)&&Q.push(o.classNames),x.classNames&&Q.push(x.classNames);const K=(0,rr.jsx)(_,{help:W,idSchema:T,schema:A,uiSchema:o,hasErrors:!j&&q&&q.length>0,registry:g}),G=j||(A.anyOf||A.oneOf)&&!w.isSelect(A)?void 0:(0,rr.jsx)(C,{errors:q,errorSchema:c,idSchema:T,schema:A,uiSchema:o,registry:g}),J={description:(0,rr.jsx)(E,{id:ws(L),description:B,schema:A,uiSchema:o,registry:g}),rawDescription:V,help:K,rawHelp:"string"==typeof W?W:void 0,errors:G,rawErrors:j?void 0:q,id:L,label:U,hidden:H,onChange:m,onKeyChange:p,onDropPropertyClick:f,required:y,disabled:D,readonly:N,hideError:j,displayLabel:R,classNames:Q.join(" ").trim(),style:x.style,formContext:b,formData:l,schema:A,uiSchema:o,registry:g},Z=g.fields.AnyOfField,X=g.fields.OneOfField,ee=(null==o?void 0:o["ui:field"])&&!0===(null==o?void 0:o["ui:fieldReplacesAnyOrOneOf"]);return(0,rr.jsx)($,{...J,children:(0,rr.jsxs)(rr.Fragment,{children:[Y,A.anyOf&&!ee&&!w.isSelect(A)&&(0,rr.jsx)(Z,{name:h,disabled:D,readonly:N,hideError:j,errorSchema:c,formData:l,formContext:b,idPrefix:d,idSchema:T,idSeparator:u,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,options:A.anyOf.map((e=>w.retrieveSchema(Lr()(e)?e:{},l))),registry:g,required:y,schema:A,uiSchema:o}),A.oneOf&&!ee&&!w.isSelect(A)&&(0,rr.jsx)(X,{name:h,disabled:D,readonly:N,hideError:j,errorSchema:c,formData:l,formContext:b,idPrefix:d,idSchema:T,idSeparator:u,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,options:A.oneOf.map((e=>w.retrieveSchema(Lr()(e)?e:{},l))),registry:g,required:y,schema:A,uiSchema:o})]})})}class Mo extends s.Component{shouldComponentUpdate(e){return!Or(this.props,e)}render(){return(0,rr.jsx)(qo,{...this.props})}}const zo=Mo,Yo=function(e){var t;const{schema:r,name:n,uiSchema:s,idSchema:i,formData:a,required:o,disabled:l=!1,readonly:c=!1,autofocus:d=!1,onChange:u,onBlur:h,onFocus:m,registry:p,rawErrors:f,hideError:y}=e,{title:g,format:v}=r,{widgets:b,formContext:w,schemaUtils:S,globalUiOptions:x}=p,$=S.isSelect(r)?qn(r,s):void 0;let E=$?"select":"text";v&&function(e,t,r={}){try{return vs(e,t,r),!0}catch(e){const t=e;if(t.message&&(t.message.startsWith("No widget")||t.message.startsWith("Unsupported widget")))return!1;throw e}}(r,v,b)&&(E=v);const{widget:_=E,placeholder:C="",title:A,...k}=$r(s),T=S.getDisplayLabel(r,s,x),O=null!==(t=null!=A?A:g)&&void 0!==t?t:n,P=vs(r,_,b);return(0,rr.jsx)(P,{options:{...k,enumOptions:$},schema:r,uiSchema:s,id:i.$id,name:n,label:O,hideLabel:!T,hideError:y,value:a,onChange:u,onBlur:h,onFocus:m,required:o,disabled:l,readonly:c,formContext:w,autofocus:d,registry:p,placeholder:C,rawErrors:f})},Lo=function(e){const{formData:t,onChange:r}=e;return(0,s.useEffect)((()=>{void 0===t&&r(null)}),[t,r]),null};function Uo(e){const{idSchema:t,description:r,registry:n,schema:s,uiSchema:i}=e,a=$r(i,n.globalUiOptions),{label:o=!0}=a;if(!r||!o)return null;const l=fs("DescriptionFieldTemplate",n,a);return(0,rr.jsx)(l,{id:ws(t),description:r,schema:s,uiSchema:i,registry:n})}function Vo(e){const{children:t,className:r,disabled:n,hasToolbar:s,hasMoveDown:i,hasMoveUp:a,hasRemove:o,hasCopy:l,index:c,onCopyIndexClick:d,onDropIndexClick:u,onReorderClick:h,readonly:m,registry:p,uiSchema:f}=e,{CopyButton:y,MoveDownButton:g,MoveUpButton:v,RemoveButton:b}=p.templates.ButtonTemplates,w={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};return(0,rr.jsxs)("div",{className:r,children:[(0,rr.jsx)("div",{className:s?"col-xs-9":"col-xs-12",children:t}),s&&(0,rr.jsx)("div",{className:"col-xs-3 array-item-toolbox",children:(0,rr.jsxs)("div",{className:"btn-group",style:{display:"flex",justifyContent:"space-around"},children:[(a||i)&&(0,rr.jsx)(v,{style:w,disabled:n||m||!a,onClick:h(c,c-1),uiSchema:f,registry:p}),(a||i)&&(0,rr.jsx)(g,{style:w,disabled:n||m||!i,onClick:h(c,c+1),uiSchema:f,registry:p}),l&&(0,rr.jsx)(y,{style:w,disabled:n||m,onClick:d(c),uiSchema:f,registry:p}),o&&(0,rr.jsx)(b,{style:w,disabled:n||m,onClick:u(c),uiSchema:f,registry:p})]})})]})}function Bo(e){const{canAdd:t,className:r,disabled:n,idSchema:s,uiSchema:i,items:a,onAddClick:o,readonly:l,registry:c,required:d,schema:u,title:h}=e,m=$r(i),p=fs("ArrayFieldDescriptionTemplate",c,m),f=fs("ArrayFieldItemTemplate",c,m),y=fs("ArrayFieldTitleTemplate",c,m),{ButtonTemplates:{AddButton:g}}=c.templates;return(0,rr.jsxs)("fieldset",{className:r,id:s.$id,children:[(0,rr.jsx)(y,{idSchema:s,title:m.title||h,required:d,schema:u,uiSchema:i,registry:c}),(0,rr.jsx)(p,{idSchema:s,description:m.description||u.description,schema:u,uiSchema:i,registry:c}),(0,rr.jsx)("div",{className:"row array-item-list",children:a&&a.map((({key:e,...t})=>(0,rr.jsx)(f,{...t},e)))}),t&&(0,rr.jsx)(g,{className:"array-item-add",onClick:o,disabled:n||l,uiSchema:i,registry:c})]})}function Wo(e){const{idSchema:t,title:r,schema:n,uiSchema:s,required:i,registry:a}=e,o=$r(s,a.globalUiOptions),{label:l=!0}=o;if(!r||!l)return null;const c=fs("TitleFieldTemplate",a,o);return(0,rr.jsx)(c,{id:Es(t),title:r,required:i,schema:n,uiSchema:s,registry:a})}function Ho(e){const{id:t,name:r,value:n,readonly:i,disabled:a,autofocus:o,onBlur:l,onFocus:c,onChange:d,onChangeOverride:u,options:h,schema:m,uiSchema:p,formContext:f,registry:y,rawErrors:g,type:v,hideLabel:b,hideError:w,...S}=e;if(!t)throw console.log("No id for",e),new Error(`no id for props ${JSON.stringify(e)}`);const x={...S,...ms(m,v,h)};let $;$="number"===x.type||"integer"===x.type?n||0===n?n:"":null==n?"":n;const E=(0,s.useCallback)((({target:{value:e}})=>d(""===e?h.emptyValue:e)),[d,h]),_=(0,s.useCallback)((({target:e})=>l(t,e&&e.value)),[l,t]),C=(0,s.useCallback)((({target:e})=>c(t,e&&e.value)),[c,t]);return(0,rr.jsxs)(rr.Fragment,{children:[(0,rr.jsx)("input",{id:t,name:t,className:"form-control",readOnly:i,disabled:a,autoFocus:o,value:$,...x,list:m.examples?xs(t):void 0,onChange:u||E,onBlur:_,onFocus:C,"aria-describedby":_s(t,!!m.examples)}),Array.isArray(m.examples)&&(0,rr.jsx)("datalist",{id:xs(t),children:m.examples.concat(m.default&&!m.examples.includes(m.default)?[m.default]:[]).map((e=>(0,rr.jsx)("option",{value:e},e)))},`datalist_${t}`)]})}function Qo({uiSchema:e}){const{submitText:t,norender:r,props:n={}}=function(e={}){const t=$r(e);if(t&&t[gr]){const e=t[gr];return{...ps,...e}}return ps}(e);return r?null:(0,rr.jsx)("div",{children:(0,rr.jsx)("button",{type:"submit",...n,className:`btn btn-info ${n.className||""}`,children:t})})}function Ko(e){const{iconType:t="default",icon:r,className:n,uiSchema:s,registry:i,...a}=e;return(0,rr.jsx)("button",{type:"button",className:`btn btn-${t} ${n}`,...a,children:(0,rr.jsx)("i",{className:`glyphicon glyphicon-${r}`})})}function Go(e){const{registry:{translateString:t}}=e;return(0,rr.jsx)(Ko,{title:t(qs.CopyButton),className:"array-item-copy",...e,icon:"copy"})}function Jo(e){const{registry:{translateString:t}}=e;return(0,rr.jsx)(Ko,{title:t(qs.MoveDownButton),className:"array-item-move-down",...e,icon:"arrow-down"})}function Zo(e){const{registry:{translateString:t}}=e;return(0,rr.jsx)(Ko,{title:t(qs.MoveUpButton),className:"array-item-move-up",...e,icon:"arrow-up"})}function Xo(e){const{registry:{translateString:t}}=e;return(0,rr.jsx)(Ko,{title:t(qs.RemoveButton),className:"array-item-remove",...e,iconType:"danger",icon:"remove"})}function el({className:e,onClick:t,disabled:r,registry:n}){const{translateString:s}=n;return(0,rr.jsx)("div",{className:"row",children:(0,rr.jsx)("p",{className:`col-xs-3 col-xs-offset-9 text-right ${e}`,children:(0,rr.jsx)(Ko,{iconType:"info",icon:"plus",className:"btn-add col-xs-12",title:s(qs.AddButton),onClick:t,disabled:r,registry:n})})})}function tl(e){const{id:t,description:r}=e;return r?"string"==typeof r?(0,rr.jsx)("p",{id:t,className:"field-description",children:r}):(0,rr.jsx)("div",{id:t,className:"field-description",children:r}):null}function rl({errors:e,registry:t}){const{translateString:r}=t;return(0,rr.jsxs)("div",{className:"panel panel-danger errors",children:[(0,rr.jsx)("div",{className:"panel-heading",children:(0,rr.jsx)("h3",{className:"panel-title",children:r(qs.ErrorsLabel)})}),(0,rr.jsx)("ul",{className:"list-group",children:e.map(((e,t)=>(0,rr.jsx)("li",{className:"list-group-item text-danger",children:e.stack},t)))})]})}function nl(e){const{label:t,required:r,id:n}=e;return t?(0,rr.jsxs)("label",{className:"control-label",htmlFor:n,children:[t,r&&(0,rr.jsx)("span",{className:"required",children:"*"})]}):null}const sl=function(e){const{id:t,label:r,children:n,errors:s,help:i,description:a,hidden:o,required:l,displayLabel:c,registry:d,uiSchema:u}=e,h=fs("WrapIfAdditionalTemplate",d,$r(u));return o?(0,rr.jsx)("div",{className:"hidden",children:n}):(0,rr.jsxs)(h,{...e,children:[c&&(0,rr.jsx)(nl,{label:r,required:l,id:t}),c&&a?a:null,n,s,i]})};function il(e){const{errors:t=[],idSchema:r}=e;if(0===t.length)return null;const n=Ss(r);return(0,rr.jsx)("div",{children:(0,rr.jsx)("ul",{id:n,className:"error-detail bs-callout bs-callout-info",children:t.filter((e=>!!e)).map(((e,t)=>(0,rr.jsx)("li",{className:"text-danger",children:e},t)))})})}function al(e){const{idSchema:t,help:r}=e;if(!r)return null;const n=$s(t);return"string"==typeof r?(0,rr.jsx)("p",{id:n,className:"help-block",children:r}):(0,rr.jsx)("div",{id:n,className:"help-block",children:r})}function ol(e){const{description:t,disabled:r,formData:n,idSchema:s,onAddClick:i,properties:a,readonly:o,registry:l,required:c,schema:d,title:u,uiSchema:h}=e,m=$r(h),p=fs("TitleFieldTemplate",l,m),f=fs("DescriptionFieldTemplate",l,m),{ButtonTemplates:{AddButton:y}}=l.templates;return(0,rr.jsxs)("fieldset",{id:s.$id,children:[u&&(0,rr.jsx)(p,{id:Es(s),title:u,required:c,schema:d,uiSchema:h,registry:l}),t&&(0,rr.jsx)(f,{id:ws(s),description:t,schema:d,uiSchema:h,registry:l}),a.map((e=>e.content)),Er(d,h,n)&&(0,rr.jsx)(y,{className:"object-property-expand",onClick:i(d),disabled:r||o,uiSchema:h,registry:l})]})}function ll(e){const{id:t,title:r,required:n}=e;return(0,rr.jsxs)("legend",{id:t,children:[r,n&&(0,rr.jsx)("span",{className:"required",children:"*"})]})}const cl=function(e){const{schema:t,idSchema:r,reason:n,registry:s}=e,{translateString:i}=s;let a=qs.UnsupportedField;const o=[];return r&&r.$id&&(a=qs.UnsupportedFieldWithId,o.push(r.$id)),n&&(a=a===qs.UnsupportedField?qs.UnsupportedFieldWithReason:qs.UnsupportedFieldWithIdAndReason,o.push(n)),(0,rr.jsxs)("div",{className:"unsupported-field",children:[(0,rr.jsx)("p",{children:(0,rr.jsx)(Do,{options:{disableParsingRawHTML:!0},children:i(a,o)})}),t&&(0,rr.jsx)("pre",{children:JSON.stringify(t,null,2)})]})};function dl(e){const{id:t,classNames:r,style:n,disabled:s,label:i,onKeyChange:a,onDropPropertyClick:o,readonly:l,required:c,schema:d,children:u,uiSchema:h,registry:m}=e,{templates:p,translateString:f}=m,{RemoveButton:y}=p.ButtonTemplates,g=f(qs.KeyLabel,[i]);return ir in d?(0,rr.jsx)("div",{className:r,style:n,children:(0,rr.jsxs)("div",{className:"row",children:[(0,rr.jsx)("div",{className:"col-xs-5 form-additional",children:(0,rr.jsxs)("div",{className:"form-group",children:[(0,rr.jsx)(nl,{label:g,required:c,id:`${t}-key`}),(0,rr.jsx)("input",{className:"form-control",type:"text",id:`${t}-key`,onBlur:({target:e})=>a(e&&e.value),defaultValue:i})]})}),(0,rr.jsx)("div",{className:"form-additional form-group col-xs-5",children:u}),(0,rr.jsx)("div",{className:"col-xs-2",children:(0,rr.jsx)(y,{className:"array-item-remove btn-block",style:{border:"0"},disabled:s||l,onClick:o(i),uiSchema:h,registry:m})})]})}):(0,rr.jsx)("div",{className:r,style:n,children:u})}function ul({type:e,range:t,value:r,select:n,rootId:s,name:i,disabled:a,readonly:o,autofocus:l,registry:c,onBlur:d,onFocus:u}){const h=s+"_"+e,{SelectWidget:m}=c.widgets;return(0,rr.jsx)(m,{schema:{type:"integer"},id:h,name:i,className:"form-control",options:{enumOptions:rs(t[0],t[1])},placeholder:e,value:r,disabled:a,readonly:o,autofocus:l,onChange:t=>n(e,t),onBlur:d,onFocus:u,registry:c,label:"","aria-describedby":_s(s)})}const hl=function({time:e=!1,disabled:t=!1,readonly:r=!1,autofocus:n=!1,options:i,id:a,name:o,registry:l,onBlur:c,onFocus:d,onChange:u,value:h}){const{translateString:m}=l,[p,f]=(0,s.useState)(h),[y,g]=(0,s.useReducer)(((e,t)=>({...e,...t})),ks(h,e));(0,s.useEffect)((()=>{const t=Os(y,e);!function(e){return Object.values(e).every((e=>-1!==e))}(y)||t===h?p!==h&&(f(h),g(ks(h,e))):u(t)}),[e,h,u,y,p]);const v=(0,s.useCallback)(((e,t)=>{g({[e]:t})}),[]),b=(0,s.useCallback)((n=>{if(n.preventDefault(),t||r)return;const s=ks((new Date).toJSON(),e);u(Os(s,e))}),[t,r,e]),w=(0,s.useCallback)((e=>{e.preventDefault(),t||r||u(void 0)}),[t,r,u]);return(0,rr.jsxs)("ul",{className:"list-inline",children:[us(y,e,i.yearsRange,i.format).map(((e,s)=>(0,rr.jsx)("li",{className:"list-inline-item",children:(0,rr.jsx)(ul,{rootId:a,name:o,select:v,...e,disabled:t,readonly:r,registry:l,onBlur:c,onFocus:d,autofocus:n&&0===s})},s))),("undefined"===i.hideNowButton||!i.hideNowButton)&&(0,rr.jsx)("li",{className:"list-inline-item",children:(0,rr.jsx)("a",{href:"#",className:"btn btn-info btn-now",onClick:b,children:m(qs.NowLabel)})}),("undefined"===i.hideClearButton||!i.hideClearButton)&&(0,rr.jsx)("li",{className:"list-inline-item",children:(0,rr.jsx)("a",{href:"#",className:"btn btn-warning btn-clear",onClick:w,children:m(qs.ClearLabel)})})]})},ml=function({time:e=!0,...t}){const{AltDateWidget:r}=t.registry.widgets;return(0,rr.jsx)(r,{time:e,...t})},pl=function({schema:e,uiSchema:t,options:r,id:n,value:i,disabled:a,readonly:o,label:l,hideLabel:c,autofocus:d=!1,onBlur:u,onFocus:h,onChange:m,registry:p}){var f;const y=fs("DescriptionFieldTemplate",p,r),g=Ts(e),v=(0,s.useCallback)((e=>m(e.target.checked)),[m]),b=(0,s.useCallback)((e=>u(n,e.target.checked)),[u,n]),w=(0,s.useCallback)((e=>h(n,e.target.checked)),[h,n]),S=null!==(f=r.description)&&void 0!==f?f:e.description;return(0,rr.jsxs)("div",{className:"checkbox "+(a||o?"disabled":""),children:[!c&&!!S&&(0,rr.jsx)(y,{id:ws(n),description:S,schema:e,uiSchema:t,registry:p}),(0,rr.jsxs)("label",{children:[(0,rr.jsx)("input",{type:"checkbox",id:n,name:n,checked:void 0!==i&&i,required:g,disabled:a||o,autoFocus:d,onChange:v,onBlur:b,onFocus:w,"aria-describedby":_s(n)}),As((0,rr.jsx)("span",{children:l}),c)]})]})},fl=function({id:e,disabled:t,options:{inline:r=!1,enumOptions:n,enumDisabled:i,emptyValue:a},value:o,autofocus:l=!1,readonly:c,onChange:d,onBlur:u,onFocus:h}){const m=Array.isArray(o)?o:[o],p=(0,s.useCallback)((({target:t})=>u(e,ss(t&&t.value,n,a))),[u,e]),f=(0,s.useCallback)((({target:t})=>h(e,ss(t&&t.value,n,a))),[h,e]);return(0,rr.jsx)("div",{className:"checkboxes",id:e,children:Array.isArray(n)&&n.map(((s,a)=>{const o=is(s.value,m),u=Array.isArray(i)&&-1!==i.indexOf(s.value),h=t||u||c?"disabled":"",y=(0,rr.jsxs)("span",{children:[(0,rr.jsx)("input",{type:"checkbox",id:Cs(e,a),name:e,checked:o,value:String(a),disabled:t||u||c,autoFocus:l&&0===a,onChange:e=>{e.target.checked?d(function(e,t,r=[]){const n=ss(e,r);if(!Pn()(n)){const e=r.findIndex((e=>n===e.value)),s=r.map((({value:e})=>e));return t.slice(0,e).concat(n,t.slice(e)).sort(((e,t)=>Number(s.indexOf(e)>s.indexOf(t))))}return t}(a,m,n)):d(function(e,t,r=[]){const n=ss(e,r);return Array.isArray(t)?t.filter((e=>!Or(e,n))):Or(n,t)?void 0:t}(a,m,n))},onBlur:p,onFocus:f,"aria-describedby":_s(e)}),(0,rr.jsx)("span",{children:s.label})]});return r?(0,rr.jsx)("label",{className:`checkbox-inline ${h}`,children:y},a):(0,rr.jsx)("div",{className:`checkbox ${h}`,children:(0,rr.jsx)("label",{children:y})},a)}))})};function yl(e){const{disabled:t,readonly:r,options:n,registry:s}=e,i=fs("BaseInputTemplate",s,n);return(0,rr.jsx)(i,{type:"color",...e,disabled:t||r})}function gl(e){const{onChange:t,options:r,registry:n}=e,i=fs("BaseInputTemplate",n,r),a=(0,s.useCallback)((e=>t(e||void 0)),[t]);return(0,rr.jsx)(i,{type:"date",...e,onChange:a})}function vl(e){const{onChange:t,value:r,options:n,registry:s}=e,i=fs("BaseInputTemplate",s,n);return(0,rr.jsx)(i,{type:"datetime-local",...e,value:js(r),onChange:e=>{return t((r=e)?new Date(r).toJSON():void 0);var r}})}function bl(e){const{options:t,registry:r}=e,n=fs("BaseInputTemplate",r,t);return(0,rr.jsx)(n,{type:"email",...e})}function wl(e,t){return null===e?null:e.replace(";base64",`;name=${encodeURIComponent(t)};base64`)}function Sl(e){const{name:t,size:r,type:n}=e;return new Promise(((s,i)=>{const a=new window.FileReader;a.onerror=i,a.onload=e=>{var i;"string"==typeof(null===(i=e.target)||void 0===i?void 0:i.result)?s({dataURL:wl(e.target.result,t),name:t,size:r,type:n}):s({dataURL:null,name:t,size:r,type:n})},a.readAsDataURL(e)}))}function xl({fileInfo:e,registry:t}){const{translateString:r}=t,{dataURL:n,type:s,name:i}=e;return n?["image/jpeg","image/png"].includes(s)?(0,rr.jsx)("img",{src:n,style:{maxWidth:"100%"},className:"file-preview"}):(0,rr.jsxs)(rr.Fragment,{children:[" ",(0,rr.jsx)("a",{download:`preview-${i}`,href:n,className:"file-download",children:r(qs.PreviewLabel)})]}):null}function $l({filesInfo:e,registry:t,preview:r,onRemove:n,options:s}){if(0===e.length)return null;const{translateString:i}=t,{RemoveButton:a}=fs("ButtonTemplates",t,s);return(0,rr.jsx)("ul",{className:"file-info",children:e.map(((e,s)=>{const{name:o,size:l,type:c}=e;return(0,rr.jsxs)("li",{children:[(0,rr.jsx)(Do,{children:i(qs.FilesInfo,[o,c,String(l)])}),r&&(0,rr.jsx)(xl,{fileInfo:e,registry:t}),(0,rr.jsx)(a,{onClick:()=>n(s),registry:t})]},s)}))})}const El=function(e){const{disabled:t,readonly:r,required:n,multiple:i,onChange:a,value:o,options:l,registry:c}=e,d=fs("BaseInputTemplate",c,l),u=(0,s.useCallback)((e=>{var t;e.target.files&&(t=e.target.files,Promise.all(Array.from(t).map(Sl))).then((e=>{const t=e.map((e=>e.dataURL));a(i?o.concat(t):t[0])}))}),[i,o,a]),h=(0,s.useMemo)((()=>(Array.isArray(o)?o:[o]).reduce(((e,t)=>{if(!t)return e;try{const{blob:r,name:n}=function(e){var t;if(-1===e.indexOf("data:"))throw new Error("File is invalid: URI must be a dataURI");const r=e.slice(5).split(";base64,");if(2!==r.length)throw new Error("File is invalid: dataURI must be base64");const[n,s]=r,[i,...a]=n.split(";"),o=i||"",l=decodeURI((null===(t=a.map((e=>e.split("="))).find((([e])=>"name"===e)))||void 0===t?void 0:t[1])||"unknown");try{const e=atob(s),t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return{blob:new window.Blob([new Uint8Array(t)],{type:o}),name:l}}catch(e){throw new Error("File is invalid: "+e.message)}}(t);return[...e,{dataURL:t,name:n,size:r.size,type:r.type}]}catch(t){return e}}),[])),[o]),m=(0,s.useCallback)((e=>{if(i){const t=o.filter(((t,r)=>r!==e));a(t)}else a(void 0)}),[i,o,a]);return(0,rr.jsxs)("div",{children:[(0,rr.jsx)(d,{...e,disabled:t||r,type:"file",required:!o&&n,onChangeOverride:u,value:"",accept:l.accept?String(l.accept):void 0}),(0,rr.jsx)($l,{filesInfo:h,onRemove:m,registry:c,preview:l.filePreview,options:l})]})},_l=function({id:e,value:t}){return(0,rr.jsx)("input",{type:"hidden",id:e,name:e,value:void 0===t?"":t})};function Cl(e){const{options:t,registry:r}=e,n=fs("BaseInputTemplate",r,t);return(0,rr.jsx)(n,{type:"password",...e})}const Al=function({options:e,value:t,required:r,disabled:n,readonly:i,autofocus:a=!1,onBlur:o,onFocus:l,onChange:c,id:d}){const{enumOptions:u,enumDisabled:h,inline:m,emptyValue:p}=e,f=(0,s.useCallback)((({target:e})=>o(d,ss(e&&e.value,u,p))),[o,d]),y=(0,s.useCallback)((({target:e})=>l(d,ss(e&&e.value,u,p))),[l,d]);return(0,rr.jsx)("div",{className:"field-radio-group",id:d,children:Array.isArray(u)&&u.map(((e,s)=>{const o=is(e.value,t),l=Array.isArray(h)&&-1!==h.indexOf(e.value),u=n||l||i?"disabled":"",p=(0,rr.jsxs)("span",{children:[(0,rr.jsx)("input",{type:"radio",id:Cs(d,s),checked:o,name:d,required:r,value:String(s),disabled:n||l||i,autoFocus:a&&0===s,onChange:()=>c(e.value),onBlur:f,onFocus:y,"aria-describedby":_s(d)}),(0,rr.jsx)("span",{children:e.label})]});return m?(0,rr.jsx)("label",{className:`radio-inline ${u}`,children:p},s):(0,rr.jsx)("div",{className:`radio ${u}`,children:(0,rr.jsx)("label",{children:p})},s)}))})};function kl(e){const{value:t,registry:{templates:{BaseInputTemplate:r}}}=e;return(0,rr.jsxs)("div",{className:"field-range-wrapper",children:[(0,rr.jsx)(r,{type:"range",...e}),(0,rr.jsx)("span",{className:"range-view",children:t})]})}function Tl(e,t){return t?Array.from(e.target.options).slice().filter((e=>e.selected)).map((e=>e.value)):e.target.value}const Ol=function({schema:e,id:t,options:r,value:n,required:i,disabled:a,readonly:o,multiple:l=!1,autofocus:c=!1,onChange:d,onBlur:u,onFocus:h,placeholder:m}){const{enumOptions:p,enumDisabled:f,emptyValue:y}=r,g=l?[]:"",v=(0,s.useCallback)((e=>{const r=Tl(e,l);return h(t,ss(r,p,y))}),[h,t,e,l,p,y]),b=(0,s.useCallback)((e=>{const r=Tl(e,l);return u(t,ss(r,p,y))}),[u,t,e,l,p,y]),w=(0,s.useCallback)((e=>{const t=Tl(e,l);return d(ss(t,p,y))}),[d,e,l,p,y]),S=function(e,t=[],r=!1){const n=t.map(((t,r)=>is(t.value,e)?String(r):void 0)).filter((e=>void 0!==e));return r?n:n[0]}(n,p,l),x=!l&&void 0===e.default;return(0,rr.jsxs)("select",{id:t,name:t,multiple:l,className:"form-control",value:void 0===S?g:S,required:i,disabled:a||o,autoFocus:c,onBlur:b,onFocus:v,onChange:w,"aria-describedby":_s(t),children:[x&&(0,rr.jsx)("option",{value:"",children:m}),Array.isArray(p)&&p.map((({value:e,label:t},r)=>{const n=f&&-1!==f.indexOf(e);return(0,rr.jsx)("option",{value:String(r),disabled:n,children:t},r)}))]})};function Pl({id:e,options:t={},placeholder:r,value:n,required:i,disabled:a,readonly:o,autofocus:l=!1,onChange:c,onBlur:d,onFocus:u}){const h=(0,s.useCallback)((({target:{value:e}})=>c(""===e?t.emptyValue:e)),[c,t.emptyValue]),m=(0,s.useCallback)((({target:t})=>d(e,t&&t.value)),[d,e]),p=(0,s.useCallback)((({target:t})=>u(e,t&&t.value)),[e,u]);return(0,rr.jsx)("textarea",{id:e,name:e,className:"form-control",value:n||"",placeholder:r,required:i,disabled:a,readOnly:o,autoFocus:l,rows:t.rows,onBlur:m,onFocus:p,onChange:h,"aria-describedby":_s(e)})}Pl.defaultProps={autofocus:!1,options:{}};const Dl=Pl;function Nl(e){const{options:t,registry:r}=e,n=fs("BaseInputTemplate",r,t);return(0,rr.jsx)(n,{...e})}function Il(e){const{onChange:t,options:r,registry:n}=e,i=fs("BaseInputTemplate",n,r),a=(0,s.useCallback)((e=>t(e?`${e}:00`:void 0)),[t]);return(0,rr.jsx)(i,{type:"time",...e,onChange:a})}function jl(e){const{options:t,registry:r}=e,n=fs("BaseInputTemplate",r,t);return(0,rr.jsx)(n,{type:"url",...e})}function Fl(e){const{options:t,registry:r}=e,n=fs("BaseInputTemplate",r,t);return(0,rr.jsx)(n,{type:"number",...e})}class Rl extends s.Component{constructor(e){if(super(e),this.getUsedFormData=(e,t)=>{if(0===t.length&&"object"!=typeof e)return e;const r=_()(e,t);return Array.isArray(e)?Object.keys(r).map((e=>r[e])):r},this.getFieldNames=(e,t)=>{const r=(e,n=[],s=[[]])=>(Object.keys(e).forEach((i=>{if("object"==typeof e[i]){const t=s.map((e=>[...e,i]));e[i][br]&&""!==e[i][pr]?n.push(e[i][pr]):r(e[i],n,t)}else i===pr&&""!==e[i]&&s.forEach((e=>{const r=Dr()(t,e);("object"!=typeof r||z()(r)||Array.isArray(r)&&r.every((e=>"object"!=typeof e)))&&n.push(e)}))})),n);return r(e)},this.omitExtraData=e=>{const{schema:t,schemaUtils:r}=this.state,n=r.retrieveSchema(t,e),s=r.toPathSchema(n,"",e),i=this.getFieldNames(s,e);return this.getUsedFormData(e,i)},this.onChange=(e,t,r)=>{const{extraErrors:n,omitExtraData:s,liveOmit:i,noValidate:a,liveValidate:o,onChange:l}=this.props,{schemaUtils:c,schema:d}=this.state;let u=this.state.retrievedSchema;if(nr(e)||Array.isArray(e)){const t=this.getStateFromProps(this.props,e);e=t.formData,u=t.retrievedSchema}const h=!a&&o;let m={formData:e,schema:d},p=e;if(!0===s&&!0===i&&(p=this.omitExtraData(e),m={formData:p}),h){const e=this.validate(p,d,c,u);let r=e.errors,s=e.errorSchema;const i=r,a=s;if(n){const t=Fs(e,n);s=t.errorSchema,r=t.errors}t&&(s=Nn(s,this.filterErrorsBasedOnSchema(t,u,p),"preventDuplicates")),m={formData:p,errors:r,errorSchema:s,schemaValidationErrors:i,schemaValidationErrorSchema:a}}else if(!a&&t){const e=n?Nn(t,n,"preventDuplicates"):t;m={formData:p,errorSchema:e,errors:Ps(e)}}this.setState(m,(()=>l&&l({...this.state,...m},r)))},this.reset=()=>{const{onChange:e}=this.props,t={formData:this.getStateFromProps(this.props,void 0).formData,errorSchema:{},errors:[],schemaValidationErrors:[],schemaValidationErrorSchema:{}};this.setState(t,(()=>e&&e({...this.state,...t})))},this.onBlur=(e,t)=>{const{onBlur:r}=this.props;r&&r(e,t)},this.onFocus=(e,t)=>{const{onFocus:r}=this.props;r&&r(e,t)},this.onSubmit=e=>{if(e.preventDefault(),e.target!==e.currentTarget)return;e.persist();const{omitExtraData:t,extraErrors:r,noValidate:n,onSubmit:s}=this.props;let{formData:i}=this.state;if(!0===t&&(i=this.omitExtraData(i)),n||this.validateFormWithFormData(i)){const t=r||{},n=r?Ps(r):[];this.setState({formData:i,errors:n,errorSchema:t,schemaValidationErrors:[],schemaValidationErrorSchema:{}},(()=>{s&&s({...this.state,formData:i,status:"submitted"},e)}))}},this.submit=()=>{if(this.formElement.current){const e=new CustomEvent("submit",{cancelable:!0});e.preventDefault(),this.formElement.current.dispatchEvent(e),this.formElement.current.requestSubmit()}},this.validateFormWithFormData=e=>{const{extraErrors:t,extraErrorsBlockSubmit:r,focusOnFirstError:n,onError:s}=this.props,{errors:i}=this.state,a=this.validate(e);let o=a.errors,l=a.errorSchema;const c=o,d=l,u=o.length>0||t&&r;if(u){if(t){const e=Fs(a,t);l=e.errorSchema,o=e.errors}n&&("function"==typeof n?n(o[0]):this.focusOnError(o[0])),this.setState({errors:o,errorSchema:l,schemaValidationErrors:c,schemaValidationErrorSchema:d},(()=>{s?s(o):console.error("Form validation failed",o)}))}else i.length>0&&this.setState({errors:[],errorSchema:{},schemaValidationErrors:[],schemaValidationErrorSchema:{}});return!u},!e.validator)throw new Error("A validator is required for Form functionality to work");this.state=this.getStateFromProps(e,e.formData),this.props.onChange&&!Or(this.state.formData,this.props.formData)&&this.props.onChange(this.state),this.formElement=(0,s.createRef)()}getSnapshotBeforeUpdate(e,t){if(!Or(this.props,e)){const r=function(e,t){const r=Cr()(e),n=Cr()(t);return e===t||!r&&!n?[]:r&&!n?zs()(e):!r&&n?zs()(t):[...zs()(Ls()(e,((e,r)=>!Or(e,Dr()(t,r))))),...Vs()(zs()(t),zs()(e))]}(this.props.formData,e.formData),n=!Or(e.schema,this.props.schema),s=r.length>0||!Or(e.formData,this.props.formData),i=this.getStateFromProps(this.props,this.props.formData,n||s?void 0:this.state.retrievedSchema,n,r);return{nextState:i,shouldUpdate:!Or(i,t)}}return{shouldUpdate:!1}}componentDidUpdate(e,t,r){if(r.shouldUpdate){const{nextState:e}=r;Or(e.formData,this.props.formData)||Or(e.formData,t.formData)||!this.props.onChange||this.props.onChange(e),this.setState(e)}}getStateFromProps(e,t,r,n=!1,s=[]){var i;const a=this.state||{},o="schema"in e?e.schema:this.props.schema,l=("uiSchema"in e?e.uiSchema:this.props.uiSchema)||{},c=void 0!==t,d="liveValidate"in e?e.liveValidate:this.props.liveValidate,u=c&&!e.noValidate&&d,h=o,m="experimental_defaultFormStateBehavior"in e?e.experimental_defaultFormStateBehavior:this.props.experimental_defaultFormStateBehavior,p="experimental_customMergeAllOf"in e?e.experimental_customMergeAllOf:this.props.experimental_customMergeAllOf;let f=a.schemaUtils;f&&!f.doesSchemaUtilsDiffer(e.validator,h,m,p)||(f=function(e,t,r={},n){return new es(e,t,r,n)}(e.validator,h,m,p));const y=f.getDefaultFormState(o,t),g=this.updateRetrievedSchema(null!=r?r:f.retrieveSchema(o,y));let v,b,w=a.schemaValidationErrors,S=a.schemaValidationErrorSchema;if(u){const e=this.validate(y,o,f,g);v=e.errors,b=void 0===r?e.errorSchema:Nn(null===(i=this.state)||void 0===i?void 0:i.errorSchema,e.errorSchema,"preventDuplicates"),w=v,S=b}else{const t=e.noValidate||n?{errors:[],errorSchema:{}}:e.liveValidate?{errors:a.errors||[],errorSchema:a.errorSchema||{}}:{errors:a.schemaValidationErrors||[],errorSchema:a.schemaValidationErrorSchema||{}};if(v=t.errors,b=t.errorSchema,s.length>0){const e=s.reduce(((e,t)=>(e[t]=void 0,e)),{});b=S=Nn(t.errorSchema,e,"preventDuplicates")}}if(e.extraErrors){const t=Fs({errorSchema:b,errors:v},e.extraErrors);b=t.errorSchema,v=t.errors}const x=f.toIdSchema(g,l["ui:rootFieldId"],y,e.idPrefix,e.idSeparator);return{schemaUtils:f,schema:o,uiSchema:l,idSchema:x,formData:y,edit:c,errors:v,errorSchema:b,schemaValidationErrors:w,schemaValidationErrorSchema:S,retrievedSchema:g}}shouldComponentUpdate(e,t){return function(e,t,r){const{props:n,state:s}=e;return!Or(n,t)||!Or(s,r)}(this,e,t)}validate(e,t=this.props.schema,r,n){const s=r||this.state.schemaUtils,{customValidate:i,transformErrors:a,uiSchema:o}=this.props,l=null!=n?n:s.retrieveSchema(t,e);return s.getValidator().validateFormData(e,l,i,a,o)}renderErrors(e){const{errors:t,errorSchema:r,schema:n,uiSchema:s}=this.state,{formContext:i}=this.props,a=fs("ErrorListTemplate",e,$r(s));return t&&t.length?(0,rr.jsx)(a,{errors:t,errorSchema:r||{},schema:n,uiSchema:s,formContext:i,registry:e}):null}filterErrorsBasedOnSchema(e,t,r){const{retrievedSchema:n,schemaUtils:s}=this.state,i=null!=t?t:n,a=s.toPathSchema(i,"",r),o=this.getFieldNames(a,r),l=_()(e,o);"object"!==(null==t?void 0:t.type)&&"array"!==(null==t?void 0:t.type)&&(l.__errors=e.__errors);const c=e=>(Ws()(e,((t,r)=>{Pn()(t)?delete e[r]:"object"!=typeof t||Array.isArray(t.__errors)||c(t)})),e);return c(l)}updateRetrievedSchema(e){var t;return Or(e,null===(t=this.state)||void 0===t?void 0:t.retrievedSchema)?this.state.retrievedSchema:e}getRegistry(){var e;const{translateString:t,uiSchema:r={}}=this.props,{schemaUtils:n}=this.state,{fields:s,templates:i,widgets:a,formContext:o,translateString:l}={fields:{AnyOfField:ei,ArrayField:Js,BooleanField:Zs,NumberField:ni,ObjectField:Fo,OneOfField:ei,SchemaField:zo,StringField:Yo,NullField:Lo},templates:{ArrayFieldDescriptionTemplate:Uo,ArrayFieldItemTemplate:Vo,ArrayFieldTemplate:Bo,ArrayFieldTitleTemplate:Wo,ButtonTemplates:{SubmitButton:Qo,AddButton:el,CopyButton:Go,MoveDownButton:Jo,MoveUpButton:Zo,RemoveButton:Xo},BaseInputTemplate:Ho,DescriptionFieldTemplate:tl,ErrorListTemplate:rl,FieldTemplate:sl,FieldErrorTemplate:il,FieldHelpTemplate:al,ObjectFieldTemplate:ol,TitleFieldTemplate:ll,UnsupportedFieldTemplate:cl,WrapIfAdditionalTemplate:dl},widgets:{AltDateWidget:hl,AltDateTimeWidget:ml,CheckboxWidget:pl,CheckboxesWidget:fl,ColorWidget:yl,DateWidget:gl,DateTimeWidget:vl,EmailWidget:bl,FileWidget:El,HiddenWidget:_l,PasswordWidget:Cl,RadioWidget:Al,RangeWidget:kl,SelectWidget:Ol,TextWidget:Nl,TextareaWidget:Dl,TimeWidget:Il,UpDownWidget:Fl,URLWidget:jl},rootSchema:{},formContext:{},translateString:ns};return{fields:{...s,...this.props.fields},templates:{...i,...this.props.templates,ButtonTemplates:{...i.ButtonTemplates,...null===(e=this.props.templates)||void 0===e?void 0:e.ButtonTemplates}},widgets:{...a,...this.props.widgets},rootSchema:this.props.schema,formContext:this.props.formContext||o,schemaUtils:n,translateString:t||l,globalUiOptions:r["ui:globalOptions"]}}focusOnError(e){const{idPrefix:t="root",idSeparator:r="_"}=this.props,{property:n}=e,s=Ns()(n);""===s[0]?s[0]=t:s.unshift(t);const i=s.join(r);let a=this.formElement.current.elements[i];a||(a=this.formElement.current.querySelector(`input[id^="${i}"`)),a&&a.length&&(a=a[0]),a&&a.focus()}validateForm(){const{omitExtraData:e}=this.props;let{formData:t}=this.state;return!0===e&&(t=this.omitExtraData(t)),this.validateFormWithFormData(t)}render(){const{children:e,id:t,idPrefix:r,idSeparator:n,className:s="",tagName:i,name:a,method:o,target:l,action:c,autoComplete:d,enctype:u,acceptcharset:h,acceptCharset:m,noHtml5Validate:p=!1,disabled:f,readonly:y,formContext:g,showErrorList:v="top",_internalFormWrapper:b}=this.props,{schema:w,uiSchema:S,formData:x,errorSchema:$,idSchema:E}=this.state,_=this.getRegistry(),{SchemaField:C}=_.fields,{SubmitButton:A}=_.templates.ButtonTemplates,k=b?i:void 0,T=b||i||"form";let{[gr]:O={}}=$r(S);f&&(O={...O,props:{...O.props,disabled:!0}});const P={[xr]:{[gr]:O}};return(0,rr.jsxs)(T,{className:s||"rjsf",id:t,name:a,method:o,target:l,action:c,autoComplete:d,encType:u,acceptCharset:m||h,noValidate:p,onSubmit:this.onSubmit,as:k,ref:this.formElement,children:["top"===v&&this.renderErrors(_),(0,rr.jsx)(C,{name:"",schema:w,uiSchema:S,errorSchema:$,idSchema:E,idPrefix:r,idSeparator:n,formContext:g,formData:x,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,registry:_,disabled:f,readonly:y}),e||(0,rr.jsx)(A,{uiSchema:P,registry:_}),"bottom"===v&&this.renderErrors(_)]})}}const ql=Rl;var Ml=r(63282),zl=r.n(Ml),Yl=r(68182),Ll=r.n(Yl),Ul=r(23149);const Vl={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0,discriminator:!1},Bl=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,Wl=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;var Hl=r(92049),Ql=r(61882),Kl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gl=/^\w*$/;var Jl=r(37005);const Zl=(0,Jl.A)(Object,"create");var Xl=Object.prototype.hasOwnProperty;var ec=Object.prototype.hasOwnProperty;function tc(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}tc.prototype.clear=function(){this.__data__=Zl?Zl(null):{},this.size=0},tc.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},tc.prototype.get=function(e){var t=this.__data__;if(Zl){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Xl.call(t,e)?t[e]:void 0},tc.prototype.has=function(e){var t=this.__data__;return Zl?void 0!==t[e]:ec.call(t,e)},tc.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Zl&&void 0===t?"__lodash_hash_undefined__":t,this};const rc=tc,nc=function(e,t){for(var r=e.length;r--;)if((n=e[r][0])===(s=t)||n!=n&&s!=s)return r;var n,s;return-1};var sc=Array.prototype.splice;function ic(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ic.prototype.clear=function(){this.__data__=[],this.size=0},ic.prototype.delete=function(e){var t=this.__data__,r=nc(t,e);return!(r<0||(r==t.length-1?t.pop():sc.call(t,r,1),--this.size,0))},ic.prototype.get=function(e){var t=this.__data__,r=nc(t,e);return r<0?void 0:t[r][1]},ic.prototype.has=function(e){return nc(this.__data__,e)>-1},ic.prototype.set=function(e,t){var r=this.__data__,n=nc(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};const ac=ic;var oc=r(39820);const lc=(0,Jl.A)(oc.A,"Map"),cc=function(e,t){var r,n,s=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?s["string"==typeof t?"string":"hash"]:s.map};function dc(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}dc.prototype.clear=function(){this.size=0,this.__data__={hash:new rc,map:new(lc||ac),string:new rc}},dc.prototype.delete=function(e){var t=cc(this,e).delete(e);return this.size-=t?1:0,t},dc.prototype.get=function(e){return cc(this,e).get(e)},dc.prototype.has=function(e){return cc(this,e).has(e)},dc.prototype.set=function(e,t){var r=cc(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};const uc=dc;function hc(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],i=r.cache;if(i.has(s))return i.get(s);var a=e.apply(this,n);return r.cache=i.set(s,a)||i,a};return r.cache=new(hc.Cache||uc),r}hc.Cache=uc;var mc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pc=/\\(\\)?/g;const fc=(yc=hc((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(mc,(function(e,r,n,s){t.push(n?s.replace(pc,"$1"):r||e)})),t}),(function(e){return 500===gc.size&&gc.clear(),e})),gc=yc.cache,yc);var yc,gc,vc=r(241);var bc=vc.A?vc.A.prototype:void 0,wc=bc?bc.toString:void 0;const Sc=function e(t){if("string"==typeof t)return t;if((0,Hl.A)(t))return function(e,t){for(var r=-1,n=null==e?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}(t,e)+"";if((0,Ql.A)(t))return wc?wc.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},xc=function(e,t){return(0,Hl.A)(e)?e:function(e,t){if((0,Hl.A)(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!(0,Ql.A)(e))||Gl.test(e)||!Kl.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:fc(function(e){return null==e?"":Sc(e)}(e))},$c=function(e){if("string"==typeof e||(0,Ql.A)(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},Ec=function(e,t,r){var n=null==e?void 0:function(e,t){for(var r=0,n=(t=xc(t,e)).length;null!=e&&r<n;)e=e[$c(t[r++])];return r&&r==n?e:void 0}(e,t);return void 0===n?r:n};function _c(e,t,r,n,s,i,a){const{validationError:o}=t;let l=function(e=[],t){return e.map((e=>{var r;const{instancePath:n,keyword:s,params:i,schemaPath:a,parentSchema:o,...l}=e;let{message:c=""}=l,d=n.replace(/\//g,"."),u=`${d} ${c}`.trim();const h=[...(null===(r=i.deps)||void 0===r?void 0:r.split(", "))||[],i.missingProperty,i.property].filter((e=>e));if(h.length>0)h.forEach((e=>{let r=$r(Ec(t,`${(d?`${d}.${e}`:e).replace(/^\./,"")}`)).title;if(void 0===r){const n=a.replace(/\/properties\//g,"/").split("/").slice(1,-1).concat([e]);r=$r(Ec(t,n)).title}if(r)c=c.replace(`'${e}'`,`'${r}'`);else{const t=Ec(o,[yr,e,"title"]);t&&(c=c.replace(`'${e}'`,`'${t}'`))}})),u=c;else{const e=$r(Ec(t,`${d.replace(/^\./,"")}`)).title;if(e)u=`'${e}' ${c}`.trim();else{const e=null==o?void 0:o.title;e&&(u=`'${e}' ${c}`.trim())}}return"missingProperty"in i&&(d=d?`${d}.${i.missingProperty}`:i.missingProperty),{name:s,property:d,message:c,params:i,stack:u,schemaPath:a}}))}(t.errors,a);o&&(l=[...l,{stack:o.message}]),"function"==typeof i&&(l=i(l,a));let c=function(e){const t=new ds;return e.length&&e.forEach((e=>{const{property:r,message:n}=e,s="."===r?[]:Ns()(r);s.length>0&&""===s[0]&&s.splice(0,1),n&&t.addErrors(n,s)})),t.ErrorSchema}(l);if(o&&(c={...c,$schema:{__errors:[o.message]}}),"function"!=typeof s)return{errors:l,errorSchema:c};const d=Bn(e,n,r,n,!0);return Fs({errors:l,errorSchema:c},Is(s(d,Ar(d),a)))}class Cc{constructor(e,t){const{additionalMetaSchemas:r,customFormats:n,ajvOptionsOverrides:s,ajvFormatOptions:i,AjvClass:a}=e;this.ajv=function(e,t,r={},n,s=zl()){const i=new s({...Vl,...r});return n?Ll()(i,n):!1!==n&&Ll()(i),i.addFormat("data-url",Wl),i.addFormat("color",Bl),i.addKeyword(ir),i.addKeyword(br),Array.isArray(e)&&i.addMetaSchema(e),(0,Ul.A)(t)&&Object.keys(t).forEach((e=>{i.addFormat(e,t[e])})),i}(r,n,s,i,a),this.localizer=t}reset(){this.ajv.removeSchema()}toErrorList(e,t=[]){return Ps(e,t)}rawValidation(e,t){var r,n;let s,i,a;e[hr]&&(i=this.ajv.getSchema(e[hr]));try{void 0===i&&(i=this.ajv.compile(e)),i(t)}catch(e){s=e}return i&&("function"==typeof this.localizer&&((null!==(r=i.errors)&&void 0!==r?r:[]).forEach((e=>{var t;["missingProperty","property"].forEach((t=>{var r;(null===(r=e.params)||void 0===r?void 0:r[t])&&(e.params[t]=`'${e.params[t]}'`)})),(null===(t=e.params)||void 0===t?void 0:t.deps)&&(e.params.deps=e.params.deps.split(", ").map((e=>`'${e}'`)).join(", "))})),this.localizer(i.errors),(null!==(n=i.errors)&&void 0!==n?n:[]).forEach((e=>{var t;["missingProperty","property"].forEach((t=>{var r;(null===(r=e.params)||void 0===r?void 0:r[t])&&(e.params[t]=e.params[t].slice(1,-1))})),(null===(t=e.params)||void 0===t?void 0:t.deps)&&(e.params.deps=e.params.deps.split(", ").map((e=>e.slice(1,-1))).join(", "))}))),a=i.errors||void 0,i.errors=null),{errors:a,validationError:s}}validateFormData(e,t,r,n,s){return _c(this,this.rawValidation(t,e),e,t,r,n,s)}handleSchemaUpdate(e){var t,r;const n=null!==(t=e[hr])&&void 0!==t?t:wr;void 0===this.ajv.getSchema(n)?this.ajv.addSchema(e,n):Or(e,null===(r=this.ajv.getSchema(n))||void 0===r?void 0:r.schema)||(this.ajv.removeSchema(n),this.ajv.addSchema(e,n))}isValid(e,t,r){var n;try{this.handleSchemaUpdate(r);const s=Rs(e),i=null!==(n=s[hr])&&void 0!==n?n:function(e){const t=new Set;return JSON.stringify(e,((e,r)=>(t.add(e),r))),function(e){let t=0;for(let r=0;r<e.length;r+=1)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t.toString(16)}(JSON.stringify(e,Array.from(t).sort()))}(s);let a;return a=this.ajv.getSchema(i),void 0===a&&(a=this.ajv.addSchema(s,i).getSchema(i)||this.ajv.compile(s)),a(t)}catch(e){return console.warn("Error encountered compiling schema:",e),!1}}}const Ac=function(e={}){return new Cc(e,void 0)}();var kc,Tc,Oc,Pc,Dc=r(41816),Nc=r(74353);function Ic(e,t){e.assign("day",t.date()),e.assign("month",t.month()+1),e.assign("year",t.year())}function jc(e,t){e.assign("hour",t.hour()),e.assign("minute",t.minute()),e.assign("second",t.second()),e.assign("millisecond",t.millisecond()),e.get("hour")<12?e.assign("meridiem",kc.AM):e.assign("meridiem",kc.PM)}function Fc(e,t){e.imply("day",t.date()),e.imply("month",t.month()+1),e.imply("year",t.year())}function Rc(e,t){e.imply("hour",t.hour()),e.imply("minute",t.minute()),e.imply("second",t.second()),e.imply("millisecond",t.millisecond())}(Pc=kc||(kc={}))[Pc.AM=0]="AM",Pc[Pc.PM=1]="PM",function(e){e[e.SUNDAY=0]="SUNDAY",e[e.MONDAY=1]="MONDAY",e[e.TUESDAY=2]="TUESDAY",e[e.WEDNESDAY=3]="WEDNESDAY",e[e.THURSDAY=4]="THURSDAY",e[e.FRIDAY=5]="FRIDAY",e[e.SATURDAY=6]="SATURDAY"}(Tc||(Tc={})),function(e){e[e.JANUARY=1]="JANUARY",e[e.FEBRUARY=2]="FEBRUARY",e[e.MARCH=3]="MARCH",e[e.APRIL=4]="APRIL",e[e.MAY=5]="MAY",e[e.JUNE=6]="JUNE",e[e.JULY=7]="JULY",e[e.AUGUST=8]="AUGUST",e[e.SEPTEMBER=9]="SEPTEMBER",e[e.OCTOBER=10]="OCTOBER",e[e.NOVEMBER=11]="NOVEMBER",e[e.DECEMBER=12]="DECEMBER"}(Oc||(Oc={}));const qc={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:{timezoneOffsetDuringDst:120,timezoneOffsetNonDst:60,dstStart:e=>zc(e,Oc.MARCH,Tc.SUNDAY,2),dstEnd:e=>zc(e,Oc.OCTOBER,Tc.SUNDAY,3)},CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CT:{timezoneOffsetDuringDst:-300,timezoneOffsetNonDst:-360,dstStart:e=>Mc(e,Oc.MARCH,Tc.SUNDAY,2,2),dstEnd:e=>Mc(e,Oc.NOVEMBER,Tc.SUNDAY,1,2)},CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:{timezoneOffsetDuringDst:-240,timezoneOffsetNonDst:-300,dstStart:e=>Mc(e,Oc.MARCH,Tc.SUNDAY,2,2),dstEnd:e=>Mc(e,Oc.NOVEMBER,Tc.SUNDAY,1,2)},FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MT:{timezoneOffsetDuringDst:-360,timezoneOffsetNonDst:-420,dstStart:e=>Mc(e,Oc.MARCH,Tc.SUNDAY,2,2),dstEnd:e=>Mc(e,Oc.NOVEMBER,Tc.SUNDAY,1,2)},MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:{timezoneOffsetDuringDst:-420,timezoneOffsetNonDst:-480,dstStart:e=>Mc(e,Oc.MARCH,Tc.SUNDAY,2,2),dstEnd:e=>Mc(e,Oc.NOVEMBER,Tc.SUNDAY,1,2)},PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function Mc(e,t,r,n,s=0){let i=0,a=0;for(;a<n;)i++,new Date(e,t-1,i).getDay()===r&&a++;return new Date(e,t-1,i,s)}function zc(e,t,r,n=0){const s=0===r?7:r,i=new Date(e,t-1+1,1,12),a=0===i.getDay()?7:i.getDay();let o;return o=a===s?7:a<s?7+a-s:a-s,i.setDate(i.getDate()-o),new Date(e,t-1,i.getDate(),n)}function Yc(e,t,r={}){if(null==e)return null;if("number"==typeof e)return e;const n=r[e]??qc[e];return null==n?null:"number"==typeof n?n:null==t?null:Nc(t).isAfter(n.dstStart(t.getFullYear()))&&!Nc(t).isAfter(n.dstEnd(t.getFullYear()))?n.timezoneOffsetDuringDst:n.timezoneOffsetNonDst}Nc.extend(Dc);class Lc{constructor(e){(e=e??new Date)instanceof Date?this.instant=e:(this.instant=e.instant??new Date,this.timezoneOffset=Yc(e.timezone,this.instant))}getDateWithAdjustedTimezone(){return new Date(this.instant.getTime()+6e4*this.getSystemTimezoneAdjustmentMinute(this.instant))}getSystemTimezoneAdjustmentMinute(e,t){(!e||e.getTime()<0)&&(e=new Date);const r=-e.getTimezoneOffset();return r-(t??this.timezoneOffset??r)}}class Uc{constructor(e,t){if(this._tags=new Set,this.reference=e,this.knownValues={},this.impliedValues={},t)for(const e in t)this.knownValues[e]=t[e];const r=Nc(e.instant);this.imply("day",r.date()),this.imply("month",r.month()+1),this.imply("year",r.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues||(this.impliedValues[e]=t),this}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){const e=new Uc(this.reference);e.knownValues={},e.impliedValues={};for(const t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(const t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!(this.isCertain("weekday")||this.isCertain("day")||this.isCertain("month")||this.isCertain("year"))}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isDateWithUnknownYear(){return this.isCertain("month")&&!this.isCertain("year")}isValidDate(){const e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||null!=this.get("hour")&&e.getHours()!=this.get("hour")||null!=this.get("minute")&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {\n            tags: ${JSON.stringify(Array.from(this._tags).sort())}, \n            knownValues: ${JSON.stringify(this.knownValues)}, \n            impliedValues: ${JSON.stringify(this.impliedValues)}}, \n            reference: ${JSON.stringify(this.reference)}]`}dayjs(){return Nc(this.date())}date(){const e=this.dateWithoutTimezoneAdjustment(),t=this.reference.getSystemTimezoneAdjustmentMinute(e,this.get("timezoneOffset"));return new Date(e.getTime()+6e4*t)}addTag(e){return this._tags.add(e),this}addTags(e){for(const t of e)this._tags.add(t);return this}tags(){return new Set(this._tags)}dateWithoutTimezoneAdjustment(){const e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}static createRelativeFromReference(e,t){let r=Nc(e.instant);for(const e in t)r=r.add(t[e],e);const n=new Uc(e);return n.addTag("result/relativeDate"),t.hour||t.minute||t.second?(n.addTag("result/relativeDateAndTime"),jc(n,r),Ic(n,r),null!==e.timezoneOffset&&n.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(Rc(n,r),null!==e.timezoneOffset&&n.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(n.assign("day",r.date()),n.assign("month",r.month()+1),n.assign("year",r.year())):t.week?(n.assign("day",r.date()),n.assign("month",r.month()+1),n.assign("year",r.year()),n.imply("weekday",r.day())):(n.imply("day",r.date()),t.month?(n.assign("month",r.month()+1),n.assign("year",r.year())):(n.imply("month",r.month()+1),t.year?n.assign("year",r.year()):n.imply("year",r.year())))),n}}class Vc{constructor(e,t,r,n,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=r,this.start=n||new Uc(e),this.end=s}clone(){const e=new Vc(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}addTag(e){return this.start.addTag(e),this.end&&this.end.addTag(e),this}addTags(e){return this.start.addTags(e),this.end&&this.end.addTags(e),this}tags(){const e=new Set(this.start.tags());if(this.end)for(const t of this.end.tags())e.add(t);return e}toString(){const e=Array.from(this.tags()).sort();return`[ParsingResult {index: ${this.index}, text: '${this.text}', tags: ${JSON.stringify(e)} ...}]`}}function Bc(e,t,r="\\s{0,5},?\\s{0,5}"){const n=t.replace(/\((?!\?)/g,"(?:");return`${e}${n}(?:${r}${n}){0,10}`}function Wc(e){const t=function(e){let t;return t=e instanceof Array?[...e]:e instanceof Map?Array.from(e.keys()):Object.keys(e),t}(e).sort(((e,t)=>t.length-e.length)).join("|").replace(/\./g,"\\.");return`(?:${t})`}function Hc(e){return e<100&&(e+=e>50?1900:2e3),e}function Qc(e,t,r){const n=Nc(e);let s=n;s=s.month(r-1),s=s.date(t),s=s.year(n.year());const i=s.add(1,"y"),a=s.add(-1,"y");return Math.abs(i.diff(n))<Math.abs(s.diff(n))?s=i:Math.abs(a.diff(n))<Math.abs(s.diff(n))&&(s=a),s.year()}const Kc={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6},Gc={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},Jc={...Gc,jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12},Zc={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},Xc={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31},ed={second:"second",seconds:"second",minute:"minute",minutes:"minute",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",quarter:"quarter",quarters:"quarter",year:"year",years:"year"},td={s:"second",sec:"second",second:"second",seconds:"second",m:"minute",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",d:"d",day:"d",days:"d",w:"w",week:"week",weeks:"week",mo:"month",mon:"month",mos:"month",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year",...ed},rd=`(?:${Wc(Zc)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|the|a?\\s{0,2}couple\\s{0,2}(?:of)?)`,nd=`(?:${Wc(Xc)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function sd(e){let t=e.toLowerCase();return void 0!==Xc[t]?Xc[t]:(t=t.replace(/(?:st|nd|rd|th)$/i,""),parseInt(t))}const id="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9]|2[0-5])";function ad(e){return/BE/i.test(e)?(e=e.replace(/BE/i,""),parseInt(e)-543):/BCE?/i.test(e)?(e=e.replace(/BCE?/i,""),-parseInt(e)):/(AD|CE)/i.test(e)?(e=e.replace(/(AD|CE)/i,""),parseInt(e)):Hc(parseInt(e))}const od=`(${rd})\\s{0,3}(${Wc(td)})`,ld=new RegExp(od,"i"),cd=`(${rd})\\s{0,3}(${Wc(ed)})`,dd="\\s{0,5},?(?:\\s*and)?\\s{0,5}",ud=Bc("(?:(?:about|around)\\s{0,3})?",od,dd),hd=Bc("(?:(?:about|around)\\s{0,3})?",cd,dd);function md(e){const t={};let r=e,n=ld.exec(r);for(;n;)pd(t,n),r=r.substring(n[0].length).trim(),n=ld.exec(r);return 0==Object.keys(t).length?null:t}function pd(e,t){if(t[0].match(/^[a-zA-Z]+$/))return;const r=function(e){const t=e.toLowerCase();return void 0!==Zc[t]?Zc[t]:"a"===t||"an"===t||"the"==t?1:t.match(/few/)?3:t.match(/half/)?.5:t.match(/couple/)?2:t.match(/several/)?7:parseFloat(t)}(t[1]);e[td[t[2].toLowerCase()]]=r}class fd{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}innerPatternHasChange(e,t){return this.innerPattern(e)!==t}patternLeftBoundary(){return"(\\W|^)"}pattern(e){return this.cachedInnerPattern&&!this.innerPatternHasChange(e,this.cachedInnerPattern)||(this.cachedInnerPattern=this.innerPattern(e),this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${this.cachedInnerPattern.source}`,this.cachedInnerPattern.flags)),this.cachedPattern}extract(e,t){const r=t[1]??"";t.index=t.index+r.length,t[0]=t[0].substring(r.length);for(let e=2;e<t.length;e++)t[e-1]=t[e];return this.innerExtract(e,t)}}const yd=new RegExp(`(?:(?:within|in|for)\\s*)?(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${ud})(?=\\W|$)`,"i"),gd=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${ud})(?=\\W|$)`,"i"),vd=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${hd})(?=\\W|$)`,"i");class bd extends fd{constructor(e){super(),this.strictMode=e}innerPattern(e){return this.strictMode?vd:e.option.forwardDate?yd:gd}innerExtract(e,t){if(t[0].match(/^for\s*the\s*\w+/))return null;const r=md(t[1]);return r?Uc.createRelativeFromReference(e.reference,r):null}}const wd=new RegExp(`(?:on\\s{0,3})?(${nd})(?:\\s{0,3}(?:to|\\-|\\–|until|through|till)?\\s{0,3}(${nd}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${Wc(Jc)})(?:(?:-|/|,?\\s{0,3})(${id}(?!\\w)))?(?=\\W|$)`,"i");class Sd extends fd{innerPattern(){return wd}innerExtract(e,t){const r=e.createParsingResult(t.index,t[0]),n=Jc[t[3].toLowerCase()],s=sd(t[1]);if(s>31)return t.index=t.index+t[1].length,null;if(r.start.assign("month",n),r.start.assign("day",s),t[4]){const e=ad(t[4]);r.start.assign("year",e)}else{const t=Qc(e.refDate,s,n);r.start.imply("year",t)}if(t[2]){const e=sd(t[2]);r.end=r.start.clone(),r.end.assign("day",e)}return r}}const xd=new RegExp(`(${Wc(Jc)})(?:-|/|\\s*,?\\s*)(${nd})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${nd})\\s*)?(?:(?:-|/|\\s*,\\s*|\\s+)(${id}))?(?=\\W|$)(?!\\:\\d)`,"i");class $d extends fd{constructor(e){super(),this.shouldSkipYearLikeDate=e}innerPattern(){return xd}innerExtract(e,t){const r=Jc[t[1].toLowerCase()],n=sd(t[2]);if(n>31)return null;if(this.shouldSkipYearLikeDate&&!t[3]&&!t[4]&&t[2].match(/^2[0-5]$/))return null;const s=e.createParsingComponents({day:n,month:r}).addTag("parser/ENMonthNameMiddleEndianParser");if(t[4]){const e=ad(t[4]);s.assign("year",e)}else{const t=Qc(e.refDate,n,r);s.imply("year",t)}if(!t[3])return s;const i=sd(t[3]),a=e.createParsingResult(t.index,t[0]);return a.start=s,a.end=s.clone(),a.end.assign("day",i),a}}const Ed=new RegExp(`((?:in)\\s*)?(${Wc(Jc)})\\s*(?:(?:,|-|of)?\\s*(${id})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i");class _d extends fd{innerPattern(){return Ed}innerExtract(e,t){const r=t[2].toLowerCase();if(t[0].length<=3&&!Gc[r])return null;const n=e.createParsingResult(t.index+(t[1]||"").length,t.index+t[0].length);n.start.imply("day",1),n.start.addTag("parser/ENMonthNameParser");const s=Jc[r];if(n.start.assign("month",s),t[3]){const e=ad(t[3]);n.start.assign("year",e)}else{const t=Qc(e.refDate,1,s);n.start.imply("year",t)}return n}}const Cd=new RegExp(`([0-9]{4})[-\\.\\/\\s](?:(${Wc(Jc)})|([0-9]{1,2}))[-\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i");class Ad extends fd{constructor(e){super(),this.strictMonthDateOrder=e}innerPattern(){return Cd}innerExtract(e,t){const r=parseInt(t[1]);let n=parseInt(t[4]),s=t[3]?parseInt(t[3]):Jc[t[2].toLowerCase()];if(s<1||s>12){if(this.strictMonthDateOrder)return null;n>=1&&n<=12&&([s,n]=[n,s])}return n<1||n>31?null:{day:n,month:s,year:r}}}const kd=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i");class Td extends fd{innerPattern(){return kd}innerExtract(e,t){const r=parseInt(t[2]),n=parseInt(t[1]);return e.createParsingComponents().imply("day",1).assign("month",n).assign("year",r)}}class Od{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?!/)(?=\\W|$)"}followingSuffix(){return"(?!/)(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){const r=this.extractPrimaryTimeComponents(e,t);if(!r)return t[0].match(/^\d{4}/)?(t.index+=4,null):(t.index+=t[0].length,null);const n=t.index+t[1].length,s=t[0].substring(t[1].length),i=e.createParsingResult(n,s,r);t.index+=t[0].length;const a=e.text.substring(t.index),o=this.getFollowingTimePatternThroughCache().exec(a);if(s.match(/^\d{3,4}/)&&o){if(o[0].match(/^\s*([+-])\s*\d{2,4}$/))return null;if(o[0].match(/^\s*([+-])\s*\d{2}\W\d{2}/))return null}return!o||o[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(i):(i.end=this.extractFollowingTimeComponents(e,o,i),i.end&&(i.text+=o[0]),this.checkAndReturnWithFollowingPattern(i))}extractPrimaryTimeComponents(e,t,r=!1){const n=e.createParsingComponents();let s=0,i=null,a=parseInt(t[2]);if(a>100){if(this.strictMode||null!=t[3])return null;s=a%100,a=Math.floor(a/100)}if(a>24)return null;if(null!=t[3]){if(1==t[3].length&&!t[6])return null;s=parseInt(t[3])}if(s>=60)return null;if(a>12&&(i=kc.PM),null!=t[6]){if(a>12)return null;const e=t[6][0].toLowerCase();"a"==e&&(i=kc.AM,12==a&&(a=0)),"p"==e&&(i=kc.PM,12!=a&&(a+=12))}if(n.assign("hour",a),n.assign("minute",s),null!==i?n.assign("meridiem",i):a<12?n.imply("meridiem",kc.AM):n.imply("meridiem",kc.PM),null!=t[5]){const e=parseInt(t[5].substring(0,3));if(e>=1e3)return null;n.assign("millisecond",e)}if(null!=t[4]){const e=parseInt(t[4]);if(e>=60)return null;n.assign("second",e)}return n}extractFollowingTimeComponents(e,t,r){const n=e.createParsingComponents();if(null!=t[5]){const e=parseInt(t[5].substring(0,3));if(e>=1e3)return null;n.assign("millisecond",e)}if(null!=t[4]){const e=parseInt(t[4]);if(e>=60)return null;n.assign("second",e)}let s=parseInt(t[2]),i=0,a=-1;if(null!=t[3]?i=parseInt(t[3]):s>100&&(i=s%100,s=Math.floor(s/100)),i>=60||s>24)return null;if(s>=12&&(a=kc.PM),null!=t[6]){if(s>12)return null;const e=t[6][0].toLowerCase();"a"==e&&(a=kc.AM,12==s&&(s=0,n.isCertain("day")||n.imply("day",n.get("day")+1))),"p"==e&&(a=kc.PM,12!=s&&(s+=12)),r.start.isCertain("meridiem")||(a==kc.AM?(r.start.imply("meridiem",kc.AM),12==r.start.get("hour")&&r.start.assign("hour",0)):(r.start.imply("meridiem",kc.PM),12!=r.start.get("hour")&&r.start.assign("hour",r.start.get("hour")+12)))}return n.assign("hour",s),n.assign("minute",i),a>=0?n.assign("meridiem",a):r.start.isCertain("meridiem")&&r.start.get("hour")>12?r.start.get("hour")-12>s?n.imply("meridiem",kc.AM):s<=12&&(n.assign("hour",s+12),n.assign("meridiem",kc.PM)):s>12?n.imply("meridiem",kc.PM):s<=12&&n.imply("meridiem",kc.AM),n.date().getTime()<r.start.date().getTime()&&n.imply("day",n.get("day")+1),n}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/))return null;if(e.text.match(/^\d\d\d+$/))return null;if(e.text.match(/\d[apAP]$/))return null;const t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){const e=t[1];if(this.strictMode)return null;if(e.includes(".")&&!e.match(/\d(\.\d{2})+$/))return null;if(parseInt(e)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;const t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;const e=t[1],r=t[2];if(r.includes(".")&&!r.match(/\d(\.\d{2})+$/))return null;const n=parseInt(r),s=parseInt(e);if(n>24||s>24)return null}return e}getPrimaryTimePatternThroughCache(){const e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t||(this.cachedPrimaryTimePattern=function(e,t,r,n){return new RegExp(`${e}${t}(\\d{1,4})(?:(?:\\.|:|：)(\\d{1,2})(?:(?::|：)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${r}`,n)}(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t),this.cachedPrimaryTimePattern}getFollowingTimePatternThroughCache(){const e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t||(this.cachedFollowingTimePatten=function(e,t){return new RegExp(`^(${e})(\\d{1,4})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,"i")}(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t),this.cachedFollowingTimePatten}}class Pd extends Od{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\–|\\~|\\〜|to|until|through|till|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){const r=super.extractPrimaryTimeComponents(e,t);if(!r)return r;if(t[0].endsWith("night")){const e=r.get("hour");e>=6&&e<12?(r.assign("hour",r.get("hour")+12),r.assign("meridiem",kc.PM)):e<6&&r.assign("meridiem",kc.AM)}if(t[0].endsWith("afternoon")){r.assign("meridiem",kc.PM);const e=r.get("hour");e>=0&&e<=6&&r.assign("hour",r.get("hour")+12)}return t[0].endsWith("morning")&&(r.assign("meridiem",kc.AM),r.get("hour")<12&&r.assign("hour",r.get("hour"))),r.addTag("parser/ENTimeExpressionParser")}extractFollowingTimeComponents(e,t,r){const n=super.extractFollowingTimeComponents(e,t,r);return n&&n.addTag("parser/ENTimeExpressionParser"),n}}function Dd(e){const t={};for(const r in e)t[r]=-e[r];return t}const Nd=new RegExp(`(${ud})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),Id=new RegExp(`(${hd})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i");class jd extends fd{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Id:Nd}innerExtract(e,t){const r=md(t[1]);if(!r)return null;const n=Dd(r);return Uc.createRelativeFromReference(e.reference,n)}}const Fd=new RegExp(`(${ud})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),Rd=new RegExp(`(${hd})\\s{0,5}(later|after|from now)(?=\\W|$)`,"i");class qd extends fd{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Rd:Fd}innerExtract(e,t){const r=md(t[1]);return r?Uc.createRelativeFromReference(e.reference,r):null}}class Md{refine(e,t){return t.filter((t=>this.isValid(e,t)))}}class zd{refine(e,t){if(t.length<2)return t;const r=[];let n=t[0],s=null;for(let i=1;i<t.length;i++){s=t[i];const a=e.text.substring(n.index+n.text.length,s.index);if(this.shouldMergeResults(a,n,s,e)){const t=n,r=s,i=this.mergeResults(a,t,r,e);e.debug((()=>{console.log(`${this.constructor.name} merged ${t} and ${r} into ${i}`)})),n=i}else r.push(n),n=s}return null!=n&&r.push(n),r}}class Yd extends zd{shouldMergeResults(e,t,r){return!t.end&&!r.end&&null!=e.match(this.patternBetween())}mergeResults(e,t,r){if(t.start.isOnlyWeekdayComponent()||r.start.isOnlyWeekdayComponent()||(r.start.getCertainComponents().forEach((e=>{t.start.isCertain(e)||t.start.imply(e,r.start.get(e))})),t.start.getCertainComponents().forEach((e=>{r.start.isCertain(e)||r.start.imply(e,t.start.get(e))}))),t.start.date().getTime()>r.start.date().getTime()){let e=t.start.dayjs(),n=r.start.dayjs();r.start.isOnlyWeekdayComponent()&&n.add(7,"days").isAfter(e)?(n=n.add(7,"days"),r.start.imply("day",n.date()),r.start.imply("month",n.month()+1),r.start.imply("year",n.year())):t.start.isOnlyWeekdayComponent()&&e.add(-7,"days").isBefore(n)?(e=e.add(-7,"days"),t.start.imply("day",e.date()),t.start.imply("month",e.month()+1),t.start.imply("year",e.year())):r.start.isDateWithUnknownYear()&&n.add(1,"years").isAfter(e)?(n=n.add(1,"years"),r.start.imply("year",n.year())):t.start.isDateWithUnknownYear()&&e.add(-1,"years").isBefore(n)?(e=e.add(-1,"years"),t.start.imply("year",e.year())):[r,t]=[t,r]}const n=t.clone();return n.start=t.start,n.end=r.start,n.index=Math.min(t.index,r.index),t.index<r.index?n.text=t.text+e+r.text:n.text=r.text+e+t.text,n}}class Ld extends Yd{patternBetween(){return/^\s*(to|-|–|until|through|till)\s*$/i}}function Ud(e,t){const r=e.clone(),n=e.start,s=t.start;if(r.start=Vd(n,s),null!=e.end||null!=t.end){const n=Vd(null==e.end?e.start:e.end,null==t.end?t.start:t.end);if(null==e.end&&n.date().getTime()<r.start.date().getTime()){const e=n.dayjs().add(1,"day");n.isCertain("day")?Ic(n,e):Fc(n,e)}r.end=n}return r}function Vd(e,t){const r=e.clone();return t.isCertain("hour")?(r.assign("hour",t.get("hour")),r.assign("minute",t.get("minute")),t.isCertain("second")?(r.assign("second",t.get("second")),t.isCertain("millisecond")?r.assign("millisecond",t.get("millisecond")):r.imply("millisecond",t.get("millisecond"))):(r.imply("second",t.get("second")),r.imply("millisecond",t.get("millisecond")))):(r.imply("hour",t.get("hour")),r.imply("minute",t.get("minute")),r.imply("second",t.get("second")),r.imply("millisecond",t.get("millisecond"))),t.isCertain("timezoneOffset")&&r.assign("timezoneOffset",t.get("timezoneOffset")),t.isCertain("meridiem")?r.assign("meridiem",t.get("meridiem")):null!=t.get("meridiem")&&null==r.get("meridiem")&&r.imply("meridiem",t.get("meridiem")),r.get("meridiem")==kc.PM&&r.get("hour")<12&&(t.isCertain("hour")?r.assign("hour",r.get("hour")+12):r.imply("hour",r.get("hour")+12)),r.addTags(e.tags()),r.addTags(t.tags()),r}class Bd extends zd{shouldMergeResults(e,t,r){return(t.start.isOnlyDate()&&r.start.isOnlyTime()||r.start.isOnlyDate()&&t.start.isOnlyTime())&&null!=e.match(this.patternBetween())}mergeResults(e,t,r){const n=t.start.isOnlyDate()?Ud(t,r):Ud(r,t);return n.index=t.index,n.text=t.text+e+r.text,n}}class Wd extends Bd{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-|\\.|∙|:)?\\s*$")}}const Hd=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i");class Qd{constructor(e){this.timezoneOverrides=e}refine(e,t){const r=e.option.timezones??{};return t.forEach((t=>{const n=e.text.substring(t.index+t.text.length),s=Hd.exec(n);if(!s)return;const i=s[1].toUpperCase(),a=t.start.date()??t.refDate??new Date,o={...this.timezoneOverrides,...r},l=Yc(i,a,o);if(null==l)return;e.debug((()=>{console.log(`Extracting timezone: '${i}' into: ${l} for: ${t.start}`)}));const c=t.start.get("timezoneOffset");if(null!==c&&l!=c){if(t.start.isCertain("timezoneOffset"))return;if(i!=s[1])return}t.start.isOnlyDate()&&i!=s[1]||(t.text+=s[0],t.start.isCertain("timezoneOffset")||t.start.assign("timezoneOffset",l),null==t.end||t.end.isCertain("timezoneOffset")||t.end.assign("timezoneOffset",l))})),t}}const Kd=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i");class Gd{refine(e,t){return t.forEach((function(t){if(t.start.isCertain("timezoneOffset"))return;const r=e.text.substring(t.index+t.text.length),n=Kd.exec(r);if(!n)return;e.debug((()=>{console.log(`Extracting timezone: '${n[0]}' into : ${t}`)}));let s=60*parseInt(n[2])+parseInt(n[3]||"0");s>840||("-"===n[1]&&(s=-s),null!=t.end&&t.end.assign("timezoneOffset",s),t.start.assign("timezoneOffset",s),t.text+=n[0])})),t}}class Jd{refine(e,t){if(t.length<2)return t;const r=[];let n=t[0];for(let s=1;s<t.length;s++){const i=t[s];if(i.index>=n.index+n.text.length){r.push(n),n=i;continue}let a=null,o=null;i.text.length>n.text.length?(a=i,o=n):(a=n,o=i),e.debug((()=>{console.log(`${this.constructor.name} remove ${o} by ${a}`)})),n=a}return null!=n&&r.push(n),r}}class Zd{refine(e,t){return e.option.forwardDate?(t.forEach((t=>{let r=Nc(e.refDate);if(t.start.isOnlyTime()&&r.isAfter(t.start.dayjs())&&(r=r.add(1,"day"),Fc(t.start,r),t.end&&t.end.isOnlyTime()&&(Fc(t.end,r),t.start.dayjs().isAfter(t.end.dayjs())&&(r=r.add(1,"day"),Fc(t.end,r))),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} time result (${t.start})`)}))),t.start.isOnlyWeekdayComponent()&&r.isAfter(t.start.dayjs())&&(r=r.day()>=t.start.get("weekday")?r.day(t.start.get("weekday")+7):r.day(t.start.get("weekday")),t.start.imply("day",r.date()),t.start.imply("month",r.month()+1),t.start.imply("year",r.year()),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} weekday (${t.start})`)})),t.end&&t.end.isOnlyWeekdayComponent()&&(r=r.day()>t.end.get("weekday")?r.day(t.end.get("weekday")+7):r.day(t.end.get("weekday")),t.end.imply("day",r.date()),t.end.imply("month",r.month()+1),t.end.imply("year",r.year()),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} weekday (${t.end})`)})))),t.start.isDateWithUnknownYear()&&r.isAfter(t.start.dayjs()))for(let n=0;n<3&&r.isAfter(t.start.dayjs());n++)t.start.imply("year",t.start.get("year")+1),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} year (${t.start})`)})),t.end&&!t.end.isCertain("year")&&(t.end.imply("year",t.end.get("year")+1),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} month (${t.start})`)})))})),t):t}}class Xd extends Md{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug((()=>{console.log(`Removing unlikely result '${t.text}'`)})),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug((()=>{console.log(`Removing invalid result: ${t} (${t.end})`)})),!1):!this.strictMode||this.isStrictModeValid(e,t):(e.debug((()=>{console.log(`Removing invalid result: ${t} (${t.start})`)})),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug((()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)})),!1):!!(!t.start.isOnlyTime()||t.start.isCertain("hour")&&t.start.isCertain("minute"))||(e.debug((()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)})),!1)}}const eu=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i");class tu extends fd{innerPattern(){return eu}innerExtract(e,t){const r=e.createParsingComponents({year:parseInt(t[1]),month:parseInt(t[2]),day:parseInt(t[3])});if(null!=t[4]&&(r.assign("hour",parseInt(t[4])),r.assign("minute",parseInt(t[5])),null!=t[6]&&r.assign("second",parseInt(t[6])),null!=t[7]&&r.assign("millisecond",parseInt(t[7])),null!=t[8])){let e=0;if(t[9]){const r=parseInt(t[9]);let n=0;null!=t[10]&&(n=parseInt(t[10])),e=60*r,e<0?e-=n:e+=n}r.assign("timezoneOffset",e)}return r.addTag("parser/ISOFormatParser")}}class ru extends zd{mergeResults(e,t,r){const n=r.clone();return n.index=t.index,n.text=t.text+e+n.text,n.start.assign("weekday",t.start.get("weekday")),n.end&&n.end.assign("weekday",t.start.get("weekday")),n}shouldMergeResults(e,t,r){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&r.start.isCertain("day")&&null!=e.match(/^,?\s*$/)}}function nu(e,t){let r=Nc(e.instant);const n=new Uc(e,{});return r=r.add(t,"day"),Ic(n,r),Rc(n,r),n}const su=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i;class iu extends fd{innerPattern(e){return su}innerExtract(e,t){let r=Nc(e.refDate);const n=t[0].toLowerCase();let s=e.createParsingComponents();switch(n){case"now":s=function(e){const t=Nc(e.instant),r=new Uc(e,{});return Ic(r,t),jc(r,t),null!==e.timezoneOffset&&r.assign("timezoneOffset",t.utcOffset()),r.addTag("casualReference/now"),r}(e.reference);break;case"today":s=function(e){const t=Nc(e.instant),r=new Uc(e,{});return Ic(r,t),Rc(r,t),r.addTag("casualReference/today"),r}(e.reference);break;case"yesterday":s=function(e){return nu(e,-1)}(e.reference).addTag("casualReference/yesterday");break;case"tomorrow":case"tmr":case"tmrw":s=nu(e.reference,1).addTag("casualReference/tomorrow");break;case"tonight":s=function(e,t=22){const r=Nc(e.instant),n=new Uc(e,{});return Ic(n,r),n.imply("hour",t),n.imply("meridiem",kc.PM),n.addTag("casualReference/tonight"),n}(e.reference);break;default:n.match(/last\s*night/)&&(r.hour()>6&&(r=r.add(-1,"day")),Ic(s,r),s.imply("hour",0))}return s.addTag("parser/ENCasualDateParser"),s}}const au=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|midday|noon)(?=\W|$)/i;class ou extends fd{innerPattern(){return au}innerExtract(e,t){let r=null;switch(t[1].toLowerCase()){case"afternoon":r=function(e,t=15){const r=new Uc(e,{});return r.imply("meridiem",kc.PM),r.imply("hour",t),r.imply("minute",0),r.imply("second",0),r.imply("millisecond",0),r.addTag("casualReference/afternoon"),r}(e.reference);break;case"evening":case"night":r=function(e,t=20){const r=new Uc(e,{});return r.imply("meridiem",kc.PM),r.imply("hour",t),r.addTag("casualReference/evening"),r}(e.reference);break;case"midnight":r=function(e){const t=new Uc(e,{}),r=Nc(e.instant);return r.hour()>2&&function(e,t){Fc(e,t=t.add(1,"day")),Rc(e,t)}(t,r),t.assign("hour",0),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/midnight"),t}(e.reference);break;case"morning":r=function(e,t=6){const r=new Uc(e,{});return r.imply("meridiem",kc.AM),r.imply("hour",t),r.imply("minute",0),r.imply("second",0),r.imply("millisecond",0),r.addTag("casualReference/morning"),r}(e.reference);break;case"noon":case"midday":r=function(e){const t=new Uc(e,{});return t.imply("meridiem",kc.AM),t.imply("hour",12),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/noon"),t}(e.reference)}return r&&r.addTag("parser/ENCasualTimeParser"),r}}function lu(e,t){let r=t-e.getDay();return r<0&&(r+=7),r}function cu(e,t){let r=t-e.getDay();return r>=0&&(r-=7),r}const du=new RegExp(`(?:(?:\\,|\\(|\\（)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${Wc(Kc)}|weekend|weekday)(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i");class uu extends fd{innerPattern(){return du}innerExtract(e,t){const r=t[1],n=t[3];let s=r||n;s=s||"",s=s.toLowerCase();let i=null;"last"==s||"past"==s?i="last":"next"==s?i="next":"this"==s&&(i="this");const a=t[2].toLowerCase();let o;if(void 0!==Kc[a])o=Kc[a];else if("weekend"==a)o="last"==i?Tc.SUNDAY:Tc.SATURDAY;else{if("weekday"!=a)return null;{const t=e.reference.getDateWithAdjustedTimezone().getDay();t==Tc.SUNDAY||t==Tc.SATURDAY?o="last"==i?Tc.FRIDAY:Tc.MONDAY:(o=t-1,o="last"==i?o-1:o+1,o=o%5+1)}}return function(e,t,r){const n=function(e,t,r){const n=e.getDay();switch(r){case"this":return lu(e,t);case"last":return cu(e,t);case"next":return n==Tc.SUNDAY?t==Tc.SUNDAY?7:t:n==Tc.SATURDAY?t==Tc.SATURDAY?7:t==Tc.SUNDAY?8:1+t:t<n&&t!=Tc.SUNDAY?lu(e,t):lu(e,t)+7}return function(e,t){const r=cu(e,t),n=lu(e,t);return n<-r?n:r}(e,t)}(e.getDateWithAdjustedTimezone(),t,r);let s=new Uc(e);return s=function(e,t){const r=e.clone();let n=e.dayjs();for(const e in t)n=n.add(t[e],e);return("day"in t||"d"in t||"week"in t||"month"in t||"year"in t)&&(r.imply("day",n.date()),r.imply("month",n.month()+1),r.imply("year",n.year())),("second"in t||"minute"in t||"hour"in t)&&(r.imply("second",n.second()),r.imply("minute",n.minute()),r.imply("hour",n.hour())),r}(s,{day:n}),s.assign("weekday",t),s}(e.reference,o,i)}}const hu=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${Wc(td)})(?=\\s*)(?=\\W|$)`,"i");class mu extends fd{innerPattern(){return hu}innerExtract(e,t){const r=t[1].toLowerCase(),n=t[2].toLowerCase(),s=td[n];if("next"==r||r.startsWith("after")){const t={};return t[s]=1,Uc.createRelativeFromReference(e.reference,t)}if("last"==r||"past"==r){const t={};return t[s]=-1,Uc.createRelativeFromReference(e.reference,t)}const i=e.createParsingComponents();let a=Nc(e.reference.instant);return n.match(/week/i)?(a=a.add(-a.get("d"),"d"),i.imply("day",a.date()),i.imply("month",a.month()+1),i.imply("year",a.year())):n.match(/month/i)?(a=a.add(1-a.date(),"d"),i.imply("day",a.date()),i.assign("year",a.year()),i.assign("month",a.month()+1)):n.match(/year/i)&&(a=a.add(1-a.date(),"d"),a=a.add(-a.month(),"month"),i.imply("day",a.date()),i.imply("month",a.month()+1),i.assign("year",a.year())),i}}const pu=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i");class fu{constructor(e){this.groupNumberMonth=e?3:2,this.groupNumberDay=e?2:3}pattern(){return pu}extract(e,t){const r=t.index+t[1].length,n=t.index+t[0].length-t[5].length;if(r>0&&e.text.substring(0,r).match("\\d/?$"))return;if(n<e.text.length&&e.text.substring(n).match("^/?\\d"))return;const s=e.text.substring(r,n);if(s.match(/^\d\.\d$/)||s.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/))return;if(!t[4]&&s.indexOf("/")<0)return;const i=e.createParsingResult(r,s);let a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12){if(!(o>=1&&o<=12&&a<=31))return null;[o,a]=[a,o]}if(o<1||o>31)return null;if(i.start.assign("day",o),i.start.assign("month",a),t[4]){const e=Hc(parseInt(t[4]));i.start.assign("year",e)}else{const t=Qc(e.refDate,o,a);i.start.imply("year",t)}return i.addTag("parser/SlashDateFormatParser")}}const yu=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${ud})(?=\\W|$)`,"i"),gu=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${hd})(?=\\W|$)`,"i");class vu extends fd{constructor(e=!0){super(),this.allowAbbreviations=e}innerPattern(){return this.allowAbbreviations?yu:gu}innerExtract(e,t){const r=t[1].toLowerCase();let n=md(t[2]);if(!n)return null;switch(r){case"last":case"past":case"-":n=Dd(n)}return Uc.createRelativeFromReference(e.reference,n)}}function bu(e){return null!=e.text.match(/^-/i)}class wu extends zd{shouldMergeResults(e,t,r){return!!e.match(/^\s*$/i)&&(null!=r.text.match(/^[+-]/i)||bu(r))}mergeResults(e,t,r,n){let s=md(r.text);bu(r)&&(s=Dd(s));const i=Uc.createRelativeFromReference(new Lc(t.start.date()),s);return new Vc(t.reference,t.index,`${t.text}${e}${r.text}`,i)}}function Su(e){return null!=e.text.match(/\s+(before|from)$/i)}class xu extends zd{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,r){return!(!e.match(this.patternBetween())||!Su(t)&&(n=t,null==n.text.match(/\s+(after|since)$/i))||!r.start.get("day")||!r.start.get("month")||!r.start.get("year"));var n}mergeResults(e,t,r){let n=md(t.text);Su(t)&&(n=Dd(n));const s=Uc.createRelativeFromReference(new Lc(r.start.date()),n);return new Vc(r.reference,t.index,`${t.text}${e}${r.text}`,s)}}const $u=new RegExp(`^\\s*(${id})`,"i");class Eu{refine(e,t){return t.forEach((function(t){if(!t.start.isDateWithUnknownYear())return;const r=e.text.substring(t.index+t.text.length),n=$u.exec(r);if(!n)return;e.debug((()=>{console.log(`Extracting year: '${n[0]}' into : ${t}`)}));const s=ad(n[1]);null!=t.end&&t.end.assign("year",s),t.start.assign("year",s),t.text+=n[0]})),t}}class _u extends Md{constructor(){super()}isValid(e,t){const r=t.text.trim();return r===e.text.trim()||("may"!==r.toLowerCase()||e.text.substring(0,t.index).trim().match(/\b(in)$/i)?!r.toLowerCase().endsWith("the second")||(e.text.substring(t.index+t.text.length).trim().length>0&&e.debug((()=>{console.log(`Removing unlikely result: ${t}`)})),!1):(e.debug((()=>{console.log(`Removing unlikely result: ${t}`)})),!1))}}class Cu{createCasualConfiguration(e=!1){const t=this.createConfiguration(!1,e);return t.parsers.push(new iu),t.parsers.push(new ou),t.parsers.push(new _d),t.parsers.push(new mu),t.parsers.push(new vu),t.refiners.push(new _u),t}createConfiguration(e=!0,t=!1){const r=function(e,t=!1){return e.parsers.unshift(new tu),e.refiners.unshift(new ru),e.refiners.unshift(new Gd),e.refiners.unshift(new Jd),e.refiners.push(new Qd),e.refiners.push(new Jd),e.refiners.push(new Zd),e.refiners.push(new Xd(t)),e}({parsers:[new fu(t),new bd(e),new Sd,new $d(t),new uu,new Td,new Pd(e),new jd(e),new qd(e)],refiners:[new Wd]},e);return r.parsers.unshift(new Ad(e)),r.refiners.unshift(new xu),r.refiners.unshift(new wu),r.refiners.unshift(new Jd),r.refiners.push(new Wd),r.refiners.push(new Eu),r.refiners.push(new Ld),r}}class Au{constructor(e){this.defaultConfig=new Cu,e=e||this.defaultConfig.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new Au({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,r){const n=this.parse(e,t,r);return n.length>0?n[0].start.date():null}parse(e,t,r){const n=new ku(e,t,r);let s=[];return this.parsers.forEach((e=>{const t=Au.executeParser(n,e);s=s.concat(t)})),s.sort(((e,t)=>e.index-t.index)),this.refiners.forEach((function(e){s=e.refine(n,s)})),s}static executeParser(e,t){const r=[],n=t.pattern(e),s=e.text;let i=e.text,a=n.exec(i);for(;a;){const o=a.index+s.length-i.length;a.index=o;const l=t.extract(e,a);if(!l){i=s.substring(a.index+1),a=n.exec(i);continue}let c=null;l instanceof Vc?c=l:l instanceof Uc?(c=e.createParsingResult(a.index,a[0]),c.start=l):c=e.createParsingResult(a.index,a[0],l);const d=c.index,u=c.text;e.debug((()=>console.log(`${t.constructor.name} extracted (at index=${d}) '${u}'`))),r.push(c),i=s.substring(d+u.length),a=n.exec(i)}return r}}class ku{constructor(e,t,r){this.text=e,this.reference=new Lc(t),this.option=r??{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof Uc?e:new Uc(this.reference,e)}createParsingResult(e,t,r,n){const s="string"==typeof t?t:this.text.substring(e,t),i=r?this.createParsingComponents(r):null,a=n?this.createParsingComponents(n):null;return new Vc(this.reference,e,s,i,a)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}}const Tu=new Cu,Ou=new Au(Tu.createCasualConfiguration(!1));new Au(Tu.createConfiguration(!0,!1)),new Au(Tu.createCasualConfiguration(!0));const Pu=Ou;var Du;const Nu=(0,D.Ay)(),Iu=null==Nu||null==(Du=Nu.common)||null==(Du=Du.conf)?void 0:Du.SCHEDULED_QUERIES,ju={greater:(e,t)=>e>t,greater_equal:(e,t)=>e>=t,less:(e,t)=>e<t,less_equal:(e,t)=>e<=t},Fu=()=>{const e=null==Iu?void 0:Iu.JSONSCHEMA;return e?(Object.entries(e.properties).forEach((([t,r])=>{if(r.default&&"date-time"===r.format){const s=(n=r.default,Pu.parseDate(n,undefined,undefined));e.properties[t]={...r,default:s?s.toISOString():null}}var n})),e):{}},Ru=()=>{const e=(null==Iu?void 0:Iu.VALIDATION)||[];return(t,r)=>(e.forEach((e=>{const n=ju[e.name],s=e.arguments.map((e=>t[e])),i=e.container||e.arguments.slice(-1)[0];var a;n(s[0],s[1])||null==(a=r[i])||a.addError(e.message)})),r)},qu=(0,b.I4)(Ht.A)`
  padding-bottom: ${({theme:e})=>2*e.sizeUnit}px;
`,Mu=(0,b.I4)(me.$)`
  ${({theme:e})=>`\n    background: none;\n    text-transform: none;\n    padding: 0px;\n    font-size: 14px;\n    font-weight: ${e.fontWeightNormal};\n    margin-left: 0;\n    &:disabled {\n      margin-left: 0;\n      background: none;\n      &:hover {\n        background: none;\n      }\n    }\n  `}
`,zu=b.I4.div`
  i.glyphicon {
    display: none;
  }
  .btn-add::after {
    content: '+';
  }
  .array-item-move-up::after {
    content: '↑';
  }
  .array-item-move-down::after {
    content: '↓';
  }
  .array-item-remove::after {
    content: '-';
  }
`,Yu=({defaultLabel:e=(0,w.t)("Undefined"),sql:t,schema:r,dbId:i,onSchedule:a=()=>{},scheduleQueryWarning:o,tooltip:l,disabled:c=!1})=>{const[d,u]=(0,s.useState)(""),[h,m]=(0,s.useState)(e),[p,f]=(0,s.useState)(!1),y=(0,s.useRef)();return(0,n.Y)("span",{className:"ScheduleQueryButton",children:(0,n.Y)(_e.g,{ref:y,modalTitle:(0,w.t)("Schedule query"),modalBody:(0,n.FD)(Wt.l,{layout:"vertical",children:[(0,n.Y)(qu,{children:(0,n.Y)(Qt.A,{xs:24,children:(0,n.Y)(Kt.e,{label:(0,w.t)("Label"),children:(0,n.Y)(fe.A,{type:"text",placeholder:(0,w.t)("Label for your query"),value:h,onChange:e=>m(e.target.value)})})})}),(0,n.Y)(qu,{children:(0,n.Y)(Qt.A,{xs:24,children:(0,n.Y)(Kt.e,{label:(0,w.t)("Description"),children:(0,n.Y)(fe.A.TextArea,{rows:4,placeholder:(0,w.t)("Write a description for your query"),value:d,onChange:e=>u(e.target.value)})})})}),(0,n.Y)(Ht.A,{children:(0,n.Y)(Qt.A,{xs:24,children:(0,n.Y)(zu,{children:(0,n.Y)(ql,{schema:Fu(),uiSchema:null==Iu?void 0:Iu.UISCHEMA,onSubmit:({formData:e})=>{var n;const s={label:h,description:d,db_id:i,schema:r,sql:t,extra_json:JSON.stringify({schedule_info:e})};a(s),null==y||null==(n=y.current)||n.close()},customValidate:Ru(),validator:Ac,children:(0,n.Y)(me.$,{buttonStyle:"primary",htmlType:"submit",css:{float:"right"},children:(0,w.t)("Submit")})})})})}),o&&(0,n.Y)(Ht.A,{children:(0,n.Y)(Qt.A,{xs:24,children:(0,n.Y)("small",{children:o})})})]}),triggerNode:(0,n.Y)(Mu,{onClick:()=>f(!p),buttonSize:"small",buttonStyle:"link",tooltip:l,disabled:c,children:(0,w.t)("Schedule")})})})},Lu=b.I4.div`
  ${({theme:e})=>a.AH`
    font-size: ${e.fontSizeSM};
  `}
`,Uu=({getEstimate:e,queryEditorId:t,tooltip:r="",disabled:a=!1})=>{const o=(0,i.d4)((e=>{var r;return null==(r=e.sqlLab.queryCostEstimates)?void 0:r[t]})),{selectedText:l}=ke(t,["selectedText"]),{cost:c}=o||{},d=(0,s.useMemo)((()=>Array.isArray(c)?c:[]),[c]),u=(0,s.useMemo)((()=>Array.isArray(c)&&c.length?Object.keys(c[0]).map((e=>({accessor:e,Header:e,id:e}))):[]),[c]),h=l?(0,w.t)("Estimate selected query cost"):(0,w.t)("Estimate cost");return(0,n.Y)("span",{className:"EstimateQueryCostButton",children:(0,n.Y)(_e.g,{modalTitle:(0,w.t)("Cost estimate"),modalBody:null!=o&&o.error?(0,n.Y)(de.F,{type:"error",message:null==o?void 0:o.error},"query-estimate-error"):null!=o&&o.completed?(0,n.Y)(Lu,{children:(0,n.Y)(Re.Q,{columns:u,data:d,withPagination:!1,emptyWrapperType:Re.V.Small})}):(0,n.Y)(Ue.R,{position:"normal"}),triggerNode:(0,n.Y)(me.$,{style:{height:32,padding:"4px 15px"},onClick:()=>{e()},tooltip:r,disabled:a,children:h},"query-estimate-btn")})})};var Vu=r(79378),Bu=r(59744);const Wu=(0,r(64457).Ay)((({queryEditorId:e,addDangerToast:t})=>{const r=Se({queryEditorId:e}),{dbId:s,name:i,schema:o,autorun:l,sql:c,templateParams:d}=ke(e,["dbId","name","schema","autorun","sql","templateParams"]);return(0,n.Y)(xe.$r,{getText:e=>(r($.GM,{shortcut:!1}),(e=>{const r={dbId:s,name:i,schema:o,autorun:l,sql:c,templateParams:d};return Vu.A.post({endpoint:"/api/v1/sqllab/permalink",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((({json:t})=>{e(t.url)})).catch((e=>{(0,Bu.h4)(e).then((()=>{t((0,w.t)("There was an error with your request"))}))}))})(e)),wrapped:!1,copyNode:(()=>{const e=(0,w.t)("Copy query link to your clipboard");return(0,n.FD)(me.$,{buttonSize:"small",buttonStyle:"secondary",tooltip:e,css:a.AH`
          span > :first-of-type {
            margin-right: 0;
          }
        `,children:[(0,n.Y)(q.F.LinkOutlined,{iconSize:"m"}),(0,w.t)("Copy link")]})})()})}));var Hu=r(63950),Qu=r.n(Hu),Ku=r(94083),Gu=r(43303),Ju=r(28392);const Zu=e=>{const t=(0,b.DP)();return(0,n.Y)(a.Z2,{children:({css:r})=>(0,n.Y)(T.m,{overlayClassName:r`
            .ant-tooltip-inner {
              max-width: ${125*t.sizeUnit}px;
              word-wrap: break-word;
              text-align: center;

              pre {
                background: transparent;
                border: none;
                text-align: left;
                color: ${t.colorBgLayout};
                font-size: ${t.fontSizeXS}px;
              }
            }
          `,...e})})},Xu=b.I4.hr`
  margin-top: ${({theme:e})=>1.5*e.sizeUnit}px;
`,eh={pk:"fa-key",fk:"fa-link",index:"fa-bookmark"},th={pk:(0,w.t)("Primary key"),fk:(0,w.t)("Foreign key"),index:(0,w.t)("Index")},rh=b.I4.div`
  white-space: nowrap;
`,nh=({column:e})=>{let t,r=e.name;return e.keys&&e.keys.length>0&&(r=(0,n.Y)("strong",{children:e.name}),t=e.keys.map(((e,t)=>(0,n.Y)("span",{className:"ColumnElement",children:(0,n.FD)(Zu,{placement:"right",title:(0,n.FD)(n.FK,{children:[(0,n.Y)("strong",{children:th[e.type]}),(0,n.Y)(Xu,{}),(0,n.Y)("pre",{className:"text-small",children:JSON.stringify(e,null,"  ")})]}),children:[" ",(0,n.Y)("i",{className:`fa text-muted ${eh[e.type]}`})]})},t)))),(0,n.FD)(Nt.s,{align:"center",justify:"space-between",children:[(0,n.FD)("div",{children:[r,t]}),(0,n.Y)(rh,{className:"text-muted",children:(0,n.FD)("small",{children:[" ",e.type]})})]})},sh=b.I4.span`
  cursor: pointer;
`,ih=b.I4.div`
  transition: all ${({theme:e})=>e.motionDurationMid};
  opacity: ${e=>e.hovered?1:0};
`,ah=({table:e,...t})=>{const{dbId:r,catalog:a,schema:o,name:l,expanded:c,id:d}=e,h=(0,b.DP)(),m=(0,i.wA)(),{currentData:p,isSuccess:f,isFetching:y,isError:g}=(0,Ft.rq)({dbId:r,catalog:a,schema:o,table:l},{skip:!c}),{currentData:v,isSuccess:S,isLoading:x,isError:$}=(0,Ft.ii)({dbId:r,catalog:a,schema:o,table:l},{skip:!c}),E={...p,...v},_=(0,i.d4)((e=>e.sqlLab.queryEditors)),C={...E,...e},{queryEditorId:A}=C,k=_.find((e=>e.id===A||e.tabViewId===A)),O=(null==k?void 0:k.tabViewId)||A;(0,s.useEffect)((()=>{(g||$)&&m((0,u.addDangerToast)((0,w.t)("An error occurred while fetching table metadata")))}),[g,$,m]);const P=(0,U.A)((()=>{const{initialized:t}=e,r=O&&!Number.isNaN(Number(O))&&C.queryEditorId!==O;!t&&r&&m((0,u.syncTable)(C,E,O))}));(0,s.useEffect)((()=>{f&&S&&P()}),[f,S,O,P]);const[D,N]=(0,s.useState)(!1),[I,j]=(0,s.useState)(!1),F=(0,s.useRef)(null),R=e=>{L()((()=>j(e)),100)()},M=()=>{m((0,u.removeDataPreview)(e)),m((0,u.removeTables)([e]))},z=()=>{N((e=>!e))},Y=()=>{m(Ft.z7.invalidateTags([{type:"TableMetadatas",id:l}])),m((0,u.syncTable)(e,E))},V=()=>{let e,t;if(E.partitions){var r;let t,s;if(E.partitions.partitionQuery){({partitionQuery:t}=E.partitions);const e=(0,w.t)("Copy partition query to clipboard");s=(0,n.Y)(xe.$r,{text:t,shouldShowText:!1,tooltipText:e,copyNode:(0,n.Y)(q.F.CopyOutlined,{iconSize:"s"})})}const i=Object.entries((null==(r=E.partitions)?void 0:r.latest)||[]).map((([e,t])=>`${e}=${t}`)).join("/");e=(0,n.FD)("div",{children:[(0,n.FD)("small",{children:[(0,w.t)("latest partition:")," ",i]})," ",s]})}var s;return E.metadata&&(t=Object.entries(E.metadata).map((([e,t])=>(0,n.Y)("div",{children:(0,n.FD)("small",{children:[(0,n.FD)("strong",{children:[e,":"]})," ",t]})}))),null==(s=t)||!s.length)?null:e?(0,n.FD)(Fe.Z,{size:"small",children:[e,t]}):null};return(0,n.Y)(Gu.S,{activeKey:t.activeKey,expandIconPosition:"end",onChange:t.onChange,ghost:!0,items:[{key:d,label:(()=>{const e=F.current;let t=[];return e&&e.offsetWidth<e.scrollWidth&&(t=["hover"]),(0,n.Y)("div",{className:"clearfix header-container",children:(0,n.Y)(T.m,{id:"copy-to-clipboard-tooltip",style:{cursor:"pointer"},title:l,trigger:t,children:(0,n.Y)(sh,{ref:F,className:"table-name",children:(0,n.Y)("strong",{children:l})})})})})(),children:(()=>{var e;let t;E.columns&&(t=E.columns.slice(),D&&t.sort(((e,t)=>{const r=e.name.toUpperCase(),n=t.name.toUpperCase();return r<n?-1:r>n?1:0})));const r=(0,n.FD)("div",{css:{paddingTop:6},children:[V(),(0,n.Y)("div",{children:null==(e=t)?void 0:e.map((e=>(0,n.Y)(nh,{column:e},e.name)))})]});return r})(),extra:(()=>{var e;let t;const r=(0,w.t)("Keys for table");return null!=E&&null!=(e=E.indexes)&&e.length&&(t=(0,n.Y)(_e.g,{modalTitle:`${r} ${l}`,modalBody:E.indexes.map(((e,t)=>(0,n.Y)("pre",{children:JSON.stringify(e,null,"  ")},t))),triggerNode:(0,n.Y)(tt.F,{className:"pull-left",tooltip:(0,w.t)("View keys & indexes (%s)",E.indexes.length),children:(0,n.Y)(q.F.TableOutlined,{iconSize:"m",iconColor:h.colorPrimary})})})),(0,n.Y)(Nt.s,{style:{height:22},align:"center",children:y||x?(0,n.Y)(Ue.R,{position:"inline"}):(0,n.Y)(ih,{hovered:I,onClick:e=>e.stopPropagation(),children:(0,n.Y)(Le,{children:(0,n.FD)(Ju.A,{size:"small",children:[(0,n.Y)(tt.F,{className:"pull-left pointer",onClick:Y,tooltip:(0,w.t)("Refresh table schema"),children:(0,n.Y)(q.F.SyncOutlined,{iconSize:"m",iconColor:h.colorIcon})}),t,(0,n.Y)(tt.F,{onClick:z,tooltip:D?(0,w.t)("Original table column order"):(0,w.t)("Sort columns alphabetically"),children:(0,n.Y)(q.F.SortAscendingOutlined,{iconSize:"m","aria-hidden":!0,iconColor:D?h.colorIcon:h.colorTextDisabled})}),E.selectStar&&(0,n.Y)(xe.$r,{copyNode:(0,n.Y)(tt.F,{"aria-label":(0,w.t)("Copy"),tooltip:(0,w.t)("Copy SELECT statement to the clipboard"),children:(0,n.Y)(q.F.CopyOutlined,{iconSize:"m","aria-hidden":!0,iconColor:h.colorIcon})}),text:E.selectStar,shouldShowText:!1}),E.view&&(0,n.Y)(qt,{sql:E.view,tooltipText:(0,w.t)("Show CREATE VIEW statement"),title:(0,w.t)("CREATE VIEW statement")}),(0,n.Y)(tt.F,{className:" table-remove pull-left pointer",onClick:M,tooltip:(0,w.t)("Remove table preview"),children:(0,n.Y)(q.F.CloseOutlined,{iconSize:"m","aria-hidden":!0,iconColor:h.colorIcon})})]})})})})})(),onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1)}]})},oh=b.I4.div`
  flex: 1 1 auto;
  overflow: auto;
`,lh=b.I4.div`
  ${({theme:e})=>a.AH`
    height: 100%;
    display: flex;
    flex-direction: column;

    .divider {
      border-bottom: 1px solid ${e.colorSplit};
      margin: ${4*e.sizeUnit}px 0;
    }
  `}
`,ch=({database:e,queryEditorId:t})=>{const r=(0,i.d4)((({sqlLab:e})=>e.tables.filter((e=>e.queryEditorId===t))),i.bN),a=(0,i.wA)(),o=ke(t,["dbId","catalog","schema","tabViewId"]),[l,c]=(0,s.useState)(!1),[d,h]=(0,s.useState)(null),{dbId:m,catalog:p,schema:f}=o,y=(0,s.useMemo)((()=>r.filter((e=>e.dbId===m&&e.schema===f))),[r,m,f]);Qu()(l),(0,s.useEffect)((()=>{const t=new URLSearchParams(window.location.search).get("db"),r=(0,we.Gq)(we.Hh.Database,null);t&&r?(h(r),(0,we.SO)(we.Hh.Database,null)):e&&h(e)}),[e]);const g=(0,s.useCallback)((e=>{c(!!e)}),[]),v=(0,s.useMemo)((()=>(null==y?void 0:y.map((e=>e.name)))||[]),[y]),b=e=>{y.forEach((t=>{!e.includes(t.id.toString())&&t.expanded?a((0,u.collapseTable)(t)):e.includes(t.id.toString())&&!t.expanded&&a((0,u.expandTable)(t))}))},S="?reset=1"===window.location.search,x=(0,s.useCallback)((e=>{o&&a((0,u.queryEditorSetCatalog)(o,e))}),[a,o]),$=(0,s.useCallback)((e=>{o&&a((0,u.queryEditorSetSchema)(o,e))}),[a,o]),E=(0,s.useCallback)((e=>{a((0,u.setDatabases)(e))}),[a]),_=(0,s.useCallback)((e=>{a((0,u.addDangerToast)(e))}),[a]),C=(0,s.useCallback)((()=>{a((0,u.resetState)())}),[a]);return(0,n.FD)(lh,{children:[(0,n.Y)(Ku.Kt,{onEmptyResults:g,emptyState:(0,n.Y)(O.p,{}),database:d,getDbList:E,handleError:_,onDbChange:({id:e})=>{a((0,u.queryEditorSetDb)(o,e))},onCatalogChange:x,catalog:p,onSchemaChange:$,schema:f,onTableSelectChange:(e,t,r)=>{if(!r)return;const n=[...y];e.filter((e=>{const t=n.findIndex((t=>t.name===e));return!(t>=0&&(n.splice(t,1),1))})).forEach((e=>{a((0,u.addTable)(o,e,t,r))})),a((0,u.removeTables)(n))},tableValue:v,sqlLabMode:!0}),(0,n.Y)("div",{className:"divider"}),(0,n.Y)(oh,{children:y.map((e=>(0,n.Y)(ah,{table:e,activeKey:y.filter((({expanded:e})=>e)).map((({id:e})=>e)),onChange:b},e.id)))}),S&&(0,n.FD)(me.$,{buttonSize:"small",buttonStyle:"danger",onClick:C,children:[(0,n.Y)(q.F.ClearOutlined,{})," ",(0,w.t)("Reset state")]})]})};var dh=r(6987),uh=r(70532);const hh=[];var mh=r(48582);const ph=l.F.injectEndpoints({endpoints:e=>({databaseFunctions:e.query({providesTags:["DatabaseFunctions"],query:({dbId:e})=>({endpoint:`/api/v1/database/${e}/function_names/`,transformResponse:({json:e})=>e.function_names})})})}),{useDatabaseFunctionsQuery:fh}=ph,yh=[],{useQueryState:gh}=Ft.IX.schemas,{useQueryState:vh}=Ft.PG.tables,bh=e=>e.length>30&&{docText:e},wh=(0,ce.a)(),Sh=({autocomplete:e,onBlur:t=()=>{},onChange:r=()=>{},queryEditorId:o,onCursorPositionChange:c,height:d,hotkeys:h})=>{var m;const p=(0,i.wA)(),f=ke(o,["id","dbId","sql","catalog","schema","templateParams","tabViewId"]),y=(0,i.d4)((({sqlLab:{queryEditors:e}})=>{const{cursorPosition:t}={...e.find((({id:e})=>e===o))};return null!=t?t:{row:0,column:0}}),i.bN),g=null!=(m=f.sql)?m:"",[v,x]=(0,s.useState)(g),$=(0,s.useRef)("");(0,s.useEffect)((()=>{p((0,u.queryEditorSetSelectedText)(f,null))}),[]);const E=(0,Ve.Z)(g);(0,s.useEffect)((()=>{g!==E&&x(g)}),[g]);const{data:_}=function(e){const{sql:t,dbId:r,schema:n,templateParams:s}=e,a=(0,uh.Q)(t,S.$V),o=(0,i.d4)((({sqlLab:e,common:t})=>{var n,s;return Boolean(null==t||null==(n=t.conf)||null==(n=n.SQL_VALIDATORS_BY_ENGINE)?void 0:n[null==e||null==(s=e.databases)||null==(s=s[r||""])?void 0:s.backend])}));return(0,Ft.IV)({dbId:r,schema:n,sql:a,templateParams:s},{skip:!(o&&r&&t),selectFromResult:({isLoading:e,isError:t,error:r,data:n})=>{const s=null!=r?r:{};let i=(null==s?void 0:s.error)||(null==s?void 0:s.statusText)||(0,w.t)("Unknown error");return i.includes("CSRF token")&&(i=(0,w.t)(dh.HL.SESSION_TIMED_OUT)),{data:!e&&null!=n&&n.length?n.map((e=>({type:"error",row:(e.line_number||0)-1,column:(e.start_column||0)-1,text:e.message}))):t?[{type:"error",row:0,column:0,text:`The server failed to validate your query.\n${i}`}]:hh}}})}({dbId:f.dbId,catalog:f.catalog,schema:f.schema,sql:g,templateParams:f.templateParams}),C=function({queryEditorId:e,dbId:t,catalog:r,schema:n,tabViewId:a},o=!1){const c=wh.get("sqleditor.extension.customAutocomplete"),d=null==c?void 0:c({queryEditorId:String(e),dbId:t,catalog:r,schema:n}),h=(0,i.wA)(),m=(0,s.useRef)(!1),p=m&&o,{currentData:f}=gh({dbId:t,catalog:r||void 0,forceRefresh:!1},{skip:p||!t}),{currentData:y}=vh({dbId:t,catalog:r,schema:n,forceRefresh:!1},{skip:p||!t||!n}),{currentData:g,isError:v}=fh({dbId:t},{skip:p||!t});(0,s.useEffect)((()=>{v&&h((0,u.addDangerToast)((0,w.t)("An error occurred while fetching function names.")))}),[h,v]);const b=(0,i.d4)((({sqlLab:t})=>{var r;return o?[]:(null!=(r=null==t?void 0:t.tables)?r:[]).filter((t=>t.queryEditorId===e)).map((e=>e.name))}),i.bN),x=(0,i.Pj)().getState()[l.F.reducerPath],$=(0,s.useMemo)((()=>{const e=new Set;return b.forEach((s=>{var i;null==(i=Ft.PG.tableMetadata.select(t&&n?{dbId:t,catalog:r,schema:n,table:s}:Ft.hT)({[l.F.reducerPath]:x}).data)||null==(i=i.columns)||i.forEach((({name:t})=>{e.add(t)}))})),[...e]}),[t,r,n,x,b]),E=(0,U.A)(((s,i)=>{"table"===i.meta&&h((0,u.addTable)({id:e,dbId:t,tabViewId:a},i.value,r,n,!1));let{caption:o}=i;"table"===i.meta&&o.includes(" ")&&(o=`"${o}"`),s.completer.insertMatch(`${o}${["function","schema"].includes(i.meta)?"":" "}`)})),_=(0,s.useMemo)((()=>(null!=f?f:[]).map((e=>({name:e.label,value:e.value,score:S.e3,meta:"schema",completer:{insertMatch:E},...bh(e.value)})))),[f,E]),C=(0,s.useMemo)((()=>{var e;return(null!=(e=null==y?void 0:y.options)?e:[]).map((({value:e,label:t})=>({name:t,value:e,score:S.de,meta:"table",completer:{insertMatch:E},...bh(e)})))}),[null==y?void 0:y.options,E]),A=(0,s.useMemo)((()=>$.map((e=>({name:e,value:e,score:S.v9,meta:"column",...bh(e)})))),[$]),k=(0,s.useMemo)((()=>(null!=g?g:[]).map((e=>({name:e,value:e,score:S.T_,meta:"function",completer:{insertMatch:E},...bh(e)})))),[g,E]),T=(0,s.useMemo)((()=>A.concat(_).concat(C).concat(k).concat(mh.A).concat(null!=d?d:[])),[_,C,A,k,d]);return m.current=!o,o?yh:T}({queryEditorId:o,dbId:f.dbId,catalog:f.catalog,schema:f.schema,tabViewId:f.tabViewId},!e),A=(0,b.DP)();return(0,n.FD)(n.FK,{children:[(0,n.Y)(a.mL,{styles:a.AH`
          .ace_text-layer {
            width: 100% !important;
          }

          .ace_autocomplete {
            // Use !important because Ace Editor applies extra CSS at the last second
            // when opening the autocomplete.
            width: ${130*A.sizeUnit}px !important;
          }

          .ace_completion-highlight {
            color: ${A.colorPrimaryText} !important;
            background-color: ${A.colorPrimaryBgHover};
          }

          .ace_tooltip {
            max-width: ${S.fq}px;
          }

          .ace_scroller {
            background-color: ${A.colorBgLayout};
          }
        `}),(0,n.Y)($e.pw,{keywords:C,onLoad:e=>{e.commands.addCommand({name:"runQuery",bindKey:{win:"Alt-enter",mac:"Alt-enter"},exec:()=>{t(v)}}),h.forEach((t=>{e.commands.addCommand({name:t.name,bindKey:{win:t.key,mac:t.key},exec:t.func})})),e.$blockScrolling=1/0,e.selection.on("changeSelection",(()=>{const t=e.getSelectedText();t!==$.current&&1!==t.length&&p((0,u.queryEditorSetSelectedText)(f,t)),$.current=t})),e.selection.on("changeCursor",(()=>{const t=e.getCursorPosition();c(t)}));const{row:r,column:n}=y;e.moveCursorToPosition({row:r,column:n}),e.focus(),e.scrollToLine(r,!0,!0)},onBlur:()=>{t(v)},height:d,onChange:e=>{e!==v&&(x(e),r(e))},width:"100%",editorProps:{$blockScrolling:!0},enableLiveAutocompletion:e,value:v,annotations:_})]})},xh=b.I4.span`
  button {
    line-height: 13px;
    // this is to over ride a previous transition built into the component
    transition: background-color 0ms;
    &:last-of-type {
      margin-right: ${({theme:e})=>2*e.sizeUnit}px;
    }
    span[name='caret-down'] {
      display: flex;
      margin-left: ${({theme:e})=>1*e.sizeUnit}px;
    }
  }
`,$h=({allowAsync:e=!1,queryEditorId:t,queryState:r,overlayCreateAsMenu:i,runQuery:a,stopQuery:o})=>{const l=(0,b.DP)(),c=Se({queryEditorId:t}),d=(0,P.UX)(),{selectedText:u,sql:h}=ke(t,["selectedText","sql"]),m=!!r&&["running","pending"].indexOf(r)>-1,p=i?Gt.g:me.$,f=u||h||"",y=!(null!=f&&f.replace(/(\/\*[^*]*\*\/)|(\/\/[^*]*)|(--[^.].*)/gm,"").trim()),g=(0,s.useMemo)((()=>"MacOS"===d?(0,w.t)("Stop running (Ctrl + x)"):(0,w.t)("Stop running (Ctrl + e)")),[d]),{text:v,icon:S}=(0,s.useMemo)((()=>((e,t,r)=>{let s,i=(0,w.t)("Run");return t&&(i=(0,w.t)("Run selection")),e&&(i=(0,w.t)("Stop"),s=(0,n.Y)(q.F.Square,{iconSize:"xs",iconColor:r.colorIcon})),{text:i,icon:s}})(m,u,l)),[m,u,l]);return(0,n.Y)(xh,{children:(0,n.Y)(p,{onClick:()=>((e,t,r=()=>{},n=()=>{},s)=>(s(e?$.fL:$.Mr,{shortcut:!1}),e?n():r(!!t)))(m,e,a,o,c),disabled:y,tooltip:!y&&(m?g:(0,w.t)("Run query (Ctrl + Return)")),cta:!0,...i?{overlay:i,icon:(0,n.Y)(q.F.DownOutlined,{iconColor:y?l.colorTextDisabled:l.colorIcon}),trigger:"click"}:{buttonStyle:m?"danger":"primary",icon:S},children:v})})};function Eh(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")}const _h=({queryEditorId:e,maxRow:t,defaultQueryLimit:r})=>{const s=(0,i.wA)(),a=ke(e,["id","queryLimit"]),o=a.queryLimit||r,l=e=>s((0,u.queryEditorSetQueryLimit)(a,e));return(0,n.Y)(he.ms,{popupRender:()=>function(e,t){const r=[];for(let t=10;t<e;t*=10)r.push(t);return r.push(e),(0,n.Y)(be.W1,{items:[...new Set(r)].map((e=>({key:`${e}`,onClick:()=>t(e),label:`${Eh(e)} `})))})}(t,l),trigger:["click"],children:(0,n.FD)(me.$,{size:"small",showMarginRight:!1,buttonStyle:"link",children:[(0,n.FD)("span",{children:[(0,w.t)("LIMIT"),":"]}),(0,n.Y)("span",{className:"limitDropdown",children:Eh(o)}),(0,n.Y)(q.F.CaretDownOutlined,{iconSize:"m"})]})})},Ch=(0,P.UX)();var Ah;!function(e){e.CtrlR="ctrl+r",e.CtrlEnter="ctrl+enter",e.CtrlShiftEnter="ctrl+shift+enter",e.CtrlP="ctrl+p",e.CtrlQ="ctrl+q",e.CtrlE="ctrl+e",e.CtrlT="ctrl+t",e.CtrlX="ctrl+x",e.AltEnter="alt+enter",e.CmdF="cmd+f",e.CmdOptF="cmd+opt+f",e.CtrlF="ctrl+f",e.CtrlH="ctrl+h",e.CtrlShiftF="ctrl+shift+f",e.CtrlLeft="ctrl+[",e.CtrlRight="ctrl+]"}(Ah||(Ah={}));const kh={[Ah.CtrlR]:(0,w.t)("Run query"),[Ah.CtrlEnter]:(0,w.t)("Run query"),[Ah.AltEnter]:(0,w.t)("Run query"),[Ah.CtrlShiftEnter]:(0,w.t)("Run current query"),[Ah.CtrlX]:"MacOS"===Ch?(0,w.t)("Stop query"):void 0,[Ah.CtrlE]:"MacOS"!==Ch?(0,w.t)("Stop query"):void 0,[Ah.CtrlQ]:"Windows"===Ch?(0,w.t)("New tab"):void 0,[Ah.CtrlT]:"Windows"!==Ch?(0,w.t)("New tab"):void 0,[Ah.CtrlP]:(0,w.t)("Previous Line"),[Ah.CtrlShiftF]:(0,w.t)("Format SQL"),[Ah.CtrlLeft]:(0,w.t)("Switch to the previous tab"),[Ah.CtrlRight]:(0,w.t)("Switch to the next tab"),[Ah.CmdF]:"MacOS"===Ch?(0,w.t)("Find"):void 0,[Ah.CtrlF]:"MacOS"!==Ch?(0,w.t)("Find"):void 0,[Ah.CmdOptF]:"MacOS"===Ch?(0,w.t)("Replace"):void 0,[Ah.CtrlH]:"MacOS"!==Ch?(0,w.t)("Replace"):void 0},Th=Object.entries(kh).reduce(((e,[t,r])=>(r&&(e[r]=[...e[r]||[],t]),e)),{}),Oh=b.I4.span`
  font-size: ${({theme:e})=>e.fontSize}px;
  color: ${({theme:e})=>e.colorTextLabel};
  padding-left: ${({theme:e})=>2*e.sizeUnit}px;
`,Ph=b.I4.div`
  display: flex;
  flex-wrap: wrap;
  gap: ${({theme:e})=>e.sizeUnit}px;
  padding: ${({theme:e})=>2*e.sizeUnit}px;
`,Dh=b.I4.code`
  font-size: ${({theme:e})=>e.fontSizeSM}px;
  color: ${({theme:e})=>e.colorText};
  border-radius: ${({theme:e})=>e.borderRadius}px;
  padding: ${({theme:e})=>`${e.sizeUnit}px ${2*e.sizeUnit}px`};
`,Nh=({children:e})=>(0,n.Y)(_e.g,{modalTitle:(0,w.t)("Keyboard shortcuts"),modalBody:(0,n.Y)("div",{children:Object.entries(Th).map((([e,t])=>(0,n.FD)("div",{css:a.AH`
              display: table-row;
            `,children:[(0,n.Y)("div",{css:a.AH`
                display: table-cell;
                max-width: 200px;
                vertical-align: middle;
              `,children:(0,n.Y)(Oh,{children:e})}),(0,n.Y)("div",{css:a.AH`
                display: table-cell;
              `,children:(0,n.Y)(Ph,{children:t.map((e=>(0,n.Y)(Dh,{children:e},e)))})})]},e)))}),triggerNode:e});var Ih;const jh=(0,D.Ay)(),Fh=null==jh||null==(Ih=jh.common)||null==(Ih=Ih.conf)?void 0:Ih.SCHEDULED_QUERIES,Rh=b.I4.div`
  padding: ${({theme:e})=>2*e.sizeUnit}px;
  background: ${({theme:e})=>e.colorBgContainer};
  display: flex;
  justify-content: space-between;
  border: 1px solid ${({theme:e})=>e.colorBorder};
  border-top: 0;
  column-gap: ${({theme:e})=>e.sizeUnit}px;

  form {
    margin-block-end: 0;
  }

  .leftItems,
  .rightItems {
    display: flex;
    align-items: center;
    & > span {
      margin-right: ${({theme:e})=>2*e.sizeUnit}px;
      display: inline-block;

      &:last-child {
        margin-right: 0;
      }
    }
  }

  .limitDropdown {
    white-space: nowrap;
  }
`,qh=b.I4.div`
  flex: 0 0 ${({width:e})=>e}px;
  width: ${({width:e})=>e}px;
  padding: ${({theme:e,hide:t})=>t?0:2.5*e.sizeUnit}px;
  border-right: 1px solid
    ${({theme:e,hide:t})=>t?"transparent":e.colorBorder};
  height: 100%;
  display: flex;
  flex-direction: column;
`,Mh=b.I4.div`
  ${({theme:e})=>a.AH`
    display: flex;
    flex-direction: row;
    height: 100%;

    .schemaPane {
      transition: transform ${e.motionDurationMid} ease-in-out;
    }

    .queryPane {
      flex: 1 1 auto;
      padding: ${2*e.sizeUnit}px;
      padding-left: 0px;
      overflow-y: auto;
      overflow-x: scroll;
    }

    .schemaPane-enter-done,
    .schemaPane-exit {
      transform: translateX(0);
      z-index: 7;
    }

    .schemaPane-exit-active {
      transform: translateX(-120%);
    }

    .schemaPane-enter-active {
      transform: translateX(0);
      max-width: ${75*e.sizeUnit}px;
    }

    .schemaPane-enter,
    .schemaPane-exit-done {
      max-width: 0;
      transform: translateX(-120%);
      overflow: hidden;
    }

    .schemaPane-exit-done + .queryPane {
      margin-left: 0;
    }

    .gutter {
      border-top: 1px solid ${e.colorBorder};
      border-bottom: 1px solid ${e.colorBorder};
      width: 3%;
      margin: ${S.oL}px 47%;
    }

    .gutter.gutter-vertical {
      cursor: row-resize;
    }
  `}
`,zh=(0,ce.a)(),Yh=(e,t,r)=>({[e]:`calc(${t}% - ${r+S.oL}px)`}),Lh=({queryEditor:e,defaultQueryLimit:t,maxRow:r,displayLimit:l,saveQueryWarning:c,scheduleQueryWarning:d})=>{const h=(0,b.DP)(),m=(0,i.wA)(),{database:p,latestQuery:f,hideLeftBar:y,currentQueryEditorId:g,hasSqlStatement:x}=(0,i.d4)((({sqlLab:{unsavedQueryEditor:t,databases:r,queries:n,tabHistory:s}})=>{var i;let{dbId:a,latestQueryId:o,hideLeftBar:l}=e;return(null==t?void 0:t.id)===e.id&&(a=t.dbId||a,o=t.latestQueryId||o,l="boolean"==typeof t.hideLeftBar?t.hideLeftBar:l),{hasSqlStatement:Boolean((null==(i=e.sql)?void 0:i.trim().length)>0),database:r[a||""],latestQuery:n[o||""],hideLeftBar:l,currentQueryEditorId:s.slice(-1)[0]}}),i.bN),E=Se({queryEditorId:e.id}),_=g===e.id,[C,A]=(0,s.useState)(e.autorun),[k,T]=(0,s.useState)(""),[D,N]=(0,s.useState)(e.northPercent||S.du),[I,j]=(0,s.useState)(e.southPercent||S.tR),[F,R]=(0,s.useState)((0,we.Gq)(we.Hh.SqllabIsAutocompleteEnabled,!0)),[M,Y]=(0,s.useState)((0,we.Gq)(we.Hh.SqllabIsRenderHtmlEnabled,!0)),[V,B]=(0,s.useState)(!1),[W,H]=(0,s.useState)(""),Q=(0,s.useRef)(e.sql),K=(0,s.useMemo)((()=>!p||z()(p)),[p]),G=(0,s.useRef)(null),J=(0,s.useRef)(null),Z=zh.get("sqleditor.extension.form"),X=(0,s.useCallback)(((r=!1,n=u.CtasEnum.Table)=>{p&&(m((0,u.runQueryFromSqlEditor)(p,e,t,r?k:"",r,n)),m((0,u.setActiveSouthPaneTab)("Results")))}),[k,p,t,m,e]),ee=(0,s.useCallback)((t=>{E($.Ob,{shortcut:Boolean(t)}),m((0,u.formatQuery)(e))}),[m,e,E]),te=(0,s.useCallback)((()=>(f&&["running","pending"].indexOf(f.state)>=0&&m((0,u.postStopQuery)(f)),!1)),[m,f]),re=()=>{p&&X()};(0,s.useEffect)((()=>{C&&(A(!1),m((0,u.queryEditorSetAutorun)(e,!1)),X())}),[C,m,e,X]);const ne=(0,s.useCallback)((()=>{const t=(0,P.UX)();return[{name:"runQuery1",key:Ah.CtrlR,descr:kh[Ah.CtrlR],func:()=>{""!==e.sql.trim()&&(E($.Mr,{shortcut:!0}),X())}},{name:"runQuery2",key:Ah.CtrlEnter,descr:kh[Ah.CtrlEnter],func:()=>{""!==e.sql.trim()&&(E($.Mr,{shortcut:!0}),X())}},{name:"newTab",..."Windows"===t?{key:Ah.CtrlQ,descr:kh[Ah.CtrlQ]}:{key:Ah.CtrlT,descr:kh[Ah.CtrlT]},func:()=>{$.Vy.markTimeOrigin(),m((0,u.addNewQueryEditor)())}},{name:"stopQuery",..."MacOS"===t?{key:Ah.CtrlX,descr:kh[Ah.CtrlX]}:{key:Ah.CtrlE,descr:kh[Ah.CtrlE]},func:()=>{E($.fL,{shortcut:!0}),te()}},{name:"formatQuery",key:Ah.CtrlShiftF,descr:kh[Ah.CtrlShiftF],func:()=>{ee(!0)}},{name:"switchTabToLeft",key:Ah.CtrlLeft,descr:kh[Ah.CtrlLeft],func:()=>{m((0,u.switchQueryEditor)(!0))}},{name:"switchTabToRight",key:Ah.CtrlRight,descr:kh[Ah.CtrlRight],func:()=>{m((0,u.switchQueryEditor)(!1))}}]}),[m,e.sql,X,te,ee]),se=(0,s.useMemo)((()=>{const e=(0,P.UX)(),t=[...ne(),{name:"runQuery3",key:Ah.CtrlShiftEnter,descr:kh[Ah.CtrlShiftEnter],func:e=>{var t,r,n,s;if(!e.getValue().trim())return;const i=e.getSession(),a=e.getCursorPosition(),o=i.getLength(),l=e.getFirstVisibleRow(),c=e.find(";",{backwards:!1,skipCurrent:!0});let d;c&&({end:d}=c),(!d||d.row<a.row)&&(d={row:o+1,column:0});const u=e.find(";",{backwards:!0,skipCurrent:!0});let h;u&&(h=u.end);let m=null==(t=h)?void 0:t.row;(!m||m>a.row||m===a.row&&((null==(r=h)?void 0:r.column)||0)>a.column)&&(m=0);let p=m===(null==(n=h)?void 0:n.row)?i.getLine(m).slice(h.column).trim():i.getLine(m).trim();for(;!p&&m<o;)m+=1,p=i.getLine(m).trim();m!==(null==(s=h)?void 0:s.row)&&(h={row:m,column:0}),e.selection.setSelectionRange({start:null!=h?h:{row:0,column:0},end:d}),X(),e.selection.clearSelection(),e.moveCursorToPosition(a),e.scrollToRow(l)}}];return"MacOS"===e&&t.push({name:"previousLine",key:Ah.CtrlP,descr:kh[Ah.CtrlP],func:e=>{e.navigateUp()}}),t}),[ne,X]),ie=(0,U.A)((e=>{var t;null!=p&&null!=(t=p.extra_json)&&t.cancel_query_on_windows_unload&&"running"===(null==f?void 0:f.state)&&(e.preventDefault(),te())})),ae=(0,o.G7)(o.TO.SqllabBackendPersistence)&&!e.loaded,ce=(0,U.A)((()=>{const t=$.Vy.getTimestamp();E($.CY,{duration:t,queryEditorId:e.id,inLocalStorage:Boolean(e.inLocalStorage),hasLoaded:!ae}),ae&&m((0,u.fetchQueryEditor)(e,l))}));(0,s.useEffect)((()=>(_&&(ce(),window.addEventListener("beforeunload",ie)),()=>{window.removeEventListener("beforeunload",ie)})),[ie,ce,_]),(0,s.useEffect)((()=>{const e=ne();_&&e.forEach((e=>{v().bind([e.key],e.func)}))}),[ne,f,_]);const $e=()=>{const e=document.getElementsByClassName("ace_content")[0];e&&(e.style.height="100%")},Ee=([t,r])=>{var n;N(t),j(r),null!=(n=J.current)&&n.clientHeight&&m((0,u.persistEditorHeight)(e,t,r))},_e=(0,s.useCallback)((t=>{m((0,u.queryEditorSetAndSaveSql)(e,t))}),[m,e]),Ce=(0,s.useMemo)((()=>L()(_e,S.cD)),[_e]),Ae=(0,U.A)((t=>{Q.current=t,m((0,u.queryEditorSetSql)(e,t))})),ke=()=>{E($.Lb,{shortcut:!1}),p&&m((0,u.estimateQueryCost)(e))},Te=async(t,r)=>{const n=await m((0,u.saveQuery)(t,r));m((0,u.addSavedQueryToTabState)(e,n))},Pe=s=>{var i;const{allow_ctas:a,allow_cvas:l}=p||{},y=a||l,g=[a&&{key:"1",label:(0,w.t)("CREATE TABLE AS"),onClick:()=>{E($.Ek,{shortcut:!1}),B(!0),H(u.CtasEnum.Table)}},l&&{key:"2",label:(0,w.t)("CREATE VIEW AS"),onClick:()=>{E($.XC,{shortcut:!1}),B(!0),H(u.CtasEnum.View)}}].filter(Boolean),v=(0,n.Y)(be.W1,{items:g});return(0,n.Y)(Rh,{className:"sql-toolbar",id:"js-sql-toolbar",children:s?(0,n.Y)(de.F,{type:"warning",message:(0,w.t)("The database that was used to generate this query could not be found"),description:(0,w.t)("Choose one of the available databases on the left panel."),closable:!1}):(0,n.FD)(n.FK,{children:[(0,n.FD)("div",{className:"leftItems",children:[(0,n.Y)("span",{children:(0,n.Y)($h,{allowAsync:!0===(null==p?void 0:p.allow_run_async),queryEditorId:e.id,queryState:null==f?void 0:f.state,runQuery:re,stopQuery:te,overlayCreateAsMenu:y?v:null})}),(0,o.G7)(o.TO.EstimateQueryCost)&&(null==p?void 0:p.allows_cost_estimate)&&(0,n.Y)("span",{children:(0,n.Y)(Uu,{getEstimate:ke,queryEditorId:e.id,tooltip:(0,w.t)("Estimate the cost before running a query")})}),(0,n.Y)("span",{children:(0,n.Y)(_h,{queryEditorId:e.id,maxRow:r,defaultQueryLimit:t})}),f&&(0,n.Y)(ue.M,{startTime:f.startDttm,endTime:f.endDttm,status:S.sA[f.state],isRunning:"running"===f.state})]}),(0,n.FD)("div",{className:"rightItems",children:[(0,n.Y)("span",{children:(0,n.Y)(tr,{queryEditorId:e.id,columns:(null==f||null==(i=f.results)?void 0:i.columns)||[],onSave:Te,onUpdate:(e,t)=>m((0,u.updateSavedQuery)(e,t)),saveQueryWarning:c,database:p})}),(0,n.Y)("span",{children:(0,n.Y)(Wu,{queryEditorId:e.id})}),(0,n.Y)(he.ms,{popupRender:()=>(()=>{const t=e,r="success"===(null==f?void 0:f.state),s=r?(0,w.t)("Schedule the query periodically"):(0,w.t)("You must run the query successfully first"),i=[{key:"render-html",label:(0,n.FD)("div",{css:{display:"flex",justifyContent:"space-between"},children:[(0,n.Y)("span",{children:(0,w.t)("Render HTML")})," ",(0,n.Y)(ve.A,{checked:M,onChange:(e,t)=>{t.stopPropagation(),(0,we.SO)(we.Hh.SqllabIsRenderHtmlEnabled,!M),Y(!M)}})]})},{key:"autocomplete",label:(0,n.FD)("div",{css:{display:"flex",justifyContent:"space-between"},children:[(0,n.Y)("span",{children:(0,w.t)("Autocomplete")}),(0,n.Y)(ve.A,{checked:F,onChange:(e,t)=>{t.stopPropagation(),(0,we.SO)(we.Hh.SqllabIsAutocompleteEnabled,!F),R(!F)}})]})},(0,o.G7)(o.TO.EnableTemplateProcessing)&&{key:"template-params",label:(0,n.Y)(Oe,{language:"json",onChange:e=>{m((0,u.queryEditorSetTemplateParams)(t,e))},queryEditorId:t.id})},{key:"format-sql",label:(0,w.t)("Format SQL"),onClick:()=>ee()},!z()(Fh)&&{key:"schedule-query",label:(0,n.Y)(Yu,{defaultLabel:t.name,sql:t.sql,onSchedule:e=>m((0,u.scheduleQuery)(e)),schema:t.schema,dbId:t.dbId,scheduleQueryWarning:d,tooltip:s,disabled:!r})},{key:"keyboard-shortcuts",label:(0,n.Y)(Nh,{children:(0,w.t)("Keyboard shortcuts")})}].filter(Boolean);return(0,n.Y)(be.W1,{css:{width:50*h.sizeUnit},items:i})})(),trigger:["click"],children:(0,n.Y)(me.$,{buttonSize:"xsmall",showMarginRight:!1,buttonStyle:"link",children:(0,n.Y)(q.F.EllipsisOutlined,{})})})]})]})})},De=t=>{m((0,u.queryEditorSetCursorPosition)(e,t))},Ne=e=>{e(Q.current)},Ie=W===u.CtasEnum.View?"CREATE VIEW AS":"CREATE TABLE AS",je=W===u.CtasEnum.View?(0,w.t)("Specify name to CREATE VIEW AS schema in: public"):(0,w.t)("Specify name to CREATE TABLE AS schema in: public"),Fe=y?"schemaPane-exit-done":"schemaPane-enter-done";return(0,n.FD)(Mh,{ref:G,className:"SqlEditor",children:[(0,n.Y)(oe,{classNames:"schemaPane",in:!y,timeout:300,children:(0,n.Y)(ye.A,{id:`sqllab:${e.id}`,minWidth:S.fq,initialWidth:S.fq,enable:!y,children:t=>(0,n.Y)(qh,{className:`schemaPane ${Fe}`,width:t,hide:y,children:(0,n.Y)(ch,{database:p,queryEditorId:e.id})})})}),ae?(0,n.Y)("div",{css:a.AH`
            flex: 1;
            padding: ${4*h.sizeUnit}px;
          `,children:(0,n.Y)(ge.A,{active:!0})}):K&&!x?(0,n.Y)(O.p,{image:"vector.svg",size:"large",title:(0,w.t)("Select a database to write a query"),description:(0,w.t)("Choose one of the available databases from the panel on the left.")}):(()=>{const r=G.current?G.current.clientHeight-2*S.b:0,{aceEditorHeight:s,southPaneHeight:i}=((e,t,r)=>({aceEditorHeight:e*t/(25*h.sizeUnit)-(S.B8/2+S.oL)-S.d$,southPaneHeight:e*r/(25*h.sizeUnit)-(S.B8/2+S.oL)}))(r,D,I);return(0,n.FD)(le.A,{expandToMin:!0,className:"queryPane",sizes:[D,I],elementStyle:Yh,minSize:e.isDataset?400:200,direction:"vertical",gutterSize:S.B8,onDragStart:$e,onDragEnd:Ee,children:[(0,n.FD)("div",{ref:J,className:"north-pane",children:[Z&&(0,n.Y)(Z,{queryEditorId:e.id,setQueryEditorAndSaveSqlWithDebounce:Ce,startQuery:X}),e.isDataset&&(0,n.Y)(de.F,{css:a.AH`
        margin-bottom: ${2*h.sizeUnit}px;
        padding-top: ${4*h.sizeUnit}px;
        .ant-alert-action {
          align-self: center;
        }
      `,type:"info",action:(0,n.Y)(xe.$r,{wrapText:!1,copyNode:(0,n.Y)(me.$,{type:"primary",children:(0,w.t)("COPY QUERY")}),getText:Ne}),description:(0,n.Y)("div",{css:a.AH`
            display: flex;
            justify-content: space-between;
            align-items: center;
          `,children:(0,n.FD)("div",{css:a.AH`
              display: flex;
              flex-direction: column;
            `,children:[(0,n.FD)("p",{css:a.AH`
                font-size: ${h.fontSize}px;
                font-weight: ${h.fontWeightStrong};
                color: ${h.colorPrimaryText};
              `,children:[" ",(0,w.t)("You are edting a query from the virtual dataset ")+e.name]}),(0,n.FD)("p",{css:a.AH`
                font-size: ${h.fontSize}px;
                font-weight: ${h.fontWeightStrong};
                color: ${h.colorPrimaryText};
              `,children:[(0,w.t)("After making the changes, copy the query and paste in the virtual dataset SQL snippet settings.")," "]})]})}),message:""}),_&&(0,n.Y)(Sh,{autocomplete:F,onBlur:Ae,onChange:Ae,queryEditorId:e.id,onCursorPositionChange:De,height:`${s}px`,hotkeys:se}),Pe(K)]}),(0,n.Y)(Bt,{queryEditorId:e.id,latestQueryId:null==f?void 0:f.id,height:i,displayLimit:l,defaultQueryLimit:t})]})})(),(0,n.FD)(pe.aF,{show:V,name:(0,w.t)(Ie),title:(0,w.t)(Ie),onHide:()=>B(!1),footer:(0,n.FD)(n.FK,{children:[(0,n.Y)(me.$,{onClick:()=>B(!1),children:(0,w.t)("Cancel")}),W===u.CtasEnum.Table&&(0,n.Y)(me.$,{buttonStyle:"primary",disabled:0===k.length,onClick:()=>{X(!0,u.CtasEnum.Table),B(!1),T("")},children:(0,w.t)("Create")}),W===u.CtasEnum.View&&(0,n.Y)(me.$,{buttonStyle:"primary",disabled:0===k.length,onClick:()=>{X(!0,u.CtasEnum.View),B(!1),T("")},children:(0,w.t)("Create")})]}),children:[(0,n.Y)("span",{children:(0,w.t)("Name")}),(0,n.Y)(fe.A,{placeholder:je,onChange:e=>{T(e.target.value)}})]})]})};var Uh=r(82960);const Vh=b.I4.div`
  display: flex;
  align-items: center;

  [aria-label='check-circle'],
  .status-icon {
    margin: 0px;
  }
`,Bh=b.I4.span`
  margin-right: ${({theme:e})=>2*e.sizeUnit}px;
  text-transform: none;
`,Wh=b.I4.div`
  ${({theme:e})=>a.AH`
    display: inline-block;
    margin: 0 ${2*e.sizeUnit}px 0 0px;
  `}
`,Hh={started:q.F.CircleSolid,stopped:q.F.StopOutlined,pending:q.F.CircleSolid,scheduled:q.F.CalendarOutlined,fetching:q.F.CircleSolid,timedOut:q.F.FieldTimeOutlined,running:q.F.CircleSolid,success:q.F.CheckCircleOutlined,failed:q.F.CloseCircleOutlined},Qh=({queryEditor:e})=>{const t=(0,b.DP)(),r=(0,i.d4)((({sqlLab:{unsavedQueryEditor:t}})=>({...e,...e.id===(null==t?void 0:t.id)&&t})),i.bN),o=(0,i.d4)((({sqlLab:e})=>{var t;return(null==(t=e.queries[r.latestQueryId||""])?void 0:t.state)||""})),l=o?Hh[o]:Hh.running,c=(0,i.wA)(),d=(0,s.useMemo)((()=>(0,Uh.zH)({removeQueryEditor:u.removeQueryEditor,removeAllOtherQueryEditors:u.removeAllOtherQueryEditors,queryEditorSetTitle:u.queryEditorSetTitle,cloneQueryToNewTab:u.cloneQueryToNewTab,toggleLeftBar:u.toggleLeftBar},c)),[c]);return(0,n.FD)(Vh,{children:[(0,n.Y)(he.LO,{trigger:["click"],overlay:(0,n.Y)(be.W1,{items:[{className:"close-btn",key:"1",onClick:()=>d.removeQueryEditor(r),label:(0,n.FD)(n.FK,{children:[(0,n.Y)(Wh,{children:(0,n.Y)(q.F.CloseOutlined,{iconSize:"l",css:a.AH`
                          verticalalign: middle;
                        `})}),(0,w.t)("Close tab")]})},{key:"2",onClick:function(){const e=prompt((0,w.t)("Enter a new title for the tab"));e&&d.queryEditorSetTitle(r,e,r.id)},label:(0,n.FD)(n.FK,{children:[(0,n.Y)(Wh,{children:(0,n.Y)(q.F.EditOutlined,{css:a.AH`
                          verticalalign: middle;
                        `,iconSize:"l"})}),(0,w.t)("Rename tab")]})},{key:"3",onClick:()=>d.toggleLeftBar(r),label:(0,n.FD)(n.FK,{children:[(0,n.Y)(Wh,{children:(0,n.Y)(q.F.VerticalAlignBottomOutlined,{iconSize:"l",css:a.AH`
                          rotate: ${r.hideLeftBar?"-90deg;":"90deg;"};
                        `})}),r.hideLeftBar?(0,w.t)("Expand tool bar"):(0,w.t)("Hide tool bar")]})},{key:"4",onClick:()=>d.removeAllOtherQueryEditors(r),label:(0,n.FD)(n.FK,{children:[(0,n.Y)(Wh,{children:(0,n.Y)(q.F.CloseOutlined,{iconSize:"l",css:a.AH`
                          vertical-align: middle;
                        `})}),(0,w.t)("Close all other tabs")]})},{key:"5",onClick:()=>d.cloneQueryToNewTab(r,!1),label:(0,n.FD)(n.FK,{children:[(0,n.Y)(Wh,{children:(0,n.Y)(q.F.CopyOutlined,{iconSize:"l",css:a.AH`
                          vertical-align: middle;
                        `})}),(0,w.t)("Duplicate tab")]})}]})}),(0,n.Y)(Bh,{children:r.name})," ",(0,n.Y)(l,{className:"status-icon",iconSize:"m",iconColor:((e,t)=>({[We.kZ.Running]:t.colorInfo,[We.kZ.Success]:t.colorSuccess,[We.kZ.Failed]:t.colorError,[We.kZ.Started]:t.colorPrimary,[We.kZ.Stopped]:t.colorWarning,[We.kZ.Pending]:t.colorIcon,[We.kZ.Scheduled]:t.colorIcon,[We.kZ.Fetching]:t.colorWarning,[We.kZ.TimedOut]:t.colorError}[e]||t.colorIcon))(o,t)})," "]})},Kh={queryEditors:[],offline:!1,saveQueryWarning:null,scheduleQueryWarning:null},Gh=(0,b.I4)(C.fn)`
  height: 100%;
  display: flex;
  flex-direction: column;
`,Jh=b.I4.span`
  line-height: 24px;
`,Zh=b.I4.span`
  margin-right: ${({theme:e})=>2*e.sizeUnit}px;
  text-transform: none;
`,Xh=(0,P.UX)(),em="/sqllab";class tm extends s.PureComponent{constructor(e){super(e),this.onTabClicked=()=>{var e;$.Vy.markTimeOrigin(),0===(null==(e=this.props.queryEditors)?void 0:e.length)&&this.newQueryEditor()},this.removeQueryEditor=this.removeQueryEditor.bind(this),this.handleSelect=this.handleSelect.bind(this),this.handleEdit=this.handleEdit.bind(this)}componentDidMount(){var e;const t=(0,D.Ay)(),r=k()(window.location).search(!0),n=k()(window.location).path(),{id:s,name:i,sql:a,savedQueryId:l,datasourceKey:c,queryId:d,dbid:u,dbname:h,catalog:m,schema:p,autorun:f,new:y,...g}={...this.context.requestedQuery,...t.requested_query,...r},v=null==(e=n.match(/\/p\/\w+/))?void 0:e[0].slice(3);if(v||s||a||l||c||d){if(v)this.props.actions.popPermalink(v);else if(s)this.props.actions.popStoredQuery(s);else if(l)this.props.actions.popSavedQuery(l);else if(d)this.props.actions.popQuery(d);else if(c)this.props.actions.popDatasourceQuery(c,a);else if(a){let e=u;if(e)e=parseInt(e,10);else{const{databases:t}=this.props,r=h;r&&Object.keys(t).forEach((n=>{t[n].database_name===r&&(e=t[n].id)}))}const t={name:i,dbId:e,catalog:m,schema:p,autorun:f,sql:a,isDataset:this.context.isDataset};this.props.actions.addQueryEditor(t)}this.popNewTab(_()(g,Object.keys(null!=r?r:{})))}else if(y||0===this.props.queryEditors.length)this.newQueryEditor(),y&&(0,R.d)(em,{},{replace:!0});else{const e=this.activeQueryEditor(),t=this.props.queries[(null==e?void 0:e.latestQueryId)||""];(0,o.G7)(o.TO.SqllabBackendPersistence)&&t&&t.resultsKey&&this.props.actions.fetchQueryResults(t,this.props.displayLimit)}}popNewTab(e){const t=`${k()(em).query(e)}`;(0,R.d)(t,{},{replace:!0})}activeQueryEditor(){if(0===this.props.tabHistory.length)return this.props.queryEditors[0];const e=this.props.tabHistory[this.props.tabHistory.length-1];return this.props.queryEditors.find((t=>t.id===e))||null}newQueryEditor(){this.props.actions.addNewQueryEditor()}handleSelect(e){const t=this.props.tabHistory[this.props.tabHistory.length-1];if(e!==t){const t=this.props.queryEditors.find((t=>t.id===e));if(!t)return;this.props.actions.setActiveQueryEditor(t)}}handleEdit(e,t){if("remove"===t){const t=this.props.queryEditors.find((t=>t.id===e));t&&this.removeQueryEditor(t)}"add"===t&&($.Vy.markTimeOrigin(),this.newQueryEditor())}removeQueryEditor(e){this.props.actions.removeQueryEditor(e)}render(){var e,t,r;const s=null==(e=this.props.queryEditors)?void 0:e.map((e=>({key:e.id,label:(0,n.Y)(Qh,{queryEditor:e}),children:(0,n.Y)(Lh,{queryEditor:e,defaultQueryLimit:this.props.defaultQueryLimit,maxRow:this.props.maxRow,displayLimit:this.props.displayLimit,saveQueryWarning:this.props.saveQueryWarning,scheduleQueryWarning:this.props.scheduleQueryWarning})}))),i={key:"0",label:(0,n.FD)(Jh,{children:[(0,n.Y)(Zh,{children:(0,w.t)("Add a new tab")}),(0,n.Y)(T.m,{id:"add-tab",placement:"bottom",title:"Windows"===Xh?(0,w.t)("New tab (Ctrl + q)"):(0,w.t)("New tab (Ctrl + t)"),children:(0,n.Y)(q.F.PlusCircleOutlined,{iconSize:"s",css:a.AH`
              vertical-align: middle;
            `})})]}),children:(0,n.Y)(O.p,{image:"empty_sql_chart.svg",size:"large",description:(0,w.t)("Add a new tab to create SQL Query")})},o=(null==(t=this.props.queryEditors)?void 0:t.length)>0?s:[i];return(0,n.Y)(Gh,{activeKey:this.props.tabHistory[this.props.tabHistory.length-1],id:"a11y-query-editor-tabs",className:"SqlEditorTabs",onChange:this.handleSelect,hideAdd:this.props.offline,onTabClick:this.onTabClicked,onEdit:this.handleEdit,type:0===(null==(r=this.props.queryEditors)?void 0:r.length)?"card":"editable-card",addIcon:(0,n.Y)(T.m,{id:"add-tab",placement:"bottom",title:"Windows"===Xh?(0,w.t)("New tab (Ctrl + q)"):(0,w.t)("New tab (Ctrl + t)"),children:(0,n.Y)(q.F.PlusCircleOutlined,{iconSize:"l",css:a.AH`
                vertical-align: middle;
              `})}),items:o})}}tm.contextType=N;const rm={...u},nm=(0,i.Ng)((function({sqlLab:e,common:t}){var r,n,s,i;return{databases:e.databases,queryEditors:null!=(r=e.queryEditors)?r:Kh.queryEditors,queries:e.queries,tabHistory:e.tabHistory,defaultDbId:t.conf.SQLLAB_DEFAULT_DBID,displayLimit:t.conf.DISPLAY_MAX_ROW,offline:null!=(n=e.offline)?n:Kh.offline,defaultQueryLimit:t.conf.DEFAULT_SQLLAB_LIMIT,maxRow:t.conf.SQL_MAX_ROW,saveQueryWarning:null!=(s=t.conf.SQLLAB_SAVE_WARNING_MESSAGE)?s:Kh.saveQueryWarning,scheduleQueryWarning:null!=(i=t.conf.SQLLAB_SCHEDULE_WARNING_MESSAGE)?i:Kh.scheduleQueryWarning}}),rm,(function(e,t){return{...e,actions:t}}))(tm);var sm=r(58561),im=r.n(sm),am=r(87470);const om=2e3,lm=function({queries:e,queriesLastUpdate:t}){const r=(0,s.useRef)(!1),n=(0,s.useRef)(!1),a=(0,s.useRef)((0,am.E)(1e3)),o=(0,i.d4)((({sqlLab:e})=>e.databases)),l=(0,s.useRef)(new Set(Object.values(o).filter((({allow_run_async:e})=>Boolean(e))).map((({id:e})=>e)))),c=(0,i.wA)();return function(e,t){const r=(0,s.useRef)(e);(0,s.useEffect)((()=>{r.current=e}),[e]),(0,s.useEffect)((()=>{if(null!==t){const e=setInterval((function(){null==r||null==r.current||r.current()}),t);return()=>clearInterval(e)}return()=>{}}),[t])}((()=>{(()=>{const s=(e=>{let t=!1;const r=Date.now();return Lr()(e)&&(t=Object.values(e).some((e=>(e=>We.P7.includes(null==e?void 0:e.state))(e)&&r-(null==e?void 0:e.startDttm)<216e5))),t})(e);if(!r.current&&s){const e=im().encode({last_updated_ms:t-5e3}),n=new AbortController;r.current=!0,Vu.A.get({endpoint:`/api/v1/query/updated_since?q=${e}`,timeout:1e4,parseMethod:"json-bigint",signal:n.signal}).then((({json:e})=>{if(e){var t;const s=e;if(null!=s&&null!=(t=s.result)&&t.length){var r,n;const e=null!=(r=null==s||null==(n=s.result)?void 0:n.reduce(((e,t)=>(e[t.id]=t,e)),{}))?r:{};c((0,u.refreshQueries)(e)),s.result.forEach((e=>{const{id:t,dbId:r,state:n}=e;var s;l.current.has(r)&&!a.current.has(t)&&n===We.kZ.Failed&&(c((0,u.logFailedQuery)(e,null==(s=e.extra)?void 0:s.errors)),a.current.set(t,!0))}))}else c((0,u.clearInactiveQueries)(om))}})).catch((()=>{n.abort()})).finally((()=>{r.current=!1}))}n.current||s||(c((0,u.clearInactiveQueries)(om)),n.current=!0)})()}),om),null},cm=b.I4.div`
  ${({theme:e})=>a.AH`
    &.SqlLab {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      padding: 0 ${2*e.sizeUnit}px;

      pre:not(.code) {
        padding: 0 !important;
        margin: 0;
        border: none;
        font-size: ${e.fontSizeSM}px;
        background: transparent !important;
      }

      .north-pane {
        display: flex;
        flex-direction: column;
      }

      .ace_editor {
        flex-grow: 1;
      }

      .ace_content {
        height: 100%;
      }

      .ant-tabs-content-holder {
        /* This is needed for Safari */
        height: 100%;
      }

      .ant-tabs-content {
        height: 100%;
        position: relative;
        background-color: ${e.colorBgContainer};
        overflow-x: auto;
        overflow-y: auto;

        > .ant-tabs-tabpane {
          position: absolute;
          top: 0;
          right: 0;
          bottom: 0;
          left: 0;
        }
      }

      .ResultsModal .ant-modal-body {
        min-height: ${140*e.sizeUnit}px;
      }

      .ant-modal-body {
        overflow: auto;
      }
    }
  `};
`;class dm extends s.PureComponent{constructor(e){super(e),this.hasLoggedLocalStorageUsage=void 0,this.state={hash:window.location.hash},this.showLocalStorageUsageWarning=f()(this.showLocalStorageUsageWarning,S.Cq,{trailing:!1})}componentDidMount(){window.addEventListener("hashchange",this.onHashChanged.bind(this)),document.body.style.overscrollBehaviorX="none"}componentDidUpdate(){const{localStorageUsageInKilobytes:e,actions:t,queries:r}=this.props,n=Object.keys(r||{}).length||0;if(e>=S.sC*S.QJ&&this.showLocalStorageUsageWarning(e,n),e>0&&!this.hasLoggedLocalStorageUsage){const r={current_usage:e,query_count:n};t.logEvent($.A_,r),this.hasLoggedLocalStorageUsage=!0}}componentWillUnmount(){window.removeEventListener("hashchange",this.onHashChanged.bind(this)),document.body.style.overscrollBehaviorX="auto",v().reset()}onHashChanged(){this.setState({hash:window.location.hash})}showLocalStorageUsageWarning(e,t){this.props.actions.addDangerToast((0,w.t)("SQL Lab uses your browser's local storage to store queries and results.\nCurrently, you are using %(currentUsage)s KB out of %(maxStorage)d KB storage space.\nTo keep SQL Lab from crashing, please delete some query tabs.\nYou can re-access these queries by using the Save feature before you delete the tab.\nNote that you will need to close other SQL Lab windows before you do this.",{currentUsage:e.toFixed(2),maxStorage:S.QJ}));const r={current_usage:e,query_count:t};this.props.actions.logEvent($.hK,r)}render(){const{queries:e,queriesLastUpdate:t}=this.props;return this.state.hash&&"#search"===this.state.hash?(0,n.Y)(y.rd,{to:{pathname:"/sqllab/history/"}}):(0,n.FD)(cm,{className:"App SqlLab",children:[(0,n.Y)(lm,{queries:e,queriesLastUpdate:t}),(0,n.Y)(nm,{})]})}}const um={addDangerToast:h.iB,logEvent:x.logEvent},hm=(0,i.Ng)((function(e){const{common:t,localStorageUsageInKilobytes:r,sqlLab:n}=e;return{common:t,localStorageUsageInKilobytes:r,queries:null==n?void 0:n.queries,queriesLastUpdate:null==n?void 0:n.queriesLastUpdate}}),um,(function(e,t,r){return{...r,...e,actions:t}}))(dm);var mm=r(13235);function pm(){const e=(0,i.d4)((e=>e.sqlLab.queriesLastUpdate||0)),{data:t,isLoading:r,isError:l,error:c,fulfilledTimeStamp:p}=d(),f=e<=(p||0),y=(0,i.wA)(),g=(0,U.A)((e=>{f&&y((0,u.resetState)(e))}));return(0,s.useEffect)((()=>{t&&g(t)}),[t,g]),r||f?(0,n.Y)(Ue.R,{}):l&&null!=c&&c.message?(y((0,h.iB)(null==c?void 0:c.message)),null):(0,n.Y)(F,{children:(0,n.FD)("div",{css:a.AH`
          flex: 1 1 auto;
          position: relative;
          display: flex;
          flex-direction: column;
        `,children:[(0,n.Y)(m,{}),(0,n.Y)(hm,{}),(0,o.G7)(o.TO.SqllabBackendPersistence)&&(0,n.Y)(mm.Ay,{})]})})}},4042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var n=r(62586);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return n.KeywordCxt}});var s=r(99029);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return s.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return s.CodeGen}});const i=r(13558),a=r(34551),o=r(10396),l=r(73835),c=r(99029),d=r(66939),u=r(10208),h=r(94227),m=r(63837),p=r(55944),f=(e,t)=>new RegExp(e,t);f.code="new RegExp";const y=["removeAdditional","useDefaults","coerceTypes"],g=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),v={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},b={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function w(e){var t,r,n,s,i,a,o,l,c,d,u,h,m,y,g,v,b,w,S,x,$,E,_,C,A;const k=e.strict,T=null===(t=e.code)||void 0===t?void 0:t.optimize,O=!0===T||void 0===T?1:T||0,P=null!==(n=null===(r=e.code)||void 0===r?void 0:r.regExp)&&void 0!==n?n:f,D=null!==(s=e.uriResolver)&&void 0!==s?s:p.default;return{strictSchema:null===(a=null!==(i=e.strictSchema)&&void 0!==i?i:k)||void 0===a||a,strictNumbers:null===(l=null!==(o=e.strictNumbers)&&void 0!==o?o:k)||void 0===l||l,strictTypes:null!==(d=null!==(c=e.strictTypes)&&void 0!==c?c:k)&&void 0!==d?d:"log",strictTuples:null!==(h=null!==(u=e.strictTuples)&&void 0!==u?u:k)&&void 0!==h?h:"log",strictRequired:null!==(y=null!==(m=e.strictRequired)&&void 0!==m?m:k)&&void 0!==y&&y,code:e.code?{...e.code,optimize:O,regExp:P}:{optimize:O,regExp:P},loopRequired:null!==(g=e.loopRequired)&&void 0!==g?g:200,loopEnum:null!==(v=e.loopEnum)&&void 0!==v?v:200,meta:null===(b=e.meta)||void 0===b||b,messages:null===(w=e.messages)||void 0===w||w,inlineRefs:null===(S=e.inlineRefs)||void 0===S||S,schemaId:null!==(x=e.schemaId)&&void 0!==x?x:"$id",addUsedSchema:null===($=e.addUsedSchema)||void 0===$||$,validateSchema:null===(E=e.validateSchema)||void 0===E||E,validateFormats:null===(_=e.validateFormats)||void 0===_||_,unicodeRegExp:null===(C=e.unicodeRegExp)||void 0===C||C,int32range:null===(A=e.int32range)||void 0===A||A,uriResolver:D}}class S{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...w(e)};const{es5:t,lines:r}=this.opts.code;this.scope=new c.ValueScope({scope:{},prefixes:g,es5:t,lines:r}),this.logger=function(e){if(!1===e)return k;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const n=e.validateFormats;e.validateFormats=!1,this.RULES=(0,o.getRules)(),x.call(this,v,e,"NOT SUPPORTED"),x.call(this,b,e,"DEPRECATED","warn"),this._metaOpts=A.call(this),e.formats&&_.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&C.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),E.call(this),e.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:r}=this.opts;let n=m;"id"===r&&(n={...m},n.id=n.$id,delete n.$id),t&&e&&this.addMetaSchema(n,n[r],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let r;if("string"==typeof e){if(r=this.getSchema(e),!r)throw new Error(`no schema with key or ref "${e}"`)}else r=this.compile(e);const n=r(t);return"$async"in r||(this.errors=r.errors),n}compile(e,t){const r=this._addSchema(e,t);return r.validate||this._compileSchemaEnv(r)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:r}=this.opts;return n.call(this,e,t);async function n(e,t){await s.call(this,e.$schema);const r=this._addSchema(e,t);return r.validate||i.call(this,r)}async function s(e){e&&!this.getSchema(e)&&await n.call(this,{$ref:e},!0)}async function i(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof a.default))throw t;return o.call(this,t),await l.call(this,t.missingSchema),i.call(this,e)}}function o({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){const r=await c.call(this,e);this.refs[e]||await s.call(this,r.$schema),this.refs[e]||this.addSchema(r,e,t)}async function c(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=r(e))}finally{delete this._loading[e]}}}addSchema(e,t,r,n=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,r,n);return this}let s;if("object"==typeof e){const{schemaId:t}=this.opts;if(s=e[t],void 0!==s&&"string"!=typeof s)throw new Error(`schema ${t} must be string`)}return t=(0,d.normalizeId)(t||s),this._checkUnique(t),this.schemas[t]=this._addSchema(e,r,t,n,!0),this}addMetaSchema(e,t,r=this.opts.validateSchema){return this.addSchema(e,t,!0,r),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let r;if(r=e.$schema,void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(r=r||this.opts.defaultMeta||this.defaultMeta(),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const n=this.validate(r,e);if(!n&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return n}getSchema(e){let t;for(;"string"==typeof(t=$.call(this,e));)e=t;if(void 0===t){const{schemaId:r}=this.opts,n=new l.SchemaEnv({schema:{},schemaId:r});if(t=l.resolveSchema.call(this,n,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=$.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let r=e[this.opts.schemaId];return r&&(r=(0,d.normalizeId)(r),delete this.schemas[r],delete this.refs[r]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let r;if("string"==typeof e)r=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=r);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(r=(t=e).keyword,Array.isArray(r)&&!r.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(O.call(this,r,t),!t)return(0,h.eachItem)(r,(e=>P.call(this,e))),this;N.call(this,t);const n={...t,type:(0,u.getJSONTypes)(t.type),schemaType:(0,u.getJSONTypes)(t.schemaType)};return(0,h.eachItem)(r,0===n.type.length?e=>P.call(this,e,n):e=>n.type.forEach((t=>P.call(this,e,n,t)))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const r of t.rules){const t=r.rules.findIndex((t=>t.keyword===e));t>=0&&r.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:r="data"}={}){return e&&0!==e.length?e.map((e=>`${r}${e.instancePath} ${e.message}`)).reduce(((e,r)=>e+t+r)):"No errors"}$dataMetaSchema(e,t){const r=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const n of t){const t=n.split("/").slice(1);let s=e;for(const e of t)s=s[e];for(const e in r){const t=r[e];if("object"!=typeof t)continue;const{$data:n}=t.definition,i=s[e];n&&i&&(s[e]=j(i))}}return e}_removeAllSchemas(e,t){for(const r in e){const n=e[r];t&&!t.test(r)||("string"==typeof n?delete e[r]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[r]))}}_addSchema(e,t,r,n=this.opts.validateSchema,s=this.opts.addUsedSchema){let i;const{schemaId:a}=this.opts;if("object"==typeof e)i=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let o=this._cache.get(e);if(void 0!==o)return o;r=(0,d.normalizeId)(i||r);const c=d.getSchemaRefs.call(this,e,r);return o=new l.SchemaEnv({schema:e,schemaId:a,meta:t,baseId:r,localRefs:c}),this._cache.set(o.schema,o),s&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=o),n&&this.validateSchema(e,!0),o}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):l.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,e)}finally{this.opts=t}}}function x(e,t,r,n="error"){for(const s in e){const i=s;i in t&&this.logger[n](`${r}: option ${s}. ${e[i]}`)}}function $(e){return e=(0,d.normalizeId)(e),this.schemas[e]||this.refs[e]}function E(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function _(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function C(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}}function A(){const e={...this.opts};for(const t of y)delete e[t];return e}S.ValidationError=i.default,S.MissingRefError=a.default,t.default=S;const k={log(){},warn(){},error(){}},T=/^[a-z_$][a-z0-9_$:-]*$/i;function O(e,t){const{RULES:r}=this;if((0,h.eachItem)(e,(e=>{if(r.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!T.test(e))throw new Error(`Keyword ${e} has invalid name`)})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function P(e,t,r){var n;const s=null==t?void 0:t.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:i}=this;let a=s?i.post:i.rules.find((({type:e})=>e===r));if(a||(a={type:r,rules:[]},i.rules.push(a)),i.keywords[e]=!0,!t)return;const o={keyword:e,definition:{...t,type:(0,u.getJSONTypes)(t.type),schemaType:(0,u.getJSONTypes)(t.schemaType)}};t.before?D.call(this,a,o,t.before):a.rules.push(o),i.all[e]=o,null===(n=t.implements)||void 0===n||n.forEach((e=>this.addKeyword(e)))}function D(e,t,r){const n=e.rules.findIndex((e=>e.keyword===r));n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function N(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=j(t)),e.validateSchema=this.compile(t,!0))}const I={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function j(e){return{anyOf:[e,I]}}},5109:(e,t,r)=>{const n=r(35970),s=r(80795),i=r(11331),a=r(63375),o=r(9063),l=r(91648),c=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d=e=>i(e)||Array.isArray(e)?Object.keys(e):[],u=e=>!d(e).length&&!1!==e&&!0!==e;e.exports={allUniqueKeys:e=>a(s(e.map(d))),deleteUndefinedProps:function(e){for(const t in e)c(e,t)&&u(e[t])&&delete e[t];return e},getValues:(e,t)=>e.map((e=>e&&e[t])),has:c,isEmptySchema:u,isSchema:e=>i(e)||!0===e||!1===e,keys:d,notUndefined:e=>void 0!==e,uniqWith:o,withoutArr:(e,...t)=>l.apply(null,[e].concat(n(t)))}},6638:(e,t,r)=>{var n=r(78096),s=r(24066),i=r(61489),a=4294967295,o=Math.min;e.exports=function(e,t){if((e=i(e))<1||e>9007199254740991)return[];var r=a,l=o(e,a);t=s(t),e-=a;for(var c=n(l,t);++r<e;)t(r);return c}},7106:e=>{"use strict";var t=e.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),r(t,"function"==typeof(n=t.cb||n)?n:n.pre||function(){},n.post||function(){},e,"",e)};function r(e,n,s,i,a,o,l,c,d,u){if(i&&"object"==typeof i&&!Array.isArray(i)){for(var h in n(i,a,o,l,c,d,u),i){var m=i[h];if(Array.isArray(m)){if(h in t.arrayKeywords)for(var p=0;p<m.length;p++)r(e,n,s,m[p],a+"/"+h+"/"+p,o,a,h,i,p)}else if(h in t.propsKeywords){if(m&&"object"==typeof m)for(var f in m)r(e,n,s,m[f],a+"/"+h+"/"+f.replace(/~/g,"~0").replace(/\//g,"~1"),o,a,h,i,f)}else(h in t.keywords||e.allKeys&&!(h in t.skipKeywords))&&r(e,n,s,m,a+"/"+h,o,a,h,i)}s(i,a,o,l,c,d,u)}}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},7870:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;const n=r(99029),s=r(94227);function i(e,t,r){const{gen:i,compositeRule:a,data:o,opts:l}=e;if(void 0===r)return;const c=n._`${o}${(0,n.getProperty)(t)}`;if(a)return void(0,s.checkStrictMode)(e,`default is ignored for: ${c}`);let d=n._`${c} === undefined`;"empty"===l.useDefaults&&(d=n._`${d} || ${c} === null || ${c} === ""`),i.if(d,n._`${c} = ${(0,n.stringify)(r)}`)}t.assignDefaults=function(e,t){const{properties:r,items:n}=e.schema;if("object"===t&&r)for(const t in r)i(e,t,r[t].default);else"array"===t&&Array.isArray(n)&&n.forEach(((t,r)=>i(e,r,t.default)))}},7887:(e,t)=>{"use strict";function r(e,t){return t.rules.some((t=>n(e,t)))}function n(e,t){var r;return void 0!==e[t.keyword]||(null===(r=t.definition.implements)||void 0===r?void 0:r.some((t=>void 0!==e[t])))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},n){const s=t.RULES.types[n];return s&&!0!==s&&r(e,s)},t.shouldUseGroup=r,t.shouldUseRule=n},7894:(e,t,r)=>{const n=r(90370),s=r(39754),{allUniqueKeys:i,deleteUndefinedProps:a,getValues:o,keys:l,notUndefined:c,uniqWith:d,withoutArr:u}=r(5109);function h(e,t){return i(e).reduce((function(r,s){const i=o(e,s),a=d(i.filter(c),n);return r[s]=t(a,s),r}),{})}e.exports={keywords:["properties","patternProperties","additionalProperties"],resolver(e,t,r,n){n.ignoreAdditionalProperties||(e.forEach((function(t){const n=e.filter((e=>e!==t)),s=l(t.properties),i=l(t.patternProperties).map((e=>new RegExp(e)));n.forEach((function(e){const n=l(e.properties),a=n.filter((e=>i.some((t=>t.test(e)))));u(n,s,a).forEach((function(n){e.properties[n]=r.properties([e.properties[n],t.additionalProperties],n)}))}))})),e.forEach((function(t){const r=e.filter((e=>e!==t)),n=l(t.patternProperties);!1===t.additionalProperties&&r.forEach((function(e){const t=l(e.patternProperties);u(t,n).forEach((t=>delete e.patternProperties[t]))}))})));const i={additionalProperties:r.additionalProperties(e.map((e=>e.additionalProperties))),patternProperties:h(e.map((e=>e.patternProperties)),r.patternProperties),properties:h(e.map((e=>e.properties)),r.properties)};var o;return!1===i.additionalProperties&&s(o=i.properties,(function(e,t){!1===e&&delete o[t]})),a(i)}}},10208:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const n=r(10396),s=r(7887),i=r(48708),a=r(99029),o=r(94227);var l;function c(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(n.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(l||(t.DataType=l={})),t.getSchemaTypes=function(e){const t=c(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=c,t.coerceAndCheckDataType=function(e,t){const{gen:r,data:n,opts:i}=e,o=function(e,t){return t?e.filter((e=>d.has(e)||"array"===t&&"array"===e)):[]}(t,i.coerceTypes),c=t.length>0&&!(0===o.length&&1===t.length&&(0,s.schemaHasRulesForType)(e,t[0]));if(c){const s=h(t,n,i.strictNumbers,l.Wrong);r.if(s,(()=>{o.length?function(e,t,r){const{gen:n,data:s,opts:i}=e,o=n.let("dataType",a._`typeof ${s}`),l=n.let("coerced",a._`undefined`);"array"===i.coerceTypes&&n.if(a._`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,(()=>n.assign(s,a._`${s}[0]`).assign(o,a._`typeof ${s}`).if(h(t,s,i.strictNumbers),(()=>n.assign(l,s))))),n.if(a._`${l} !== undefined`);for(const e of r)(d.has(e)||"array"===e&&"array"===i.coerceTypes)&&c(e);function c(e){switch(e){case"string":return void n.elseIf(a._`${o} == "number" || ${o} == "boolean"`).assign(l,a._`"" + ${s}`).elseIf(a._`${s} === null`).assign(l,a._`""`);case"number":return void n.elseIf(a._`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(l,a._`+${s}`);case"integer":return void n.elseIf(a._`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(l,a._`+${s}`);case"boolean":return void n.elseIf(a._`${s} === "false" || ${s} === 0 || ${s} === null`).assign(l,!1).elseIf(a._`${s} === "true" || ${s} === 1`).assign(l,!0);case"null":return n.elseIf(a._`${s} === "" || ${s} === 0 || ${s} === false`),void n.assign(l,null);case"array":n.elseIf(a._`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(l,a._`[${s}]`)}}n.else(),p(e),n.endIf(),n.if(a._`${l} !== undefined`,(()=>{n.assign(s,l),function({gen:e,parentData:t,parentDataProperty:r},n){e.if(a._`${t} !== undefined`,(()=>e.assign(a._`${t}[${r}]`,n)))}(e,l)}))}(e,t,o):p(e)}))}return c};const d=new Set(["string","number","integer","boolean","null"]);function u(e,t,r,n=l.Correct){const s=n===l.Correct?a.operators.EQ:a.operators.NEQ;let i;switch(e){case"null":return a._`${t} ${s} null`;case"array":i=a._`Array.isArray(${t})`;break;case"object":i=a._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=o(a._`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=o();break;default:return a._`typeof ${t} ${s} ${e}`}return n===l.Correct?i:(0,a.not)(i);function o(e=a.nil){return(0,a.and)(a._`typeof ${t} == "number"`,e,r?a._`isFinite(${t})`:a.nil)}}function h(e,t,r,n){if(1===e.length)return u(e[0],t,r,n);let s;const i=(0,o.toHash)(e);if(i.array&&i.object){const e=a._`typeof ${t} != "object"`;s=i.null?e:a._`!${t} || ${e}`,delete i.null,delete i.array,delete i.object}else s=a.nil;i.number&&delete i.integer;for(const e in i)s=(0,a.and)(s,u(e,t,r,n));return s}t.checkDataType=u,t.checkDataTypes=h;const m={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?a._`{type: ${e}}`:a._`{type: ${t}}`};function p(e){const t=function(e){const{gen:t,data:r,schema:n}=e,s=(0,o.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}}(e);(0,i.reportError)(t,m)}t.reportTypeError=p},10396:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;const r=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&r.has(e)},t.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},11051:(e,t,r)=>{const n=r(90370),s=r(39754),{allUniqueKeys:i,deleteUndefinedProps:a,has:o,isSchema:l,notUndefined:c,uniqWith:d}=r(5109);e.exports={keywords:["items","additionalItems"],resolver(e,t,r){const u=e.map((e=>e.items)),h=u.filter(c),m={};let p;var f;return h.every(l)?m.items=r.items(u):m.items=function(e,t,r){return i(r).reduce((function(r,s){const i=function(e,t){return e.map((function(e){if(e){if(!Array.isArray(e.items))return e.items;{const r=e.items[t];if(l(r))return r;if(o(e,"additionalItems"))return e.additionalItems}}}))}(e,s),a=d(i.filter(c),n);return r[s]=t(a,s),r}),[])}(e,r.items,u),h.every(Array.isArray)?p=e.map((e=>e.additionalItems)):h.some(Array.isArray)&&(p=e.map((function(e){if(e)return Array.isArray(e.items)?e.additionalItems:e.items}))),p&&(m.additionalItems=r.additionalItems(p)),!1===m.additionalItems&&Array.isArray(m.items)&&(f=m.items,s(f,(function(e,t){!1===e&&f.splice(t,1)}))),a(m)}}},12027:e=>{e.exports=function(e,t,r,n){for(var s=r-1,i=e.length;++s<i;)if(n(e[s],t))return s;return-1}},12358:(e,t,r)=>{var n=r(21988);e.exports=function(e,t){return e&&e.length&&t&&t.length?n(e,t):e}},12661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=r(94227),i={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?n.str`must contain at least ${e} valid item(s)`:n.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?n._`{minContains: ${e}}`:n._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:r,parentSchema:i,data:a,it:o}=e;let l,c;const{minContains:d,maxContains:u}=i;o.opts.next?(l=void 0===d?1:d,c=u):l=1;const h=t.const("len",n._`${a}.length`);if(e.setParams({min:l,max:c}),void 0===c&&0===l)return void(0,s.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==c&&l>c)return(0,s.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,s.alwaysValidSchema)(o,r)){let t=n._`${h} >= ${l}`;return void 0!==c&&(t=n._`${t} && ${h} <= ${c}`),void e.pass(t)}o.items=!0;const m=t.name("valid");function p(){const e=t.name("_valid"),r=t.let("count",0);f(e,(()=>t.if(e,(()=>function(e){t.code(n._`${e}++`),void 0===c?t.if(n._`${e} >= ${l}`,(()=>t.assign(m,!0).break())):(t.if(n._`${e} > ${c}`,(()=>t.assign(m,!1).break())),1===l?t.assign(m,!0):t.if(n._`${e} >= ${l}`,(()=>t.assign(m,!0))))}(r)))))}function f(r,n){t.forRange("i",0,h,(t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:s.Type.Num,compositeRule:!0},r),n()}))}void 0===c&&1===l?f(m,(()=>t.if(m,(()=>t.break())))):0===l?(t.let(m,!0),void 0!==c&&t.if(n._`${a}.length > 0`,p)):(t.let(m,!1),p()),e.result(m,(()=>e.reset()))}};t.default=i},13410:(e,t,r)=>{"use strict";r.d(t,{E:()=>a});var n=r(2445),s=r(50290),i=r(52120);const a=(0,s.I4)((e=>(0,n.Y)(i.A,{...e})))`
  ${({theme:e,color:t,count:r})=>`\n    & > sup,\n    & > sup.ant-badge-count {\n      box-shadow: none;\n      ${void 0!==r?`background: ${t||e.colorPrimary};`:""}\n    }\n  `}
`},13558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.default=r},13693:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;const n=r(34551),s=r(15765),i=r(99029),a=r(64404),o=r(73835),l=r(94227),c={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:s}=e,{baseId:a,schemaEnv:l,validateName:c,opts:h,self:m}=s,{root:p}=l;if(("#"===r||"#/"===r)&&a===p.baseId)return function(){if(l===p)return u(e,c,l,l.$async);const r=t.scopeValue("root",{ref:p});return u(e,i._`${r}.validate`,p,p.$async)}();const f=o.resolveRef.call(m,p,a,r);if(void 0===f)throw new n.default(s.opts.uriResolver,a,r);return f instanceof o.SchemaEnv?function(t){const r=d(e,t);u(e,r,t,t.$async)}(f):function(n){const s=t.scopeValue("schema",!0===h.code.source?{ref:n,code:(0,i.stringify)(n)}:{ref:n}),a=t.name("valid"),o=e.subschema({schema:n,dataTypes:[],schemaPath:i.nil,topSchemaRef:s,errSchemaPath:r},a);e.mergeEvaluated(o),e.ok(a)}(f)}};function d(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):i._`${r.scopeValue("wrapper",{ref:t})}.validate`}function u(e,t,r,n){const{gen:o,it:c}=e,{allErrors:d,schemaEnv:u,opts:h}=c,m=h.passContext?a.default.this:i.nil;function p(e){const t=i._`${e}.errors`;o.assign(a.default.vErrors,i._`${a.default.vErrors} === null ? ${t} : ${a.default.vErrors}.concat(${t})`),o.assign(a.default.errors,i._`${a.default.vErrors}.length`)}function f(e){var t;if(!c.opts.unevaluated)return;const n=null===(t=null==r?void 0:r.validate)||void 0===t?void 0:t.evaluated;if(!0!==c.props)if(n&&!n.dynamicProps)void 0!==n.props&&(c.props=l.mergeEvaluated.props(o,n.props,c.props));else{const t=o.var("props",i._`${e}.evaluated.props`);c.props=l.mergeEvaluated.props(o,t,c.props,i.Name)}if(!0!==c.items)if(n&&!n.dynamicItems)void 0!==n.items&&(c.items=l.mergeEvaluated.items(o,n.items,c.items));else{const t=o.var("items",i._`${e}.evaluated.items`);c.items=l.mergeEvaluated.items(o,t,c.items,i.Name)}}n?function(){if(!u.$async)throw new Error("async schema referenced by sync schema");const r=o.let("valid");o.try((()=>{o.code(i._`await ${(0,s.callValidateCode)(e,t,m)}`),f(t),d||o.assign(r,!0)}),(e=>{o.if(i._`!(${e} instanceof ${c.ValidationError})`,(()=>o.throw(e))),p(e),d||o.assign(r,!1)})),e.ok(r)}():e.result((0,s.callValidateCode)(e,t,m),(()=>f(t)),(()=>p(t)))}t.getValidate=d,t.callRef=u,t.default=c},14018:(e,t)=>{"use strict";function r(e,t){return{validate:e,compare:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0,t.fullFormats={date:r(i,a),time:r(l,c),"date-time":r((function(e){const t=e.split(d);return 2===t.length&&i(t[0])&&l(t[1],!0)}),u),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return h.test(e)&&m.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(v.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return p.lastIndex=0,p.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&e<=y&&e>=f}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:g},double:{type:"number",validate:g},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:r(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,a),time:r(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"date-time":r(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function i(e){const t=n.exec(e);if(!t)return!1;const r=+t[1],i=+t[2],a=+t[3];return i>=1&&i<=12&&a>=1&&a<=(2===i&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:s[i])}function a(e,t){if(e&&t)return e>t?1:e<t?-1:0}const o=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function l(e,t){const r=o.exec(e);if(!r)return!1;const n=+r[1],s=+r[2],i=+r[3],a=r[5];return(n<=23&&s<=59&&i<=59||23===n&&59===s&&60===i)&&(!t||""!==a)}function c(e,t){if(!e||!t)return;const r=o.exec(e),n=o.exec(t);return r&&n?(e=r[1]+r[2]+r[3]+(r[4]||""))>(t=n[1]+n[2]+n[3]+(n[4]||""))?1:e<t?-1:0:void 0}const d=/t|\s/i;function u(e,t){if(!e||!t)return;const[r,n]=e.split(d),[s,i]=t.split(d),o=a(r,s);return void 0!==o?o||c(n,i):void 0}const h=/\/|:/,m=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,p=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm,f=-(2**31),y=2**31-1;function g(){return!0}const v=/[^\\]\\Z/},14426:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(94227),s={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){void 0===t.if&&(0,n.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};t.default=s},15457:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;const n=r(99029),s=r(94227),i={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>n.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>n._`{limit: ${e}}`},code(e){const{parentSchema:t,it:r}=e,{items:n}=t;Array.isArray(n)?a(e,n):(0,s.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas')}};function a(e,t){const{gen:r,schema:i,data:a,keyword:o,it:l}=e;l.items=!0;const c=r.const("len",n._`${a}.length`);if(!1===i)e.setParams({len:t.length}),e.pass(n._`${c} <= ${t.length}`);else if("object"==typeof i&&!(0,s.alwaysValidSchema)(l,i)){const i=r.var("valid",n._`${c} <= ${t.length}`);r.if((0,n.not)(i),(()=>function(i){r.forRange("i",t.length,c,(t=>{e.subschema({keyword:o,dataProp:t,dataPropType:s.Type.Num},i),l.allErrors||r.if((0,n.not)(i),(()=>r.break()))}))}(i))),e.ok(i)}}t.validateAdditionalItems=a,t.default=i},15765:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;const n=r(99029),s=r(94227),i=r(64404),a=r(94227);function o(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:n._`Object.prototype.hasOwnProperty`})}function l(e,t,r){return n._`${o(e)}.call(${t}, ${r})`}function c(e,t,r,s){const i=n._`${t}${(0,n.getProperty)(r)} === undefined`;return s?(0,n.or)(i,(0,n.not)(l(e,t,r))):i}function d(e){return e?Object.keys(e).filter((e=>"__proto__"!==e)):[]}t.checkReportMissingProp=function(e,t){const{gen:r,data:s,it:i}=e;r.if(c(r,s,t,i.opts.ownProperties),(()=>{e.setParams({missingProperty:n._`${t}`},!0),e.error()}))},t.checkMissingProp=function({gen:e,data:t,it:{opts:r}},s,i){return(0,n.or)(...s.map((s=>(0,n.and)(c(e,t,s,r.ownProperties),n._`${i} = ${s}`))))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=o,t.isOwnProperty=l,t.propertyInData=function(e,t,r,s){const i=n._`${t}${(0,n.getProperty)(r)} !== undefined`;return s?n._`${i} && ${l(e,t,r)}`:i},t.noPropertyInData=c,t.allSchemaProperties=d,t.schemaProperties=function(e,t){return d(t).filter((r=>!(0,s.alwaysValidSchema)(e,t[r])))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:r,topSchemaRef:s,schemaPath:a,errorPath:o},it:l},c,d,u){const h=u?n._`${e}, ${t}, ${s}${a}`:t,m=[[i.default.instancePath,(0,n.strConcat)(i.default.instancePath,o)],[i.default.parentData,l.parentData],[i.default.parentDataProperty,l.parentDataProperty],[i.default.rootData,i.default.rootData]];l.opts.dynamicRef&&m.push([i.default.dynamicAnchors,i.default.dynamicAnchors]);const p=n._`${h}, ${r.object(...m)}`;return d!==n.nil?n._`${c}.call(${d}, ${p})`:n._`${c}(${p})`};const u=n._`new RegExp`;t.usePattern=function({gen:e,it:{opts:t}},r){const s=t.unicodeRegExp?"u":"",{regExp:i}=t.code,o=i(r,s);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:n._`${"new RegExp"===i.code?u:(0,a.useFunc)(e,i)}(${r}, ${s})`})},t.validateArray=function(e){const{gen:t,data:r,keyword:i,it:a}=e,o=t.name("valid");if(a.allErrors){const e=t.let("valid",!0);return l((()=>t.assign(e,!1))),e}return t.var(o,!0),l((()=>t.break())),o;function l(a){const l=t.const("len",n._`${r}.length`);t.forRange("i",0,l,(r=>{e.subschema({keyword:i,dataProp:r,dataPropType:s.Type.Num},o),t.if((0,n.not)(o),a)}))}},t.validateUnion=function(e){const{gen:t,schema:r,keyword:i,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some((e=>(0,s.alwaysValidSchema)(a,e)))&&!a.opts.unevaluated)return;const o=t.let("valid",!1),l=t.name("_valid");t.block((()=>r.forEach(((r,s)=>{const a=e.subschema({keyword:i,schemaProp:s,compositeRule:!0},l);t.assign(o,n._`${o} || ${l}`),e.mergeValidEvaluated(a,l)||t.if((0,n.not)(o))})))),e.result(o,(()=>e.reset()),(()=>e.error(!0)))}},15844:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(94227),s={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const i=t.name("valid");r.forEach(((t,r)=>{if((0,n.alwaysValidSchema)(s,t))return;const a=e.subschema({keyword:"allOf",schemaProp:r},i);e.ok(i),e.mergeEvaluated(a)}))}};t.default=s},16505:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:r(15765).validateUnion,error:{message:"must match a schema in anyOf"}};t.default=n},19713:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=r(94227),i={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>n._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:r,data:i,it:a}=e;if((0,s.alwaysValidSchema)(a,r))return;const o=t.name("valid");t.forIn("key",i,(r=>{e.setParams({propertyName:r}),e.subschema({keyword:"propertyNames",data:r,dataTypes:["string"],propertyName:r,compositeRule:!0},o),t.if((0,n.not)(o),(()=>{e.error(!0),a.allErrors||t.break()}))})),e.ok(o)}};t.default=i},20494:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;const n=r(99029),s=r(94227),i=r(15765),a={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return o(e,"additionalItems",t);r.items=!0,(0,s.alwaysValidSchema)(r,t)||e.ok((0,i.validateArray)(e))}};function o(e,t,r=e.schema){const{gen:i,parentSchema:a,data:o,keyword:l,it:c}=e;!function(e){const{opts:n,errSchemaPath:i}=c,a=r.length,o=a===e.minItems&&(a===e.maxItems||!1===e[t]);if(n.strictTuples&&!o){const e=`"${l}" is ${a}-tuple, but minItems or maxItems/${t} are not specified or different at path "${i}"`;(0,s.checkStrictMode)(c,e,n.strictTuples)}}(a),c.opts.unevaluated&&r.length&&!0!==c.items&&(c.items=s.mergeEvaluated.items(i,r.length,c.items));const d=i.name("valid"),u=i.const("len",n._`${o}.length`);r.forEach(((t,r)=>{(0,s.alwaysValidSchema)(c,t)||(i.if(n._`${u} > ${r}`,(()=>e.subschema({keyword:l,schemaProp:r,dataProp:r},d))),e.ok(d))}))}t.validateTuple=o,t.default=a},21988:(e,t,r)=>{var n=r(34932),s=r(96131),i=r(12027),a=r(27301),o=r(23007),l=Array.prototype.splice;e.exports=function(e,t,r,c){var d=c?i:s,u=-1,h=t.length,m=e;for(e===t&&(t=o(t)),r&&(m=n(e,a(r)));++u<h;)for(var p=0,f=t[u],y=r?r(f):f;(p=d(m,y,p,c))>-1;)m!==e&&l.call(m,p,1),l.call(e,p,1);return e}},24066:(e,t,r)=>{var n=r(83488);e.exports=function(e){return"function"==typeof e?e:n}},24495:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;const n=r(99029),s=r(94227);t.getSubschema=function(e,{keyword:t,schemaProp:r,schema:i,schemaPath:a,errSchemaPath:o,topSchemaRef:l}){if(void 0!==t&&void 0!==i)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const i=e.schema[t];return void 0===r?{schema:i,schemaPath:n._`${e.schemaPath}${(0,n.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:i[r],schemaPath:n._`${e.schemaPath}${(0,n.getProperty)(t)}${(0,n.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,s.escapeFragment)(r)}`}}if(void 0!==i){if(void 0===a||void 0===o||void 0===l)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:a,topSchemaRef:l,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,{dataProp:r,dataPropType:i,data:a,dataTypes:o,propertyName:l}){if(void 0!==a&&void 0!==r)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:c}=t;if(void 0!==r){const{errorPath:a,dataPathArr:o,opts:l}=t;d(c.let("data",n._`${t.data}${(0,n.getProperty)(r)}`,!0)),e.errorPath=n.str`${a}${(0,s.getErrorPath)(r,i,l.jsPropertySyntax)}`,e.parentDataProperty=n._`${r}`,e.dataPathArr=[...o,e.parentDataProperty]}function d(r){e.data=r,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,r]}void 0!==a&&(d(a instanceof n.Name?a:c.let("data",a,!0)),void 0!==l&&(e.propertyName=l)),o&&(e.dataTypes=o)},t.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){void 0!==n&&(e.compositeRule=n),void 0!==s&&(e.createErrors=s),void 0!==i&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}},26461:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const n=r(63282),s=r(99029),i=s.operators,a={formatMaximum:{okStr:"<=",ok:i.LTE,fail:i.GT},formatMinimum:{okStr:">=",ok:i.GTE,fail:i.LT},formatExclusiveMaximum:{okStr:"<",ok:i.LT,fail:i.GTE},formatExclusiveMinimum:{okStr:">",ok:i.GT,fail:i.LTE}},o={message:({keyword:e,schemaCode:t})=>s.str`should be ${a[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>s._`{comparison: ${a[e].okStr}, limit: ${t}}`};t.formatLimitDefinition={keyword:Object.keys(a),type:"string",schemaType:"string",$data:!0,error:o,code(e){const{gen:t,data:r,schemaCode:i,keyword:o,it:l}=e,{opts:c,self:d}=l;if(!c.validateFormats)return;const u=new n.KeywordCxt(l,d.RULES.all.format.definition,"format");function h(e){return s._`${e}.compare(${r}, ${i}) ${a[o].fail} 0`}u.$data?function(){const r=t.scopeValue("formats",{ref:d.formats,code:c.code.formats}),n=t.const("fmt",s._`${r}[${u.schemaCode}]`);e.fail$data(s.or(s._`typeof ${n} != "object"`,s._`${n} instanceof RegExp`,s._`typeof ${n}.compare != "function"`,h(n)))}():function(){const r=u.schema,n=d.formats[r];if(!n||!0===n)return;if("object"!=typeof n||n instanceof RegExp||"function"!=typeof n.compare)throw new Error(`"${o}": format "${r}" does not define "compare" function`);const i=t.scopeValue("formats",{key:r,ref:n,code:c.code.formats?s._`${c.code.formats}${s.getProperty(r)}`:void 0});e.fail$data(h(i))}()},dependencies:["format"]},t.default=e=>(e.addKeyword(t.formatLimitDefinition),e)},27935:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=r(94227),i=r(76250),a={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>n._`{allowedValue: ${e}}`},code(e){const{gen:t,data:r,$data:a,schemaCode:o,schema:l}=e;a||l&&"object"==typeof l?e.fail$data(n._`!${(0,s.useFunc)(t,i.default)}(${r}, ${o})`):e.fail(n._`${l} !== ${r}`)}};t.default=a},28429:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(2445),s=r(33149),i=r(50290),a=r(96540),o=r(24777);const l=i.I4.div`
  position: absolute;
  height: 100%;

  :hover .sidebar-resizer::after {
    background-color: ${({theme:e})=>e.colorPrimary};
  }

  .sidebar-resizer {
    // @z-index-above-sticky-header (100) + 1 = 101
    z-index: 101;
  }

  .sidebar-resizer::after {
    display: block;
    content: '';
    width: 1px;
    height: 100%;
    margin: 0 auto;
  }
`,c=({id:e,initialWidth:t,minWidth:r,maxWidth:i,enable:c,children:d})=>{const[u,h]=function(e,t){const r=(0,a.useRef)(),[n,s]=(0,a.useState)(t);return(0,a.useEffect)((()=>{var t;r.current=null!=(t=r.current)?t:(0,o.Gq)(o.Hh.CommonResizableSidebarWidths,{}),r.current[e]&&s(r.current[e])}),[e]),[n,function(t){s(t),(0,o.SO)(o.Hh.CommonResizableSidebarWidths,{...r.current,[e]:t})}]}(e,t);return(0,n.FD)(n.FK,{children:[(0,n.Y)(l,{children:(0,n.Y)(s.c,{enable:{right:c},handleClasses:{right:"sidebar-resizer",bottom:"hidden",bottomRight:"hidden",bottomLeft:"hidden"},size:{width:u,height:"100%"},minWidth:r,maxWidth:i,onResizeStop:(e,t,r,n)=>h(u+n.width)})}),d(u)]})}},28643:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=r(94227),i=r(76250),a={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>n._`{allowedValues: ${e}}`},code(e){const{gen:t,data:r,$data:a,schema:o,schemaCode:l,it:c}=e;if(!a&&0===o.length)throw new Error("enum must have non-empty array");const d=o.length>=c.opts.loopEnum;let u;const h=()=>null!=u?u:u=(0,s.useFunc)(t,i.default);let m;if(d||a)m=t.let("valid"),e.block$data(m,(function(){t.assign(m,!1),t.forOf("v",l,(e=>t.if(n._`${h()}(${r}, ${e})`,(()=>t.assign(m,!0).break()))))}));else{if(!Array.isArray(o))throw new Error("ajv implementation error");const e=t.const("vSchema",l);m=(0,n.or)(...o.map(((t,s)=>function(e,t){const s=o[t];return"object"==typeof s&&null!==s?n._`${h()}(${r}, ${e}[${t}])`:n._`${r} === ${s}`}(e,s))))}e.pass(m)}};t.default=a},28727:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;const n=r(48708),s=r(99029),i=r(64404),a={message:"boolean schema is false"};function o(e,t){const{gen:r,data:s}=e,i={gen:r,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,n.reportError)(i,a,void 0,t)}t.topBoolOrEmptySchema=function(e){const{gen:t,schema:r,validateName:n}=e;!1===r?o(e,!1):"object"==typeof r&&!0===r.$async?t.return(i.default.data):(t.assign(s._`${n}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){const{gen:r,schema:n}=e;!1===n?(r.var(t,!1),o(e)):r.var(t,!0)}},29022:(e,t,r)=>{"use strict";var n=r(85419),s=r(96552),i=r(82986),a=Math.pow(2,31)-1;function o(e,t){var r,n=1;if(0===e)return t;if(0===t)return e;for(;e%2==0&&t%2==0;)e/=2,t/=2,n*=2;for(;e%2==0;)e/=2;for(;t;){for(;t%2==0;)t/=2;e>t&&(r=t,t=e,e=r),t-=e}return n*e}function l(e,t){var r,n=0;if(0===e)return t;if(0===t)return e;for(;!(1&e||1&t);)e>>>=1,t>>>=1,n++;for(;!(1&e);)e>>>=1;for(;t;){for(;!(1&t);)t>>>=1;e>t&&(r=t,t=e,e=r),t-=e}return e<<n}e.exports=function(){var e,t,r,c,d,u,h,m=arguments.length;for(e=new Array(m),h=0;h<m;h++)e[h]=arguments[h];if(s(e)){if(2===m)return(d=e[0])<0&&(d=-d),(u=e[1])<0&&(u=-u),d<=a&&u<=a?l(d,u):o(d,u);r=e}else{if(!n(e[0]))throw new TypeError("gcd()::invalid input argument. Must provide an array of integers. Value: `"+e[0]+"`.");if(m>1){if(r=e[0],t=e[1],!i(t))throw new TypeError("gcd()::invalid input argument. Accessor must be a function. Value: `"+t+"`.")}else r=e[0]}if((c=r.length)<2)return null;if(t){for(d=new Array(c),h=0;h<c;h++)d[h]=t(r[h],h);r=d}if(m<3&&!s(r))throw new TypeError("gcd()::invalid input argument. Accessed array values must be integers. Value: `"+r+"`.");for(h=0;h<c;h++)(d=r[h])<0&&(r[h]=-d);for(d=r[0],h=1;h<c;h++)d=(u=r[h])<=a&&d<=a?l(d,u):o(d,u);return d}},32017:e=>{"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(s=n;0!=s--;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(s=n;0!=s--;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;0!=s--;){var a=i[s];if(!e(t[a],r[a]))return!1}return!0}return t!=t&&r!=r}},33673:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;const n=r(99029),s=r(64404),i=r(15765),a=r(48708);function o(e){const{gen:t,data:r,it:s}=e;t.if(s.parentData,(()=>t.assign(r,n._`${s.parentData}[${s.parentDataProperty}]`)))}function l(e,t,r){if(void 0===r)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:(0,n.stringify)(r)})}t.macroKeywordCode=function(e,t){const{gen:r,keyword:s,schema:i,parentSchema:a,it:o}=e,c=t.macro.call(o.self,i,a,o),d=l(r,s,c);!1!==o.opts.validateSchema&&o.self.validateSchema(c,!0);const u=r.name("valid");e.subschema({schema:c,schemaPath:n.nil,errSchemaPath:`${o.errSchemaPath}/${s}`,topSchemaRef:d,compositeRule:!0},u),e.pass(u,(()=>e.error(!0)))},t.funcKeywordCode=function(e,t){var r;const{gen:c,keyword:d,schema:u,parentSchema:h,$data:m,it:p}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(p,t);const f=!m&&t.compile?t.compile.call(p.self,u,h,p):t.validate,y=l(c,d,f),g=c.let("valid");function v(r=(t.async?n._`await `:n.nil)){const a=p.opts.passContext?s.default.this:s.default.self,o=!("compile"in t&&!m||!1===t.schema);c.assign(g,n._`${r}${(0,i.callValidateCode)(e,y,a,o)}`,t.modifying)}function b(e){var r;c.if((0,n.not)(null!==(r=t.valid)&&void 0!==r?r:g),e)}e.block$data(g,(function(){if(!1===t.errors)v(),t.modifying&&o(e),b((()=>e.error()));else{const r=t.async?function(){const e=c.let("ruleErrs",null);return c.try((()=>v(n._`await `)),(t=>c.assign(g,!1).if(n._`${t} instanceof ${p.ValidationError}`,(()=>c.assign(e,n._`${t}.errors`)),(()=>c.throw(t))))),e}():function(){const e=n._`${y}.errors`;return c.assign(e,null),v(n.nil),e}();t.modifying&&o(e),b((()=>function(e,t){const{gen:r}=e;r.if(n._`Array.isArray(${t})`,(()=>{r.assign(s.default.vErrors,n._`${s.default.vErrors} === null ? ${t} : ${s.default.vErrors}.concat(${t})`).assign(s.default.errors,n._`${s.default.vErrors}.length`),(0,a.extendErrors)(e)}),(()=>e.error()))}(e,r)))}})),e.ok(null!==(r=t.valid)&&void 0!==r?r:g)},t.validSchemaType=function(e,t,r=!1){return!t.length||t.some((t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||r&&void 0===e))},t.validateKeywordUsage=function({schema:e,opts:t,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");const a=s.dependencies;if(null==a?void 0:a.some((t=>!Object.prototype.hasOwnProperty.call(e,t))))throw new Error(`parent schema must have dependencies of ${i}: ${a.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[i])){const e=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);r.logger.error(e)}}},33978:(e,t,r)=>{const n=r(88055),s=r(90370),i=r(78867),a=r(74354),o=r(35970),l=r(80795),c=r(5287),d=r(80191),u=r(2404),h=r(11331),m=r(12358),p=r(33031),f=r(63375),y=r(9063),g=r(7894),v=r(11051),b=(e,t)=>-1!==e.indexOf(t),w=e=>h(e)||!0===e||!1===e,S=e=>!1===e,x=e=>!0===e,$=(e,t,r)=>r(e),E=e=>p(f(l(e))),_=e=>void 0!==e,C=e=>f(l(e.map(D))),A=e=>e[0],k=e=>Math.max.apply(Math,e),T=e=>Math.min.apply(Math,e);function O(e){let{allOf:t=[],...r}=e;return r=h(e)?r:e,[r,...t.map(O)]}function P(e,t){return e.map((e=>e&&e[t]))}function D(e){return h(e)||Array.isArray(e)?Object.keys(e):[]}function N(e,t){if(t=t||[],!e.length)return t;const r=e.slice(0).shift(),n=e.slice(1);return t.length?N(n,o(t.map((e=>r.map((t=>[t].concat(e))))))):N(n,r.map((e=>e)))}function I(e,t){let r;try{r=e.map((function(e){return JSON.stringify(e,null,2)})).join("\n")}catch(t){r=e.join(", ")}throw new Error('Could not resolve values for path:"'+t.join(".")+'". They are probably incompatible. Values: \n'+r)}function j(e,t,r,n,i,a){if(e.length){const o=i.complexResolvers[t];if(!o||!o.resolver)throw new Error("No resolver found for "+t);const l=r.map((t=>e.reduce(((e,r)=>(void 0!==t[r]&&(e[r]=t[r]),e)),{}))),c=y(l,s),d=o.keywords.reduce(((e,t)=>({...e,[t]:(e,r=[])=>n(e,null,a.concat(t,r))})),{}),u=o.resolver(c,a.concat(t),d,i);return h(u)||I(c,a.concat(t)),u}}function F(e){return{required:e}}const R=["properties","patternProperties","definitions","dependencies"],q=["anyOf","oneOf"],M=["additionalProperties","additionalItems","contains","propertyNames","not","items"],z={type(e){if(e.some(Array.isArray)){const t=e.map((function(e){return Array.isArray(e)?e:[e]})),r=c.apply(null,t);if(1===r.length)return r[0];if(r.length>1)return f(r)}},dependencies:(e,t,r)=>C(e).reduce((function(t,n){const i=P(e,n);let a=y(i.filter(_),u);const o=a.filter(Array.isArray);if(o.length){if(o.length===a.length)t[n]=E(a);else{const e=a.filter(w),s=o.map(F);t[n]=r(e.concat(s),n)}return t}return a=y(a,s),t[n]=r(a,n),t}),{}),oneOf(e,t,r){const i=function(e,t){return e.map((function(e,r){try{return t(e,r)}catch(e){return}})).filter(_)}(N(n(e)),r),a=y(i,s);if(a.length)return a},not:e=>({anyOf:e}),pattern:e=>e.map((e=>"(?="+e+")")).join(""),multipleOf(e){let t=e.slice(0),r=1;for(;t.some((e=>!Number.isInteger(e)));)t=t.map((e=>10*e)),r*=10;return i(t)/r},enum(e){const t=d.apply(null,e.concat(u));if(t.length)return p(t)}};z.$id=A,z.$ref=A,z.$schema=A,z.additionalItems=$,z.additionalProperties=$,z.anyOf=z.oneOf,z.contains=$,z.default=A,z.definitions=z.dependencies,z.description=A,z.examples=e=>y(o(e),u),z.exclusiveMaximum=T,z.exclusiveMinimum=k,z.items=v,z.maximum=T,z.maxItems=T,z.maxLength=T,z.maxProperties=T,z.minimum=k,z.minItems=k,z.minLength=k,z.minProperties=k,z.properties=g,z.propertyNames=$,z.required=e=>E(e),z.title=A,z.uniqueItems=e=>e.some(x);const Y={properties:g,items:v};function L(e,t,r){r=r||[],t=a(t,{ignoreAdditionalProperties:!1,resolvers:z,complexResolvers:Y,deep:!0});const i=Object.entries(t.complexResolvers),o=function e(a,o,l){a=n(a.filter(_)),l=l||[];const c=h(o)?o:{};if(!a.length)return;if(a.some(S))return!1;if(a.every(x))return!0;a=a.filter(h);const d=C(a);if(t.deep&&b(d,"allOf"))return L({allOf:a},t,r);const u=i.map((([e,t])=>d.filter((e=>t.keywords.includes(e)))));return u.forEach((e=>m(d,e))),d.forEach((function(r){const n=P(a,r),i=y(n.filter(_),function(e){return function(t,r){return s({[e]:t},{[e]:r})}}(r));if(1===i.length&&b(q,r))c[r]=i[0].map((t=>e([t],t)));else if(1!==i.length||b(R,r)||b(M,r)){const n=t.resolvers[r]||t.resolvers.defaultResolver;if(!n)throw new Error("No resolver found for key "+r+". You can provide a resolver for this keyword in the options, or provide a default resolver.");const s=(t,n=[])=>e(t,null,l.concat(r,n));c[r]=n(i,l.concat(r),s,t),void 0===c[r]?I(i,l.concat(r)):void 0===c[r]&&delete c[r]}else c[r]=i[0]})),i.reduce(((r,[n,s],i)=>({...r,...j(u[i],n,a,e,t,l)})),c)}(l(O(e)));return o}L.options={resolvers:z},e.exports=L},34486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxProperties"===e?"more":"fewer";return n.str`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:s}=e,i="maxProperties"===t?n.operators.GT:n.operators.LT;e.fail$data(n._`Object.keys(${r}).length ${i} ${s}`)}};t.default=s},34551:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(66939);class s extends Error{constructor(e,t,r,s){super(s||`can't resolve reference ${r} from id ${t}`),this.missingRef=(0,n.resolveUrl)(e,t,r),this.missingSchema=(0,n.normalizeId)((0,n.getFullPath)(e,this.missingRef))}}t.default=s},34834:(e,t,r)=>{"use strict";const{HEX:n}=r(64914),s=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function i(e){if(c(e,".")<3)return{host:e,isIPV4:!1};const t=e.match(s)||[],[r]=t;return r?{host:l(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function a(e,t=!1){let r="",s=!0;for(const t of e){if(void 0===n[t])return;"0"!==t&&!0===s&&(s=!1),s||(r+=t)}return t&&0===r.length&&(r="0"),r}function o(e){if(c(e,":")<2)return{host:e,isIPV6:!1};const t=function(e){let t=0;const r={error:!1,address:"",zone:""},n=[],s=[];let i=!1,o=!1,l=!1;function c(){if(s.length){if(!1===i){const e=a(s);if(void 0===e)return r.error=!0,!1;n.push(e)}s.length=0}return!0}for(let a=0;a<e.length;a++){const d=e[a];if("["!==d&&"]"!==d)if(":"!==d)if("%"===d){if(!c())break;i=!0}else s.push(d);else{if(!0===o&&(l=!0),!c())break;if(t++,n.push(":"),t>7){r.error=!0;break}a-1>=0&&":"===e[a-1]&&(o=!0)}}return s.length&&(i?r.zone=s.join(""):l?n.push(s.join("")):n.push(a(s))),r.address=n.join(""),r}(e);if(t.error)return{host:e,isIPV6:!1};{let e=t.address,r=t.address;return t.zone&&(e+="%"+t.zone,r+="%25"+t.zone),{host:e,escapedHost:r,isIPV6:!0}}}function l(e,t){let r="",n=!0;const s=e.length;for(let i=0;i<s;i++){const a=e[i];"0"===a&&n?(i+1<=s&&e[i+1]===t||i+1===s)&&(r+=a,n=!1):(n=a===t,r+=a)}return r}function c(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}const d=/^\.\.?\//u,u=/^\/\.(?:\/|$)/u,h=/^\/\.\.(?:\/|$)/u,m=/^\/?(?:.|\n)*?(?=\/|$)/u;e.exports={recomposeAuthority:function(e){const t=[];if(void 0!==e.userinfo&&(t.push(e.userinfo),t.push("@")),void 0!==e.host){let r=unescape(e.host);const n=i(r);if(n.isIPV4)r=n.host;else{const t=o(n.host);r=!0===t.isIPV6?`[${t.escapedHost}]`:e.host}t.push(r)}return"number"!=typeof e.port&&"string"!=typeof e.port||(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0},normalizeComponentEncoding:function(e,t){const r=!0!==t?escape:unescape;return void 0!==e.scheme&&(e.scheme=r(e.scheme)),void 0!==e.userinfo&&(e.userinfo=r(e.userinfo)),void 0!==e.host&&(e.host=r(e.host)),void 0!==e.path&&(e.path=r(e.path)),void 0!==e.query&&(e.query=r(e.query)),void 0!==e.fragment&&(e.fragment=r(e.fragment)),e},removeDotSegments:function(e){const t=[];for(;e.length;)if(e.match(d))e=e.replace(d,"");else if(e.match(u))e=e.replace(u,"/");else if(e.match(h))e=e.replace(h,"/"),t.pop();else if("."===e||".."===e)e="";else{const r=e.match(m);if(!r)throw new Error("Unexpected dot segment condition");{const n=r[0];e=e.slice(n.length),t.push(n)}}return t.join("")},normalizeIPv4:i,normalizeIPv6:o,stringArrayToHexStripped:a}},35273:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(2445),s=r(50290),i=r(95018),a=r(7437),o=r(8558);const l=function({warningMarkdown:e,size:t,marginRight:r}){const l=(0,s.DP)();return(0,n.Y)(i.m,{id:"warning-tooltip",title:(0,n.Y)(a.z,{source:e}),children:(0,n.Y)(o.F.WarningOutlined,{iconColor:l.colorWarning,iconSize:t,css:{marginRight:null!=r?r:2*l.sizeUnit}})})}},35509:(e,t,r)=>{"use strict";r.d(t,{l:()=>n});const n=e=>{var t;return{columns:e.columns,name:(null==e?void 0:e.datasource_name)||(null==e?void 0:e.name)||"Untitled",dbId:(null==e||null==(t=e.database)?void 0:t.id)||(null==e?void 0:e.dbId),sql:(null==e?void 0:e.sql)||"",catalog:null==e?void 0:e.catalog,schema:null==e?void 0:e.schema,templateParams:null==e?void 0:e.templateParams}}},36653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=r(97652),i=r(73835),a=r(34551),o=r(94227),l={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===s.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>n._`{error: ${e}, tag: ${r}, tagValue: ${t}}`},code(e){const{gen:t,data:r,schema:l,parentSchema:c,it:d}=e,{oneOf:u}=c;if(!d.opts.discriminator)throw new Error("discriminator: requires discriminator option");const h=l.propertyName;if("string"!=typeof h)throw new Error("discriminator: requires propertyName");if(l.mapping)throw new Error("discriminator: mapping is not supported");if(!u)throw new Error("discriminator: requires oneOf keyword");const m=t.let("valid",!1),p=t.const("tag",n._`${r}${(0,n.getProperty)(h)}`);function f(r){const s=t.name("valid"),i=e.subschema({keyword:"oneOf",schemaProp:r},s);return e.mergeEvaluated(i,n.Name),s}t.if(n._`typeof ${p} == "string"`,(()=>function(){const r=function(){var e;const t={},r=s(c);let n=!0;for(let t=0;t<u.length;t++){let c=u[t];if((null==c?void 0:c.$ref)&&!(0,o.schemaHasRulesButRef)(c,d.self.RULES)){const e=c.$ref;if(c=i.resolveRef.call(d.self,d.schemaEnv.root,d.baseId,e),c instanceof i.SchemaEnv&&(c=c.schema),void 0===c)throw new a.default(d.opts.uriResolver,d.baseId,e)}const m=null===(e=null==c?void 0:c.properties)||void 0===e?void 0:e[h];if("object"!=typeof m)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${h}"`);n=n&&(r||s(c)),l(m,t)}if(!n)throw new Error(`discriminator: "${h}" must be required`);return t;function s({required:e}){return Array.isArray(e)&&e.includes(h)}function l(e,t){if(e.const)m(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${h}" must have "const" or "enum"`);for(const r of e.enum)m(r,t)}}function m(e,r){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${h}" values must be unique strings`);t[e]=r}}();t.if(!1);for(const e in r)t.elseIf(n._`${p} === ${e}`),t.assign(m,f(r[e]));t.else(),e.error(!1,{discrError:s.DiscrError.Mapping,tag:p,tagName:h}),t.endIf()}()),(()=>e.error(!1,{discrError:s.DiscrError.Tag,tag:p,tagName:h}))),e.ok(m)}};t.default=l},38660:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(15765),s=r(99029),i=r(64404),a=r(94227),o={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>s._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:r,parentSchema:o,data:l,errsCount:c,it:d}=e;if(!c)throw new Error("ajv implementation error");const{allErrors:u,opts:h}=d;if(d.props=!0,"all"!==h.removeAdditional&&(0,a.alwaysValidSchema)(d,r))return;const m=(0,n.allSchemaProperties)(o.properties),p=(0,n.allSchemaProperties)(o.patternProperties);function f(e){t.code(s._`delete ${l}[${e}]`)}function y(n){if("all"===h.removeAdditional||h.removeAdditional&&!1===r)f(n);else{if(!1===r)return e.setParams({additionalProperty:n}),e.error(),void(u||t.break());if("object"==typeof r&&!(0,a.alwaysValidSchema)(d,r)){const r=t.name("valid");"failing"===h.removeAdditional?(g(n,r,!1),t.if((0,s.not)(r),(()=>{e.reset(),f(n)}))):(g(n,r),u||t.if((0,s.not)(r),(()=>t.break())))}}}function g(t,r,n){const s={keyword:"additionalProperties",dataProp:t,dataPropType:a.Type.Str};!1===n&&Object.assign(s,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(s,r)}t.forIn("key",l,(r=>{m.length||p.length?t.if(function(r){let i;if(m.length>8){const e=(0,a.schemaRefOrVal)(d,o.properties,"properties");i=(0,n.isOwnProperty)(t,e,r)}else i=m.length?(0,s.or)(...m.map((e=>s._`${r} === ${e}`))):s.nil;return p.length&&(i=(0,s.or)(i,...p.map((t=>s._`${(0,n.usePattern)(e,t)}.test(${r})`)))),(0,s.not)(i)}(r),(()=>y(r))):y(r)})),e.ok(s._`${c} === ${i.default.errors}`)}};t.default=o},39754:(e,t,r)=>{var n=r(83729),s=r(80909),i=r(24066),a=r(56449);e.exports=function(e,t){return(a(e)?n:s)(e,i(t))}},40117:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(62586),s=r(15765),i=r(94227),a=r(38660),o={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:o,data:l,it:c}=e;"all"===c.opts.removeAdditional&&void 0===o.additionalProperties&&a.default.code(new n.KeywordCxt(c,a.default,"additionalProperties"));const d=(0,s.allSchemaProperties)(r);for(const e of d)c.definedProperties.add(e);c.opts.unevaluated&&d.length&&!0!==c.props&&(c.props=i.mergeEvaluated.props(t,(0,i.toHash)(d),c.props));const u=d.filter((e=>!(0,i.alwaysValidSchema)(c,r[e])));if(0===u.length)return;const h=t.name("valid");for(const r of u)m(r)?p(r):(t.if((0,s.propertyInData)(t,l,r,c.opts.ownProperties)),p(r),c.allErrors||t.else().var(h,!0),t.endIf()),e.it.definedProperties.add(r),e.ok(h);function m(e){return c.opts.useDefaults&&!c.compositeRule&&void 0!==r[e].default}function p(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},h)}}};t.default=o},40860:(e,t,r)=>{var n=r(40882),s=r(80909),i=r(15389),a=r(85558),o=r(56449);e.exports=function(e,t,r){var l=o(e)?n:a,c=arguments.length<3;return l(e,i(t,4),r,c,s)}},41520:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class r{}t._CodeOrName=r,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends r{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=n;class s extends r{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce(((e,t)=>`${e}${t}`),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce(((e,t)=>(t instanceof n&&(e[t.str]=(e[t.str]||0)+1),e)),{})}}function i(e,...t){const r=[e[0]];let n=0;for(;n<t.length;)l(r,t[n]),r.push(e[++n]);return new s(r)}t._Code=s,t.nil=new s(""),t._=i;const a=new s("+");function o(e,...t){const r=[d(e[0])];let n=0;for(;n<t.length;)r.push(a),l(r,t[n]),r.push(a,d(e[++n]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===a){const r=c(e[t-1],e[t+1]);if(void 0!==r){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}(r),new s(r)}function l(e,t){var r;t instanceof s?e.push(...t._items):t instanceof n?e.push(t):e.push("number"==typeof(r=t)||"boolean"==typeof r||null===r?r:d(Array.isArray(r)?r.join(","):r))}function c(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof n||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof n?void 0:`"${e}${t.slice(1)}`}function d(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=o,t.addCodeArg=l,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:o`${e}${t}`},t.stringify=function(e){return new s(d(e))},t.safeStringify=d,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new s(`.${e}`):i`[${e}]`},t.getEsmExportName=function(e){if("string"==typeof e&&t.IDENTIFIER.test(e))return new s(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)},t.regexpCode=function(e){return new s(e.toString())}},41816:function(e){e.exports=function(){"use strict";var e="month",t="quarter";return function(r,n){var s=n.prototype;s.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var i=s.add;s.add=function(r,n){return r=Number(r),this.$utils().p(n)===t?this.add(3*r,e):i.bind(this)(r,n)};var a=s.startOf;s.startOf=function(r,n){var s=this.$utils(),i=!!s.u(n)||n;if(s.p(r)===t){var o=this.quarter()-1;return i?this.month(3*o).startOf(e).startOf("day"):this.month(3*o+2).endOf(e).endOf("day")}return a.bind(this)(r,n)}}}()},48343:(e,t,r)=>{"use strict";const{normalizeIPv6:n,normalizeIPv4:s,removeDotSegments:i,recomposeAuthority:a,normalizeComponentEncoding:o}=r(34834),l=r(343);function c(e,t,r,n){const s={};return n||(e=m(d(e,r),r),t=m(d(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=i(t.path||""),s.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=i(t.path||""),s.query=t.query):(t.path?("/"===t.path.charAt(0)?s.path=i(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path:s.path="/"+t.path,s.path=i(s.path)),s.query=t.query):(s.path=e.path,void 0!==t.query?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function d(e,t){const r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),s=[],o=l[(n.scheme||r.scheme||"").toLowerCase()];o&&o.serialize&&o.serialize(r,n),void 0!==r.path&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),void 0!==r.scheme&&(r.path=r.path.split("%3A").join(":")))),"suffix"!==n.reference&&r.scheme&&s.push(r.scheme,":");const c=a(r);if(void 0!==c&&("suffix"!==n.reference&&s.push("//"),s.push(c),r.path&&"/"!==r.path.charAt(0)&&s.push("/")),void 0!==r.path){let e=r.path;n.absolutePath||o&&o.absolutePath||(e=i(e)),void 0===c&&(e=e.replace(/^\/\//u,"/%2F")),s.push(e)}return void 0!==r.query&&s.push("?",r.query),void 0!==r.fragment&&s.push("#",r.fragment),s.join("")}const u=Array.from({length:127},((e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)))),h=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function m(e,t){const r=Object.assign({},t),i={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},a=-1!==e.indexOf("%");let o=!1;"suffix"===r.reference&&(e=(r.scheme?r.scheme+":":"")+"//"+e);const c=e.match(h);if(c){if(i.scheme=c[1],i.userinfo=c[3],i.host=c[4],i.port=parseInt(c[5],10),i.path=c[6]||"",i.query=c[7],i.fragment=c[8],isNaN(i.port)&&(i.port=c[5]),i.host){const e=s(i.host);if(!1===e.isIPV4){const t=n(e.host);i.host=t.host.toLowerCase(),o=t.isIPV6}else i.host=e.host,o=!0}void 0!==i.scheme||void 0!==i.userinfo||void 0!==i.host||void 0!==i.port||void 0!==i.query||i.path?void 0===i.scheme?i.reference="relative":void 0===i.fragment?i.reference="absolute":i.reference="uri":i.reference="same-document",r.reference&&"suffix"!==r.reference&&r.reference!==i.reference&&(i.error=i.error||"URI is not a "+r.reference+" reference.");const e=l[(r.scheme||i.scheme||"").toLowerCase()];if(!(r.unicodeSupport||e&&e.unicodeSupport)&&i.host&&(r.domainHost||e&&e.domainHost)&&!1===o&&function(e){let t=0;for(let r=0,n=e.length;r<n;++r)if(t=e.charCodeAt(r),t>126||u[t])return!0;return!1}(i.host))try{i.host=URL.domainToASCII(i.host.toLowerCase())}catch(e){i.error=i.error||"Host's domain name can not be converted to ASCII: "+e}(!e||e&&!e.skipNormalize)&&(a&&void 0!==i.scheme&&(i.scheme=unescape(i.scheme)),a&&void 0!==i.host&&(i.host=unescape(i.host)),i.path&&(i.path=escape(unescape(i.path))),i.fragment&&(i.fragment=encodeURI(decodeURIComponent(i.fragment)))),e&&e.parse&&e.parse(i,r)}else i.error=i.error||"URI can not be parsed.";return i}const p={SCHEMES:l,normalize:function(e,t){return"string"==typeof e?e=d(m(e,t),t):"object"==typeof e&&(e=m(d(e,t),t)),e},resolve:function(e,t,r){const n=Object.assign({scheme:"null"},r);return d(c(m(e,n),m(t,n),n,!0),{...n,skipEscape:!0})},resolveComponents:c,equal:function(e,t,r){return"string"==typeof e?(e=unescape(e),e=d(o(m(e,r),!0),{...r,skipEscape:!0})):"object"==typeof e&&(e=d(o(e,!0),{...r,skipEscape:!0})),"string"==typeof t?(t=unescape(t),t=d(o(m(t,r),!0),{...r,skipEscape:!0})):"object"==typeof t&&(t=d(o(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()},serialize:d,parse:m};e.exports=p,e.exports.default=p,e.exports.fastUri=p},48582:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(81237);const s=["AND","AS","ASC","AVG","BY","CASE","COUNT","CREATE","CROSS","DATABASE","DEFAULT","DELETE","DESC","DISTINCT","DROP","ELSE","END","FOREIGN","FROM","GRANT","GROUP","HAVING","IF","INNER","INSERT","JOIN","KEY","LEFT","LIMIT","MAX","MIN","NATURAL","NOT","NULL","OFFSET","ON","OR","ORDER","OUTER","PRIMARY","REFERENCES","RIGHT","SELECT","SUM","TABLE","THEN","TYPE","UNION","UPDATE","WHEN","WHERE"].concat(["BIGINT","BINARY","BIT","CHAR","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","MONEY","NUMBER","NUMERIC","REAL","SET","TEXT","TIMESTAMP","VARCHAR"]).map((e=>({meta:"sql",name:e,score:n.lI,value:e})))},48708:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const n=r(99029),s=r(94227),i=r(64404);function a(e,t){const r=e.const("err",t);e.if(n._`${i.default.vErrors} === null`,(()=>e.assign(i.default.vErrors,n._`[${r}]`)),n._`${i.default.vErrors}.push(${r})`),e.code(n._`${i.default.errors}++`)}function o(e,t){const{gen:r,validateName:s,schemaEnv:i}=e;i.$async?r.throw(n._`new ${e.ValidationError}(${t})`):(r.assign(n._`${s}.errors`,t),r.return(!1))}t.keywordError={message:({keyword:e})=>n.str`must pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?n.str`"${e}" keyword must be ${t} ($data)`:n.str`"${e}" keyword is invalid ($data)`},t.reportError=function(e,r=t.keywordError,s,i){const{it:l}=e,{gen:d,compositeRule:u,allErrors:h}=l,m=c(e,r,s);(null!=i?i:u||h)?a(d,m):o(l,n._`[${m}]`)},t.reportExtraError=function(e,r=t.keywordError,n){const{it:s}=e,{gen:l,compositeRule:d,allErrors:u}=s;a(l,c(e,r,n)),d||u||o(s,i.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(i.default.errors,t),e.if(n._`${i.default.vErrors} !== null`,(()=>e.if(t,(()=>e.assign(n._`${i.default.vErrors}.length`,t)),(()=>e.assign(i.default.vErrors,null)))))},t.extendErrors=function({gen:e,keyword:t,schemaValue:r,data:s,errsCount:a,it:o}){if(void 0===a)throw new Error("ajv implementation error");const l=e.name("err");e.forRange("i",a,i.default.errors,(a=>{e.const(l,n._`${i.default.vErrors}[${a}]`),e.if(n._`${l}.instancePath === undefined`,(()=>e.assign(n._`${l}.instancePath`,(0,n.strConcat)(i.default.instancePath,o.errorPath)))),e.assign(n._`${l}.schemaPath`,n.str`${o.errSchemaPath}/${t}`),o.opts.verbose&&(e.assign(n._`${l}.schema`,r),e.assign(n._`${l}.data`,s))}))};const l={keyword:new n.Name("keyword"),schemaPath:new n.Name("schemaPath"),params:new n.Name("params"),propertyName:new n.Name("propertyName"),message:new n.Name("message"),schema:new n.Name("schema"),parentSchema:new n.Name("parentSchema")};function c(e,t,r){const{createErrors:s}=e.it;return!1===s?n._`{}`:function(e,t,r={}){const{gen:s,it:a}=e,o=[d(a,r),u(e,r)];return function(e,{params:t,message:r},s){const{keyword:a,data:o,schemaValue:c,it:d}=e,{opts:u,propertyName:h,topSchemaRef:m,schemaPath:p}=d;s.push([l.keyword,a],[l.params,"function"==typeof t?t(e):t||n._`{}`]),u.messages&&s.push([l.message,"function"==typeof r?r(e):r]),u.verbose&&s.push([l.schema,c],[l.parentSchema,n._`${m}${p}`],[i.default.data,o]),h&&s.push([l.propertyName,h])}(e,t,o),s.object(...o)}(e,t,r)}function d({errorPath:e},{instancePath:t}){const r=t?n.str`${e}${(0,s.getErrorPath)(t,s.Type.Str)}`:e;return[i.default.instancePath,(0,n.strConcat)(i.default.instancePath,r)]}function u({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:i}){let a=i?t:n.str`${t}/${e}`;return r&&(a=n.str`${a}${(0,s.getErrorPath)(r,s.Type.Str)}`),[l.schemaPath,a]}},52606:(e,t,r)=>{var n=r(85250),s=r(23805);e.exports=function e(t,r,i,a,o,l){return s(t)&&s(r)&&(l.set(r,t),n(t,r,void 0,e,l),l.delete(r)),t}},53048:(e,t,r)=>{"use strict";r.d(t,{M:()=>c});var n=r(2445),s=r(96540),i=r(59674),a=r(50290),o=r(27509),l=r(8558);function c({endTime:e,isRunning:t,startTime:r,status:c="success"}){const d=(0,a.DP)(),[u,h]=(0,s.useState)("00:00:00.00"),m=(0,s.useRef)();return(0,s.useEffect)((()=>{const n=()=>{m.current&&(clearInterval(m.current),m.current=void 0)};return t&&(m.current=setInterval((()=>{if(r){const s=e||(0,i.tB)();r<s&&h((0,i.RW)(r,s)),t||n()}}),30)),n}),[e,t,r]),(0,n.Y)(o.JU,{icon:(0,n.Y)(l.F.ClockCircleOutlined,{iconSize:"m"}),type:c,role:"timer",style:{fontFamily:d.fontFamilyCode},children:u})}},53853:(e,t)=>{"use strict";function r(e){const t=e.length;let r,n=0,s=0;for(;s<t;)n++,r=e.charCodeAt(s++),r>=55296&&r<=56319&&s<t&&(r=e.charCodeAt(s),56320==(64512&r)&&s++);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.code='require("ajv/dist/runtime/ucs2length").default'},55944:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(48343);n.code='require("ajv/dist/runtime/uri").default',t.default=n},56239:(e,t)=>{var r=/~/,n=/~[01]/g;function s(e){switch(e){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+e)}function i(e){return r.test(e)?e.replace(n,s):e}function a(e){if("string"==typeof e){if(""===(e=e.split("/"))[0])return e;throw new Error("Invalid JSON pointer.")}if(Array.isArray(e)){for(const t of e)if("string"!=typeof t&&"number"!=typeof t)throw new Error("Invalid JSON pointer. Must be of type string or number.");return e}throw new Error("Invalid JSON pointer.")}function o(e,t){if("object"!=typeof e)throw new Error("Invalid input object.");var r=(t=a(t)).length;if(1===r)return e;for(var n=1;n<r;){if(e=e[i(t[n++])],r===n)return e;if("object"!=typeof e||null===e)return}}function l(e,t,r){if("object"!=typeof e)throw new Error("Invalid input object.");if(0===(t=a(t)).length)throw new Error("Invalid JSON pointer for set.");return function(e,t,r){for(var n,s,a=1,o=t.length;a<o;){if("constructor"===t[a]||"prototype"===t[a]||"__proto__"===t[a])return e;if(n=i(t[a++]),s=o>a,void 0===e[n]&&(Array.isArray(e)&&"-"===n&&(n=e.length),s&&(""!==t[a]&&t[a]<1/0||"-"===t[a]?e[n]=[]:e[n]={})),!s)break;e=e[n]}var l=e[n];return void 0===r?delete e[n]:e[n]=r,l}(e,t,r)}t.get=o,t.set=l,t.compile=function(e){var t=a(e);return{get:function(e){return o(e,t)},set:function(e,r){return l(e,t,r)}}}},56378:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(15457),s=r(65354),i=r(20494),a=r(93966),o=r(12661),l=r(83025),c=r(19713),d=r(38660),u=r(40117),h=r(67714),m=r(57923),p=r(16505),f=r(96163),y=r(15844),g=r(1239),v=r(14426);t.default=function(e=!1){const t=[m.default,p.default,f.default,y.default,g.default,v.default,c.default,d.default,l.default,u.default,h.default];return e?t.push(s.default,a.default):t.push(n.default,i.default),t.push(o.default),t}},56384:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(15765),s=r(99029),i=r(94227),a={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>s.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>s._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:r,schemaCode:a,data:o,$data:l,it:c}=e,{opts:d}=c;if(!l&&0===r.length)return;const u=r.length>=d.loopRequired;if(c.allErrors?function(){if(u||l)e.block$data(s.nil,h);else for(const t of r)(0,n.checkReportMissingProp)(e,t)}():function(){const i=t.let("missing");if(u||l){const r=t.let("valid",!0);e.block$data(r,(()=>function(r,i){e.setParams({missingProperty:r}),t.forOf(r,a,(()=>{t.assign(i,(0,n.propertyInData)(t,o,r,d.ownProperties)),t.if((0,s.not)(i),(()=>{e.error(),t.break()}))}),s.nil)}(i,r))),e.ok(r)}else t.if((0,n.checkMissingProp)(e,r,i)),(0,n.reportMissingProp)(e,i),t.else()}(),d.strictRequired){const t=e.parentSchema.properties,{definedProperties:n}=e.it;for(const e of r)if(void 0===(null==t?void 0:t[e])&&!n.has(e)){const t=`required property "${e}" is not defined at "${c.schemaEnv.baseId+c.errSchemaPath}" (strictRequired)`;(0,i.checkStrictMode)(c,t,c.opts.strictRequired)}}function h(){t.forOf("prop",a,(r=>{e.setParams({missingProperty:r}),t.if((0,n.noPropertyInData)(t,o,r,d.ownProperties),(()=>e.error()))}))}}};t.default=a},57845:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const n=r(41520);class s extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var i;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(i||(t.UsedValueState=i={})),t.varKinds={const:new n.Name("const"),let:new n.Name("let"),var:new n.Name("var")};class a{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof n.Name?e:this.name(e)}name(e){return new n.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,r;if((null===(r=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===r?void 0:r.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=a;class o extends n.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:r}){this.value=e,this.scopePath=n._`.${new n.Name(t)}[${r}]`}}t.ValueScopeName=o;const l=n._`\n`;t.ValueScope=class extends a{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?l:n.nil}}get(){return this._scope}name(e){return new o(e,this._newName(e))}value(e,t){var r;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const n=this.toName(e),{prefix:s}=n,i=null!==(r=t.key)&&void 0!==r?r:t.ref;let a=this._values[s];if(a){const e=a.get(i);if(e)return e}else a=this._values[s]=new Map;a.set(i,n);const o=this._scope[s]||(this._scope[s]=[]),l=o.length;return o[l]=t.ref,n.setValue(t,{property:s,itemIndex:l}),n}getValue(e,t){const r=this._values[e];if(r)return r.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,(t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return n._`${e}${t.scopePath}`}))}scopeCode(e=this._values,t,r){return this._reduceValues(e,(e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code}),t,r)}_reduceValues(e,r,a={},o){let l=n.nil;for(const c in e){const d=e[c];if(!d)continue;const u=a[c]=a[c]||new Map;d.forEach((e=>{if(u.has(e))return;u.set(e,i.Started);let a=r(e);if(a){const r=this.opts.es5?t.varKinds.var:t.varKinds.const;l=n._`${l}${r} ${e} = ${a};${this.opts._n}`}else{if(!(a=null==o?void 0:o(e)))throw new s(e);l=n._`${l}${a}${this.opts._n}`}u.set(e,i.Completed)}))}return l}}},57923:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(94227),s={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:s}=e;if((0,n.alwaysValidSchema)(s,r))return void e.fail();const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,(()=>e.reset()),(()=>e.error()))},error:{message:"must NOT be valid"}};t.default=s},60617:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10208),s=r(99029),i=r(94227),a=r(76250),o={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>s.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>s._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:r,$data:o,schema:l,parentSchema:c,schemaCode:d,it:u}=e;if(!o&&!l)return;const h=t.let("valid"),m=c.items?(0,n.getSchemaTypes)(c.items):[];function p(i,a){const o=t.name("item"),l=(0,n.checkDataTypes)(m,o,u.opts.strictNumbers,n.DataType.Wrong),c=t.const("indices",s._`{}`);t.for(s._`;${i}--;`,(()=>{t.let(o,s._`${r}[${i}]`),t.if(l,s._`continue`),m.length>1&&t.if(s._`typeof ${o} == "string"`,s._`${o} += "_"`),t.if(s._`typeof ${c}[${o}] == "number"`,(()=>{t.assign(a,s._`${c}[${o}]`),e.error(),t.assign(h,!1).break()})).code(s._`${c}[${o}] = ${i}`)}))}function f(n,o){const l=(0,i.useFunc)(t,a.default),c=t.name("outer");t.label(c).for(s._`;${n}--;`,(()=>t.for(s._`${o} = ${n}; ${o}--;`,(()=>t.if(s._`${l}(${r}[${n}], ${r}[${o}])`,(()=>{e.error(),t.assign(h,!1).break(c)}))))))}e.block$data(h,(function(){const n=t.let("i",s._`${r}.length`),i=t.let("j");e.setParams({i:n,j:i}),t.assign(h,!0),t.if(s._`${n} > 1`,(()=>(m.length>0&&!m.some((e=>"object"===e||"array"===e))?p:f)(n,i)))}),s._`${d} === false`),e.ok(h)}};t.default=o},61163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxItems"===e?"more":"fewer";return n.str`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:s}=e,i="maxItems"===t?n.operators.GT:n.operators.LT;e.fail$data(n._`${r}.length ${i} ${s}`)}};t.default=s},61448:(e,t,r)=>{var n=r(98045),s=r(49326);e.exports=function(e,t){return null!=e&&s(e,t,n)}},62586:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;const n=r(28727),s=r(10208),i=r(7887),a=r(10208),o=r(7870),l=r(33673),c=r(24495),d=r(99029),u=r(64404),h=r(66939),m=r(94227),p=r(48708);function f({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},i){s.code.es5?e.func(t,d._`${u.default.data}, ${u.default.valCxt}`,n.$async,(()=>{e.code(d._`"use strict"; ${y(r,s)}`),function(e,t){e.if(u.default.valCxt,(()=>{e.var(u.default.instancePath,d._`${u.default.valCxt}.${u.default.instancePath}`),e.var(u.default.parentData,d._`${u.default.valCxt}.${u.default.parentData}`),e.var(u.default.parentDataProperty,d._`${u.default.valCxt}.${u.default.parentDataProperty}`),e.var(u.default.rootData,d._`${u.default.valCxt}.${u.default.rootData}`),t.dynamicRef&&e.var(u.default.dynamicAnchors,d._`${u.default.valCxt}.${u.default.dynamicAnchors}`)}),(()=>{e.var(u.default.instancePath,d._`""`),e.var(u.default.parentData,d._`undefined`),e.var(u.default.parentDataProperty,d._`undefined`),e.var(u.default.rootData,u.default.data),t.dynamicRef&&e.var(u.default.dynamicAnchors,d._`{}`)}))}(e,s),e.code(i)})):e.func(t,d._`${u.default.data}, ${function(e){return d._`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${e.dynamicRef?d._`, ${u.default.dynamicAnchors}={}`:d.nil}}={}`}(s)}`,n.$async,(()=>e.code(y(r,s)).code(i)))}function y(e,t){const r="object"==typeof e&&e[t.schemaId];return r&&(t.code.source||t.code.process)?d._`/*# sourceURL=${r} */`:d.nil}function g({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function v(e){return"boolean"!=typeof e.schema}function b(e){(0,m.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,m.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}(e)}function w(e,t){if(e.opts.jtd)return x(e,[],!1,t);const r=(0,s.getSchemaTypes)(e.schema);x(e,r,!(0,s.coerceAndCheckDataType)(e,r),t)}function S({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){const i=r.$comment;if(!0===s.$comment)e.code(d._`${u.default.self}.logger.log(${i})`);else if("function"==typeof s.$comment){const r=d.str`${n}/$comment`,s=e.scopeValue("root",{ref:t.root});e.code(d._`${u.default.self}.opts.$comment(${i}, ${r}, ${s}.schema)`)}}function x(e,t,r,n){const{gen:s,schema:o,data:l,allErrors:c,opts:h,self:p}=e,{RULES:f}=p;function y(m){(0,i.shouldUseGroup)(o,m)&&(m.type?(s.if((0,a.checkDataType)(m.type,l,h.strictNumbers)),$(e,m),1===t.length&&t[0]===m.type&&r&&(s.else(),(0,a.reportTypeError)(e)),s.endIf()):$(e,m),c||s.if(d._`${u.default.errors} === ${n||0}`))}!o.$ref||!h.ignoreKeywordsWithRef&&(0,m.schemaHasRulesButRef)(o,f)?(h.jtd||function(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(function(e,t){t.length&&(e.dataTypes.length?(t.forEach((t=>{E(e.dataTypes,t)||_(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)})),function(e,t){const r=[];for(const n of e.dataTypes)E(t,n)?r.push(n):t.includes("integer")&&"number"===n&&r.push("integer");e.dataTypes=r}(e,t)):e.dataTypes=t)}(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&_(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){const r=e.self.RULES.all;for(const n in r){const s=r[n];if("object"==typeof s&&(0,i.shouldUseRule)(e.schema,s)){const{type:r}=s.definition;r.length&&!r.some((e=>{return n=e,(r=t).includes(n)||"number"===n&&r.includes("integer");var r,n}))&&_(e,`missing type "${r.join(",")}" for keyword "${n}"`)}}}(e,e.dataTypes))}(e,t),s.block((()=>{for(const e of f.rules)y(e);y(f.post)}))):s.block((()=>A(e,"$ref",f.all.$ref.definition)))}function $(e,t){const{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,o.assignDefaults)(e,t.type),r.block((()=>{for(const r of t.rules)(0,i.shouldUseRule)(n,r)&&A(e,r.keyword,r.definition,t.type)}))}function E(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function _(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,m.checkStrictMode)(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){v(e)&&(b(e),g(e))?function(e){const{schema:t,opts:r,gen:n}=e;f(e,(()=>{r.$comment&&t.$comment&&S(e),function(e){const{schema:t,opts:r}=e;void 0!==t.default&&r.useDefaults&&r.strictSchema&&(0,m.checkStrictMode)(e,"default is ignored in the schema root")}(e),n.let(u.default.vErrors,null),n.let(u.default.errors,0),r.unevaluated&&function(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",d._`${r}.evaluated`),t.if(d._`${e.evaluated}.dynamicProps`,(()=>t.assign(d._`${e.evaluated}.props`,d._`undefined`))),t.if(d._`${e.evaluated}.dynamicItems`,(()=>t.assign(d._`${e.evaluated}.items`,d._`undefined`)))}(e),w(e),function(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=e;r.$async?t.if(d._`${u.default.errors} === 0`,(()=>t.return(u.default.data)),(()=>t.throw(d._`new ${s}(${u.default.vErrors})`))):(t.assign(d._`${n}.errors`,u.default.vErrors),i.unevaluated&&function({gen:e,evaluated:t,props:r,items:n}){r instanceof d.Name&&e.assign(d._`${t}.props`,r),n instanceof d.Name&&e.assign(d._`${t}.items`,n)}(e),t.return(d._`${u.default.errors} === 0`))}(e)}))}(e):f(e,(()=>(0,n.topBoolOrEmptySchema)(e)))};class C{constructor(e,t,r){if((0,l.validateKeywordUsage)(e,t,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,m.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",O(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,l.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",u.default.errors))}result(e,t,r){this.failResult((0,d.not)(e),t,r)}failResult(e,t,r){this.gen.if(e),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,d.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(d._`${t} !== undefined && (${(0,d.or)(this.invalid$data(),e)})`)}error(e,t,r){if(t)return this.setParams(t),this._error(e,r),void this.setParams({});this._error(e,r)}_error(e,t){(e?p.reportExtraError:p.reportError)(this,this.def.error,t)}$dataError(){(0,p.reportError)(this,this.def.$dataError||p.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,p.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,r=d.nil){this.gen.block((()=>{this.check$data(e,r),t()}))}check$data(e=d.nil,t=d.nil){if(!this.$data)return;const{gen:r,schemaCode:n,schemaType:s,def:i}=this;r.if((0,d.or)(d._`${n} === undefined`,t)),e!==d.nil&&r.assign(e,!0),(s.length||i.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==d.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:r,def:n,it:s}=this;return(0,d.or)(function(){if(r.length){if(!(t instanceof d.Name))throw new Error("ajv implementation error");const e=Array.isArray(r)?r:[r];return d._`${(0,a.checkDataTypes)(e,t,s.opts.strictNumbers,a.DataType.Wrong)}`}return d.nil}(),function(){if(n.validateSchema){const r=e.scopeValue("validate$data",{ref:n.validateSchema});return d._`!${r}(${t})`}return d.nil}())}subschema(e,t){const r=(0,c.getSubschema)(this.it,e);(0,c.extendSubschemaData)(r,this.it,e),(0,c.extendSubschemaMode)(r,e);const s={...this.it,...r,items:void 0,props:void 0};return function(e,t){v(e)&&(b(e),g(e))?function(e,t){const{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&S(e),function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,h.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const i=n.const("_errs",u.default.errors);w(e,i),n.var(t,d._`${i} === ${u.default.errors}`)}(e,t):(0,n.boolOrEmptySchema)(e,t)}(s,t),s}mergeEvaluated(e,t){const{it:r,gen:n}=this;r.opts.unevaluated&&(!0!==r.props&&void 0!==e.props&&(r.props=m.mergeEvaluated.props(n,e.props,r.props,t)),!0!==r.items&&void 0!==e.items&&(r.items=m.mergeEvaluated.items(n,e.items,r.items,t)))}mergeValidEvaluated(e,t){const{it:r,gen:n}=this;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return n.if(t,(()=>this.mergeEvaluated(e,d.Name))),!0}}function A(e,t,r,n){const s=new C(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,l.funcKeywordCode)(s,r):"macro"in r?(0,l.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,l.funcKeywordCode)(s,r)}t.KeywordCxt=C;const k=/^\/(?:[^~]|~0|~1)*$/,T=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function O(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,i;if(""===e)return u.default.rootData;if("/"===e[0]){if(!k.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,i=u.default.rootData}else{const a=T.exec(e);if(!a)throw new Error(`Invalid JSON-pointer: ${e}`);const o=+a[1];if(s=a[2],"#"===s){if(o>=t)throw new Error(l("property/index",o));return n[t-o]}if(o>t)throw new Error(l("data",o));if(i=r[t-o],!s)return i}let a=i;const o=s.split("/");for(const e of o)e&&(i=d._`${i}${(0,d.getProperty)((0,m.unescapeJsonPointer)(e))}`,a=d._`${a} && ${i}`);return a;function l(e,r){return`Cannot access ${e} ${r} levels up, current level is ${t}`}}t.getData=O},63282:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=r(4042),s=r(86144),i=r(36653),a=r(72079),o=["/properties"],l="http://json-schema.org/draft-07/schema";class c extends n.default{_addVocabularies(){super._addVocabularies(),s.default.forEach((e=>this.addVocabulary(e))),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(a,o):a;this.addMetaSchema(e,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var d=r(62586);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var u=r(99029);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var h=r(13558);Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return h.default}});var m=r(34551);Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return m.default}})},63439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>n.str`must be multiple of ${e}`,params:({schemaCode:e})=>n._`{multipleOf: ${e}}`},code(e){const{gen:t,data:r,schemaCode:s,it:i}=e,a=i.opts.multipleOfPrecision,o=t.let("res"),l=a?n._`Math.abs(Math.round(${o}) - ${o}) > 1e-${a}`:n._`${o} !== parseInt(${o})`;e.fail$data(n._`(${s} === 0 || (${o} = ${r}/${s}, ${l}))`)}};t.default=s},63837:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},64404:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s={data:new n.Name("data"),valCxt:new n.Name("valCxt"),instancePath:new n.Name("instancePath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope"),json:new n.Name("json"),jsonPos:new n.Name("jsonPos"),jsonLen:new n.Name("jsonLen"),jsonPart:new n.Name("jsonPart")};t.default=s},64914:e=>{"use strict";e.exports={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}},65354:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(20494),s={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,n.validateTuple)(e,"items")};t.default=s},66245:(e,t,r)=>{var n=r(83915),s=r(83120),i=r(69302),a=r(83693),o=i((function(e,t){return a(e)?n(e,s(t,1,a,!0)):[]}));e.exports=o},66415:e=>{"use strict";e.exports=function(e){return("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))&&e.valueOf()==e.valueOf()}},66939:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;const n=r(94227),s=r(32017),i=r(7106),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!l(e):!!t&&c(e)<=t)};const o=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(e){for(const t in e){if(o.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(l))return!0;if("object"==typeof r&&l(r))return!0}return!1}function c(e){let t=0;for(const r in e){if("$ref"===r)return 1/0;if(t++,!a.has(r)&&("object"==typeof e[r]&&(0,n.eachItem)(e[r],(e=>t+=c(e))),t===1/0))return 1/0}return t}function d(e,t="",r){!1!==r&&(t=m(t));const n=e.parse(t);return u(e,n)}function u(e,t){return e.serialize(t).split("#")[0]+"#"}t.getFullPath=d,t._getFullPath=u;const h=/#\/?$/;function m(e){return e?e.replace(h,""):""}t.normalizeId=m,t.resolveUrl=function(e,t,r){return r=m(r),e.resolve(t,r)};const p=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:r,uriResolver:n}=this.opts,a=m(e[r]||t),o={"":a},l=d(n,a,!1),c={},u=new Set;return i(e,{allKeys:!0},((e,t,n,s)=>{if(void 0===s)return;const i=l+t;let a=o[s];function d(t){const r=this.opts.uriResolver.resolve;if(t=m(a?r(a,t):t),u.has(t))throw f(t);u.add(t);let n=this.refs[t];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?h(e,n.schema,t):t!==m(i)&&("#"===t[0]?(h(e,c[t],t),c[t]=e):this.refs[t]=i),t}function y(e){if("string"==typeof e){if(!p.test(e))throw new Error(`invalid anchor "${e}"`);d.call(this,`#${e}`)}}"string"==typeof e[r]&&(a=d.call(this,e[r])),y.call(this,e.$anchor),y.call(this,e.$dynamicAnchor),o[t]=a})),c;function h(e,t,r){if(void 0!==t&&!s(e,t))throw f(r)}function f(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},67060:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(75882),s=r(63439),i=r(77307),a=r(90422),o=r(34486),l=r(56384),c=r(61163),d=r(60617),u=r(27935),h=r(28643),m=[n.default,s.default,i.default,a.default,o.default,l.default,c.default,d.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,h.default];t.default=m},67714:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(15765),s=r(99029),i=r(94227),a=r(94227),o={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:o,parentSchema:l,it:c}=e,{opts:d}=c,u=(0,n.allSchemaProperties)(r),h=u.filter((e=>(0,i.alwaysValidSchema)(c,r[e])));if(0===u.length||h.length===u.length&&(!c.opts.unevaluated||!0===c.props))return;const m=d.strictSchema&&!d.allowMatchingProperties&&l.properties,p=t.name("valid");!0===c.props||c.props instanceof s.Name||(c.props=(0,a.evaluatedPropsToName)(t,c.props));const{props:f}=c;function y(e){for(const t in m)new RegExp(e).test(t)&&(0,i.checkStrictMode)(c,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function g(r){t.forIn("key",o,(i=>{t.if(s._`${(0,n.usePattern)(e,r)}.test(${i})`,(()=>{const n=h.includes(r);n||e.subschema({keyword:"patternProperties",schemaProp:r,dataProp:i,dataPropType:a.Type.Str},p),c.opts.unevaluated&&!0!==f?t.assign(s._`${f}[${i}]`,!0):n||c.allErrors||t.if((0,s.not)(p),(()=>t.break()))}))}))}!function(){for(const e of u)m&&y(e),c.allErrors?g(e):(t.var(p,!0),g(e),t.if(p))}()}};t.default=o},68182:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(14018),s=r(26461),i=r(99029),a=new i.Name("fullFormats"),o=new i.Name("fastFormats"),l=(e,t={keywords:!0})=>{if(Array.isArray(t))return c(e,t,n.fullFormats,a),e;const[r,i]="fast"===t.mode?[n.fastFormats,o]:[n.fullFormats,a];return c(e,t.formats||n.formatNames,r,i),t.keywords&&s.default(e),e};function c(e,t,r,n){var s,a;null!==(s=(a=e.opts.code).formats)&&void 0!==s||(a.formats=i._`require("ajv-formats/dist/formats").${n}`);for(const n of t)e.addFormat(n,r[n])}l.get=(e,t="full")=>{const r=("fast"===t?n.fastFormats:n.fullFormats)[e];if(!r)throw new Error(`Unknown format "${e}"`);return r},e.exports=t=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l},69857:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},70713:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>u});var n=r(96540);let s;s="undefined"!=typeof window?window:"undefined"!=typeof self?self:r.g;let i=null,a=null;const o=s.clearTimeout,l=s.setTimeout,c=s.cancelAnimationFrame||s.mozCancelAnimationFrame||s.webkitCancelAnimationFrame,d=s.requestAnimationFrame||s.mozRequestAnimationFrame||s.webkitRequestAnimationFrame;null==c||null==d?(i=o,a=function(e){return l(e,20)}):(i=function([e,t]){c(e),o(t)},a=function(e){const t=d((function(){o(r),e()})),r=l((function(){c(t),e()}),20);return[t,r]});class u extends n.Component{constructor(...e){super(...e),this.state={height:this.props.defaultHeight||0,scaledHeight:this.props.defaultHeight||0,scaledWidth:this.props.defaultWidth||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:e,disableWidth:t,onResize:r}=this.props;if(this._parentNode){const n=window.getComputedStyle(this._parentNode)||{},s=parseFloat(n.paddingLeft||"0"),i=parseFloat(n.paddingRight||"0"),a=parseFloat(n.paddingTop||"0"),o=parseFloat(n.paddingBottom||"0"),l=this._parentNode.getBoundingClientRect(),c=l.height-a-o,d=l.width-s-i,u=this._parentNode.offsetHeight-a-o,h=this._parentNode.offsetWidth-s-i;(e||this.state.height===u&&this.state.scaledHeight===c)&&(t||this.state.width===h&&this.state.scaledWidth===d)||(this.setState({height:u,width:h,scaledHeight:c,scaledWidth:d}),"function"==typeof r&&r({height:u,scaledHeight:c,scaledWidth:d,width:h}))}},this._setRef=e=>{this._autoSizer=e}}componentDidMount(){const{nonce:e}=this.props,t=this._autoSizer?this._autoSizer.parentNode:null;if(null!=t&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){this._parentNode=t;const r=t.ownerDocument.defaultView.ResizeObserver;null!=r?(this._resizeObserver=new r((()=>{this._timeoutId=setTimeout(this._onResize,0)})),this._resizeObserver.observe(t)):(this._detectElementResize=function(e){let t,r,n,o,l,c,d;const u="undefined"!=typeof document&&document.attachEvent;if(!u){c=function(e){const t=e.__resizeTriggers__,r=t.firstElementChild,n=t.lastElementChild,s=r.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,s.style.width=r.offsetWidth+1+"px",s.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight},l=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},d=function(e){if(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)return;const t=this;c(this),this.__resizeRAF__&&i(this.__resizeRAF__),this.__resizeRAF__=a((function(){l(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(r){r.call(t,e)})))}))};let e=!1,s="";n="animationstart";const u="Webkit Moz O ms".split(" ");let h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m="";{const t=document.createElement("fakeelement");if(void 0!==t.style.animationName&&(e=!0),!1===e)for(let r=0;r<u.length;r++)if(void 0!==t.style[u[r]+"AnimationName"]){m=u[r],s="-"+m.toLowerCase()+"-",n=h[r],e=!0;break}}r="resizeanim",t="@"+s+"keyframes "+r+" { from { opacity: 0; } to { opacity: 0; } } ",o=s+"animation: 1ms "+r+"; "}return{addResizeListener:function(i,a){if(u)i.attachEvent("onresize",a);else{if(!i.__resizeTriggers__){const a=i.ownerDocument,l=s.getComputedStyle(i);l&&"static"===l.position&&(i.style.position="relative"),function(r){if(!r.getElementById("detectElementResize")){const n=(t||"")+".resize-triggers { "+(o||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',s=r.head||r.getElementsByTagName("head")[0],i=r.createElement("style");i.id="detectElementResize",i.type="text/css",null!=e&&i.setAttribute("nonce",e),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(r.createTextNode(n)),s.appendChild(i)}}(a),i.__resizeLast__={},i.__resizeListeners__=[],(i.__resizeTriggers__=a.createElement("div")).className="resize-triggers";const u=a.createElement("div");u.className="expand-trigger",u.appendChild(a.createElement("div"));const h=a.createElement("div");h.className="contract-trigger",i.__resizeTriggers__.appendChild(u),i.__resizeTriggers__.appendChild(h),i.appendChild(i.__resizeTriggers__),c(i),i.addEventListener("scroll",d,!0),n&&(i.__resizeTriggers__.__animationListener__=function(e){e.animationName===r&&c(i)},i.__resizeTriggers__.addEventListener(n,i.__resizeTriggers__.__animationListener__))}i.__resizeListeners__.push(a)}},removeResizeListener:function(e,t){if(u)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",d,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(n,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}(e),this._detectElementResize.addResizeListener(t,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),null!==this._timeoutId&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:e,defaultHeight:t,defaultWidth:r,disableHeight:s=!1,disableWidth:i=!1,doNotBailOutOnEmptyChildren:a=!1,nonce:o,onResize:l,style:c={},tagName:d="div",...u}=this.props,{height:h,scaledHeight:m,scaledWidth:p,width:f}=this.state,y={overflow:"visible"},g={};let v=!1;return s||(0===h&&(v=!0),y.height=0,g.height=h,g.scaledHeight=m),i||(0===f&&(v=!0),y.width=0,g.width=f,g.scaledWidth=p),a&&(v=!1),(0,n.createElement)(d,{ref:this._setRef,style:{...y,...c},...u},!v&&e(g))}}},72079:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},72128:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(83463),s=r(13693),i=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,s.default];t.default=i},73357:(e,t,r)=>{var n=r(19931);e.exports=function(e,t){return null==e||n(e,t)}},73835:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;const n=r(99029),s=r(13558),i=r(64404),a=r(66939),o=r(94227),l=r(62586);class c{constructor(e){var t;let r;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,a.normalizeId)(null==r?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==r?void 0:r.$async,this.refs={}}}function d(e){const t=h.call(this,e);if(t)return t;const r=(0,a.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:o,lines:c}=this.opts.code,{ownProperties:d}=this.opts,u=new n.CodeGen(this.scope,{es5:o,lines:c,ownProperties:d});let m;e.$async&&(m=u.scopeValue("Error",{ref:s.default,code:n._`require("ajv/dist/runtime/validation_error").default`}));const p=u.scopeName("validate");e.validateName=p;const f={gen:u,allErrors:this.opts.allErrors,data:i.default.data,parentData:i.default.parentData,parentDataProperty:i.default.parentDataProperty,dataNames:[i.default.data],dataPathArr:[n.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:u.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,n.stringify)(e.schema)}:{ref:e.schema}),validateName:p,ValidationError:m,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:n.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:n._`""`,opts:this.opts,self:this};let y;try{this._compilations.add(e),(0,l.validateFunctionCode)(f),u.optimize(this.opts.code.optimize);const t=u.toString();y=`${u.scopeRefs(i.default.scope)}return ${t}`,this.opts.code.process&&(y=this.opts.code.process(y,e));const r=new Function(`${i.default.self}`,`${i.default.scope}`,y)(this,this.scope.get());if(this.scope.value(p,{ref:r}),r.errors=null,r.schema=e.schema,r.schemaEnv=e,e.$async&&(r.$async=!0),!0===this.opts.code.source&&(r.source={validateName:p,validateCode:t,scopeValues:u._values}),this.opts.unevaluated){const{props:e,items:t}=f;r.evaluated={props:e instanceof n.Name?void 0:e,items:t instanceof n.Name?void 0:t,dynamicProps:e instanceof n.Name,dynamicItems:t instanceof n.Name},r.source&&(r.source.evaluated=(0,n.stringify)(r.evaluated))}return e.validate=r,e}catch(t){throw delete e.validate,delete e.validateName,y&&this.logger.error("Error compiling schema, function code:",y),t}finally{this._compilations.delete(e)}}function u(e){return(0,a.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:d.call(this,e)}function h(e){for(const n of this._compilations)if(r=e,(t=n).schema===r.schema&&t.root===r.root&&t.baseId===r.baseId)return n;var t,r}function m(e,t){let r;for(;"string"==typeof(r=this.refs[t]);)t=r;return r||this.schemas[t]||p.call(this,e,t)}function p(e,t){const r=this.opts.uriResolver.parse(t),n=(0,a._getFullPath)(this.opts.uriResolver,r);let s=(0,a.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return y.call(this,r,e);const i=(0,a.normalizeId)(n),o=this.refs[i]||this.schemas[i];if("string"==typeof o){const t=p.call(this,e,o);if("object"!=typeof(null==t?void 0:t.schema))return;return y.call(this,r,t)}if("object"==typeof(null==o?void 0:o.schema)){if(o.validate||d.call(this,o),i===(0,a.normalizeId)(t)){const{schema:t}=o,{schemaId:r}=this.opts,n=t[r];return n&&(s=(0,a.resolveUrl)(this.opts.uriResolver,s,n)),new c({schema:t,schemaId:r,root:e,baseId:s})}return y.call(this,r,o)}}t.SchemaEnv=c,t.compileSchema=d,t.resolveRef=function(e,t,r){var n;r=(0,a.resolveUrl)(this.opts.uriResolver,t,r);const s=e.refs[r];if(s)return s;let i=m.call(this,e,r);if(void 0===i){const s=null===(n=e.localRefs)||void 0===n?void 0:n[r],{schemaId:a}=this.opts;s&&(i=new c({schema:s,schemaId:a,root:e,baseId:t}))}return void 0!==i?e.refs[r]=u.call(this,i):void 0},t.getCompilingSchema=h,t.resolveSchema=p;const f=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function y(e,{baseId:t,schema:r,root:n}){var s;if("/"!==(null===(s=e.fragment)||void 0===s?void 0:s[0]))return;for(const n of e.fragment.slice(1).split("/")){if("boolean"==typeof r)return;const e=r[(0,o.unescapeFragment)(n)];if(void 0===e)return;const s="object"==typeof(r=e)&&r[this.opts.schemaId];!f.has(n)&&s&&(t=(0,a.resolveUrl)(this.opts.uriResolver,t,s))}let i;if("boolean"!=typeof r&&r.$ref&&!(0,o.schemaHasRulesButRef)(r,this.RULES)){const e=(0,a.resolveUrl)(this.opts.uriResolver,t,r.$ref);i=p.call(this,n,e)}const{schemaId:l}=this.opts;return i=i||new c({schema:r,schemaId:l,root:n,baseId:t}),i.schema!==i.root.schema?i:void 0}},74354:(e,t,r)=>{var n=r(91033),s=r(69302),i=r(52606),a=r(6924),o=s((function(e){return e.push(void 0,i),n(a,void 0,e)}));e.exports=o},75882:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=n.operators,i={maximum:{okStr:"<=",ok:s.LTE,fail:s.GT},minimum:{okStr:">=",ok:s.GTE,fail:s.LT},exclusiveMaximum:{okStr:"<",ok:s.LT,fail:s.GTE},exclusiveMinimum:{okStr:">",ok:s.GT,fail:s.LTE}},a={message:({keyword:e,schemaCode:t})=>n.str`must be ${i[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>n._`{comparison: ${i[e].okStr}, limit: ${t}}`},o={keyword:Object.keys(i),type:"number",schemaType:"number",$data:!0,error:a,code(e){const{keyword:t,data:r,schemaCode:s}=e;e.fail$data(n._`${r} ${i[t].fail} ${s} || isNaN(${r})`)}};t.default=o},76250:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(32017);n.code='require("ajv/dist/runtime/equal").default',t.default=n},77290:(e,t,r)=>{"use strict";r.d(t,{D:()=>F});var n=r(62193),s=r.n(n),i=r(2445),a=r(96540),o=r(51692),l=r(22750),c=r(97163),d=r(8558),u=r(76576),h=r(91196),m=r(88217),p=r(17355),f=r(49965),y=r(50290),g=r(79378),v=r(74098),b=r(7741),w=r(59744),S=r(99106),x=r(61225),$=r(74353),E=r.n($),_=r(58561),C=r.n(_),A=r(49299),k=r(91412),T=r(89105),O=r(28674),P=r(94921),D=r(85923);const N=y.I4.div`
  ${({theme:e})=>`\n    .sdm-body {\n      padding: ${4*e.sizeUnit}px ${6*e.sizeUnit}px;\n    }\n\n    .sdm-prompt {\n      margin-bottom: ${4*e.sizeUnit}px;\n      color: ${e.colorTextSecondary};\n    }\n\n    .sdm-radio-group {\n      display: flex;\n      flex-direction: column;\n      gap: ${6*e.sizeUnit}px;\n    }\n\n    .sdm-radio-option {\n      display: flex;\n      flex-direction: column;\n      gap: ${3*e.sizeUnit}px;\n    }\n\n    .sdm-radio {\n      margin: 0;\n      .ant-radio {\n        margin-right: ${2*e.sizeUnit}px;\n      }\n      .ant-radio-wrapper {\n        color: ${e.colorText};\n      }\n    }\n\n    .sdm-form-field {\n      margin-left: 0;\n      max-width: 400px;\n    }\n\n    .sdm-overwrite-msg {\n      padding: ${4*e.sizeUnit}px ${6*e.sizeUnit}px;\n      text-align: center;\n      color: ${e.colorText};\n    }\n  `}
`,I=async(e,t,r,n,s,i)=>{const a=`api/v1/dataset/${t}?override_columns=${i}`,o=JSON.stringify({sql:r,columns:n,owners:s,database_id:e});return(await g.A.put({endpoint:a,headers:{"Content-Type":"application/json"},body:o})).json.result},j=(0,v.t)("Untitled Dataset"),F=({visible:e,onHide:t,buttonTextOnSave:r,buttonTextOnOverwrite:n,modalDescription:y,datasource:$,openWindow:_=!0,formData:F={}})=>{const R=(0,x.d4)((e=>{var t;return(null==(t=e.common)||null==(t=t.conf)?void 0:t.DEFAULT_VIZ_TYPE)||b.Y.Table})),q=()=>`${(null==$?void 0:$.name)||j} ${E()().format("L HH:mm:ss")}`,[M,z]=(0,a.useState)(q()),[Y,L]=(0,a.useState)(T.lr.SaveNew),[U,V]=(0,a.useState)(!1),[B,W]=(0,a.useState)({}),[H,Q]=(0,a.useState)(void 0),[K,G]=(0,a.useState)(!1),J=(0,x.d4)((e=>e.user)),Z=(0,x.wA)(),[X,ee]=(0,a.useState)(!1),te=e=>{_?window.open(e,"_blank","noreferrer"):window.location.href=e},re={...T.V0,...F||{}},ne=(0,a.useCallback)((async(e="")=>{const{userId:t}=J,r=C().encode({filters:[{col:"table_name",opr:"ct",value:e},{col:"owners",opr:"rel_m_m",value:t}],order_column:"changed_on_delta_humanized",order_direction:"desc"});return g.A.get({endpoint:`/api/v1/dataset/?q=${r}`}).then((e=>({data:e.json.result.map((e=>({value:e.table_name,label:e.table_name,datasetid:e.id,owners:e.owners}))),totalCount:e.json.count})))}),[J]),se=Y===T.lr.SaveNew&&0===M.length||Y===T.lr.OverwriteDataset&&s()(H);return(0,i.Y)(c.aF,{show:e,name:(0,v.t)("Save or Overwrite Dataset"),title:(0,i.Y)(o.r,{title:(0,v.t)("Save or Overwrite Dataset"),icon:(0,i.Y)(d.F.SaveOutlined,{})}),onHide:t,footer:(0,i.FD)(u.s,{align:"center",justify:"flex-end",gap:"8px",children:[(0,S.G7)(S.TO.EnableTemplateProcessing)&&(0,i.FD)("div",{style:{display:"flex",alignItems:"center"},children:[(0,i.Y)(h.A,{checked:X,onChange:e=>{var t;return ee(null!=(t=e.target.checked)&&t)}}),(0,i.Y)("span",{style:{marginLeft:"5px"},children:(0,v.t)("Include Template Parameters")})]}),Y===T.lr.SaveNew&&(0,i.Y)(m.$,{disabled:se,buttonStyle:"primary",onClick:()=>{var e,r;G(!0);const n=null!=(e=null==$?void 0:$.columns)?e:[];let s;if("string"==typeof(null==$?void 0:$.templateParams)&&X)try{const e=JSON.parse($.templateParams);e._filters&&delete e._filters,s=JSON.stringify(e)}catch(e){s=void 0}Z((0,A.createDatasource)({sql:$.sql,dbId:$.dbId||(null==$||null==(r=$.database)?void 0:r.id),catalog:null==$?void 0:$.catalog,schema:null==$?void 0:$.schema,templateParams:s,datasourceName:M})).then((e=>(0,P.T)(e.id,"table",{...re,datasource:`${e.id}__table`,...R===b.Y.Table&&{all_columns:n.map((e=>e.column_name))}}))).then((e=>{G(!1);const r=(0,O.eX)(null,{[D.vX.formDataKey.name]:e});te(r),z(q()),t()})).catch((()=>{G(!1),(0,k.iB)((0,v.t)("An error occurred saving dataset"))}))},loading:K,children:r}),Y===T.lr.OverwriteDataset&&(0,i.FD)(i.FK,{children:[U&&(0,i.Y)(m.$,{onClick:()=>{V(!1),W({})},children:(0,v.t)("Back")}),(0,i.Y)(m.$,{className:"md",buttonStyle:"primary",onClick:async()=>{if(U){G(!0);try{var e,r,n;const[,s]=await Promise.all([I(null==$?void 0:$.dbId,null==B?void 0:B.datasetid,null==$?void 0:$.sql,null==$||null==(e=$.columns)?void 0:e.map((e=>({column_name:e.column_name,type:e.type,is_dttm:e.is_dttm}))),null==B||null==(r=B.owners)?void 0:r.map((e=>e.id)),!0),(0,P.T)(B.datasetid,"table",{...re,datasource:`${B.datasetid}__table`,...R===b.Y.Table&&{all_columns:null==$||null==(n=$.columns)?void 0:n.map((e=>e.column_name))}})]);G(!1);const i=(0,O.eX)(null,{[D.vX.formDataKey.name]:s});te(i),V(!1),z(q()),t()}catch(e){G(!1),(0,w.h4)(e).then((e=>{Z((0,k.iB)(e.error||(0,v.t)("An error occurred while overwriting the dataset")))}))}}else V(!0)},disabled:se,loading:K,children:n})]})]}),children:(0,i.FD)(N,{children:[!U&&(0,i.FD)("div",{className:"sdm-body",children:[y&&(0,i.Y)("div",{className:"sdm-prompt",children:y}),(0,i.FD)(l.s.Group,{onChange:e=>{L(Number(e.target.value))},value:Y,className:"sdm-radio-group",children:[(0,i.FD)("div",{className:"sdm-radio-option",children:[(0,i.Y)(l.s,{className:"sdm-radio",value:1,children:(0,v.t)("Save as new")}),(0,i.Y)("div",{className:"sdm-form-field",children:(0,i.Y)(p.A,{value:M,onChange:e=>{z(e.target.value)},disabled:1!==Y,placeholder:(0,v.t)("Dataset name")})})]}),(0,i.FD)("div",{className:"sdm-radio-option",children:[(0,i.Y)(l.s,{className:"sdm-radio",value:2,children:(0,v.t)("Overwrite existing")}),(0,i.Y)("div",{className:"sdm-form-field",children:(0,i.Y)(f.A,{allowClear:!0,showSearch:!0,placeholder:(0,v.t)("Select or type dataset name"),ariaLabel:(0,v.t)("Existing dataset"),onChange:(e,t)=>{W(t),Q(e)},options:e=>ne(e),value:H,filterOption:(e,t)=>t.value.toLowerCase().includes(e.toLowerCase()),disabled:2!==Y,getPopupContainer:()=>document.body})})]})]})]}),U&&(0,i.Y)("div",{className:"sdm-overwrite-msg",children:(0,v.t)("Are you sure you want to overwrite this dataset?")})]})})}},77307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=r(94227),i=r(53853),a={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxLength"===e?"more":"fewer";return n.str`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:a,it:o}=e,l="maxLength"===t?n.operators.GT:n.operators.LT,c=!1===o.opts.unicode?n._`${r}.length`:n._`${(0,s.useFunc)(e.gen,i.default)}(${r})`;e.fail$data(n._`${c} ${l} ${a}`)}};t.default=a},78867:(e,t,r)=>{"use strict";var n=r(29022),s=r(85419),i=r(96552),a=r(82986);e.exports=function(){var e,t,r,o,l,c,d,u=arguments.length;for(e=new Array(u),d=0;d<u;d++)e[d]=arguments[d];if(i(e)){if(2===u)return(l=e[0])<0&&(l=-l),(c=e[1])<0&&(c=-c),0===l||0===c?0:l/n(l,c)*c;r=e}else{if(!s(e[0]))throw new TypeError("lcm()::invalid input argument. Must provide an array of integers. Value: `"+e[0]+"`.");if(u>1){if(r=e[0],t=e[1],!a(t))throw new TypeError("lcm()::invalid input argument. Accessor must be a function. Value: `"+t+"`.")}else r=e[0]}if((o=r.length)<2)return null;if(t){for(l=new Array(o),d=0;d<o;d++)l[d]=t(r[d],d);r=l}if(u<3&&!i(r))throw new TypeError("lcm()::invalid input argument. Accessed array values must be integers. Value: `"+r+"`.");for(d=0;d<o;d++)(l=r[d])<0&&(r[d]=-l);for(l=r[0],d=1;d<o;d++){if(c=r[d],0===l||0===c)return 0;l=l/n(l,c)*c}return l}},80191:(e,t,r)=>{var n=r(34932),s=r(27185),i=r(69302),a=r(80741),o=r(68090),l=i((function(e){var t=o(e),r=n(e,a);return(t="function"==typeof t?t:void 0)&&r.pop(),r.length&&r[0]===e[0]?s(r,void 0,t):[]}));e.exports=l},80299:(e,t,r)=>{var n=r(83120),s=r(69302),i=r(55765),a=r(83693),o=s((function(e){return i(n(e,1,a,!0))}));e.exports=o},80795:(e,t,r)=>{var n=r(83120),s=1/0;e.exports=function(e){return null!=e&&e.length?n(e,s):[]}},81574:(e,t,r)=>{"use strict";r.d(t,{g:()=>d});var n=r(20249),s=r.n(n),i=r(2445),a=r(88603),o=r(50290),l=r(17437),c=r(95018);const d=({popupRender:e,tooltip:t,tooltipPlacement:r,children:n,...d})=>{const u=(0,o.DP)(),{type:h}=d,m=l.AH`
    ${(!h||"default"===h)&&".ant-dropdown-trigger {\n      position: relative;\n      &:before {\n        content: '';\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 1px;\n        height: 100%;\n      }\n      .anticon {\n        vertical-align: middle;\n      }\n    }"}
  `,p=(0,i.Y)(a.A.Button,{popupRender:e,...d,css:[m,l.AH`
          .ant-btn {
            height: 30px;
            box-shadow: none;
            font-size: ${u.fontSizeSM}px;
            font-weight: ${u.fontWeightStrong};
          }
        `],children:n});return t?(0,i.Y)(c.m,{placement:r,id:`${s()(t)}-tooltip`,title:t,children:p}):p}},82986:e=>{"use strict";e.exports=function(e){return"function"==typeof e}},83025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const n=r(99029),s=r(94227),i=r(15765);t.error={message:({params:{property:e,depsCount:t,deps:r}})=>{const s=1===t?"property":"properties";return n.str`must have ${s} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:s}})=>n._`{property: ${e},
    missingProperty: ${s},
    depsCount: ${t},
    deps: ${r}}`};const a={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){const[t,r]=function({schema:e}){const t={},r={};for(const n in e)"__proto__"!==n&&((Array.isArray(e[n])?t:r)[n]=e[n]);return[t,r]}(e);o(e,t),l(e,r)}};function o(e,t=e.schema){const{gen:r,data:s,it:a}=e;if(0===Object.keys(t).length)return;const o=r.let("missing");for(const l in t){const c=t[l];if(0===c.length)continue;const d=(0,i.propertyInData)(r,s,l,a.opts.ownProperties);e.setParams({property:l,depsCount:c.length,deps:c.join(", ")}),a.allErrors?r.if(d,(()=>{for(const t of c)(0,i.checkReportMissingProp)(e,t)})):(r.if(n._`${d} && (${(0,i.checkMissingProp)(e,c,o)})`),(0,i.reportMissingProp)(e,o),r.else())}}function l(e,t=e.schema){const{gen:r,data:n,keyword:a,it:o}=e,l=r.name("valid");for(const c in t)(0,s.alwaysValidSchema)(o,t[c])||(r.if((0,i.propertyInData)(r,n,c,o.opts.ownProperties),(()=>{const t=e.subschema({keyword:a,schemaProp:c},l);e.mergeValidEvaluated(t,l)}),(()=>r.var(l,!0))),e.ok(l))}t.validatePropertyDeps=o,t.validateSchemaDeps=l,t.default=a},83463:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=r},83915:(e,t,r)=>{var n=r(38859),s=r(15325),i=r(29905),a=r(34932),o=r(27301),l=r(19219);e.exports=function(e,t,r,c){var d=-1,u=s,h=!0,m=e.length,p=[],f=t.length;if(!m)return p;r&&(t=a(t,o(r))),c?(u=i,h=!1):t.length>=200&&(u=l,h=!1,t=new n(t));e:for(;++d<m;){var y=e[d],g=null==r?y:r(y);if(y=c||0!==y?y:0,h&&g==g){for(var v=f;v--;)if(t[v]===g)continue e;p.push(y)}else u(t,g,c)||p.push(y)}return p}},84356:(e,t,r)=>{"use strict";var n=r(66415);e.exports=function(e){return n(e)&&e%1==0}},84684:(e,t,r)=>{var n=r(69302),s=r(75288),i=r(36800),a=r(37241),o=Object.prototype,l=o.hasOwnProperty,c=n((function(e,t){e=Object(e);var r=-1,n=t.length,c=n>2?t[2]:void 0;for(c&&i(t[0],t[1],c)&&(n=1);++r<n;)for(var d=t[r],u=a(d),h=-1,m=u.length;++h<m;){var p=u[h],f=e[p];(void 0===f||s(f,o[p])&&!l.call(e,p))&&(e[p]=d[p])}return e}));e.exports=c},85419:e=>{"use strict";e.exports=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},85558:e=>{e.exports=function(e,t,r,n,s){return s(e,(function(e,s,i){r=n?(n=!1,e):t(r,e,s,i)})),r}},85692:(e,t,r)=>{"use strict";r.d(t,{Wx:()=>c});var n=r(96540),s=(Object.defineProperty,new Map),i=new WeakMap,a=0,o=void 0;function l(e,t,r={},n=o){if(void 0===window.IntersectionObserver&&void 0!==n){const s=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"==typeof r.threshold?r.threshold:0,time:0,boundingClientRect:s,intersectionRect:s,rootBounds:s}),()=>{}}const{id:l,observer:c,elements:d}=function(e){const t=function(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(r=e.root,r?(i.has(r)||(a+=1,i.set(r,a.toString())),i.get(r)):"0"):e[t]}`;var r})).toString()}(e);let r=s.get(t);if(!r){const n=new Map;let i;const a=new IntersectionObserver((t=>{t.forEach((t=>{var r;const s=t.isIntersecting&&i.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=s),null==(r=n.get(t.target))||r.forEach((e=>{e(s,t)}))}))}),e);i=a.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:a,elements:n},s.set(t,r)}return r}(r),u=d.get(e)||[];return d.has(e)||d.set(e,u),u.push(t),c.observe(e),function(){u.splice(u.indexOf(t),1),0===u.length&&(d.delete(e),c.unobserve(e)),0===d.size&&(c.disconnect(),s.delete(l))}}function c({threshold:e,delay:t,trackVisibility:r,rootMargin:s,root:i,triggerOnce:a,skip:o,initialInView:c,fallbackInView:d,onChange:u}={}){var h;const[m,p]=n.useState(null),f=n.useRef(u),[y,g]=n.useState({inView:!!c,entry:void 0});f.current=u,n.useEffect((()=>{if(o||!m)return;let n;return n=l(m,((e,t)=>{g({inView:e,entry:t}),f.current&&f.current(e,t),t.isIntersecting&&a&&n&&(n(),n=void 0)}),{root:i,rootMargin:s,threshold:e,trackVisibility:r,delay:t},d),()=>{n&&n()}}),[Array.isArray(e)?e.toString():e,m,i,s,a,o,r,d,t]);const v=null==(h=y.entry)?void 0:h.target,b=n.useRef(void 0);m||!v||a||o||b.current===v||(b.current=v,g({inView:!!c,entry:void 0}));const w=[p,y.inView,y.entry];return w.ref=w[0],w.inView=w[1],w.entry=w[2],w}n.Component},86144:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(72128),s=r(67060),i=r(56378),a=r(97532),o=r(69857),l=[n.default,s.default,(0,i.default)(),a.default,o.metadataVocabulary,o.contentVocabulary];t.default=l},89063:(e,t,r)=>{"use strict";r.d(t,{F:()=>a});var n=r(2445),s=r(95018),i=r(88217);const a=({children:e=null,className:t="",onClick:r=()=>{},placement:a="top",style:o={},tooltip:l=null,mouseEnterDelay:c=.3,mouseLeaveDelay:d=.15})=>{const u=(0,n.Y)(i.$,{onClick:r,style:{padding:0,...o},buttonStyle:"link",className:`IconTooltip ${t}`,children:e});return l?(0,n.Y)(s.m,{id:"tooltip",title:l,placement:a,mouseEnterDelay:c,mouseLeaveDelay:d,children:u}):u}},90370:(e,t,r)=>{var n=r(2404),s=r(33031),i=r(63375),a=r(9063),o=r(84684),l=r(80191),c=r(11331),d=r(53812),u=e=>Array.isArray(e)?e:[e],h=e=>void 0===e,m=e=>c(e)||Array.isArray(e)?Object.keys(e):[],p=(e,t)=>e.hasOwnProperty(t),f=e=>s(i(e)),y=e=>h(e)||Array.isArray(e)&&0===e.length,g=(e,t)=>h(e)&&0===t||h(t)&&0===e||n(e,t),v=e=>h(e)||n(e,{})||!0===e,b=e=>h(e)||n(e,{}),w=e=>h(e)||c(e)||!0===e||!1===e;function S(e,t){return!(!y(e)||!y(t))||n(f(e),f(t))}function x(e,t,r,s){var a=i(m(e).concat(m(t)));return!(!b(e)||!b(t))||(!b(e)||!m(t).length)&&(!b(t)||!m(e).length)&&a.every((function(r){var i=e[r],a=t[r];return Array.isArray(i)&&Array.isArray(a)?n(f(e),f(t)):!(Array.isArray(i)&&!Array.isArray(a))&&!(Array.isArray(a)&&!Array.isArray(i))&&((e,t,r,n)=>t&&p(t,r)&&e&&p(e,r)&&n(e[r],t[r]))(e,t,r,s)}))}function $(e,t,r,n){var s=a(e,n),i=a(t,n);return l(s,i,n).length===Math.max(s.length,i.length)}var E={title:n,uniqueItems:(e,t)=>h(e)&&!1===t||h(t)&&!1===e||n(e,t),minLength:g,minItems:g,minProperties:g,required:S,enum:S,type:function(e,t){return e=u(e),t=u(t),n(f(e),f(t))},items:function(e,t,r,s){return c(e)&&c(t)?s(e,t):Array.isArray(e)&&Array.isArray(t)?x(e,t,0,s):n(e,t)},anyOf:$,allOf:$,oneOf:$,properties:x,patternProperties:x,dependencies:x},_=["properties","patternProperties","dependencies","uniqueItems","minLength","minItems","minProperties","required"],C=["additionalProperties","additionalItems","contains","propertyNames","not"];e.exports=function e(t,r,s){if(s=o(s,{ignore:[]}),v(t)&&v(r))return!0;if(!w(t)||!w(r))throw new Error("Either of the values are not a JSON schema.");if(t===r)return!0;if(d(t)&&d(r))return t===r;if(void 0===t&&!1===r||void 0===r&&!1===t)return!1;if(h(t)&&!h(r)||!h(t)&&h(r))return!1;var a=i(Object.keys(t).concat(Object.keys(r)));if(s.ignore.length&&(a=a.filter((e=>-1===s.ignore.indexOf(e)))),!a.length)return!0;function l(t,r){return e(t,r,s)}return a.every((function(i){var a=t[i],o=r[i];if(-1!==C.indexOf(i))return e(a,o,s);var c=E[i];if(c||(c=n),n(a,o))return!0;if(-1===_.indexOf(i)&&(!p(t,i)&&p(r,i)||p(t,i)&&!p(r,i)))return a===o;var u=c(a,o,i,l);if(!d(u))throw new Error("Comparer must return true or false");return u}))}},90422:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(15765),s=r(99029),i={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>s.str`must match pattern "${e}"`,params:({schemaCode:e})=>s._`{pattern: ${e}}`},code(e){const{data:t,$data:r,schema:i,schemaCode:a,it:o}=e,l=o.opts.unicodeRegExp?"u":"",c=r?s._`(new RegExp(${a}, ${l}))`:(0,n.usePattern)(e,i);e.fail$data(s._`!${c}.test(${t})`)}};t.default=i},91648:(e,t,r)=>{var n=r(83915),s=r(69302),i=r(83693),a=s((function(e,t){return i(e)?n(e,t):[]}));e.exports=a},93820:(e,t,r)=>{"use strict";r.d(t,{k:()=>a});var n=r(90179),s=r.n(n);const i=["url_params"],a=e=>s()(e,i)},93966:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=r(94227),i=r(15765),a=r(15457),o={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>n.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>n._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:o}=r;n.items=!0,(0,s.alwaysValidSchema)(n,t)||(o?(0,a.validateAdditionalItems)(e,o):e.ok((0,i.validateArray)(e)))}};t.default=o},94083:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>$,Kt:()=>x,cs:()=>b});var n=r(2445),s=r(96540),i=r(50290),a=r(74098),o=r(59744),l=r(54569),c=r(2801),d=r(89232),u=r(8558),h=r(75116),m=r(9992),p=r(35273),f=r(64457),y=r(98244);const g=i.I4.div`
  ${({theme:e})=>`\n    .refresh {\n      display: flex;\n      align-items: center;\n      width: 30px;\n      margin-left: ${e.sizeUnit}px;\n    }\n\n    .section {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n    }\n\n    .divider {\n      border-bottom: 1px solid ${e.colorSplit};\n      margin: 15px 0;\n    }\n\n    .table-length {\n      color: ${e.colorTextSecondary};\n    }\n\n    .select {\n      flex: 1;\n      max-width: calc(100% - ${e.sizeUnit+30}px)\n    }\n  `}
`,v=i.I4.span`
  align-items: center;
  display: flex;
  white-space: nowrap;

  svg,
  small {
    margin-right: ${({theme:e})=>e.sizeUnit}px;
  }
`,b=({table:e})=>{const{value:t,type:r,extra:s}=e;return(0,n.FD)(v,{title:t,children:["view"===r?(0,n.Y)(u.F.EyeOutlined,{iconSize:"m"}):(0,n.Y)(u.F.InsertRowAboveOutlined,{iconSize:"m"}),(null==s?void 0:s.certification)&&(0,n.Y)(l.T,{certifiedBy:s.certification.certified_by,details:s.certification.details,size:"l"}),(null==s?void 0:s.warning_markdown)&&(0,n.Y)(p.A,{warningMarkdown:s.warning_markdown,size:"l",marginRight:4}),t]})};function w(e,t){return(0,n.FD)("div",{className:"section",children:[(0,n.Y)("span",{className:"select",children:e}),(0,n.Y)("span",{className:"refresh",children:t})]})}const S=({database:e,emptyState:t,formMode:r=!1,getDbList:i,handleError:l,isDatabaseSelectEnabled:u=!0,onDbChange:p,onCatalogChange:v,onSchemaChange:S,readOnly:x=!1,onEmptyResults:$,catalog:E,schema:_,sqlLabMode:C=!0,tableSelectMode:A="single",tableValue:k,onTableSelectChange:T,customTableOptionLabelRenderer:O})=>{const{addSuccessToast:P}=(0,f.Yf)(),[D,N]=(0,s.useState)(E),[I,j]=(0,s.useState)(_),[F,R]=(0,s.useState)(void 0),{currentData:q,isFetching:M,refetch:z}=(0,y.ty)({dbId:null==e?void 0:e.id,catalog:D,schema:I,onSuccess:(e,t)=>{t&&P((0,a.t)("List updated"))},onError:e=>{(0,o.h4)(e).then((e=>{l((0,o.hi)((0,a.t)("There was an error loading the tables"),e))}))}}),Y=(0,s.useMemo)((()=>q?q.options.map((e=>({value:e.value,label:O?O(e):(0,n.Y)(b,{table:e}),text:e.value}))):[]),[q,O]);(0,s.useEffect)((()=>{void 0===e&&(N(void 0),j(void 0),R(void 0))}),[e,A]),(0,s.useEffect)((()=>{R("single"===A?Y.find((e=>e.value===k)):(null==Y?void 0:Y.filter((e=>e&&(null==k?void 0:k.includes(e.value)))))||[])}),[Y,k,A]);const L=(0,s.useMemo)((()=>(e,t)=>{const r=e.trim().toLowerCase(),{value:n}=t;return n.toLowerCase().includes(r)}),[]);return(0,n.FD)(g,{children:[(0,n.Y)(d.RA,{db:e,emptyState:t,formMode:r,getDbList:i,handleError:l,onDbChange:x?void 0:e=>{p&&p(e),N(void 0),j(void 0),R("single"===A?void 0:[])},onEmptyResults:$,onCatalogChange:x?void 0:e=>{N(e),v&&v(e),j(void 0),R("single"===A?void 0:[])},catalog:D,onSchemaChange:x?void 0:e=>{j(e),S&&S(e),R("single"===A?void 0:[])},schema:I,sqlLabMode:C,isDatabaseSelectEnabled:u&&!x,readOnly:x}),C&&!r&&(0,n.Y)("div",{className:"divider"}),function(){const e=I&&!r&&x||!I,t=C?(0,a.t)("See table schema"):(0,a.t)("Table"),s=(0,n.Y)(c.A,{ariaLabel:(0,a.t)("Select table or type to search tables"),disabled:e,filterOption:L,labelInValue:!0,loading:M,name:"select-table",onChange:e=>{return t=e,void(I?null==T||T(Array.isArray(t)?t.map((e=>null==e?void 0:e.value)):null==t?void 0:t.value,D,I):R(t));var t},options:Y,placeholder:(0,a.t)("Select table or type to search tables"),showSearch:!0,mode:A,value:F,allowClear:"multiple"===A,allowSelectAll:!1}),i=!x&&(0,n.Y)(m.A,{onClick:()=>z(),tooltipContent:(0,a.t)("Force refresh table list")});return(0,n.FD)(n.FK,{children:[(0,n.Y)(h.q,{children:t}),w(s,i)]})}()]})},x=e=>(0,n.Y)(S,{tableSelectMode:"multiple",...e}),$=S},94227:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const n=r(99029),s=r(41520);function i(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema)return;if("boolean"==typeof t)return;const s=n.RULES.keywords;for(const r in t)s[r]||p(e,`unknown keyword: "${r}"`)}function a(e,t){if("boolean"==typeof e)return!e;for(const r in e)if(t[r])return!0;return!1}function o(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function l(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:s}){return(i,a,o,l)=>{const c=void 0===o?a:o instanceof n.Name?(a instanceof n.Name?e(i,a,o):t(i,a,o),o):a instanceof n.Name?(t(i,o,a),a):r(a,o);return l!==n.Name||c instanceof n.Name?c:s(i,c)}}function d(e,t){if(!0===t)return e.var("props",!0);const r=e.var("props",n._`{}`);return void 0!==t&&u(e,r,t),r}function u(e,t,r){Object.keys(r).forEach((r=>e.assign(n._`${t}${(0,n.getProperty)(r)}`,!0)))}t.toHash=function(e){const t={};for(const r of e)t[r]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(i(e,t),!a(t,e.self.RULES.all))},t.checkUnknownRules=i,t.schemaHasRules=a,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const r in e)if("$ref"!==r&&t.all[r])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},r,s,i){if(!i){if("number"==typeof r||"boolean"==typeof r)return r;if("string"==typeof r)return n._`${r}`}return n._`${e}${t}${(0,n.getProperty)(s)}`},t.unescapeFragment=function(e){return l(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(o(e))},t.escapeJsonPointer=o,t.unescapeJsonPointer=l,t.eachItem=function(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)},t.mergeEvaluated={props:c({mergeNames:(e,t,r)=>e.if(n._`${r} !== true && ${t} !== undefined`,(()=>{e.if(n._`${t} === true`,(()=>e.assign(r,!0)),(()=>e.assign(r,n._`${r} || {}`).code(n._`Object.assign(${r}, ${t})`)))})),mergeToName:(e,t,r)=>e.if(n._`${r} !== true`,(()=>{!0===t?e.assign(r,!0):(e.assign(r,n._`${r} || {}`),u(e,r,t))})),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:d}),items:c({mergeNames:(e,t,r)=>e.if(n._`${r} !== true && ${t} !== undefined`,(()=>e.assign(r,n._`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`))),mergeToName:(e,t,r)=>e.if(n._`${r} !== true`,(()=>e.assign(r,!0===t||n._`${r} > ${t} ? ${r} : ${t}`))),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=d,t.setEvaluated=u;const h={};var m;function p(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,!0===r)throw new Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:h[t.code]||(h[t.code]=new s._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(m||(t.Type=m={})),t.getErrorPath=function(e,t,r){if(e instanceof n.Name){const s=t===m.Num;return r?s?n._`"[" + ${e} + "]"`:n._`"['" + ${e} + "']"`:s?n._`"/" + ${e}`:n._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,n.getProperty)(e).toString():"/"+o(e)},t.checkStrictMode=p},94737:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>n.str`must match format "${e}"`,params:({schemaCode:e})=>n._`{format: ${e}}`},code(e,t){const{gen:r,data:s,$data:i,schema:a,schemaCode:o,it:l}=e,{opts:c,errSchemaPath:d,schemaEnv:u,self:h}=l;c.validateFormats&&(i?function(){const i=r.scopeValue("formats",{ref:h.formats,code:c.code.formats}),a=r.const("fDef",n._`${i}[${o}]`),l=r.let("fType"),d=r.let("format");r.if(n._`typeof ${a} == "object" && !(${a} instanceof RegExp)`,(()=>r.assign(l,n._`${a}.type || "string"`).assign(d,n._`${a}.validate`)),(()=>r.assign(l,n._`"string"`).assign(d,a))),e.fail$data((0,n.or)(!1===c.strictSchema?n.nil:n._`${o} && !${d}`,function(){const e=u.$async?n._`(${a}.async ? await ${d}(${s}) : ${d}(${s}))`:n._`${d}(${s})`,r=n._`(typeof ${d} == "function" ? ${e} : ${d}.test(${s}))`;return n._`${d} && ${d} !== true && ${l} === ${t} && !${r}`}()))}():function(){const i=h.formats[a];if(!i)return void function(){if(!1!==c.strictSchema)throw new Error(e());function e(){return`unknown format "${a}" ignored in schema at path "${d}"`}h.logger.warn(e())}();if(!0===i)return;const[o,l,m]=function(e){const t=e instanceof RegExp?(0,n.regexpCode)(e):c.code.formats?n._`${c.code.formats}${(0,n.getProperty)(a)}`:void 0,s=r.scopeValue("formats",{key:a,ref:e,code:t});return"object"!=typeof e||e instanceof RegExp?["string",e,s]:[e.type||"string",e.validate,n._`${s}.validate`]}(i);o===t&&e.pass(function(){if("object"==typeof i&&!(i instanceof RegExp)&&i.async){if(!u.$async)throw new Error("async format in sync schema");return n._`await ${m}(${s})`}return"function"==typeof l?n._`${m}(${s})`:n._`${m}.test(${s})`}())}())}};t.default=s},94921:(e,t,r)=>{"use strict";r.d(t,{T:()=>o,c:()=>l});var n=r(79378),s=r(93820);const i=(e,t)=>{let r="api/v1/explore/form_data";return e&&(r=r.concat(`/${e}`)),t&&(r=r.concat(`?tab_id=${t}`)),r},a=(e,t,r,n)=>{const i={datasource_id:e,datasource_type:t,form_data:JSON.stringify((0,s.k)(r))};return n&&(i.chart_id=n),i},o=(e,t,r,s,o)=>n.A.post({endpoint:i(void 0,o),jsonPayload:a(e,t,r,s)}).then((e=>e.json.key)),l=(e,t,r,s,o,l)=>n.A.put({endpoint:i(r,l),jsonPayload:a(e,t,s,o)}).then((e=>e.json.message))},95632:(e,t,r)=>{var n=r(73170);e.exports=function(e,t,r,s){return s="function"==typeof s?s:void 0,null==e?e:n(e,t,r,s)}},96163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),s=r(94227),i={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>n._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:r,parentSchema:i,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(a.opts.discriminator&&i.discriminator)return;const o=r,l=t.let("valid",!1),c=t.let("passing",null),d=t.name("_valid");e.setParams({passing:c}),t.block((function(){o.forEach(((r,i)=>{let o;(0,s.alwaysValidSchema)(a,r)?t.var(d,!0):o=e.subschema({keyword:"oneOf",schemaProp:i,compositeRule:!0},d),i>0&&t.if(n._`${d} && ${l}`).assign(l,!1).assign(c,n._`[${c}, ${i}]`).else(),t.if(d,(()=>{t.assign(l,!0),t.assign(c,i),o&&e.mergeEvaluated(o,n.Name)}))}))})),e.result(l,(()=>e.reset()),(()=>e.error(!0)))}};t.default=i},96552:(e,t,r)=>{"use strict";var n=r(85419),s=r(84356);e.exports=function(e){var t;if(!n(e))return!1;if(!(t=e.length))return!1;for(var r=0;r<t;r++)if(!s(e[r]))return!1;return!0}},97532:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=[r(94737).default];t.default=n},97652:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(r||(t.DiscrError=r={}))},98045:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e,r){return null!=e&&t.call(e,r)}},99029:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const n=r(41520),s=r(57845);var i=r(41520);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return i.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return i.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return i.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return i.Name}});var a=r(57845);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),t.operators={GT:new n._Code(">"),GTE:new n._Code(">="),LT:new n._Code("<"),LTE:new n._Code("<="),EQ:new n._Code("==="),NEQ:new n._Code("!=="),NOT:new n._Code("!"),OR:new n._Code("||"),AND:new n._Code("&&"),ADD:new n._Code("+")};class o{optimizeNodes(){return this}optimizeNames(e,t){return this}}class l extends o{constructor(e,t,r){super(),this.varKind=e,this.name=t,this.rhs=r}render({es5:e,_n:t}){const r=e?s.varKinds.var:this.varKind,n=void 0===this.rhs?"":` = ${this.rhs}`;return`${r} ${this.name}${n};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=P(this.rhs,e,t)),this}get names(){return this.rhs instanceof n._CodeOrName?this.rhs.names:{}}}class c extends o{constructor(e,t,r){super(),this.lhs=e,this.rhs=t,this.sideEffects=r}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof n.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=P(this.rhs,e,t),this}get names(){return O(this.lhs instanceof n.Name?{}:{...this.lhs.names},this.rhs)}}class d extends c{constructor(e,t,r,n){super(e,r,n),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class u extends o{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class h extends o{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class m extends o{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class p extends o{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=P(this.code,e,t),this}get names(){return this.code instanceof n._CodeOrName?this.code.names:{}}}class f extends o{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce(((t,r)=>t+r.render(e)),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const r=e[t].optimizeNodes();Array.isArray(r)?e.splice(t,1,...r):r?e[t]=r:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:r}=this;let n=r.length;for(;n--;){const s=r[n];s.optimizeNames(e,t)||(D(e,s.names),r.splice(n,1))}return r.length>0?this:void 0}get names(){return this.nodes.reduce(((e,t)=>T(e,t.names)),{})}}class y extends f{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class g extends f{}class v extends y{}v.kind="else";class b extends y{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new v(e):e}return t?!1===e?t instanceof b?t:t.nodes:this.nodes.length?this:new b(N(e),t instanceof b?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var r;if(this.else=null===(r=this.else)||void 0===r?void 0:r.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=P(this.condition,e,t),this}get names(){const e=super.names;return O(e,this.condition),this.else&&T(e,this.else.names),e}}b.kind="if";class w extends y{}w.kind="for";class S extends w{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=P(this.iteration,e,t),this}get names(){return T(super.names,this.iteration.names)}}class x extends w{constructor(e,t,r,n){super(),this.varKind=e,this.name=t,this.from=r,this.to=n}render(e){const t=e.es5?s.varKinds.var:this.varKind,{name:r,from:n,to:i}=this;return`for(${t} ${r}=${n}; ${r}<${i}; ${r}++)`+super.render(e)}get names(){const e=O(super.names,this.from);return O(e,this.to)}}class $ extends w{constructor(e,t,r,n){super(),this.loop=e,this.varKind=t,this.name=r,this.iterable=n}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=P(this.iterable,e,t),this}get names(){return T(super.names,this.iterable.names)}}class E extends y{constructor(e,t,r){super(),this.name=e,this.args=t,this.async=r}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}E.kind="func";class _ extends f{render(e){return"return "+super.render(e)}}_.kind="return";class C extends y{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var r,n;return super.optimizeNames(e,t),null===(r=this.catch)||void 0===r||r.optimizeNames(e,t),null===(n=this.finally)||void 0===n||n.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&T(e,this.catch.names),this.finally&&T(e,this.finally.names),e}}class A extends y{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}A.kind="catch";class k extends y{render(e){return"finally"+super.render(e)}}function T(e,t){for(const r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function O(e,t){return t instanceof n._CodeOrName?T(e,t.names):e}function P(e,t,r){return e instanceof n.Name?i(e):(s=e)instanceof n._Code&&s._items.some((e=>e instanceof n.Name&&1===t[e.str]&&void 0!==r[e.str]))?new n._Code(e._items.reduce(((e,t)=>(t instanceof n.Name&&(t=i(t)),t instanceof n._Code?e.push(...t._items):e.push(t),e)),[])):e;var s;function i(e){const n=r[e.str];return void 0===n||1!==t[e.str]?e:(delete t[e.str],n)}}function D(e,t){for(const r in t)e[r]=(e[r]||0)-(t[r]||0)}function N(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:n._`!${R(e)}`}k.kind="finally",t.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new s.Scope({parent:e}),this._nodes=[new g]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const r=this._extScope.value(e,t);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,r,n){const s=this._scope.toName(t);return void 0!==r&&n&&(this._constants[s.str]=r),this._leafNode(new l(e,s,r)),s}const(e,t,r){return this._def(s.varKinds.const,e,t,r)}let(e,t,r){return this._def(s.varKinds.let,e,t,r)}var(e,t,r){return this._def(s.varKinds.var,e,t,r)}assign(e,t,r){return this._leafNode(new c(e,t,r))}add(e,r){return this._leafNode(new d(e,t.operators.ADD,r))}code(e){return"function"==typeof e?e():e!==n.nil&&this._leafNode(new p(e)),this}object(...e){const t=["{"];for(const[r,s]of e)t.length>1&&t.push(","),t.push(r),(r!==s||this.opts.es5)&&(t.push(":"),(0,n.addCodeArg)(t,s));return t.push("}"),new n._Code(t)}if(e,t,r){if(this._blockNode(new b(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new b(e))}else(){return this._elseNode(new v)}endIf(){return this._endBlockNode(b,v)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new S(e),t)}forRange(e,t,r,n,i=(this.opts.es5?s.varKinds.var:s.varKinds.let)){const a=this._scope.toName(e);return this._for(new x(i,a,t,r),(()=>n(a)))}forOf(e,t,r,i=s.varKinds.const){const a=this._scope.toName(e);if(this.opts.es5){const e=t instanceof n.Name?t:this.var("_arr",t);return this.forRange("_i",0,n._`${e}.length`,(t=>{this.var(a,n._`${e}[${t}]`),r(a)}))}return this._for(new $("of",i,a,t),(()=>r(a)))}forIn(e,t,r,i=(this.opts.es5?s.varKinds.var:s.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,n._`Object.keys(${t})`,r);const a=this._scope.toName(e);return this._for(new $("in",i,a,t),(()=>r(a)))}endFor(){return this._endBlockNode(w)}label(e){return this._leafNode(new u(e))}break(e){return this._leafNode(new h(e))}return(e){const t=new _;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(_)}try(e,t,r){if(!t&&!r)throw new Error('CodeGen: "try" without "catch" and "finally"');const n=new C;if(this._blockNode(n),this.code(e),t){const e=this.name("e");this._currNode=n.catch=new A(e),t(e)}return r&&(this._currNode=n.finally=new k,this.code(r)),this._endBlockNode(A,k)}throw(e){return this._leafNode(new m(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw new Error(`CodeGen: wrong number of nodes: ${r} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=n.nil,r,s){return this._blockNode(new E(e,t,r)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(E)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof b))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},t.not=N;const I=F(t.operators.AND);t.and=function(...e){return e.reduce(I)};const j=F(t.operators.OR);function F(e){return(t,r)=>t===n.nil?r:r===n.nil?t:n._`${R(t)} ${e} ${R(r)}`}function R(e){return e instanceof n.Name?e:n._`(${e})`}t.or=function(...e){return e.reduce(j)}}}]);
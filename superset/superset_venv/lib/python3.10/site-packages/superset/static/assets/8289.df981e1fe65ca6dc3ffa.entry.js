"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[8289],{1984:(e,t,o)=>{var r;o.d(t,{y:()=>r}),function(e){e[e.Minimum=0]="Minimum",e[e.Exact=1]="Exact",e[e.Maximum=2]="Maximum"}(r||(r={}))},7145:(e,t,o)=>{function r(e){return"boolean"==typeof e?e:"string"==typeof e?["yes","y","true","t","1"].includes(e.toLowerCase()):!!e}o.d(t,{A:()=>r})},13280:(e,t,o)=>{o.d(t,{NJ:()=>i,OW:()=>r,Qh:()=>c,a_:()=>n,go:()=>a});var r,a,n,i,l=o(89454),s=o(19848);!function(e){e.Observation="",e.ForecastTrend="__yhat",e.ForecastUpper="__yhat_upper",e.ForecastLower="__yhat_lower"}(r||(r={})),function(e){e.Top="top",e.Bottom="bottom",e.Left="left",e.Right="right"}(a||(a={})),function(e){e.Scroll="scroll",e.Plain="plain"}(n||(n={})),function(e){e.Top="top",e.Left="left",e.Right="right",e.Bottom="bottom",e.Inside="inside",e.InsideLeft="insideLeft",e.InsideRight="insideRight",e.InsideTop="insideTop",e.InsideBottom="insideBottom",e.InsideTopLeft="insideTopLeft",e.InsideBottomLeft="insideBottomLeft",e.InsideTopRight="insideTopRight",e.InsideBottomRight="insideBottomRight"}(i||(i={}));class c extends l.A{constructor(e){const{metadata:t,...o}=e;super({...o,metadata:new s.A({parseMethod:"json",...t})})}}},13934:(e,t,o)=>{o.d(t,{C$:()=>z,Kf:()=>N,LF:()=>j,NZ:()=>V,RQ:()=>q,Sq:()=>W,Wt:()=>M,Wy:()=>D,YC:()=>R,_$:()=>Y,g1:()=>B,o$:()=>P,oi:()=>O,pG:()=>$,pn:()=>E,vW:()=>L,yX:()=>I});var r=o(31126),a=o.n(r),n=o(65258),i=o.n(n),l=o(36533),s=o.n(l),c=o(49290),d=o.n(c),u=o(97551),m=o.n(u),p=o(62193),h=o.n(p),g=o(31463),f=o(81115),b=o(7683),y=o(89874),v=o(90924),x=o(27032),_=o(52966),S=o(1086),w=o(29687),C=o(46900),T=o(13280),A=o(91407),k=o(34859);function F(e){return null!=e}function M(e,t){const o=[],r=[],{stack:a,percentageThreshold:n,xAxisCol:i,legendState:l}=t;return a&&e.forEach((e=>{const t=Object.keys(e).reduce(((t,o)=>o===i||l&&!l[o]?t:t+(e[o]||0)),0);o.push(t),r.push((n||0)/100*t)})),{totalStackedValues:o,thresholdValues:r}}function P(e,t){const o=[],{legendState:r,stack:a,isHorizontal:n,onlyTotal:i}=t;return a&&e.forEach(((e,t)=>{const{data:a=[]}=e;a.forEach(((a,l)=>{e.id&&r&&!r[e.id]||(i||null===a[n?0:1]||(o[l]=t),i&&(a[n?0:1]>0&&(o[l]=t),o[l]||null===a[n?0:1]||(o[l]=t)))}))})),o}function L(e,t={}){const{fillNeighborValue:o,xAxis:r=g.Tf,extraMetricLabels:n=[],removeNulls:l=!1,stack:c=!1,totalStackedValues:u=[],isHorizontal:p=!1,sortSeriesType:h,sortSeriesAscending:b,xAxisSortSeries:y,xAxisSortSeriesAscending:v,xAxisType:x}=t;if(0===e.length)return[[],[],void 0];const _=e.map((e=>({...e,[r]:null===e[r]&&x===f.Gw.Category?C.mu:e[r]}))),w=function(e,t,o,r,n){const l=Object.keys(e[0]).filter((e=>e!==t)).filter((e=>!o.includes(e)));let c;switch(r){case S.Mb.Sum:c=t=>({name:t,value:a()(e,t)});break;case S.Mb.Min:c=t=>{var o;return{name:t,value:null==(o=s()(e,t))?void 0:o[t]}};break;case S.Mb.Max:c=t=>{var o;return{name:t,value:null==(o=m()(e,t))?void 0:o[t]}};break;case S.Mb.Avg:c=t=>({name:t,value:d()(e,t)});break;default:{const e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return l.sort(((t,o)=>n?e.compare(t,o):e.compare(o,t)))}}const u=l.map(c);return i()(u,["value"],[n?"asc":"desc"]).map((({name:e})=>e))}(_,r,n,h,b),T=F(y)&&F(v)?function(e,t,o,r,a){const n=e.map(((e,a)=>{let n,i="",l=0;Object.entries(e).forEach((([e,t])=>{const a=F(t);if(e===o&&(i=t),r!==S.Mb.Name&&"number"==typeof t)switch((r!==S.Mb.Avg||a)&&(l+=1),r){case S.Mb.Avg:case S.Mb.Sum:void 0===n?n=t:n+=t;break;case S.Mb.Min:n=void 0===n||a&&t<n?t:n;break;case S.Mb.Max:n=void 0===n||a&&t>n?t:n}})),r===S.Mb.Avg&&l>0&&void 0!==n&&(n/=l);const s=r===S.Mb.Name?"string"==typeof i?i.toLowerCase():i:n;return{key:i,value:s,row:e,totalStackedValue:t[a]}}));return i()(n,["value"],[a?"asc":"desc"]).map((({row:e,totalStackedValue:t})=>({row:e,totalStackedValue:t})))}(_,u,r,y,v):_.map(((e,t)=>({row:e,totalStackedValue:u[t]})));let A;return[w.map((e=>({id:e,name:e,data:T.map((({row:t,totalStackedValue:a},n)=>{var i,l;const s=t[e];"number"==typeof s&&s>0&&(void 0===A||A>s)&&(A=s);const d=F(null==(i=_[n-1])?void 0:i[e])||F(null==(l=_[n+1])?void 0:l[e]);let u=s;return!F(s)&&d&&void 0!==o?u=o:c===C.ad.Expand&&void 0!==a&&(u=(u||0)/a),[t[r],u]})).filter((e=>!l||null!==e[0]&&null!==e[1])).map((e=>p?[e[1],e[0]]:e))}))),T.map((({totalStackedValue:e})=>e)),A]}function D(e,{numberFormatter:t,timeFormatter:o,coltype:r}={}){if(null==e)return C.mu;if("boolean"==typeof e||"bigint"==typeof e)return e.toString();if(e instanceof Date||r===b.s.Temporal){const t="string"==typeof e?(0,y.A)(e):e,r=t instanceof Date?t:new Date(t);return o?o(r):r.toISOString()}return"number"==typeof e?t?t(e):e.toString():e}const O=({coltypes:e=[],colnames:t=[]})=>t.reduce(((t,o,r)=>({...t,[o]:e[r]})),{});function R({datum:e={},groupby:t,numberFormatter:o,timeFormatter:r,coltypeMapping:a={}}){return(0,v.A)(t).map((t=>D(e[t],{numberFormatter:o,timeFormatter:r,...a[t]&&{coltype:a[t]}}))).join(", ")}function B(e,t,o,r,a=!1,n,i){const l={orient:[T.go.Top,T.go.Bottom].includes(t)?"horizontal":"vertical",show:o,type:e,selected:n,selector:["all","inverse"],selectorLabel:{fontFamily:r.fontFamily,fontSize:r.fontSizeSM,color:r.colorText,borderColor:r.colorBorder}},s=e=>Math.max(e-45,0);switch(t){case T.go.Left:l.left=0,null!=i&&i.left&&(l.textStyle={overflow:"truncate",width:s(i.left)});break;case T.go.Right:l.right=0,l.top=a?C.TM.legendRightTopOffset:0,null!=i&&i.right&&(l.textStyle={overflow:"truncate",width:s(i.right)});break;case T.go.Bottom:l.bottom=0,null!=i&&i.left&&(l.left=i.left);break;case T.go.Top:l.top=0,l.right=a?C.TM.legendTopRightOffset:0,null!=i&&i.left&&(l.left=i.left);break;default:l.top=0,l.right=a?C.TM.legendTopRightOffset:0}return l}function I(e,t,o,r,a){let n;n=e?null==o||"string"==typeof o?k.wP[t]:o:0;const{bottom:i=0,left:l=0,right:s=0,top:c=0}=r||{};return a?{left:l+(t===T.go.Bottom?n:0),right:s+(t===T.go.Right?n:0),top:c+(t===T.go.Top?n:0),bottom:i+(t===T.go.Left?n:0)}:{left:l+(t===T.go.Left?n:0),right:s+(t===T.go.Right?n:0),top:c+(t===T.go.Top?n:0),bottom:i+(t===T.go.Bottom?n:0)}}function N(e){const t=new Map;return e.map((e=>{let{id:o}=e;if(void 0===o)return e;o=String(o);const r=t.get(o)||0,a=r>0?` (${r})`:"";return t.set(o,r+1),{...e,id:`${o}${a}`}}))}function E(e){return w.Me(e)}function z(e,t,o){return t?f.Gw.Category:o===b.s.Temporal?f.Gw.Time:o!==b.s.Numeric||e?f.Gw.Category:f.Gw.Value}function j(e={}){const{max:t,formatter:o}=e,r=!!t||0===t;return new x.A({formatFunc:e=>`${r&&e>t?"":(null==o?void 0:o.format(e))||e}`,id:_.A.OVER_MAX_HIDDEN})}function V(e){const t=Math.floor(Math.log10(e));return Math.pow(10,t)}function $(e,t,o,r,a){if(e===f.Gw.Value&&t){const e={};return a===A.y.Bar&&(e.scale=!0),void 0!==o?e.min=o:a!==A.y.Bar&&(e.min="dataMin"),void 0!==r?e.max=r:a!==A.y.Bar&&(e.max="dataMax"),e}return{}}function Y(e,t,o){return h()(t)?e:t.find((e=>"string"==typeof o?o.includes(`${e},`)||o.includes(`__${e}`):null==o?void 0:o.toString().includes(e)))||e}const G="seriesId";function q(e,t,o,r){return o&&r?e.slice().sort(((e,o)=>o.data[t]-e.data[t])).map((e=>e[G])):o?e.map((e=>e[G])):[e[0][G]]}function W(e,t){const o=new Map;return t?e.forEach((e=>{const r=o.get(e[t]);r?r.push(e):o.set(e[t],[e])})):o.set(void 0,e),o}},18572:(e,t,o)=>{o.d(t,{A:()=>v});var r=o(82960),a=o(61225),n=o(2445),i=o(50290),l=o(17437),s=o(46942),c=o.n(s),d=o(54087),u=o(96540),m=o(8558),p=o(81670);const h=i.I4.div`
  ${({theme:e})=>l.AH`
    display: flex;
    justify-content: space-between; // Changed from center to space-between
    align-items: center;

    // Content container for icon and text
    .toast__content {
      display: flex;
      align-items: center;
      flex: 1; // Take available space
    }

    .anticon {
      padding: 0 ${e.sizeUnit}px;
    }

    .toast__close,
    .toast__close span {
      padding-left: ${4*e.sizeUnit}px;
    }
  `}
`,g=e=>l.AH`
  min-width: ${5*e.sizeUnit}px;
  color: ${e.colorTextLightSolid};
  margin-right: 0;
`;function f({toast:e,onCloseToast:t}){const o=(0,u.useRef)(),[r,a]=(0,u.useState)(!1),l=()=>{a(!0)},s=(0,u.useCallback)((()=>{o.current&&clearTimeout(o.current),a((()=>(setTimeout((()=>{t(e.id)}),150),!1)))}),[t,e.id]);(0,u.useEffect)((()=>(setTimeout(l),e.duration>0&&(o.current=setTimeout(s,e.duration)),()=>{o.current&&clearTimeout(o.current)})),[s,e.duration]);const f=(0,i.DP)();let b="toast--success",y=(0,n.Y)(m.F.CheckCircleFilled,{css:e=>g(e),iconColor:f.colorSuccess});return e.toastType===p.C.Warning?(y=(0,n.Y)(m.F.ExclamationCircleFilled,{css:g,iconColor:f.colorWarning}),b="toast--warning"):e.toastType===p.C.Danger?(y=(0,n.Y)(m.F.ExclamationCircleFilled,{css:g,iconColor:f.colorError}),b="toast--danger"):e.toastType===p.C.Info&&(y=(0,n.Y)(m.F.InfoCircleFilled,{css:g,iconColor:f.colorInfo}),b="toast--info"),(0,n.FD)(h,{className:c()("alert","toast",r&&"toast--visible",b),role:"alert",children:[(0,n.FD)("div",{className:"toast__content",children:[y,(0,n.Y)(d.BW,{content:e.text,noHtml:!e.allowHtml})]}),(0,n.Y)(m.F.CloseOutlined,{iconSize:"m",className:"toast__close pointer",role:"button",tabIndex:0,onClick:s,"aria-label":"Close"})]})}const b=i.I4.div((({theme:e,position:t})=>`\n    max-width: 600px;\n    position: fixed;\n    ${"bottom"===t?"bottom":"top"}: 0px;\n    right: 0px;\n    margin-right: 50px;\n    margin-bottom: 50px;\n    z-index: ${e.zIndexPopupBase+1};\n    word-break: break-word;\n\n    .toast {\n      padding: ${4*e.sizeUnit}px;\n      margin: ${4*e.sizeUnit}px;\n      background: ${e.colorBgSpotlight};\n      border-radius: ${e.borderRadius}px;\n      box-shadow: ${e.boxShadow};\n      color: ${e.colorTextLightSolid};\n      opacity: 0;\n      position: relative;\n      transform: translateY(-100%);\n      white-space: pre-line;\n      will-change: transform, opacity;\n      transition:\n        transform ${e.motionDurationMid},\n        opacity ${e.motionDurationMid};\n      &:after {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 6px;\n        height: 100%;\n      }\n    }\n\n    .toast > button {\n      color: ${e.colorTextLightSolid};\n      opacity: 1;\n    }\n\n    .toast--visible {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  `));var y=o(91412);const v=(0,a.Ng)((({messageToasts:e})=>({toasts:e})),(e=>(0,r.zH)({removeToast:y.uU},e)))((function({toasts:e,removeToast:t,position:o="bottom"}){return(0,n.Y)(n.FK,{children:e.length>0&&(0,n.Y)(b,{id:"toast-presenter",position:o,children:e.map((e=>(0,n.Y)(f,{toast:e,onCloseToast:t},e.id)))})})}))},20358:(e,t,o)=>{o.d(t,{$v:()=>x,AN:()=>C,B2:()=>M,C$:()=>h,EF:()=>k,G0:()=>S,Ir:()=>_,Jy:()=>g,OK:()=>w,cm:()=>T,dw:()=>F,n0:()=>m,oh:()=>v,qY:()=>f,wR:()=>A,wn:()=>p});var r=o(24143),a=o.n(r),n=o(72936),i=o(32608),l=o(29508),s=o(58083),c=o(29898);const d=/\d+ \w+ offset/,u=1e3;function m(e){return String(e).trim().replace(" (right axis)","").split(", ").filter((e=>!d.test(e))).join(", ")}function p(e){return e===l.f?(0,s.mo)(l.f):(0,c.gV)(e)}function h(e,t,o,r){const n=(0,c.gV)(r),i=t.filter((e=>!e.disabled)).length,l=o&&0!==t.length?t[0].values.map(((e,o)=>{const r=t.filter((e=>!e.disabled)).map((e=>e.values[o]));return a().sum(r,(e=>e.y))})):[];e.selectAll(".bar-chart-label-group").remove(),setTimeout((()=>{e.selectAll(".bar-chart-label-group").remove();const t=e.select("g.nv-barsWrap").append("g").attr("class","bar-chart-label-group");e.selectAll("g.nv-group").filter(((e,t)=>!o||t===i-1)).selectAll("rect").each((function(e,r){const i=a().select(this),s=i.attr("transform"),c=parseFloat(i.attr("x")),d=parseFloat(i.attr("y")),u=parseFloat(i.attr("width")),m=parseFloat(i.attr("height")),p=t.append("text").text(n(o?l[r]:e.y)).attr("transform",s).attr("class","bar-chart-label"),h=p.node().getBBox(),g=h.width,f=h.height;p.attr("x",c+u/2-g/2),i.attr("class").includes("positive")?p.attr("y",d-5):p.attr("y",d+m+f)}))}),u)}function g(e,t){let o="";return o+=`<table><thead><tr><td colspan='3'><strong class='x-value'>${e.value}</strong></td></tr></thead><tbody>`,e.series.sort(((e,t)=>e.value>=t.value?-1:1)),e.series.forEach((e=>{const r=(a=e.key,n=!0,"<NULL>"===a?`&lt;${a.slice(1,-1)}&gt;`:n?i.A.sanitize(a):a);var a,n;o+=`<tr class="${e.highlight?"emph":""}"><td class='legend-color-guide' style="opacity: ${e.highlight?"1":"0.75"};""><div style="border: 2px solid ${e.highlight?"black":"transparent"}; background-color: ${e.color};"></div></td><td>${r}</td><td>${t(e.value)}</td></tr>`})),o+="</tbody></table>",i.A.sanitize(o)}function f(e,t,o){const r=t(e.value);let a="";return a+=`<table><thead><tr><td colspan='3'><strong class='x-value'>${r}</strong></td></tr></thead><tbody>`,e.series.forEach((e=>{if(e.highlight){let t="";t="current"===e.key?e.key:`${e.key} of the selected frequency:`,a+=`<tr><td class='legend-color-guide'><div style="background-color: ${e.color};"></div></td><td class='key'>${t}</td><td class='value'>${o(e.value)}</td></tr>`}})),a+="</tbody></table>",i.A.sanitize(a)}function b(e){return e.label||e}function y(e,t){return`<tr><td>${e}</td><td>${t}</td></tr>`}function v({point:e,entity:t,xField:o,yField:r,sizeField:a,xFormatter:n,yFormatter:i,sizeFormatter:l}){let s="<table>";return s+=`<tr><td style="color: ${e.color};"><strong>${e[t]}</strong> (${e.group})</td></tr>`,s+=y(b(o),n(e.x)),s+=y(b(r),i(e.y)),s+=y(b(a),l(e.size)),s+="</table>",s}function x(e){const t=document.querySelectorAll(".nvtooltip");t.length>0&&t.forEach((t=>{e?t.remove():t.style.opacity=0}))}function _(e){return`tooltip-${e}`}function S(e){const t=`.${_(e)}`,o=document.querySelector(t);o&&o.remove()}function w(e){const t=e.useInteractiveGuideline&&e.useInteractiveGuideline()?e.interactiveLayer:e,o=t.tooltip.contentGenerator();t.tooltip.contentGenerator((e=>{let t="<div>";return t+=o(e),t+="</div>",t}))}function C(e){return(0,n.A)().attr("class",`d3-tip ${e.annotationTipClass||""}`).direction("n").offset([-5,0]).html((t=>t?`<div><strong>${t[e.titleColumn]&&t[e.titleColumn].length>0?`${t[e.titleColumn]} - ${e.name}`:e.name}</strong></div><br/><div>${(Array.isArray(e.descriptionColumns)?e.descriptionColumns.map((e=>t[e])):Object.values(t)).join(", ")}</div>`:""))}function T(e,t){const o=e.selectAll(`.${t} g.tick text`);if(o.length>0){const e=o[0].map((e=>e.getComputedTextLength()));return Math.ceil(Math.max(0,...e))}return 0}function A(e,t={}){const o=e=>t[e]||e;return Array.isArray(e)&&e.length>0?e.map((e=>d.test(e)?e:o(e))).join(", "):o(e)}function k(e){return e.some((e=>void 0===e.toISOString))?null:e.map((e=>e.toISOString().slice(0,-1))).join(" : ")}function F(e,t){e&&e.showMaxMin&&void 0!==t&&e.showMaxMin(t)}function M(e){if(Array.isArray(e)&&e.length>0&&Array.isArray(e[0].values)){const t=e.filter((e=>!e.disabled)).map((e=>a().extent(e.values,(e=>e.y))));return[a().min(t,(([e])=>e)),a().max(t,(([,e])=>e))]}return[0,1]}},24073:(e,t,o)=>{o.d(t,{W:()=>m});var r=o(50290),a=o(53118),n=o(10992),i=o(12930),l=o(32064);const s="superset-crud-theme-id",c="superset-dev-theme-override",d="(prefers-color-scheme: dark)";class u{getItem(e){try{return localStorage.getItem(e)}catch(e){return console.warn("Failed to read from localStorage:",e),null}}setItem(e,t){try{localStorage.setItem(e,t)}catch(e){console.warn("Failed to write to localStorage:",e)}}removeItem(e){try{localStorage.removeItem(e)}catch(e){console.warn("Failed to remove from localStorage:",e)}}}class m{constructor({storage:e=new u,modeStorageKey:t="superset-theme-mode",themeObject:o=r.vP,defaultTheme:n=(e=>null!=(e=r.vP.theme)?e:{})(),onChange:i}={}){this.globalTheme=void 0,this.storage=void 0,this.modeStorageKey=void 0,this.defaultTheme=void 0,this.darkTheme=void 0,this.systemMode=void 0,this.currentMode=void 0,this.hasCustomThemes=void 0,this.onChangeCallbacks=new Set,this.mediaQuery=void 0,this.crudThemeId=null,this.devThemeOverride=null,this.dashboardThemes=new Map,this.dashboardCrudTheme=null,this.handleSystemThemeChange=()=>{try{const e=m.getSystemPreferredMode(),t=this.systemMode;if(this.systemMode=e,this.currentMode===a.lG.SYSTEM&&t!==e){const e=this.getThemeForMode(a.lG.SYSTEM);e&&this.updateTheme(e)}}catch(e){console.error("Failed to handle system theme change:",e)}},this.storage=e,this.modeStorageKey=t,this.globalTheme=o;const{bootstrapDefaultTheme:l,bootstrapDarkTheme:s,hasCustomThemes:c}=this.loadBootstrapData();this.hasCustomThemes=c,this.hasCustomThemes?(this.darkTheme=s,this.defaultTheme=l||n):(this.darkTheme=null,this.defaultTheme=n),this.systemMode=m.getSystemPreferredMode(),this.shouldInitializeMediaQueryListener()&&this.initializeMediaQueryListener(),this.loadCrudThemeId(),this.loadDevThemeOverride(),this.currentMode=this.determineInitialMode();const d=this.getThemeForMode(this.currentMode)||this.defaultTheme;i&&this.onChangeCallbacks.add(i),this.applyTheme(d),this.persistMode()}destroy(){this.mediaQuery&&this.mediaQuery.removeEventListener("change",this.handleSystemThemeChange),this.onChangeCallbacks.clear()}canSetTheme(){return!0}canSetMode(){return null!==this.darkTheme}getTheme(){return this.globalTheme}getThemeForContext(e=!1){return e&&this.dashboardCrudTheme?this.dashboardCrudTheme:this.getThemeForMode(this.currentMode)}async createDashboardThemeProvider(e){try{if(this.dashboardThemes.has(e))return this.dashboardThemes.get(e);const t=(0,n.A)({method:"GET",endpoint:`/api/v1/theme/${e}`}),{result:r}=await t(),a=JSON.parse(r.json_data);if(a){const{Theme:t}=await Promise.all([o.e(683),o.e(7391),o.e(1859),o.e(6555)]).then(o.bind(o,13274)),r=this.normalizeTheme(a),n=t.fromConfig(r);return this.dashboardThemes.set(e,n),n}return null}catch(e){return console.error("Failed to create dashboard theme provider:",e),null}}clearDashboardTheme(e){this.dashboardThemes.delete(e)}clearAllDashboardThemes(){this.dashboardThemes.clear()}getCurrentMode(){return this.currentMode}setTheme(e){this.validateThemeUpdatePermission();const t=this.normalizeTheme(e);this.currentMode=this.determineInitialMode(),this.updateTheme(t)}setThemeMode(e){if(this.validateModeUpdatePermission(e),this.currentMode===e)return;this.devThemeOverride=null,this.crudThemeId=null,this.storage.removeItem(c),this.storage.removeItem(s);const t=this.getThemeForMode(e);if(!t)return console.warn(`Theme for mode ${e} not found, falling back to default`),void this.fallbackToDefaultMode();this.currentMode=e,this.updateTheme(t)}resetTheme(){this.currentMode=a.lG.DEFAULT;const e=this.getThemeForMode(a.lG.DEFAULT)||this.defaultTheme;this.updateTheme(e)}async setCrudTheme(e){if(this.crudThemeId=e,e){this.storage.setItem(s,e);try{const t=await this.fetchCrudTheme(e);t&&(this.dashboardCrudTheme=t,this.notifyListeners())}catch(e){console.error("Failed to load CRUD theme:",e),this.dashboardCrudTheme=null,this.notifyListeners()}}else this.storage.removeItem(s),this.dashboardCrudTheme=null,this.notifyListeners()}setTemporaryTheme(e){this.validateThemeUpdatePermission(),this.devThemeOverride=e,this.storage.setItem(c,JSON.stringify(e));const t=this.normalizeTheme(e);this.updateTheme(t)}clearLocalOverrides(){this.devThemeOverride=null,this.crudThemeId=null,this.storage.removeItem(c),this.storage.removeItem(s),this.resetTheme()}getCurrentCrudThemeId(){return this.crudThemeId}hasDevOverride(){return null!==this.devThemeOverride}canDetectOSPreference(){return null!==this.darkTheme}setThemeConfig(e){let t;this.defaultTheme=e.theme_default,this.darkTheme=e.theme_dark||null,this.hasCustomThemes=!0;try{this.validateModeUpdatePermission(this.currentMode),t=this.isValidThemeMode(this.currentMode)?this.currentMode:this.determineInitialMode()}catch{t=this.determineInitialMode()}this.currentMode=t;const o=this.getThemeForMode(this.currentMode)||this.defaultTheme;this.updateTheme(o)}updateTheme(e){try{const t=e||this.getThemeForMode(this.currentMode)||this.defaultTheme,o=this.normalizeTheme(t);this.applyTheme(o),this.persistMode(),this.notifyListeners()}catch(e){console.error("Failed to update theme:",e),this.fallbackToDefaultMode()}}fallbackToDefaultMode(){this.currentMode=a.lG.DEFAULT;const e=this.getThemeForMode(a.lG.DEFAULT)||this.defaultTheme;this.applyTheme(e),this.persistMode(),this.notifyListeners()}onChange(e){return this.onChangeCallbacks.add(e),()=>this.onChangeCallbacks.delete(e)}shouldInitializeMediaQueryListener(){return null!==this.darkTheme}initializeMediaQueryListener(){try{this.mediaQuery=window.matchMedia(d),this.mediaQuery.addEventListener("change",this.handleSystemThemeChange)}catch(e){console.warn("Failed to initialize media query listener:",e)}}loadBootstrapData(){const{common:{theme:e={}}}=(0,l.Ay)(),{default:t,dark:o}=e,r=this.isNonEmptyObject(t),a=this.isNonEmptyObject(o);return{bootstrapDefaultTheme:r?t:null,bootstrapDarkTheme:a?o:null,hasCustomThemes:r||a}}isNonEmptyObject(e){return Boolean(e&&"object"==typeof e&&Object.keys(e).length>0)}normalizeTheme(e){return(0,i.Zn)(e)}getThemeForMode(e){if(this.devThemeOverride)return this.devThemeOverride;let t=e;if(e===a.lG.SYSTEM){if(null===this.darkTheme)return null;t=m.getSystemPreferredMode()}if(!this.hasCustomThemes){const e=this.defaultTheme.token;return(0,i.St)(e,t===a.lG.DARK)}return t===a.lG.DARK&&this.darkTheme||this.defaultTheme}determineInitialMode(){if(null===this.darkTheme)return this.storage.removeItem(this.modeStorageKey),a.lG.DEFAULT;const e=this.loadSavedMode();return e&&this.isValidThemeMode(e)?e:a.lG.SYSTEM}loadSavedMode(){try{const e=this.storage.getItem(this.modeStorageKey);return e&&Object.values(a.lG).includes(e)?e:null}catch(e){return console.warn("Failed to load saved theme mode:",e),null}}isValidThemeMode(e){if(!Object.values(a.lG).includes(e))return!1;switch(e){case a.lG.DARK:return!(!this.darkTheme&&!this.defaultTheme);case a.lG.DEFAULT:return!!this.defaultTheme;case a.lG.SYSTEM:return null!==this.darkTheme;default:return!0}}validateThemeUpdatePermission(){if(!this.canSetTheme())throw new Error("User does not have permission to update the theme")}validateModeUpdatePermission(e){if(!this.canSetMode())throw new Error("Theme mode changes are not allowed when only one theme is available")}applyTheme(e){try{const t=(0,i.Zn)(e);this.globalTheme.setConfig(t)}catch(e){console.error("Failed to apply theme:",e),this.fallbackToDefaultMode()}}persistMode(){try{this.storage.setItem(this.modeStorageKey,this.currentMode)}catch(e){console.warn("Failed to persist theme mode:",e)}}notifyListeners(){this.onChangeCallbacks.forEach((e=>{try{e(this.globalTheme)}catch(e){console.error("Error in theme change callback:",e)}}))}static getSystemPreferredMode(){try{return window.matchMedia(d).matches?a.lG.DARK:a.lG.DEFAULT}catch(e){return console.warn("Failed to detect system theme preference:",e),a.lG.DEFAULT}}loadCrudThemeId(){try{this.crudThemeId=this.storage.getItem(s)}catch(e){console.warn("Failed to load CRUD theme ID:",e),this.crudThemeId=null}}loadDevThemeOverride(){try{const e=this.storage.getItem(c);e&&(this.devThemeOverride=JSON.parse(e))}catch(e){console.warn("Failed to load dev theme override:",e),this.devThemeOverride=null}}async fetchCrudTheme(e){try{const t=(0,n.A)({method:"GET",endpoint:`/api/v1/theme/${e}`}),{result:o}=await t();return JSON.parse(o.json_data)}catch(e){return console.error("Failed to fetch CRUD theme:",e),null}}}},25766:(e,t,o)=>{o.d(t,{F:()=>r});const r=(e=()=>{},t)=>e({ownState:t})},34317:(e,t,o)=>{o.d(t,{Dd:()=>r,QH:()=>n,xp:()=>a});const r=(0,o(20259).u)([10,20,50,100,200]),a=[10,20,50,100,200],n={queryTotal:"Metric total"}},34859:(e,t,o)=>{o.d(t,{Ox:()=>a,SG:()=>n,fG:()=>i,wP:()=>l});var r=o(13280);const a={containLabel:!0},n={scale:!0,yAxisLabelRotation:0},i={xAxisLabelRotation:0,xAxisLabelInterval:"auto"},l={[r.go.Top]:20,[r.go.Bottom]:20,[r.go.Left]:170,[r.go.Right]:170}},42879:(e,t,o)=>{o.d(t,{A:()=>a});var r=o(89874);class a extends Date{constructor(e,{formatter:t=String}={}){let o=e;"string"==typeof o&&(o=(0,r.A)(o)),super(o),this.formatter=void 0,this.input=void 0,this.input=e,this.formatter=t,this.toString=()=>this.formatter===String?String(this.input):this.formatter?this.formatter(this):Date.toString.call(this)}}},46900:(e,t,o)=>{o.d(t,{I:()=>h,RC:()=>m,SB:()=>b,TM:()=>l,Xn:()=>y,Zq:()=>s,ad:()=>d,fn:()=>f,hD:()=>c,iP:()=>p,jo:()=>g,mu:()=>i,ww:()=>u});var r=o(74098),a=o(10360),n=o(13280);const i="<NULL>",l={gridOffsetRight:20,gridOffsetLeft:20,gridOffsetTop:20,gridOffsetBottom:20,gridOffsetBottomZoomable:80,legendRightTopOffset:30,legendTopRightOffset:55,zoomBottom:30,toolboxTop:0,toolboxRight:5,dataZoomStart:0,dataZoomEnd:100,yAxisLabelTopOffset:20,extraControlsOffset:22},s=[[n.NJ.Top,"Top"],[n.NJ.Left,"Left"],[n.NJ.Right,"Right"],[n.NJ.Bottom,"Bottom"],[n.NJ.Inside,"Inside"],[n.NJ.InsideLeft,"Inside left"],[n.NJ.InsideRight,"Inside right"],[n.NJ.InsideTop,"Inside top"],[n.NJ.InsideBottom,"Inside bottom"],[n.NJ.InsideTopLeft,"Inside top left"],[n.NJ.InsideBottomLeft,"Inside bottom left"],[n.NJ.InsideTopRight,"Inside top right"],[n.NJ.InsideBottomRight,"Inside bottom right"]];var c,d;!function(e){e[e.Transparent=0]="Transparent",e[e.SemiTransparent=.3]="SemiTransparent",e[e.DerivedSeries=.7]="DerivedSeries",e[e.NonTransparent=1]="NonTransparent"}(c||(c={})),function(e){e.Stack="Stack",e.Stream="Stream",e.Expand="Expand"}(d||(d={}));const u=[[null,(0,r.t)("None")],[d.Stack,(0,r.t)("Stack")],[d.Stream,(0,r.t)("Stream")]],m=[...u,[d.Expand,(0,r.t)("Expand")]],p={[a.i.HOUR]:36e5,[a.i.DAY]:864e5,[a.i.MONTH]:26784e5,[a.i.QUARTER]:80352e5,[a.i.YEAR]:321408e5},h={legendMargin:null,legendOrientation:n.go.Top,legendType:n.a_.Scroll,showLegend:!0},g={xAxisTitle:"",xAxisTitleMargin:0,yAxisTitle:"",yAxisTitleMargin:0,yAxisTitlePosition:"Top"},f=10,b=5,y="en"},51098:(e,t,o)=>{function r(e){return null!=e&&e.columns?e.columns.map((e=>[e.column_name,e.verbose_name||e.column_name])).sort(((e,t)=>e[1].toLowerCase()>t[1].toLowerCase()?1:-1)):[]}o.d(t,{Ay:()=>n,VG:()=>a,zP:()=>r});const a={r:0,g:122,b:135,a:1},n={default:null,mapStateToProps:e=>{var t;return{choices:e.datasource?null==(t=e.datasource.time_grain_sqla)?void 0:t.filter((e=>null!==e[0])):null}}}},54273:(e,t,o)=>{var r;o.d(t,{V:()=>r}),function(e){e.Metric="metric",e.Country="country"}(r||(r={}))},59713:(e,t,o)=>{o.d(t,{JK:()=>a,Ay:()=>n});const r={afghanistan:o.p+"8fa567a5959c3003fc15.geojson",aland:o.p+"f287e957e42303db0dc6.geojson",albania:o.p+"ff22c31fb487056e8c35.geojson",algeria:o.p+"6a11f5b81e638a5ca817.geojson",american_samoa:o.p+"b2e39048374820514887.geojson",andorra:o.p+"bb87da82a50a52427c64.geojson",angola:o.p+"f563fd98871bb4a2bd5e.geojson",anguilla:o.p+"45ca1f6f4eef5bc331f5.geojson",antarctica:o.p+"d1399594e538ab438057.geojson",antigua_and_barbuda:o.p+"791b19de053e3074d823.geojson",argentina:o.p+"9d67aa8524fd61bcec53.geojson",armenia:o.p+"9ec161e183db2a8fd685.geojson",australia:o.p+"d960f9fd9cb813d44a25.geojson",austria:o.p+"6455f8e457104e2364be.geojson",azerbaijan:o.p+"9fd5b6aad4024f8c0d8e.geojson",bahrain:o.p+"6e3e9cfa9563d25e6018.geojson",bangladesh:o.p+"fb3e424c4b40f4c866a0.geojson",barbados:o.p+"ab7cfbb79c495ed74555.geojson",belarus:o.p+"1de338f87e68cc223112.geojson",belgium:o.p+"e5124c0fb29987604ffd.geojson",belize:o.p+"dccf657ea353c2c7a4bd.geojson",benin:o.p+"2fe143a76cefe218c0ef.geojson",bermuda:o.p+"8740e4c85eb5d31086a1.geojson",bhutan:o.p+"de6d83f934a9fb5eb6a9.geojson",bolivia:o.p+"30b2aafed21fea46a435.geojson",bosnia_and_herzegovina:o.p+"31fecaf52294548dc4f8.geojson",botswana:o.p+"ef0681ce0445174570f0.geojson",brazil:o.p+"ee0efc7377f21516881c.geojson",brunei:o.p+"1c63f5432bef80354796.geojson",bulgaria:o.p+"687a1cb4c030f1382c8b.geojson",burkina_faso:o.p+"80ae9bb1f64efb6a4c45.geojson",burundi:o.p+"1041803ff52739390ad4.geojson",cambodia:o.p+"82fee1fc1f664f347df4.geojson",cameroon:o.p+"cfe459a41009714a800b.geojson",canada:o.p+"bcb83aa446f3c9229c64.geojson",cape_verde:o.p+"fdb0e297e20e78c2d1f0.geojson",central_african_republic:o.p+"d88e949ff461f10d9c9a.geojson",chad:o.p+"6a7660bad75255d4a4df.geojson",chile:o.p+"d4b5df8a3d0288a1190d.geojson",china:o.p+"5e0dc8e6c43759c1f5d2.geojson",colombia:o.p+"4bd2741baf928ab20005.geojson",comoros:o.p+"363c89bbe42b89fb47eb.geojson",cook_islands:o.p+"a89ba447e6337da2c635.geojson",costa_rica:o.p+"315467cf58266f3e1484.geojson",croatia:o.p+"d4cd287b4870b8b13be7.geojson",cuba:o.p+"671df8e17cc4faf8cb69.geojson",cyprus:o.p+"105900e8bf117a62936a.geojson",czech_republic:o.p+"7fa62b99d016d4256e31.geojson",democratic_republic_of_the_congo:o.p+"21a755b3ff3bee6ad2cc.geojson",denmark:o.p+"04abfe7af46697820c8c.geojson",djibouti:o.p+"7e354661667b2ffbf34e.geojson",dominica:o.p+"ade2c07fc9f019631881.geojson",dominican_republic:o.p+"ebf1229f80295f354e29.geojson",ecuador:o.p+"67006a3e1d0f9d558e2d.geojson",egypt:o.p+"dda400c30ba0af328154.geojson",el_salvador:o.p+"5b236c8b315c99938bf2.geojson",equatorial_guinea:o.p+"bf82edc4933bef7dc401.geojson",eritrea:o.p+"2d379ad7515ff33e1947.geojson",estonia:o.p+"c6becd09bfd0ca6063b2.geojson",ethiopia:o.p+"3fc14c8eb0a0c1cfe6f1.geojson",fiji:o.p+"b20fcc0fcd2b42b03211.geojson",finland:o.p+"ca4f5afb40ce48ae4b37.geojson",france:o.p+"92d1347871facfaee276.geojson",france_overseas:o.p+"7e9d32c6cf220ef0a5e5.geojson",france_regions:o.p+"6efedc675a50f205380d.geojson",french_polynesia:o.p+"a2ac4a41b5650c6bf3f3.geojson",gabon:o.p+"31ab85cb2392d38e66cb.geojson",gambia:o.p+"e4e53b4513421e436cae.geojson",germany:o.p+"d379845608a48303aa71.geojson",ghana:o.p+"42d68436a0fd29bc6b6e.geojson",greece:o.p+"188fce30de6285e93537.geojson",greenland:o.p+"83b57b20560aa3c2cf13.geojson",grenada:o.p+"4ad268ec27f35e521945.geojson",guatemala:o.p+"46b38c380ab47bd08698.geojson",guinea:o.p+"6d627a46c9b7811e9703.geojson",guyana:o.p+"fcffa8e39e09824b978c.geojson",haiti:o.p+"e35598a35dd713b127e3.geojson",honduras:o.p+"a5d08c520aac6824f77e.geojson",hungary:o.p+"0cf5772401286924bdc8.geojson",iceland:o.p+"d30adec8098cf69e3043.geojson",india:o.p+"9ae81c0375a5d80c6b66.geojson",indonesia:o.p+"d375629b832487852954.geojson",iran:o.p+"df2df94cba5a4d453dff.geojson",israel:o.p+"a177e814d3e437145b16.geojson",italy:o.p+"f68971d8677d78f1a4c4.geojson",italy_regions:o.p+"2a8a80e5c606ae7942d0.geojson",ivory_coast:o.p+"9f28a56294b8bef04367.geojson",japan:o.p+"77e1a7d2037e0d276b2b.geojson",jordan:o.p+"f3e7c7846e01353e59f3.geojson",kazakhstan:o.p+"6183cbc95676005b6ec9.geojson",kenya:o.p+"f3c3f0689af8cafeab87.geojson",korea:o.p+"bd14fb7ca45615c831cd.geojson",kuwait:o.p+"d5678af9bde31b7f1d69.geojson",kyrgyzstan:o.p+"0f220f8c6d3c8e9b3a2a.geojson",laos:o.p+"f4e0e3f8d960ebf2cf04.geojson",latvia:o.p+"bc54143cc96b834b989b.geojson",lebanon:o.p+"cef9830708e26302fb98.geojson",lesotho:o.p+"73b05cda8a4d2a75e80c.geojson",liberia:o.p+"b79219a99375b72cbe75.geojson",libya:o.p+"82b8dc3ab87347646fe5.geojson",liechtenstein:o.p+"8ea58c917826e375d808.geojson",lithuania:o.p+"83bf8593ea5cbc4443fe.geojson",luxembourg:o.p+"4194b96a63a3f2c3a66e.geojson",macedonia:o.p+"3f5c79206b868e34689d.geojson",madagascar:o.p+"15821f893d9264834c42.geojson",malawi:o.p+"b4184a62d0fd2c456616.geojson",malaysia:o.p+"57f745092c84596faaa2.geojson",maldives:o.p+"9bf317256a1b8bd4cfa7.geojson",mali:o.p+"d926cc0f1b1821a9614b.geojson",malta:o.p+"d5622cc3d48adff7eee3.geojson",marshall_islands:o.p+"576d8fa734643b172fe9.geojson",mauritania:o.p+"dd4ea1c8e0dedf73750b.geojson",mauritius:o.p+"8d870ac48b232c69184f.geojson",mexico:o.p+"7f93137897a31eb3b694.geojson",moldova:o.p+"3f669e157f2f08d6bd00.geojson",mongolia:o.p+"baa7d275e77b643d30ec.geojson",montenegro:o.p+"55678308868ef11ca37d.geojson",montserrat:o.p+"7310f23116d73588e068.geojson",morocco:o.p+"60ad1bd90b5e7ab9751d.geojson",mozambique:o.p+"3176e794093204107069.geojson",myanmar:o.p+"4c31a70bc2b934cbee11.geojson",namibia:o.p+"6f0836c40b4e6fa02119.geojson",nauru:o.p+"b79835f45289d411f8ce.geojson",nepal:o.p+"a269c60373a664cac93d.geojson",netherlands:o.p+"964c0c376efe9e1cc3bd.geojson",new_caledonia:o.p+"6486ff90237dba3853c4.geojson",new_zealand:o.p+"1e53f9b24f06ac138894.geojson",nicaragua:o.p+"6cd66ee5bcf049800404.geojson",niger:o.p+"ebf838fe60b56b1f73d8.geojson",nigeria:o.p+"d484740f0e5d5fa0003c.geojson",northern_mariana_islands:o.p+"7665524d366380162fed.geojson",norway:o.p+"682415e8ab33a8d693fb.geojson",oman:o.p+"9f517c2b1f930f397149.geojson",pakistan:o.p+"1a8c72e4e0960ca63435.geojson",palau:o.p+"a1762e3ab08b77d0a915.geojson",panama:o.p+"4314c10ca53347c8563e.geojson",papua_new_guinea:o.p+"04882060855583ea17c8.geojson",paraguay:o.p+"cee00f8818e16096ef25.geojson",peru:o.p+"d41b2ebeee5ee22cd45d.geojson",philippines:o.p+"f8f413dd815d2ee7dca2.geojson",philippines_regions:o.p+"c93142ae3a3358f66f77.geojson",poland:o.p+"f69493e8c90e666f0ab0.geojson",portugal:o.p+"60dd10fd541d70cd80a9.geojson",qatar:o.p+"64e39de19786c3382651.geojson",republic_of_serbia:o.p+"d5c62d9f67d71b185953.geojson",romania:o.p+"e55dabedda49ee397c07.geojson",russia:o.p+"dfeb81ad8d1e78dd74d4.geojson",rwanda:o.p+"00fc5ade13e51592c11c.geojson",saint_lucia:o.p+"854b494bf6b686be4b01.geojson",saint_pierre_and_miquelon:o.p+"1008622f7672474b65cd.geojson",saint_vincent_and_the_grenadines:o.p+"dad37c6aac07eb2d7b78.geojson",samoa:o.p+"5d7b681071594a84cb86.geojson",san_marino:o.p+"e710e195325697255787.geojson",sao_tome_and_principe:o.p+"9ada3b9e4dccd5819c9b.geojson",saudi_arabia:o.p+"83b9729631e4b33cb5d0.geojson",senegal:o.p+"40943fe660144befc2b5.geojson",seychelles:o.p+"748e5349f4a4574f74b8.geojson",sierra_leone:o.p+"9ae7c9c5700350c9d97f.geojson",singapore:o.p+"bc2eb559c9229b226aaf.geojson",slovakia:o.p+"e679444af0c37d27d57a.geojson",slovenia:o.p+"69ec0f1e2f1d7f02e555.geojson",solomon_islands:o.p+"98b12ab75421f0cf36fc.geojson",somalia:o.p+"0a6d58ff4db404837ef3.geojson",south_africa:o.p+"1605b7c8b4d6341401b9.geojson",spain:o.p+"c16f33517fbb5c1a3a99.geojson",sri_lanka:o.p+"97f60a23bbf0d7d66b73.geojson",sudan:o.p+"129570f206c3d07d1938.geojson",suriname:o.p+"f334e1ebe176bbd5ba7c.geojson",sweden:o.p+"74c8ba021f8826fe5020.geojson",switzerland:o.p+"f2a4e50feea5aa8c96a6.geojson",syria:o.p+"3df2b4dac7591de85920.geojson",taiwan:o.p+"809d1bf98d99ac83ce70.geojson",tajikistan:o.p+"2a63d30f63291a7aa19d.geojson",tanzania:o.p+"03775ecc9dac5fec9b69.geojson",thailand:o.p+"bd2d1b978cc913766db3.geojson",the_bahamas:o.p+"65ea82671c04f483c1a9.geojson",timorleste:o.p+"5026e22b9219323b4a10.geojson",togo:o.p+"0e1e33df8ebb67fb5172.geojson",tonga:o.p+"35186222fd9f93a7142f.geojson",trinidad_and_tobago:o.p+"730a286fee724cf0f1f8.geojson",tunisia:o.p+"6c64799ce6a067f54345.geojson",turkey:o.p+"3259c9f52f1e5c547ffb.geojson",turkey_regions:o.p+"fd0171bee327a5a54b32.geojson",turkmenistan:o.p+"a06bbd9a3dc6bb85d08b.geojson",turks_and_caicos_islands:o.p+"6025a9aff31393de82f8.geojson",uganda:o.p+"049f0defc0870bb20da9.geojson",uk:o.p+"c86ef0f5cd43dc3a2365.geojson",ukraine:o.p+"bffd1be2fd6cd38cf734.geojson",united_arab_emirates:o.p+"a10ce5818011e3d85ae1.geojson",united_states_minor_outlying_islands:o.p+"7da97f91bbed9e012ee2.geojson",united_states_virgin_islands:o.p+"501eb95c95e051be910c.geojson",uruguay:o.p+"ee2fd460fa05b34fb464.geojson",usa:o.p+"ab99992e008d3da0a573.geojson",uzbekistan:o.p+"87f6b57bf8937a1c52f8.geojson",vanuatu:o.p+"e56534e03aad9daaa2bb.geojson",venezuela:o.p+"991674955661cf34515b.geojson",vietnam:o.p+"012c3bfe025dc8b62e01.geojson",wallis_and_futuna:o.p+"21f1cca7e74554b399b9.geojson",yemen:o.p+"177668e2374918534911.geojson",zambia:o.p+"29168b2268b6041e5163.geojson",zimbabwe:o.p+"3dbf43b7f4b4fcc3d641.geojson"},a=Object.keys(r).map((e=>"uk"===e||"usa"===e?[e,e.toUpperCase()]:"italy_regions"===e?[e,"Italy (regions)"]:"france_regions"===e?[e,"France (regions)"]:"france_overseas"===e?[e,"France (with overseas)"]:"turkey_regions"===e?[e,"Turkey (regions)"]:[e,e.split("_").map((e=>e[0].toUpperCase()+e.slice(1))).join(" ")])),n=r},64157:(e,t,o)=>{o.d(t,{A:()=>a});var r=o(89874);class a extends Date{constructor(e,{formatter:t=String}={}){let o=e;"string"==typeof o&&(o=(0,r.A)(o)),super(o),this.formatter=void 0,this.input=void 0,this.input=e,this.formatter=t,this.toString=()=>this.formatter===String?String(this.input):this.formatter?this.formatter(this):Date.toString.call(this)}}},64311:(e,t,o)=>{var r;o.d(t,{P:()=>r}),function(e){e.ROWS="ROWS",e.COLUMNS="COLUMNS"}(r||(r={}))},66854:(e,t,o)=>{var r;o.d(t,{m:()=>r}),function(e){e.Green="Green",e.Red="Red"}(r||(r={}))},68235:(e,t,o)=>{o.d(t,{D:()=>i,x:()=>n});var r=o(20259),a=o(74098);const n=(0,r.u)([[0,(0,a.t)("All")],10,20,50,100,200]),i=(0,r.u)([10,20,50,100,200])},85149:(e,t,o)=>{o.d(t,{A:()=>qg});var r=o(42385),a=o(85433),n=o(99106),i=o(7741),l=o(19848),s=o(74098),c=o(89454),d=o(29898),u=o(58083);function m(e){const{height:t,formData:o,queriesData:r,datasource:a}=e,{cellPadding:n,cellRadius:i,cellSize:l,domainGranularity:s,linearColorScheme:c,showLegend:m,showMetricName:p,showValues:h,steps:g,subdomainGranularity:f,xAxisTimeFormat:b,yAxisFormat:y}=o,{verboseMap:v}=a,x=(0,d.gV)(y);return{height:t,data:r[0].data,cellPadding:n,cellRadius:i,cellSize:l,domainGranularity:s,linearColorScheme:c,showLegend:m,showMetricName:p,showValues:h,steps:g,subdomainGranularity:f,timeFormatter:e=>((e,t)=>{const o=new Date(e),r=60*o.getTimezoneOffset()*1e3;return(0,u.mo)(t)(o.getTime()-r)})(e,b),valueFormatter:x,verboseMap:v}}const p=o.p+"example.537c9da1.jpg";var h=o(14125),g=o(71403),f=o(76892);const b={controlPanelSections:[{label:(0,s.t)("Time"),expanded:!0,description:(0,s.t)("Time related form attributes"),controlSetRows:[["granularity_sqla"],["time_range"]]},{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[{name:"domain_granularity",config:{type:"SelectControl",label:(0,s.t)("Domain"),default:"month",choices:[["hour",(0,s.t)("hour")],["day",(0,s.t)("day")],["week",(0,s.t)("week")],["month",(0,s.t)("month")],["year",(0,s.t)("year")]],description:(0,s.t)("The time unit used for the grouping of blocks")}},{name:"subdomain_granularity",config:{type:"SelectControl",label:(0,s.t)("Subdomain"),default:"day",choices:[["min",(0,s.t)("min")],["hour",(0,s.t)("hour")],["day",(0,s.t)("day")],["week",(0,s.t)("week")],["month",(0,s.t)("month")]],description:(0,s.t)("The time unit for each block. Should be a smaller unit than domain_granularity. Should be larger or equal to Time Grain")}}],["metrics"],["adhoc_filters"]]},{label:(0,s.t)("Chart Options"),expanded:!0,tabOverride:"customize",controlSetRows:[["linear_color_scheme"],[{name:"cell_size",config:{type:"TextControl",isInt:!0,default:10,validators:[h.A],renderTrigger:!0,label:(0,s.t)("Cell Size"),description:(0,s.t)("The size of the square cell, in pixels")}},{name:"cell_padding",config:{type:"TextControl",isInt:!0,validators:[h.A],renderTrigger:!0,default:2,label:(0,s.t)("Cell Padding"),description:(0,s.t)("The distance between cells, in pixels")}}],[{name:"cell_radius",config:{type:"TextControl",isInt:!0,validators:[h.A],renderTrigger:!0,default:0,label:(0,s.t)("Cell Radius"),description:(0,s.t)("The pixel radius")}},{name:"steps",config:{type:"TextControl",isInt:!0,validators:[h.A],renderTrigger:!0,default:10,label:(0,s.t)("Color Steps"),description:(0,s.t)('The number color "steps"')}}],["y_axis_format",{name:"x_axis_time_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Time Format"),renderTrigger:!0,default:"smart_date",choices:g.lR,description:g.YH}}],[{name:"show_legend",config:{type:"CheckboxControl",label:(0,s.t)("Legend"),renderTrigger:!0,default:!0,description:(0,s.t)("Whether to display the legend (toggles)")}},{name:"show_values",config:{type:"CheckboxControl",label:(0,s.t)("Show Values"),renderTrigger:!0,default:!1,description:(0,s.t)("Whether to display the numerical values within the cells")}}],[{name:"show_metric_name",config:{type:"CheckboxControl",label:(0,s.t)("Show Metric Names"),renderTrigger:!0,default:!0,description:(0,s.t)("Whether to display the metric name as a title")}},null]]}],controlOverrides:{y_axis_format:{label:(0,s.t)("Number Format")}},formDataOverrides:e=>({...e,metrics:(0,f.a)().popAllMetrics()})};var y=o(16136);const v=new l.A({category:(0,s.t)("Correlation"),credits:["https://github.com/wa0x6e/cal-heatmap"],description:(0,s.t)("Visualizes how a metric has changed over a time using a color scale and a calendar view. Gray values are used to indicate missing values and the linear color scheme is used to encode the magnitude of each day's value."),exampleGallery:[{url:p}],name:(0,s.t)("Calendar Heatmap"),tags:[(0,s.t)("Business"),(0,s.t)("Comparison"),(0,s.t)("Intensity"),(0,s.t)("Pattern"),(0,s.t)("Report"),(0,s.t)("Trend")],thumbnail:y,useLegacyApi:!0});class x extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(8881)]).then(o.bind(o,58881)),metadata:v,transformProps:m,controlPanel:b})}}function _(e){const{width:t,height:o,formData:r,queriesData:a}=e,{yAxisFormat:n,colorScheme:i,sliceId:l}=r;return{colorScheme:i,data:a[0].data,height:o,numberFormat:n,width:t,sliceId:l}}const S=o.p+"chord.446d549d.jpg";var w=o(81380),C=o(88396),T=o(90924);const A={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["groupby"],["columns"],["metric"],["adhoc_filters"],["row_limit"],["sort_by_metric"]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[["y_axis_format",null],["color_scheme"]]}],controlOverrides:{y_axis_format:{label:(0,s.t)("Number format"),description:(0,s.t)("Choose a number format")},groupby:{label:(0,s.t)("Source"),multi:!1,validators:[C.A],description:(0,s.t)("Choose a source")},columns:{label:(0,s.t)("Target"),multi:!1,validators:[C.A],description:(0,s.t)("Choose a target")}},formDataOverrides:e=>{const t=(0,f.a)().popAllColumns().filter((t=>!(0,T.A)(e.columns).includes(t)));return{...e,groupby:t,metric:(0,f.a)().shiftMetric()}}},k=new l.A({category:(0,s.t)("Flow"),credits:["https://github.com/d3/d3-chord"],description:(0,s.t)("Showcases the flow or link between categories using thickness of chords. The value and corresponding thickness can be different for each side."),exampleGallery:[{url:S,caption:(0,s.t)("Relationships between community channels")}],name:(0,s.t)("Chord Diagram"),tags:[(0,s.t)("Circular"),(0,s.t)("Legacy"),(0,s.t)("Proportional"),(0,s.t)("Relational")],thumbnail:w,useLegacyApi:!0});class F extends c.A{constructor(){super({loadChart:()=>o.e(3237).then(o.bind(o,33237)),metadata:k,transformProps:_,controlPanel:A})}}function M(e){const{width:t,height:o,formData:r,queriesData:a}=e,{linearColorScheme:n,numberFormat:i,selectCountry:l,colorScheme:s,sliceId:c}=r;return{width:t,height:o,data:a[0].data,country:l?String(l).toLowerCase():null,linearColorScheme:n,numberFormat:i,colorScheme:s,sliceId:c}}const P=o.p+"exampleUsa.5007a9ac.jpg",L=o.p+"exampleGermany.db162ad7.jpg";var D=o(52807),O=o(59713);const R={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[{name:"select_country",config:{type:"SelectControl",label:(0,s.t)("Country"),default:null,choices:O.JK,description:(0,s.t)("Which country to plot the map for?"),validators:[C.A]}}],["entity"],["metric"],["adhoc_filters"]]},{label:(0,s.t)("Chart Options"),expanded:!0,tabOverride:"customize",controlSetRows:[[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Number format"),renderTrigger:!0,default:"SMART_NUMBER",choices:g.Bb,description:g.YH}}],["linear_color_scheme"]]}],controlOverrides:{entity:{label:(0,s.t)("ISO 3166-2 Codes"),description:(0,s.t)("Column containing ISO 3166-2 codes of region/province/department in your table.")},metric:{label:(0,s.t)("Metric"),description:(0,s.t)("Metric to display bottom title")},linear_color_scheme:{renderTrigger:!1}},formDataOverrides:e=>({...e,entity:(0,f.a)().shiftColumn(),metric:(0,f.a)().shiftMetric()})},B=new l.A({category:(0,s.t)("Map"),credits:["https://bl.ocks.org/john-guerra"],description:(0,s.t)("Visualizes how a single metric varies across a country's principal subdivisions (states, provinces, etc) on a choropleth map. Each subdivision's value is elevated when you hover over the corresponding geographic boundary."),exampleGallery:[{url:P},{url:L}],name:(0,s.t)("Country Map"),tags:[(0,s.t)("2D"),(0,s.t)("Comparison"),(0,s.t)("Geo"),(0,s.t)("Range"),(0,s.t)("Report"),(0,s.t)("Stacked")],thumbnail:D,useLegacyApi:!0});class I extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(7811)]).then(o.bind(o,87811)),metadata:B,transformProps:M,controlPanel:R})}}function N(e){const{height:t,width:o,formData:r,queriesData:a}=e,{horizonColorScale:n,seriesHeight:i}=r;return{colorScale:n,data:a[0].data,height:t,seriesHeight:parseInt(i,10),width:o}}const E=o.p+"Horizon_Chart.7b46c45c.jpg";var z=o(29189),j=o(20259);const V={controlPanelSections:[{label:(0,s.t)("Time"),expanded:!0,description:(0,s.t)("Time related form attributes"),controlSetRows:[["granularity_sqla"],["time_range"]]},{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit","timeseries_limit_metric"],["order_desc"],[{name:"contribution",config:{type:"CheckboxControl",label:(0,s.t)("Contribution"),default:!1,description:(0,s.t)("Compute the contribution to the total")}}],["row_limit",null]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[[{name:"series_height",config:{type:"SelectControl",renderTrigger:!0,freeForm:!0,label:(0,s.t)("Series Height"),default:"25",choices:(0,j.u)(["10","25","40","50","75","100","150","200"]),description:(0,s.t)("Pixel height of each series")}},{name:"horizon_color_scale",config:{type:"SelectControl",renderTrigger:!0,label:(0,s.t)("Value Domain"),choices:[["series",(0,s.t)("series")],["overall",(0,s.t)("overall")],["change",(0,s.t)("change")]],default:"series",description:(0,s.t)("series: Treat each series independently; overall: All series use the same scale; change: Show changes compared to the first data point in each series")}}]]}]},$=new l.A({category:(0,s.t)("Distribution"),credits:["http://kmandov.github.io/d3-horizon-chart/"],description:(0,s.t)("Compares how a metric changes over time between different groups. Each group is mapped to a row and change over time is visualized bar lengths and color."),exampleGallery:[{url:E}],name:(0,s.t)("Horizon Chart"),tags:[(0,s.t)("Legacy")],thumbnail:z,useLegacyApi:!0});class Y extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(5336)]).then(o.bind(o,45336)),metadata:$,transformProps:N,controlPanel:V})}}var G=o(48672);const q=o.p+"MapBox.6e6f79c8.jpg",W=o.p+"MapBox2.6337d5b5.jpg";var U=o(73744),H=o(58233),Q=o(99203);const J=H.A.entity,K=[["rgb(0, 139, 139)",(0,s.t)("Dark Cyan")],["rgb(128, 0, 128)",(0,s.t)("Purple")],["rgb(255, 215, 0)",(0,s.t)("Gold")],["rgb(69, 69, 69)",(0,s.t)("Dim Gray")],["rgb(220, 20, 60)",(0,s.t)("Crimson")],["rgb(34, 139, 34)",(0,s.t)("Forest Green")]],X={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[{name:"all_columns_x",config:{...J,label:(0,s.t)("Longitude"),description:(0,s.t)("Column containing longitude data")}}],[{name:"all_columns_y",config:{...J,label:(0,s.t)("Latitude"),description:(0,s.t)("Column containing latitude data")}}],[{name:"clustering_radius",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Clustering Radius"),default:"60",choices:(0,j.u)(["0","20","40","60","80","100","200","500","1000"]),description:(0,s.t)("The radius (in pixels) the algorithm uses to define a cluster. Choose 0 to turn off clustering, but beware that a large number of points (>1000) will cause lag.")}}],["row_limit"],["adhoc_filters"],["groupby"]]},{label:(0,s.t)("Points"),controlSetRows:[[{name:"point_radius",config:{type:"SelectControl",label:(0,s.t)("Point Radius"),default:"Auto",description:(0,s.t)("The radius of individual points (ones that are not in a cluster). Either a numerical column or `Auto`, which scales the point based on the largest cluster"),mapStateToProps:e=>{const t=(0,Q.A)(e.datasource);return{choices:[["Auto",(0,s.t)("Auto")]].concat(t)}}}}],[{name:"point_radius_unit",config:{type:"SelectControl",label:(0,s.t)("Point Radius Unit"),default:"Pixels",choices:[["Pixels",(0,s.t)("Pixels")],["Miles",(0,s.t)("Miles")],["Kilometers",(0,s.t)("Kilometers")]],description:(0,s.t)("The unit of measure for the specified point radius")}}]]},{label:(0,s.t)("Labelling"),controlSetRows:[[{name:"mapbox_label",config:{type:"SelectControl",multi:!0,label:(0,s.t)("label"),default:[],description:(0,s.t)("`count` is COUNT(*) if a group by is used. Numerical columns will be aggregated with the aggregator. Non-numerical columns will be used to label points. Leave empty to get a count of points in each cluster."),mapStateToProps:e=>({choices:(0,Q.A)(e.datasource)})}}],[{name:"pandas_aggfunc",config:{type:"SelectControl",label:(0,s.t)("Cluster label aggregator"),clearable:!1,choices:[["sum",(0,s.t)("sum")],["mean",(0,s.t)("mean")],["min",(0,s.t)("min")],["max",(0,s.t)("max")],["std",(0,s.t)("std")],["var",(0,s.t)("var")]],default:"sum",description:(0,s.t)("Aggregate function applied to the list of points in each cluster to produce the cluster label.")}}]]},{label:(0,s.t)("Visual Tweaks"),controlSetRows:[[{name:"render_while_dragging",config:{type:"CheckboxControl",label:(0,s.t)("Live render"),default:!0,description:(0,s.t)("Points and clusters will update as the viewport is being changed")}}],[{name:"mapbox_style",config:{type:"SelectControl",label:(0,s.t)("Map Style"),clearable:!1,renderTrigger:!0,freeForm:!0,validators:[U.A],choices:[["mapbox://styles/mapbox/streets-v9",(0,s.t)("Streets")],["mapbox://styles/mapbox/dark-v9",(0,s.t)("Dark")],["mapbox://styles/mapbox/light-v9",(0,s.t)("Light")],["mapbox://styles/mapbox/satellite-streets-v9",(0,s.t)("Satellite Streets")],["mapbox://styles/mapbox/satellite-v9",(0,s.t)("Satellite")],["mapbox://styles/mapbox/outdoors-v9",(0,s.t)("Outdoors")]],default:"mapbox://styles/mapbox/light-v9",description:(0,s.t)("Base layer map style. See Mapbox documentation: %s","https://docs.mapbox.com/help/glossary/style-url/")}}],[{name:"global_opacity",config:{type:"TextControl",label:(0,s.t)("Opacity"),default:1,isFloat:!0,description:(0,s.t)("Opacity of all clusters, points, and labels. Between 0 and 1.")}}],[{name:"mapbox_color",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("RGB Color"),default:K[0][0],choices:K,description:(0,s.t)("The color for points and clusters in RGB")}}]]},{label:(0,s.t)("Viewport"),expanded:!0,controlSetRows:[[{name:"viewport_longitude",config:{type:"TextControl",label:(0,s.t)("Default longitude"),renderTrigger:!0,default:-122.405293,isFloat:!0,description:(0,s.t)("Longitude of default viewport"),places:8,dontRefreshOnChange:!0}},{name:"viewport_latitude",config:{type:"TextControl",label:(0,s.t)("Default latitude"),renderTrigger:!0,default:37.772123,isFloat:!0,description:(0,s.t)("Latitude of default viewport"),places:8,dontRefreshOnChange:!0}}],[{name:"viewport_zoom",config:{type:"TextControl",label:(0,s.t)("Zoom"),renderTrigger:!0,isFloat:!0,default:11,description:(0,s.t)("Zoom level of the map"),places:8,dontRefreshOnChange:!0}},null]]}],controlOverrides:{groupby:{description:(0,s.t)("One or many controls to group by. If grouping, latitude and longitude columns must be present.")}},formDataOverrides:e=>({...e,groupby:(0,f.a)().popAllColumns()})},Z=new l.A({category:(0,s.t)("Map"),credits:["https://www.mapbox.com/mapbox-gl-js/api/"],description:"",exampleGallery:[{url:q,description:(0,s.t)("Light mode")},{url:W,description:(0,s.t)("Dark mode")}],name:(0,s.t)("MapBox"),tags:[(0,s.t)("Business"),(0,s.t)("Intensity"),(0,s.t)("Legacy"),(0,s.t)("Density"),(0,s.t)("Scatter"),(0,s.t)("Transformable")],thumbnail:G,useLegacyApi:!0});class ee extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(204),o.e(4392)]).then(o.bind(o,94392)),loadTransformProps:()=>Promise.all([o.e(204),o.e(5087)]).then(o.bind(o,15087)),metadata:Z,controlPanel:X})}}function te(e){const{formData:t,queriesData:o}=e,{groupby:r,liftvaluePrecision:a,metrics:n,pvaluePrecision:i,significanceLevel:l}=t;return{alpha:l,data:o[0].data,groups:r,liftValPrec:parseInt(a,10),metrics:n.map((e=>"string"==typeof e?e:e.label)),pValPrec:parseInt(i,10)}}var oe=o(43201);const re={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],[{name:"groupby",override:{validators:[C.A]}}],["limit","timeseries_limit_metric"],["order_desc"],[{name:"contribution",config:{type:"CheckboxControl",label:(0,s.t)("Contribution"),default:!1,description:(0,s.t)("Compute the contribution to the total")}}],["row_limit",null]]},{label:(0,s.t)("Parameters"),expanded:!1,controlSetRows:[[{name:"significance_level",config:{type:"TextControl",label:(0,s.t)("Significance Level"),default:.05,description:(0,s.t)("Threshold alpha level for determining significance")}}],[{name:"pvalue_precision",config:{type:"TextControl",label:(0,s.t)("p-value precision"),default:6,description:(0,s.t)("Number of decimal places with which to display p-values")}}],[{name:"liftvalue_precision",config:{type:"TextControl",label:(0,s.t)("Lift percent precision"),default:4,description:(0,s.t)("Number of decimal places with which to display lift values")}}]]}]},ae=new l.A({category:(0,s.t)("Correlation"),description:(0,s.t)("Table that visualizes paired t-tests, which are used to understand statistical differences between groups."),name:(0,s.t)("Paired t-test Table"),tags:[(0,s.t)("Legacy"),(0,s.t)("Statistical"),(0,s.t)("Tabular")],thumbnail:oe,useLegacyApi:!0});class ne extends c.A{constructor(){super({loadChart:()=>o.e(6909).then(o.bind(o,66909)),metadata:ae,transformProps:te,controlPanel:re})}}function ie(e){const{width:t,height:o,formData:r,queriesData:a}=e,{includeSeries:n,linearColorScheme:i,metrics:l,secondaryMetric:s,series:c,showDatatable:d}=r;return{width:t,height:o,data:a[0].data,includeSeries:n,linearColorScheme:i,metrics:l.map((e=>e.label||e)),colorMetric:s&&s.label?s.label:s,series:c,showDatatable:d}}var le=o(22007);const se=o.p+"example1.34be4dd6.jpg",ce=o.p+"example2.f7e90b3e.jpg",de={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["series"],["metrics"],["secondary_metric"],["adhoc_filters"],["limit","row_limit"],["timeseries_limit_metric"],["order_desc"]]},{label:(0,s.t)("Options"),expanded:!0,controlSetRows:[[{name:"show_datatable",config:{type:"CheckboxControl",label:(0,s.t)("Data Table"),default:!1,renderTrigger:!0,description:(0,s.t)("Whether to display the interactive data table")}},{name:"include_series",config:{type:"CheckboxControl",label:(0,s.t)("Include Series"),renderTrigger:!0,default:!1,description:(0,s.t)("Include series name as an axis")}}],["linear_color_scheme"]]}]},ue=new l.A({category:(0,s.t)("Ranking"),credits:["https://syntagmatic.github.io/parallel-coordinates"],description:(0,s.t)("Plots the individual metrics for each row in the data vertically and links them together as a line. This chart is useful for comparing multiple metrics across all of the samples or rows in the data."),exampleGallery:[{url:se},{url:ce}],name:(0,s.t)("Parallel Coordinates"),tags:[(0,s.t)("Directional"),(0,s.t)("Legacy"),(0,s.t)("Relational")],thumbnail:le,useLegacyApi:!0});class me extends c.A{constructor(){super({loadChart:()=>o.e(6324).then(o.bind(o,26324)),metadata:ue,transformProps:ie,controlPanel:de})}}function pe(e){const{width:t,height:o,datasource:r,formData:a,queriesData:n}=e,{colorScheme:i,dateTimeFormat:l,equalDateSize:s,groupby:c,logScale:d,metrics:u,numberFormat:m,partitionLimit:p,partitionThreshold:h,richTooltip:g,timeSeriesOption:f,sliceId:b}=a,{verboseMap:y}=r;return{width:t,height:o,data:n[0].data,colorScheme:i,dateTimeFormat:l,equalDateSize:s,levels:c.map((e=>y[e]||e)),metrics:u,numberFormat:m,partitionLimit:p&&parseInt(p,10),partitionThreshold:h&&parseInt(h,10),timeSeriesOption:f,useLogScale:d,useRichTooltip:g,sliceId:b}}var he=o(64056);const ge=o.p+"example.f2f6c07c.jpg";var fe=o(2445),be=o(8387),ye=o(5556),ve=o.n(ye),xe=o(5250);const _e={option:ve().object.isRequired};function Se({option:e}){return(0,fe.FD)("span",{children:[(0,fe.Y)("span",{className:"option-label",style:{marginRight:4},children:e.label}),e.description&&(0,fe.Y)(xe.I,{type:"question",tooltip:e.description,label:`descr-${e.label}`})]})}Se.propTypes=_e;const we={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit"],["timeseries_limit_metric"],["order_desc"],[{name:"contribution",config:{type:"CheckboxControl",label:(0,s.t)("Contribution"),default:!1,description:(0,s.t)("Compute the contribution to the total")}}],["row_limit"]]},{label:(0,s.t)("Time Series Options"),expanded:!0,controlSetRows:[[{name:"time_series_option",config:{type:"SelectControl",label:(0,s.t)("Options"),validators:[C.A],default:"not_time",valueKey:"value",options:[{label:(0,s.t)("Not Time Series"),value:"not_time",description:(0,s.t)("Ignore time")},{label:(0,s.t)("Time Series"),value:"time_series",description:(0,s.t)("Standard time series")},{label:(0,s.t)("Aggregate Mean"),value:"agg_mean",description:(0,s.t)("Mean of values over specified period")},{label:(0,s.t)("Aggregate Sum"),value:"agg_sum",description:(0,s.t)("Sum of values over specified period")},{label:(0,s.t)("Difference"),value:"point_diff",description:(0,s.t)("Metric change in value from `since` to `until`")},{label:(0,s.t)("Percent Change"),value:"point_percent",description:(0,s.t)("Metric percent change in value from `since` to `until`")},{label:(0,s.t)("Factor"),value:"point_factor",description:(0,s.t)("Metric factor change from `since` to `until`")},{label:(0,s.t)("Advanced Analytics"),value:"adv_anal",description:(0,s.t)("Use the Advanced Analytics options below")}],optionRenderer:e=>(0,fe.Y)(Se,{option:e}),valueRenderer:e=>(0,fe.Y)(Se,{option:e}),description:(0,s.t)("Settings for time series")}}]]},{label:(0,s.t)("Chart Options"),expanded:!0,tabOverride:"customize",controlSetRows:[["color_scheme"],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Number format"),renderTrigger:!0,default:"SMART_NUMBER",choices:g.Bb,description:g.YH}},{name:"date_time_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Date Time Format"),renderTrigger:!0,default:"smart_date",choices:g.lR,description:g.YH}}],[{name:"partition_limit",config:{type:"TextControl",label:(0,s.t)("Partition Limit"),isInt:!0,default:"5",description:(0,s.t)("The maximum number of subdivisions of each group; lower values are pruned first")}},{name:"partition_threshold",config:{type:"TextControl",label:(0,s.t)("Partition Threshold"),isFloat:!0,default:"0.05",description:(0,s.t)("Partitions whose height to parent height proportions are below this value are pruned")}}],[{name:"log_scale",config:{type:"CheckboxControl",label:(0,s.t)("Log Scale"),default:!1,renderTrigger:!0,description:(0,s.t)("Use a log scale")}}],[{name:"equal_date_size",config:{type:"CheckboxControl",label:(0,s.t)("Equal Date Sizes"),default:!0,renderTrigger:!0,description:(0,s.t)("Check to force date partitions to have the same height")}}],[{name:"rich_tooltip",config:{type:"CheckboxControl",label:(0,s.t)("Rich Tooltip"),renderTrigger:!0,default:!0,description:(0,s.t)("The rich tooltip shows a list of all series for that point in time")}}]]},{label:(0,s.t)("Advanced Analytics"),tabOverride:"data",description:(0,s.t)("This section contains options that allow for advanced analytical post processing of query results"),controlSetRows:[[(0,fe.Y)(be.y,{children:(0,s.t)("Rolling Window")})],[{name:"rolling_type",config:{type:"SelectControl",label:(0,s.t)("Rolling Function"),default:"None",choices:[["None",(0,s.t)("None")],["mean",(0,s.t)("mean")],["sum",(0,s.t)("sum")],["std",(0,s.t)("std")],["cumsum",(0,s.t)("cumsum")]],description:(0,s.t)("Defines a rolling window function to apply, works along with the [Periods] text box")}}],[{name:"rolling_periods",config:{type:"TextControl",label:(0,s.t)("Periods"),isInt:!0,description:(0,s.t)("Defines the size of the rolling window function, relative to the time granularity selected")}},{name:"min_periods",config:{type:"TextControl",label:(0,s.t)("Min Periods"),isInt:!0,description:(0,s.t)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods')}}],[(0,fe.Y)(be.y,{children:(0,s.t)("Time Comparison")})],[{name:"time_compare",config:{type:"SelectControl",multi:!0,freeForm:!0,label:(0,s.t)("Time Shift"),choices:[["1 day",(0,s.t)("1 day")],["1 week",(0,s.t)("1 week")],["28 days",(0,s.t)("28 days")],["30 days",(0,s.t)("30 days")],["52 weeks",(0,s.t)("52 weeks")],["1 year",(0,s.t)("1 year")],["104 weeks",(0,s.t)("104 weeks")],["2 years",(0,s.t)("2 years")],["156 weeks",(0,s.t)("156 weeks")],["3 years",(0,s.t)("3 years")]],description:(0,s.t)("Overlay one or more timeseries from a relative time period. Expects relative time deltas in natural language (example: 24 hours, 7 days, 52 weeks, 365 days). Free text is supported.")}},{name:"comparison_type",config:{type:"SelectControl",label:(0,s.t)("Calculation type"),default:"values",choices:[["values",(0,s.t)("Actual Values")],["absolute",(0,s.t)("Difference")],["percentage",(0,s.t)("Percentage change")],["ratio",(0,s.t)("Ratio")]],description:(0,s.t)("How to display time shifts: as individual lines; as the difference between the main time series and each time shift; as the percentage change; or as the ratio between series and time shifts.")}}],[(0,fe.Y)(be.y,{children:(0,s.t)("Resample")})],[{name:"resample_rule",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Rule"),default:null,choices:[["1T",(0,s.t)("1T")],["1H",(0,s.t)("1H")],["1D",(0,s.t)("1D")],["7D",(0,s.t)("7D")],["1M",(0,s.t)("1M")],["1AS",(0,s.t)("1AS")]],description:(0,s.t)("Pandas resample rule")}},{name:"resample_method",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Method"),default:null,choices:[["asfreq",(0,s.t)("asfreq")],["bfill",(0,s.t)("bfill")],["ffill",(0,s.t)("ffill")],["median",(0,s.t)("median")],["mean",(0,s.t)("mean")],["sum",(0,s.t)("sum")]],description:(0,s.t)("Pandas resample method")}}]]}],formDataOverrides:e=>({...e,groupby:(0,f.a)().popAllColumns(),metrics:(0,f.a)().popAllMetrics()})},Ce=new l.A({category:(0,s.t)("Part of a Whole"),description:(0,s.t)("Compare the same summarized metric across multiple groups."),exampleGallery:[{url:ge}],name:(0,s.t)("Partition Chart"),tags:[(0,s.t)("Categorical"),(0,s.t)("Comparison"),(0,s.t)("Legacy"),(0,s.t)("Proportional")],thumbnail:he,useLegacyApi:!0});class Te extends c.A{constructor(){super({loadChart:()=>o.e(6543).then(o.bind(o,46543)),metadata:Ce,transformProps:pe,controlPanel:we})}}function Ae(e){const{width:t,height:o,formData:r,queriesData:a}=e,{colorScheme:n,dateTimeFormat:i,numberFormat:l,richTooltip:s,roseAreaProportion:c,sliceId:d}=r;return{width:t,height:o,data:a[0].data,colorScheme:n,dateTimeFormat:i,numberFormat:l,useAreaProportions:c,useRichTooltip:s,sliceId:d}}var ke=o(51321);const Fe=o.p+"example1.198466c2.jpg",Me=o.p+"example2.5c0aa0f4.jpg";var Pe=o(77193);const Le={controlPanelSections:[Pe.sections.legacyTimeseriesTime,{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit","timeseries_limit_metric"],["order_desc"],[{name:"contribution",config:{type:"CheckboxControl",label:(0,s.t)("Contribution"),default:!1,description:(0,s.t)("Compute the contribution to the total")}}],["row_limit",null]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Number format"),renderTrigger:!0,default:"SMART_NUMBER",choices:g.Bb,description:g.YH}},{name:"date_time_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Date Time Format"),renderTrigger:!0,default:"smart_date",choices:g.lR,description:g.YH}}],[{name:"rich_tooltip",config:{type:"CheckboxControl",label:(0,s.t)("Rich Tooltip"),renderTrigger:!0,default:!0,description:(0,s.t)("The rich tooltip shows a list of all series for that point in time")}},{name:"rose_area_proportion",config:{type:"CheckboxControl",label:(0,s.t)("Use Area Proportions"),description:(0,s.t)("Check if the Rose Chart should use segment area instead of segment radius for proportioning"),default:!1,renderTrigger:!0}}]]},{label:(0,s.t)("Advanced Analytics"),tabOverride:"data",description:(0,s.t)("This section contains options that allow for advanced analytical post processing of query results"),controlSetRows:[[(0,fe.Y)(be.y,{children:(0,s.t)("Rolling Window")})],[{name:"rolling_type",config:{type:"SelectControl",label:(0,s.t)("Rolling Function"),default:"None",choices:[["None",(0,s.t)("None")],["mean",(0,s.t)("mean")],["sum",(0,s.t)("sum")],["std",(0,s.t)("std")],["cumsum",(0,s.t)("cumsum")]],description:(0,s.t)("Defines a rolling window function to apply, works along with the [Periods] text box")}}],[{name:"rolling_periods",config:{type:"TextControl",label:(0,s.t)("Periods"),isInt:!0,description:(0,s.t)("Defines the size of the rolling window function, relative to the time granularity selected")}},{name:"min_periods",config:{type:"TextControl",label:(0,s.t)("Min Periods"),isInt:!0,description:(0,s.t)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods')}}],[(0,fe.Y)(be.y,{children:(0,s.t)("Time Comparison")})],[{name:"time_compare",config:{type:"SelectControl",multi:!0,freeForm:!0,label:(0,s.t)("Time Shift"),choices:[["1 day",(0,s.t)("1 day")],["1 week",(0,s.t)("1 week")],["28 days",(0,s.t)("28 days")],["30 days",(0,s.t)("30 days")],["52 weeks",(0,s.t)("52 weeks")],["1 year",(0,s.t)("1 year")],["104 weeks",(0,s.t)("104 weeks")],["2 years",(0,s.t)("2 years")],["156 weeks",(0,s.t)("156 weeks")],["3 years",(0,s.t)("3 years")]],description:(0,s.t)("Overlay one or more timeseries from a relative time period. Expects relative time deltas in natural language (example:  24 hours, 7 days, 52 weeks, 365 days). Free text is supported.")}},{name:"comparison_type",config:{type:"SelectControl",label:(0,s.t)("Calculation type"),default:"values",choices:[["values",(0,s.t)("Actual Values")],["absolute",(0,s.t)("Difference")],["percentage",(0,s.t)("Percentage change")],["ratio",(0,s.t)("Ratio")]],description:(0,s.t)("How to display time shifts: as individual lines; as the difference between the main time series and each time shift; as the percentage change; or as the ratio between series and time shifts.")}}],[(0,fe.Y)(be.y,{children:(0,s.t)("Resample")})],[{name:"resample_rule",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Rule"),default:null,choices:[["1T",(0,s.t)("1T")],["1H",(0,s.t)("1H")],["1D",(0,s.t)("1D")],["7D",(0,s.t)("7D")],["1M",(0,s.t)("1M")],["1AS",(0,s.t)("1AS")]],description:(0,s.t)("Pandas resample rule")}},{name:"resample_method",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Method"),default:null,choices:[["asfreq",(0,s.t)("asfreq")],["bfill",(0,s.t)("bfill")],["ffill",(0,s.t)("ffill")],["median",(0,s.t)("median")],["mean",(0,s.t)("mean")],["sum",(0,s.t)("sum")]],description:(0,s.t)("Pandas resample method")}}]]}],formDataOverrides:e=>({...e,groupby:(0,f.a)().popAllColumns(),metrics:(0,f.a)().popAllMetrics()})},De=new l.A({category:(0,s.t)("Ranking"),description:(0,s.t)("A polar coordinate chart where the circle is broken into wedges of equal angle, and the value represented by any wedge is illustrated by its area, rather than its radius or sweep angle."),exampleGallery:[{url:Fe},{url:Me}],name:(0,s.t)("Nightingale Rose Chart"),tags:[(0,s.t)("Legacy"),(0,s.t)("Advanced-Analytics"),(0,s.t)("Circular"),(0,s.t)("Multi-Layers"),(0,s.t)("Pattern"),(0,s.t)("Time"),(0,s.t)("Trend")],thumbnail:ke,useLegacyApi:!0});class Oe extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(1111),o.e(7670)]).then(o.bind(o,87670)),metadata:De,transformProps:Ae,controlPanel:Le})}}var Re=o(81115),Be=o(55364),Ie=o.n(Be),Ne=o(62193),Ee=o.n(Ne),ze=o(41811),je=o(52966),Ve=o(15222),$e=o(7683),Ye=o(19619),Ge=o(34142),qe=o(29508),We=o(40984),Ue=o(17658),He=o(99578),Qe=o(32769),Je=o(78878),Ke=o(42879),Xe=o(96254);const{PERCENT_3_POINT:Ze}=je.A,{DATABASE_DATETIME:et}=Ve.A;function tt(e,t=[]){return t.every((t=>null===t[e]||void 0===t[e]||"number"==typeof t[e]))}const ot=(0,ze.A)((function(e,t){if(null==e||!e[0])return e||[];const o=t.filter((e=>e.dataType===$e.s.Temporal));return o.length>0?e.map((e=>{const t={...e};return o.forEach((({key:o,formatter:r})=>{t[o]=new Ke.A(e[o],{formatter:r})})),t})):e})),rt=new Map,at=(e,t)=>{const o=e-t;let r;return r=e||t?e&&t?(e-t)/Math.abs(t):e?1:-1:0,{valueDifference:o,percentDifferenceNum:r}},nt=(0,ze.A)((function(e,t,o){return null==e?void 0:e.map((e=>{const r={};return t.forEach((t=>{if((t.isMetric||t.isPercentMetric)&&!t.key.includes(o)&&t.isNumeric){const a=e[t.key]||0,n=t.isMetric?(null==e?void 0:e[`${t.key}__${o}`])||0:e[`%${t.key.slice(1)}__${o}`]||0,{valueDifference:i,percentDifferenceNum:l}=at(a,n);r[`Main ${t.key}`]=a,r[`# ${t.key}`]=n,r[` ${t.key}`]=i,r[`% ${t.key}`]=l}})),Object.keys(e).forEach((o=>{t.some((e=>e.key===o&&(e.isMetric||e.isPercentMetric)))||(r[o]=e[o])})),r}))})),it=(0,ze.A)((function(e){const{datasource:{columnFormats:t,currencyFormats:o,verboseMap:r},rawFormData:{table_timestamp_format:a,metrics:n,percent_metrics:i,column_config:l={}},queriesData:s}=e,c=(0,Ye.A)(e.rawFormData),{data:m,colnames:p,coltypes:h}=s[0]||{},g=(null!=n?n:[]).map(Ge.A),f=(null!=i?i:[]).map(Ge.A),b=f.map((e=>`%${e}`)),y=new Set(g),v=new Set(b),x=new Set(f),_=(p||[]).filter((e=>!(x.has(e)&&!y.has(e)))).map(((e,n)=>{var i;const s=h[n],p=l[e]||{},g=y.has(e)&&tt(e,m),f=v.has(e),b=f&&null!=r&&r.hasOwnProperty(e.replace("%",""))?`%${r[e.replace("%","")]}`:(null==r?void 0:r[e])||e,x=s===$e.s.Temporal,_=s===$e.s.Numeric,S=null==t?void 0:t[e],w=null==o?void 0:o[e],C=p.d3NumberFormat||S,T=null!=(i=p.currencyFormat)&&i.symbol?p.currencyFormat:w;let A;if(x||p.d3TimeFormat){const t=p.d3TimeFormat||S,o=t||a;o===qe.f?A=c?(0,u.PT)(c):t?(0,u.mo)(t):tt(e,m)?(0,u.mo)(et):String:o&&(A=(0,u.mo)(o))}else f?A=(0,d.gV)(C||Ze):(g||_&&(C||T))&&(A=null!=T&&T.symbol?new We.A({d3Format:C,currency:T}):(0,d.gV)(C));return{key:e,label:b,dataType:s,isNumeric:s===$e.s.Numeric,isMetric:g,isPercentMetric:f,formatter:A,config:p}}));return[g,b,_]}),(function(e,t){var o,r,a,n;const i=e[0],l=t[0];return i.datasource.columnFormats===l.datasource.columnFormats&&i.datasource.currencyFormats===l.datasource.currencyFormats&&i.datasource.verboseMap===l.datasource.verboseMap&&i.formData.tableTimestampFormat===l.formData.tableTimestampFormat&&i.formData.timeGrainSqla===l.formData.timeGrainSqla&&JSON.stringify(i.formData.columnConfig||null)===JSON.stringify(l.formData.columnConfig||null)&&(0,Je.A)(i.formData.metrics,l.formData.metrics)&&(0,Je.A)(null==(o=i.queriesData)||null==(o=o[0])?void 0:o.colnames,null==(r=l.queriesData)||null==(r=r[0])?void 0:r.colnames)&&(0,Je.A)(null==(a=i.queriesData)||null==(a=a[0])?void 0:a.coltypes,null==(n=l.queriesData)||null==(n=n[0])?void 0:n.coltypes)&&JSON.stringify(i.formData.extraFilters||null)===JSON.stringify(l.formData.extraFilters||null)&&JSON.stringify(i.formData.extraFormData||null)===JSON.stringify(l.formData.extraFormData||null)&&JSON.stringify(i.rawFormData.column_config||null)===JSON.stringify(l.rawFormData.column_config||null)})),lt=(e,t,o)=>o[`${e} ${t}`]||{},st=(e,t,o,r,a)=>{var n,i;const l=lt(e,t.key,o),s=null==(n=l.currencyFormat)?void 0:n.symbol,c=l.d3NumberFormat||(null==(i=t.config)?void 0:i.d3NumberFormat);let{formatter:u}=t;if("%"===e)u=(0,d.gV)(c||Ze);else if(c||s){const e=l.currencyFormat||a,t=c||r;u=e?new We.A({d3Format:t,currency:e}):(0,d.gV)(t)}return u},ct={},dt=[],ut=e=>{var t,o,r,a,n,i,l,c;const{height:d,width:u,rawFormData:m,queriesData:p=[],filterState:h,ownState:g,hooks:{onAddFilter:f,setDataMask:b=()=>{},onContextMenu:y},emitCrossFilters:v,theme:x}=e,_=Ie()({},m,m.extra_form_data),{align_pn:S=!0,color_pn:w=!0,show_cell_bars:C=!0,include_search:A=!1,page_length:k,server_pagination:F=!1,server_page_length:M=10,order_desc:P=!1,query_mode:L,show_totals:D,conditional_formatting:O,allow_rearrange_columns:R,allow_render_html:B,time_compare:I,comparison_color_enabled:N=!1,comparison_color_scheme:E=Xe.m.Green,comparison_type:z,slice_id:j}=_,V=!Ee()(I)&&L===Ue.g.Aggregate&&z===He.g1.Values,$=(e,t)=>{if(0===e)return{arrow:"",arrowColor:"",backgroundColor:"rgba(0,0,0,0.2)"};const o=e>0;return{arrow:o?"":"",arrowColor:t===Xe.m.Green?o?Xe.m.Green:Xe.m.Red:o?Xe.m.Red:Xe.m.Green,backgroundColor:t===Xe.m.Green?`rgba(${o?"0,150,0":"150,0,0"},0.2)`:`rgba(${o?"150,0,0":"0,150,0"},0.2)`}},Y=(0,ze.A)((function(e,t,o){const r=o?t.filter((e=>o.some((t=>{var o;return null==t||null==(o=t.column)?void 0:o.includes(e.key)})))):t;return null==e?void 0:e.map((e=>{const t={};return r.forEach((r=>{if((r.isMetric||r.isPercentMetric)&&!r.key.includes((0,T.A)(U)[0])&&r.isNumeric){const a=e[r.key]||0,n=r.isMetric?(null==e?void 0:e[`${r.key}__${(0,T.A)(U)[0]}`])||0:e[`%${r.key.slice(1)}__${(0,T.A)(U)[0]}`]||0,{percentDifferenceNum:i}=at(a,n);if(o)o.forEach((e=>{var o;if(null!=e&&null!=(o=e.column)&&o.includes(r.key)){const{arrow:o,arrowColor:r,backgroundColor:a}=$(i,e.colorScheme||E);t[e.column]={mainArrow:o,arrowColor:r,backgroundColor:a}}}));else{const{arrow:e,arrowColor:o,backgroundColor:a}=$(i,E);t[`${r.key}`]={mainArrow:e,arrowColor:o,backgroundColor:a}}}})),t}))})),G=(0,Ye.A)(_),q=(0,T.A)(_.time_compare).filter((e=>"custom"!==e&&"inherit"!==e)),W=(0,T.A)(_.time_compare).filter((e=>"custom"===e||"inherit"===e));let U=[];V&&!Ee()(q)&&(U=q),V&&!Ee()(W)&&(W.includes("custom")&&(U=U.concat([_.start_date_offset])),W.includes("inherit")&&(U=U.concat(["inherit"])));const H=V?(0,T.A)(U)[0]:"",[Q,J,K]=it(e);let X,Z,ee,te,oe=[];var re,ae,ne,ie;V&&(oe=((e,t,o)=>e.map((e=>{const{datasource:{columnFormats:r,currencyFormats:a},rawFormData:{column_config:n={}}}=t,i=null==r?void 0:r[e.key],l=null==a?void 0:a[e.key],c=e.label;return(e.isMetric||e.isPercentMetric)&&!e.key.includes(o)&&e.isNumeric?[{...e,originalLabel:c,label:(0,s.t)("Main"),key:`${(0,s.t)("Main")} ${e.key}`,config:lt((0,s.t)("Main"),e.key,n),formatter:st((0,s.t)("Main"),e,n,i,l)},{...e,originalLabel:c,label:"#",key:`# ${e.key}`,config:lt("#",e.key,n),formatter:st("#",e,n,i,l)},{...e,originalLabel:c,label:"",key:` ${e.key}`,config:lt("",e.key,n),formatter:st("",e,n,i,l)},{...e,originalLabel:c,label:"%",key:`% ${e.key}`,config:lt("%",e.key,n),formatter:st("%",e,n,i,l)}]:e.isMetric||e.isPercentMetric||e.key.includes(o)?[]:[e]})).flat())(K,e,H)),F?([X,Z,ee]=p,te=null!=(re=null==(ae=Z)||null==(ae=ae.data)||null==(ae=ae[0])?void 0:ae.rowcount)?re:0):([X,ee]=p,te=null!=(ne=null==(ie=X)?void 0:ie.rowcount)?ne:0);const le=ot(null==(t=X)?void 0:t.data,K),se=nt(null==(o=X)?void 0:o.data,K,H),ce=D&&L===Ue.g.Aggregate?V?((e,t)=>{if(!t)return t;const o={};return t.map((t=>Object.keys(t).forEach((r=>{if(void 0!==t[r]&&!r.includes(e)){var a,n,i,l;o[`Main ${r}`]=parseInt((null==(a=o[`Main ${r}`])?void 0:a.toString())||"0",10)+parseInt((null==(n=t[r])?void 0:n.toString())||"0",10),o[`# ${r}`]=parseInt((null==(i=o[`# ${r}`])?void 0:i.toString())||"0",10)+parseInt((null==(l=t[`${r}__${e}`])?void 0:l.toString())||"0",10);const{valueDifference:s,percentDifferenceNum:c}=at(o[`Main ${r}`],o[`# ${r}`]);o[` ${r}`]=s,o[`% ${r}`]=c}})))),o})(H,null==(r=ee)?void 0:r.data):null==(a=ee)?void 0:a.data[0]:void 0,de=V?se||[]:le,ue=V?oe:K,me=N&&Y(null==(n=X)?void 0:n.data,K),pe=null!=(i=(0,Qe.Lj)(O,de,x))?i:dt,he=((e,t,o)=>{const r=null==o?void 0:o.filter((e=>e.column&&(e.colorScheme===Xe.m.Green||e.colorScheme===Xe.m.Red)));return null!=r&&r.length?Y(e,t,r):void 0})(null==(l=X)?void 0:l.data,K,O),ge=rt.get(j);let fe=!1;void 0!==(null==ge?void 0:ge.cachedServerLength)&&ge.cachedServerLength!==M&&(fe=!0),rt.set(j,{cachedServerLength:M,passedColumns:Array.isArray(ue)&&(null==ue?void 0:ue.length)>0?ue:null==ge?void 0:ge.passedColumns});const be=null==(c=e.rawFormData)?void 0:c.start_date_offset;return{height:d,width:u,isRawRecords:L===Ue.g.Raw,data:de,totals:ce,columns:Array.isArray(ue)&&(null==ue?void 0:ue.length)>0?ue:(null==ge?void 0:ge.passedColumns)||[],serverPagination:F,metrics:Q,percentMetrics:J,serverPaginationData:F?g:ct,setDataMask:b,alignPositiveNegative:S,colorPositiveNegative:w,showCellBars:C,sortDesc:P,includeSearch:A,rowCount:te,pageSize:F?null!=g&&g.pageSize?null==g?void 0:g.pageSize:M:(ye=k,ve=le.length,xe=K.length,"number"==typeof ye?ye||0:"string"==typeof ye?Number(ye)||0:ve*xe>5e3?200:0),filters:h.filters,emitCrossFilters:v,onChangeFilter:f,columnColorFormatters:pe,timeGrain:G,allowRearrangeColumns:R,allowRenderHtml:B,onContextMenu:y,isUsingTimeComparison:V,basicColorFormatters:me,startDateOffset:be,basicColorColumnFormatters:he,hasServerPageLengthChanged:fe,serverPageLength:M,slice_id:j};var ye,ve,xe};var mt=o(85085);const pt=o.p+"Table.f8a6698c.jpg",ht=o.p+"Table2.c8533c18.jpg",gt=o.p+"Table3.8997ea72.jpg";var ft=o(68090),bt=o.n(ft),yt=o(35622),vt=o(65471),xt=o(87422),_t=o(84189),St=o(91920),wt=o(3924),Ct=o(84023),Tt=o(71859),At=o(68235);function kt(e){var t,o;const r=null==e||null==(t=e.query_mode)?void 0:t.value;if(r===Ue.g.Aggregate||r===Ue.g.Raw)return r;const a=null==e||null==(o=e.all_columns)?void 0:o.value;return a&&a.length>0?Ue.g.Raw:Ue.g.Aggregate}function Ft(e){return({controls:t})=>kt(t)===e}const Mt=Ft(Ue.g.Aggregate),Pt=Ft(Ue.g.Raw),Lt=(e,t)=>t.every((e=>0===(0,T.A)(e).length))&&Mt({controls:e})?[(0,s.t)("Group By, Metrics or Percentage Metrics must have a value")]:[],Dt={type:"RadioButtonControl",label:(0,s.t)("Query mode"),default:null,options:[[Ue.g.Aggregate,yt.cA[Ue.g.Aggregate]],[Ue.g.Raw,yt.cA[Ue.g.Raw]]],mapStateToProps:({controls:e})=>({value:kt(e)}),rerender:["all_columns","groupby","metrics","percent_metrics"]},Ot={...H.A.groupby,label:(0,s.t)("Columns"),description:(0,s.t)("Columns to display"),multi:!0,freeForm:!0,allowAll:!0,commaChoosesOption:!1,optionRenderer:e=>(0,fe.Y)(vt.K,{showType:!0,column:e}),valueRenderer:e=>(0,fe.Y)(vt.K,{column:e}),valueKey:"column_name",mapStateToProps:({datasource:e,controls:t},o)=>({options:(null==e?void 0:e.columns)||[],queryMode:kt(t),externalValidationErrors:Pt({controls:t})&&0===(0,T.A)(null==o?void 0:o.value).length?[(0,s.t)("must have a value")]:[]}),visibility:Pt,resetOnHide:!1},Rt={...H.A.metrics,label:(0,s.t)("Percentage metrics"),description:(0,s.t)("Select one or many metrics to display, that will be displayed in the percentages of total. Percentage metrics will be calculated only from data within the row limit. You can use an aggregation function on a column or write custom SQL to create a percentage metric."),visibility:Mt,resetOnHide:!1,mapStateToProps:({datasource:e,controls:t},o)=>{var r,a;return{columns:(null==e?void 0:e.columns)||[],savedMetrics:(0,xt._)(e),datasource:e,datasourceType:null==e?void 0:e.type,queryMode:kt(t),externalValidationErrors:Lt(t,[null==(r=t.groupby)?void 0:r.value,null==(a=t.metrics)?void 0:a.value,null==o?void 0:o.value])}},rerender:["groupby","metrics"],default:[],validators:[]},Bt={type:"SelectControl",label:(0,s.t)("Percentage metric calculation"),description:(0,s.t)("Row Limit: percentages are calculated based on the subset of data retrieved, respecting the row limit. All Records: Percentages are calculated based on the total dataset, ignoring the row limit."),default:"row_limit",clearable:!1,choices:[["row_limit",(0,s.t)("Row limit")],["all_records",(0,s.t)("All records")]],visibility:Mt,renderTrigger:!1},It={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[{name:"query_mode",config:Dt}],[{name:"groupby",override:{visibility:Mt,resetOnHide:!1,mapStateToProps:(e,t)=>{var o,r,a,n;const{controls:i}=e,l=null==H.A||null==(o=H.A.groupby)?void 0:o.mapStateToProps,s=null!=(r=null==l?void 0:l(e,t))?r:{};return s.externalValidationErrors=Lt(i,[null==(a=i.metrics)?void 0:a.value,null==(n=i.percent_metrics)?void 0:n.value,t.value]),s},rerender:["metrics","percent_metrics"]}}],[{name:"time_grain_sqla",config:{...H.A.time_grain_sqla,visibility:({controls:e})=>{var t;const o=Object.fromEntries((0,T.A)(null==e||null==(t=e.groupby)?void 0:t.options).map((e=>[e.column_name,e.is_dttm])));return(0,T.A)(null==e?void 0:e.groupby.value).map((e=>!!(0,St.q0)(e)||!!(0,St.eh)(e)&&!!o[e])).some(Boolean)}}},"temporal_columns_lookup"],[{name:"metrics",override:{validators:[],visibility:Mt,resetOnHide:!1,mapStateToProps:({controls:e,datasource:t,form_data:o},r)=>{var a,n,i,l;return{columns:null!=t&&null!=(a=t.columns[0])&&a.hasOwnProperty("filterable")?null==t||null==(n=t.columns)?void 0:n.filter((e=>e.filterable)):null==t?void 0:t.columns,savedMetrics:(0,xt._)(t),selectedMetrics:o.metrics||(o.metric?[o.metric]:[]),datasource:t,externalValidationErrors:Lt(e,[null==(i=e.groupby)?void 0:i.value,null==(l=e.percent_metrics)?void 0:l.value,r.value])}},rerender:["groupby","percent_metrics"]}},{name:"all_columns",config:Ot}],[{name:"percent_metrics",config:Rt}],["adhoc_filters"],[{name:"timeseries_limit_metric",override:{visibility:Mt,resetOnHide:!1}},{name:"order_by_cols",config:{type:"SelectControl",label:(0,s.t)("Ordering"),description:(0,s.t)("Order results by selected columns"),multi:!0,default:[],mapStateToProps:({datasource:e})=>({choices:null!=e&&e.hasOwnProperty("order_by_choices")?null==e?void 0:e.order_by_choices:(null==e?void 0:e.columns)||[]}),visibility:Pt,resetOnHide:!1}}],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,s.t)("Sort descending"),default:!0,description:(0,s.t)("If enabled, this control sorts the results/values descending, otherwise it sorts the results ascending."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.timeseries_limit_metric)?void 0:t.value)&&Mt({controls:e})},resetOnHide:!1}}],[{name:"server_pagination",config:{type:"CheckboxControl",label:(0,s.t)("Server pagination"),description:(0,s.t)("Enable server side pagination of results (experimental feature)"),default:!1}}],[{name:"server_page_length",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Server Page Length"),default:10,choices:At.D,description:(0,s.t)("Rows per page, 0 means no pagination"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.server_pagination)?void 0:t.value)},validators:[wt.A]}}],[{name:"row_limit",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Row limit"),clearable:!1,mapStateToProps:e=>{var t,o,r;return{maxValue:null==e||null==(t=e.common)||null==(t=t.conf)?void 0:t.TABLE_VIZ_MAX_ROW_SERVER,server_pagination:null==e||null==(o=e.form_data)?void 0:o.server_pagination,maxValueWithoutServerPagination:null==e||null==(r=e.common)||null==(r=r.conf)?void 0:r.SQL_MAX_ROW}},validators:[wt.A,(e,t)=>(0,Ct.A)(e,(null==t?void 0:t.maxValue)||yt.Vt),(e,t)=>(0,Tt.A)(e,null==t?void 0:t.server_pagination,(null==t?void 0:t.maxValueWithoutServerPagination)||yt.sH,(null==t?void 0:t.maxValue)||yt.Vt)],validationDependancies:["server_pagination"],default:1e4,choices:(0,j.u)([10,50,100,250,500,1e3,5e3,1e4,5e4,1e5,15e4,2e5,25e4,3e5,35e4,4e5,45e4,5e5]),description:(0,s.t)("Limits the number of the rows that are computed in the query that is the source of the data used for this chart.")},override:{default:1e3}}],[{name:"percent_metric_calculation",config:Bt}],[{name:"show_totals",config:{type:"CheckboxControl",label:(0,s.t)("Show summary"),default:!1,description:(0,s.t)("Show total aggregations of selected metrics. Note that row limit does not apply to the result."),visibility:Mt,resetOnHide:!1}}]]},{label:(0,s.t)("Options"),expanded:!0,controlSetRows:[[{name:"table_timestamp_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Timestamp format"),default:qe.f,renderTrigger:!0,clearable:!1,choices:g.lR,description:(0,s.t)("D3 time format for datetime columns")}}],[{name:"page_length",config:{type:"SelectControl",freeForm:!0,renderTrigger:!0,label:(0,s.t)("Page length"),default:null,choices:At.x,description:(0,s.t)("Rows per page, 0 means no pagination"),visibility:({controls:e})=>{var t;return!(null!=e&&null!=(t=e.server_pagination)&&t.value)}}},null],[{name:"include_search",config:{type:"CheckboxControl",label:(0,s.t)("Search box"),renderTrigger:!0,default:!1,description:(0,s.t)("Whether to include a client-side search box")}}],[{name:"allow_rearrange_columns",config:{type:"CheckboxControl",label:(0,s.t)("Allow columns to be rearranged"),renderTrigger:!0,default:!1,description:(0,s.t)("Allow end user to drag-and-drop column headers to rearrange them. Note their changes won't persist for the next time they open the chart."),visibility:({controls:e})=>{var t;return Ee()(null==e||null==(t=e.time_compare)?void 0:t.value)}}}],[{name:"allow_render_html",config:{type:"CheckboxControl",label:(0,s.t)("Render columns in HTML format"),renderTrigger:!0,default:!0,description:(0,s.t)("Renders table cells as HTML when applicable. For example, HTML <a> tags will be rendered as hyperlinks.")}}],[{name:"column_config",config:{type:"ColumnConfigControl",label:(0,s.t)("Customize columns"),description:(0,s.t)("Further customize how to display each column"),width:400,height:320,renderTrigger:!0,shouldMapStateToProps:()=>!0,mapStateToProps(e,t,o){var r,a,n;const i=null==e||null==(r=e.controls)||null==(r=r.time_compare)?void 0:r.value,{colnames:l,coltypes:c}=null!=(a=null==o||null==(n=o.queriesResponse)?void 0:n[0])?a:{};let d=l||[],u=c||[];const m={},p={};if(!Ee()(i)){const t=[],o=[];d.filter((e=>bt()(e.split("__"))!==i)).forEach(((r,a)=>{if((0,_t.Du)({colname:r,colnames:d,formData:e.form_data}))return;const n=(0,_t.je)(r,e.form_data),i=(0,_t.Cn)(r,e.form_data);if(n||i){const e=(e=>[`${(0,s.t)("Main")} ${e}`,`# ${e}`,` ${e}`,`% ${e}`])(r);e.forEach(((e,r)=>{t.push(e),o.push(...Array(4).fill($e.s.Numeric)),p[e]=!0,0===r&&e.startsWith("Main ")?m[e]=!1:m[e]=!0}))}else t.push(r),o.push(u[a]),m[r]=!1,p[r]=!1})),d=t,u=o}return{columnsPropsObject:{colnames:d,coltypes:u,childColumnMap:m,timeComparisonColumnMap:p}}}}}]]},{label:(0,s.t)("Visual formatting"),expanded:!0,controlSetRows:[[{name:"show_cell_bars",config:{type:"CheckboxControl",label:(0,s.t)("Show cell bars"),renderTrigger:!0,default:!0,description:(0,s.t)("Whether to display a bar chart background in table columns")}}],[{name:"align_pn",config:{type:"CheckboxControl",label:(0,s.t)("Align +/-"),renderTrigger:!0,default:!1,description:(0,s.t)("Whether to align background charts with both positive and negative values at 0")}}],[{name:"color_pn",config:{type:"CheckboxControl",label:(0,s.t)("Add colors to cell bars for +/-"),renderTrigger:!0,default:!0,description:(0,s.t)("Whether to colorize numeric values by whether they are positive or negative")}}],[{name:"comparison_color_enabled",config:{type:"CheckboxControl",label:(0,s.t)("Basic conditional formatting"),renderTrigger:!0,visibility:({controls:e})=>{var t;return!Ee()(null==e||null==(t=e.time_compare)?void 0:t.value)},default:!1,description:(0,s.t)("This will be applied to the whole table. Arrows ( and ) will be added to main columns for increase and decrease. Basic conditional formatting can be overwritten by conditional formatting below.")}}],[{name:"comparison_color_scheme",config:{type:"SelectControl",label:(0,s.t)("color type"),default:Xe.m.Green,renderTrigger:!0,choices:[[Xe.m.Green,"Green for increase, red for decrease"],[Xe.m.Red,"Red for increase, green for decrease"]],visibility:({controls:e})=>{var t,o;return!Ee()(null==e||null==(t=e.time_compare)?void 0:t.value)&&Boolean(null==e||null==(o=e.comparison_color_enabled)?void 0:o.value)},description:(0,s.t)("Adds color to the chart symbols based on the positive or negative change from the comparison value.")}}],[{name:"conditional_formatting",config:{type:"ConditionalFormattingControl",renderTrigger:!0,label:(0,s.t)("Custom conditional formatting"),extraColorChoices:[{value:Xe.m.Green,label:(0,s.t)("Green for increase, red for decrease")},{value:Xe.m.Red,label:(0,s.t)("Red for increase, green for decrease")}],description:(0,s.t)("Apply conditional color formatting to numeric columns"),shouldMapStateToProps:()=>!0,mapStateToProps(e,t,o){var r,a,n,i,l,c,d,u,m;const p=null!=e&&null!=(r=e.datasource)&&r.hasOwnProperty("verbose_map")?null==e||null==(a=e.datasource)?void 0:a.verbose_map:null!=(n=null==e||null==(i=e.datasource)?void 0:i.columns)?n:{},h=null==o?void 0:o.chartStatus,{colnames:g,coltypes:f}=null!=(l=null==o||null==(c=o.queriesResponse)?void 0:c[0])?l:{},b=Array.isArray(g)&&Array.isArray(f)?g.filter(((e,t)=>f[t]===$e.s.Numeric)).map((e=>{var t;return{value:e,label:Array.isArray(p)?e:null!=(t=p[e])?t:e}})):[];var y,v;return{removeIrrelevantConditions:"success"===h,columnOptions:null!=e&&null!=(d=e.controls)&&null!=(d=d.time_compare)&&d.value?(y=b||[],v=(null==(u=(0,T.A)(null==e||null==(m=e.controls)||null==(m=m.time_compare)?void 0:m.value)[0])?void 0:u.toString())||"",y.map((e=>e.label.includes(v)?[]:[{label:`${(0,s.t)("Main")} ${e.label}`,value:`${(0,s.t)("Main")} ${e.value}`},{label:`# ${e.label}`,value:`# ${e.value}`},{label:` ${e.label}`,value:` ${e.value}`},{label:`% ${e.label}`,value:`% ${e.value}`}])).flat()):b,verboseMap:p}}}}]]},{...Pe.sections.timeComparisonControls({multi:!1,showCalculationType:!1,showFullChoices:!1}),visibility:Mt}],formDataOverrides:e=>({...e,metrics:(0,f.a)().popAllMetrics(),groupby:(0,f.a)().popAllColumns()})},Nt=It;var Et=o(47309),zt=o(82689),jt=o(51979),Vt=o(69121),$t=o(25766);const Yt=(()=>{let e={};const t=t=>{e={...e,...t}};return(o,r)=>{var a;return((e,t)=>{const{percent_metrics:o,order_desc:r=!1,extra_form_data:a}=e,n=function(e){const{query_mode:t}=e;if(t===Ue.g.Aggregate||t===Ue.g.Raw)return t;const o=null==e?void 0:e.all_columns;return o&&o.length>0?Ue.g.Raw:Ue.g.Aggregate}(e),i=(0,T.A)(e.timeseries_limit_metric)[0],l=(null==a?void 0:a.time_grain_sqla)||e.time_grain_sqla;let s=e;return n===Ue.g.Raw&&(s={...e,include_time:!1}),(0,Et.A)(s,(c=>{var d,u,m,p,h,g;let{metrics:f,orderby:b=[],columns:y=[]}=c;const{extras:v={}}=c,x=[],_=(0,T.A)(e.time_compare).filter((e=>"custom"!==e&&"inherit"!==e)),S=(0,T.A)(e.time_compare).filter((e=>"custom"===e||"inherit"===e));let w=[];(0,jt.f)(e,c)&&!Ee()(_)&&(w=_),(0,jt.f)(e,c)&&!Ee()(S)&&(S.includes("custom")&&(w=w.concat([e.start_date_offset])),S.includes("inherit")&&(w=w.concat(["inherit"]))),null!=a&&a.time_compare&&!w.includes(a.time_compare)&&(w=[a.time_compare]);let C=!1,A=null;if(n===Ue.g.Aggregate){var k;if(f=f||[],i?b=[[i,!r]]:(null==(k=f)?void 0:k.length)>0&&(b=[[f[0],!1]]),e.percent_metric_calculation,o&&o.length>0){const t=(0,jt.f)(e,c)?((e,t)=>e.reduce(((e,o)=>{const r=t.map((e=>`${o}__${e}`));return e.concat([o,...r])}),[]))(o.map(Ge.A),w):o.map(Ge.A),r=(0,zt.A)(t);f=(0,zt.A)(f.concat(o),Ge.A),x.push({operation:"contribution",options:{columns:r,rename_columns:r.map((e=>`%${e}`))}})}Ee()(w)||x.push((0,Vt.t)(e,c));const t=null==e?void 0:e.temporal_columns_lookup;y=y.filter((e=>!((0,St.eh)(e)&&l&&(null==t?void 0:t[e])&&!C&&(A={timeGrain:l,columnType:"BASE_AXIS",sqlExpression:e,label:e,expressionType:"SQL"},C=!0,1)))),A&&(y=[A,...y])}const F={},M=null!=(d=null==t?void 0:t.ownState)?d:{},P=["csv","xlsx"].includes((null==e?void 0:e.result_format)||"")||"json"===(null==e?void 0:e.result_format)&&"results"===(null==e?void 0:e.result_type);if(P&&(F.row_limit=Number(s.row_limit)||0,F.row_offset=0),!P&&s.server_pagination){var L,D;const e=null!=(L=M.pageSize)?L:s.server_page_length,t=null!=(D=M.currentPage)?D:0;F.row_limit=e,F.row_offset=t*e}let O;if(Array.isArray(null==M?void 0:M.sortBy)&&(null==M?void 0:M.sortBy.length)>0){const e=null==M?void 0:M.sortBy[0];O=[[null==e?void 0:e.key,!(null!=e&&e.desc)]]}let R={...c,columns:y,extras:v,orderby:e.server_pagination&&O?O:b,metrics:f,post_processing:x,time_offsets:w,...F};if(e.server_pagination&&null!=t&&null!=(u=t.extras)&&null!=(u=u.cachedChanges)&&u[e.slice_id]&&JSON.stringify(null==t||null==(m=t.extras)||null==(m=m.cachedChanges)?void 0:m[e.slice_id])!==JSON.stringify(R.filters)){var B,I;R={...R,row_offset:0};const e={...(null==t?void 0:t.ownState)||{},currentPage:0,pageSize:null!=(B=R.row_limit)?B:0};(0,$t.F)(null==t||null==(I=t.hooks)?void 0:I.setDataMask,e)}null==t||null==(p=t.hooks)||p.setCachedChanges({[e.slice_id]:R.filters});const N=[];"all_records"===(e.percent_metric_calculation||"row_limit")&&o&&o.length>0&&N.push({...R,columns:[],metrics:o,post_processing:[],row_limit:0,row_offset:0,orderby:[],is_timeseries:!1}),null!=(h=f)&&h.length&&e.show_totals&&n===Ue.g.Aggregate&&N.push({...R,columns:[],row_limit:0,row_offset:0,post_processing:[],order_desc:void 0,orderby:void 0});const E=null==(g=e.extra_form_data)?void 0:g.interactive_groupby;var z;return E&&R.columns&&(R.columns=[...new Set([...R.columns,...E])]),e.server_pagination&&M.searchText&&null!=M&&M.searchColumn&&(R={...R,filters:[...R.filters||[],{col:null==M?void 0:M.searchColumn,op:"ILIKE",val:`${M.searchText}%`}]}),e.server_pagination&&!P?[{...R},{...R,time_offsets:[],row_limit:null!=(z=Number(null==e?void 0:e.row_limit))?z:0,row_offset:0,post_processing:[],is_rowcount:!0},...N]:[R,...N]}))})({...o},{extras:{cachedChanges:e},ownState:null!=(a=null==r?void 0:r.ownState)?a:{},hooks:{...null==r?void 0:r.hooks,setDataMask:()=>{},setCachedChanges:t}})}})(),Gt=new l.A({behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],category:(0,s.t)("Table"),canBeAnnotationTypes:["EVENT","INTERVAL"],description:(0,s.t)("Classic row-by-column spreadsheet like view of a dataset. Use tables to showcase a view into the underlying data or to show aggregated metrics."),exampleGallery:[{url:pt},{url:ht},{url:gt}],name:(0,s.t)("Table"),tags:[(0,s.t)("Additive"),(0,s.t)("Business"),(0,s.t)("Pattern"),(0,s.t)("Featured"),(0,s.t)("Report"),(0,s.t)("Sequential"),(0,s.t)("Tabular")],thumbnail:mt});class qt extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(4779)]).then(o.bind(o,64779)),metadata:Gt,transformProps:ut,controlPanel:Nt,buildQuery:Yt})}}var Wt=o(65432);function Ut(e){return"string"==typeof e||void 0===e?e:Array.isArray(e)?e.length>0?Ut(e[0]):void 0:e.label}function Ht(e){const{width:t,height:o,formData:r,queriesData:a}=e,{colorScheme:n,metric:i,rotation:l,series:s,sizeFrom:c=0,sizeTo:d,sliceId:u}=r,m=Ut(i),p=(0,Wt.A)(s),h={color:{field:p,scale:{scheme:n},type:"nominal"},fontSize:void 0===m?void 0:{field:m,scale:{range:[c,d],zero:!0},type:"quantitative"},text:{field:p}};return{data:a[0].data,encoding:h,height:o,rotation:l,width:t,sliceId:u,colorScheme:n}}function Qt(e){const{metric:t,sort_by_metric:o}=e;return(0,Et.A)(e,(e=>[{...e,...o&&{orderby:[[t,!1]]}}]))}var Jt=o(71322);const Kt=o.p+"Word_Cloud.3d210efb.jpg",Xt=o.p+"Word_Cloud_2.2a94fb99.jpg",Zt={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["series"],["metric"],["adhoc_filters"],["row_limit"],["sort_by_metric"]]},{label:(0,s.t)("Options"),expanded:!0,controlSetRows:[[{name:"size_from",config:{type:"TextControl",isInt:!0,label:(0,s.t)("Minimum Font Size"),renderTrigger:!0,default:10,description:(0,s.t)("Font size for the smallest value in the list")}},{name:"size_to",config:{type:"TextControl",isInt:!0,label:(0,s.t)("Maximum Font Size"),renderTrigger:!0,default:70,description:(0,s.t)("Font size for the biggest value in the list")}}],[{name:"rotation",config:{type:"SelectControl",label:(0,s.t)("Word Rotation"),choices:[["random",(0,s.t)("random")],["flat",(0,s.t)("flat")],["square",(0,s.t)("square")]],renderTrigger:!0,default:"square",clearable:!1,description:(0,s.t)("Rotation to apply to words in the cloud")}}],["color_scheme"]]}],controlOverrides:{series:{validators:[C.A],clearable:!1},row_limit:{default:100}},formDataOverrides:e=>({...e,series:(0,f.a)().shiftColumn(),metric:(0,f.a)().shiftMetric()})};var eo=o(9532),to=o(77672),oo=o(44710),ro=o(96469),ao=o(96548),no=o(14503);oo.A.setNumberFormatResolver(d.gV).setTimeFormatResolver((({format:e,formatInLocalTime:t=!1}={})=>{const o=t?(0,eo.addPrefix)(Ve.n,null!=e?e:(0,u.Ay)().getDefaultKey()):e;return(0,u.mo)(o)})).setColorSchemeResolver((({name:e,type:t="categorical"}={})=>{if("sequential"===t){const t=(0,ro.A)().get(e);return void 0===t?t:{type:"sequential",...t}}if("categorical"===t){const t=(0,ao.A)().get(e);return void 0===t?t:{type:"categorical",...t}}return(0,to.O6)({name:e,type:t})})).setCategoricalColorScaleResolver((({name:e,namespace:t}={})=>no.getScale(e,t)));const io=new l.A({category:(0,s.t)("Ranking"),credits:["https://github.com/jasondavies/d3-cloud"],description:(0,s.t)("Visualizes the words in a column that appear the most often. Bigger font corresponds to higher frequency."),exampleGallery:[{url:Kt},{url:Xt}],name:(0,s.t)("Word Cloud"),tags:[(0,s.t)("Categorical"),(0,s.t)("Comparison"),(0,s.t)("Density"),(0,s.t)("Single Metric")],thumbnail:Jt});class lo extends c.A{constructor(){super({buildQuery:Qt,loadChart:()=>Promise.all([o.e(8096),o.e(7391),o.e(6405)]).then(o.bind(o,87492)),metadata:io,transformProps:Ht,controlPanel:Zt})}}var so=o(46957),co=o(16062);function uo(e){const{width:t,height:o,formData:r,queriesData:a,hooks:n,inContextMenu:i,filterState:l,emitCrossFilters:s,datasource:c}=e,{onContextMenu:d,setDataMask:u}=n,{countryFieldtype:m,entity:p,maxBubbleSize:h,showBubbles:g,linearColorScheme:f,colorPicker:b,colorBy:y,colorScheme:v,sliceId:x,metric:_,yAxisFormat:S,currencyFormat:w}=r,{r:C,g:T,b:A}=b,{currencyFormats:k={},columnFormats:F={}}=c,M=(0,co.gC)(_,k,F,S,w);return{countryFieldtype:m,entity:p,data:a[0].data,width:t,height:o,maxBubbleSize:parseInt(h,10),showBubbles:g,linearColorScheme:f,color:(0,so.Qh)(C,T,A).hex(),colorBy:y,colorScheme:v,sliceId:x,onContextMenu:d,setDataMask:u,inContextMenu:i,filterState:l,emitCrossFilters:s,formatter:M}}var mo=o(11405);const po=o.p+"WorldMap1.da13410b.jpg",ho=o.p+"WorldMap2.2ace1986.jpg";var go=o(54273);const fo={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["entity"],[{name:"country_fieldtype",config:{type:"SelectControl",label:(0,s.t)("Country Field Type"),default:"cca2",choices:[["name",(0,s.t)("Full name")],["cioc",(0,s.t)("code International Olympic Committee (cioc)")],["cca2",(0,s.t)("code ISO 3166-1 alpha-2 (cca2)")],["cca3",(0,s.t)("code ISO 3166-1 alpha-3 (cca3)")]],description:(0,s.t)("The country code standard that Superset should expect to find in the [country] column")}}],["metric"],["adhoc_filters"],["row_limit"],["sort_by_metric"]]},{label:(0,s.t)("Options"),expanded:!0,controlSetRows:[[{name:"show_bubbles",config:{type:"CheckboxControl",label:(0,s.t)("Show Bubbles"),default:!1,renderTrigger:!0,description:(0,s.t)("Whether to display bubbles on top of countries")}}],["secondary_metric"],[{name:"max_bubble_size",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Max Bubble Size"),default:"25",choices:(0,j.u)(["5","10","15","25","50","75","100"])}}],["color_picker"],[{name:"color_by",config:{type:"RadioButtonControl",label:(0,s.t)("Color by"),default:go.V.Metric,options:[[go.V.Metric,(0,s.t)("Metric")],[go.V.Country,(0,s.t)("Country")]],description:(0,s.t)("Choose whether a country should be shaded by the metric, or assigned a color based on a categorical color palette")}}],["linear_color_scheme"],["color_scheme"]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[["y_axis_format"],["currency_format"]]}],controlOverrides:{entity:{label:(0,s.t)("Country Column"),description:(0,s.t)("3 letter code of the country")},secondary_metric:{label:(0,s.t)("Bubble Size"),description:(0,s.t)("Metric that defines the size of the bubble")},color_picker:{label:(0,s.t)("Bubble Color")},linear_color_scheme:{label:(0,s.t)("Country Color Scheme"),visibility:({controls:e})=>Boolean((null==e?void 0:e.color_by.value)===go.V.Metric)},color_scheme:{label:(0,s.t)("Country Color Scheme"),visibility:({controls:e})=>Boolean((null==e?void 0:e.color_by.value)===go.V.Country)}},formDataOverrides:e=>({...e,entity:(0,f.a)().shiftColumn(),metric:(0,f.a)().shiftMetric()})},bo=fo,yo=new l.A({category:(0,s.t)("Map"),credits:["http://datamaps.github.io/"],description:(0,s.t)("A map of the world, that can indicate values in different countries."),exampleGallery:[{url:po},{url:ho}],name:(0,s.t)("World Map"),tags:[(0,s.t)("2D"),(0,s.t)("Comparison"),(0,s.t)("Intensity"),(0,s.t)("Legacy"),(0,s.t)("Multi-Dimensions"),(0,s.t)("Multi-Layers"),(0,s.t)("Multi-Variables"),(0,s.t)("Scatter"),(0,s.t)("Featured")],thumbnail:mo,useLegacyApi:!0,behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy]});class vo extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(2072)]).then(o.bind(o,92072)),metadata:yo,transformProps:uo,controlPanel:bo})}}var xo=o(7145),_o=o(68585);function So(e){if(null==e||!e.trim())return null;const t=e.split(",");if(t.some((e=>(0,_o.A)(e))))throw new Error("All values should be numeric");return t.map((e=>parseFloat(e)))}function wo(e){return null!=e&&e.trim()?e.split(",").map((e=>e.trim())):null}var Co=o(20358);const To=()=>{};function Ao(e){const{width:t,height:o,annotationData:r,datasource:a,formData:n,hooks:l,queriesData:s}=e,{onAddFilter:c=To,onError:d=To}=l,{annotationLayers:u,barStacked:m,bottomMargin:p,colorPicker:h,colorScheme:g,comparisonType:f,contribution:b,donut:y,entity:v,labelsOutside:x,leftMargin:_,lineInterpolation:S,maxBubbleSize:w,metric:C,orderBars:T,pieLabelType:A,reduceXTicks:k,richTooltip:F,sendTimeRange:M,showBarValue:P,showBrush:L,showControls:D,showLabels:O,showLegend:R,showMarkers:B,size:I,stackedStyle:N,vizType:E,x:z,xAxisFormat:j,xAxisLabel:V,xAxisShowminmax:$,xLogScale:Y,xTicksLayout:G,y:q,yAxisBounds:W,yAxis2Bounds:U,yAxisLabel:H,yAxisFormat:Q,yAxisShowminmax:J,yAxis2Showminmax:K,yLogScale:X,sliceId:Z}=n;let{markerLabels:ee,markerLines:te,markerLineLabels:oe,markers:re,numberFormat:ae,rangeLabels:ne,ranges:ie}=n;const le=s[0].data||[],se=Array.isArray(le)?le.map((e=>({...e,values:Array.isArray(e.values)?e.values.map((e=>({...e}))):e.values,key:(0,Co.wR)(e.key,a.verboseMap)}))):le;return E===i.Y.Pie?ae=ae||((e,t)=>{let o;const{metrics:r=[]}=e||{};return r.forEach((e=>{e.d3format&&e.metric_name===t&&(o=e.d3format)})),o})(a,C):E===i.Y.Bullet&&(ie=So(ie)||[0,1.1*se.measures],ne=wo(ne),ee=wo(ee),te=So(te),oe=wo(oe),re=So(re)),{width:t,height:o,data:se,annotationData:r,annotationLayers:u,areaStackedStyle:N,baseColor:h,bottomMargin:p,colorScheme:g,comparisonType:f,contribution:b,entity:v,isBarStacked:m,isDonut:y,isPieLabelOutside:x,leftMargin:_,lineInterpolation:S,markerLabels:ee,markerLines:te,markerLineLabels:oe,markers:re,maxBubbleSize:parseInt(w,10),numberFormat:ae,onBrushEnd:(0,xo.A)(M)?e=>{c("__time_range",e,!1,!0)}:void 0,onError:d,orderBars:T,pieLabelType:A,rangeLabels:ne,ranges:ie,reduceXTicks:k,showBarValue:P,showBrush:L,showControls:D,showLabels:O,showLegend:R,showMarkers:B,sizeField:I,useRichTooltip:F,vizType:E,xAxisFormat:j,xAxisLabel:V,xAxisShowMinMax:$,xField:z,xIsLogScale:Y,xTicksLayout:G,yAxisFormat:Q,yAxisBounds:W,yAxis2Bounds:U,yAxisLabel:H,yAxisShowMinMax:J,yAxis2ShowMinMax:K,yField:q,yIsLogScale:X,sliceId:Z}}const ko=o.p+"example.61c54865.jpg";var Fo=o(98172);(0,s.t)("Right Axis Format"),g.Bb,g.YH,(0,s.t)("Show Markers"),(0,s.t)("Show data points as circle markers on the lines");const Mo={name:"left_margin",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,s.t)("Left Margin"),choices:[["auto",(0,s.t)("auto")],[50,"50"],[75,"75"],[100,"100"],[125,"125"],[150,"150"],[200,"200"]],default:"auto",renderTrigger:!0,description:(0,s.t)("Left margin, in pixels, allowing for more room for axis labels")}},Po={name:"y_axis_showminmax",config:{type:"CheckboxControl",label:(0,s.t)("Y bounds"),renderTrigger:!0,default:!1,description:(0,s.t)("Whether to display the min and max values of the Y-axis")}},Lo=((0,s.t)("Y 2 bounds"),(0,s.t)("Whether to display the min and max values of the Y-axis"),{name:"line_interpolation",config:{type:"SelectControl",label:(0,s.t)("Line Style"),renderTrigger:!0,choices:[["linear",(0,s.t)("linear")],["basis",(0,s.t)("basis")],["cardinal",(0,s.t)("cardinal")],["monotone",(0,s.t)("monotone")],["step-before",(0,s.t)("step-before")],["step-after",(0,s.t)("step-after")]],default:"linear",description:(0,s.t)("Line interpolation as defined by d3.js")}}),Do=((0,s.t)("Show Range Filter"),(0,s.t)("Yes"),(0,s.t)("No"),(0,s.t)("Auto"),(0,s.t)("Whether to display the time range interactive selector"),{name:"show_legend",config:{type:"CheckboxControl",label:(0,s.t)("Legend"),renderTrigger:!0,default:!0,description:(0,s.t)("Whether to display the legend (toggles)")}}),Oo=((0,s.t)("Extra Controls"),(0,s.t)("Whether to show extra controls or not. Extra controls include things like making multiBar charts stacked or side by side."),{name:"x_axis_label",config:{type:"TextControl",label:(0,s.t)("X Axis Label"),renderTrigger:!0,default:""}}),Ro={name:"bottom_margin",config:{type:"SelectControl",clearable:!1,freeForm:!0,label:(0,s.t)("Bottom Margin"),choices:[["auto",(0,s.t)("auto")],[50,"50"],[75,"75"],[100,"100"],[125,"125"],[150,"150"],[200,"200"]],default:"auto",renderTrigger:!0,description:(0,s.t)("Bottom margin, in pixels, allowing for more room for axis labels")}},Bo={name:"x_ticks_layout",config:{type:"SelectControl",label:(0,s.t)("X Tick Layout"),choices:[["auto",(0,s.t)("auto")],["flat",(0,s.t)("flat")],["45","45"],["staggered",(0,s.t)("staggered")]],default:"auto",clearable:!1,renderTrigger:!0,description:(0,s.t)("The way the ticks are laid out on the X-axis")}},Io={name:"x_axis_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("X Axis Format"),renderTrigger:!0,choices:g.lR,default:"smart_date",description:g.YH}},No={name:"y_log_scale",config:{type:"CheckboxControl",label:(0,s.t)("Y Log Scale"),default:!1,renderTrigger:!0,description:(0,s.t)("Use a log scale for the Y-axis")}},Eo={name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,s.t)("Y Axis Bounds"),renderTrigger:!0,default:[null,null],description:(0,s.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent.")}},zo=((0,s.t)("Y Axis 2 Bounds"),(0,s.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),{name:"x_axis_showminmax",config:{type:"CheckboxControl",label:(0,s.t)("X bounds"),renderTrigger:!0,default:!1,description:(0,s.t)("Whether to display the min and max values of the X-axis")}}),jo=((0,s.t)("Rich Tooltip"),(0,s.t)("The rich tooltip shows a list of all series for that point in time"),(0,s.t)("Bar Values"),(0,s.t)("Show the value on top of the bar"),(0,s.t)("Stacked Bars"),(0,s.t)("Reduce X ticks"),(0,s.t)("Reduces the number of X-axis ticks to be rendered. If true, the x-axis will not overflow and labels may be missing. If false, a minimum width will be applied to columns and the width may overflow into an horizontal scroll."),{name:"y_axis_label",config:{type:"TextControl",label:(0,s.t)("Y Axis Label"),renderTrigger:!0,default:""}}),Vo=[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit"],["timeseries_limit_metric"],["order_desc"],[{name:"contribution",config:{type:"CheckboxControl",label:(0,s.t)("Contribution"),default:!1,description:(0,s.t)("Compute the contribution to the total")}}],["row_limit",null]]},{label:(0,s.t)("Advanced Analytics"),tabOverride:"data",description:(0,s.t)("This section contains options that allow for advanced analytical post processing of query results"),controlSetRows:[[(0,fe.Y)(be.y,{children:(0,s.t)("Rolling Window")})],[{name:"rolling_type",config:{type:"SelectControl",label:(0,s.t)("Rolling Function"),default:"None",choices:[["None",(0,s.t)("None")],["mean",(0,s.t)("mean")],["sum",(0,s.t)("sum")],["std",(0,s.t)("std")],["cumsum",(0,s.t)("cumsum")]],description:(0,s.t)("Defines a rolling window function to apply, works along with the [Periods] text box")}}],[{name:"rolling_periods",config:{type:"TextControl",label:(0,s.t)("Periods"),isInt:!0,description:(0,s.t)("Defines the size of the rolling window function, relative to the time granularity selected")}}],[{name:"min_periods",config:{type:"TextControl",label:(0,s.t)("Min Periods"),isInt:!0,description:(0,s.t)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods')}}],[(0,fe.Y)(be.y,{children:(0,s.t)("Time Comparison")})],[{name:"time_compare",config:{type:"SelectControl",multi:!0,freeForm:!0,label:(0,s.t)("Time Shift"),choices:[["1 day",(0,s.t)("1 day")],["1 week",(0,s.t)("1 week")],["28 days",(0,s.t)("28 days")],["30 days",(0,s.t)("30 days")],["52 weeks",(0,s.t)("52 weeks")],["1 year",(0,s.t)("1 year")],["104 weeks",(0,s.t)("104 weeks")],["2 years",(0,s.t)("2 years")],["156 weeks",(0,s.t)("156 weeks")],["3 years",(0,s.t)("3 years")]],description:(0,s.t)("Overlay one or more timeseries from a relative time period. Expects relative time deltas in natural language (example: 24 hours, 7 days, 52 weeks, 365 days). Free text is supported.")}}],[{name:"comparison_type",config:{type:"SelectControl",label:(0,s.t)("Calculation type"),default:"values",choices:[["values",(0,s.t)("Actual Values")],["absolute",(0,s.t)("Difference")],["percentage",(0,s.t)("Percentage change")],["ratio",(0,s.t)("Ratio")]],description:(0,s.t)("How to display time shifts: as individual lines; as the difference between the main time series and each time shift; as the percentage change; or as the ratio between series and time shifts.")}}],[(0,fe.Y)(be.y,{children:(0,s.t)("Resample")})],[{name:"resample_rule",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Rule"),default:null,choices:[["1T",(0,s.t)("1T")],["1H",(0,s.t)("1H")],["1D",(0,s.t)("1D")],["7D",(0,s.t)("7D")],["1M",(0,s.t)("1M")],["1AS",(0,s.t)("1AS")]],description:(0,s.t)("Pandas resample rule")}}],[{name:"resample_method",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Method"),default:null,choices:[["asfreq",(0,s.t)("asfreq")],["bfill",(0,s.t)("bfill")],["ffill",(0,s.t)("ffill")],["median",(0,s.t)("median")],["mean",(0,s.t)("mean")],["sum",(0,s.t)("sum")]],description:(0,s.t)("Pandas resample method")}}]]}],$o={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["series"],["entity"],["x"],["y"],["adhoc_filters"],["size"],[{name:"max_bubble_size",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Max Bubble Size"),default:"25",choices:(0,j.u)(["5","10","15","25","50","75","100"])}}],["limit",null]]},{label:(0,s.t)("Chart Options"),expanded:!0,tabOverride:"customize",controlSetRows:[["color_scheme"],[Do,null]]},{label:(0,s.t)("X Axis"),expanded:!0,tabOverride:"customize",controlSetRows:[[Oo,Mo],[{name:Io.name,config:{...Io.config,default:"SMART_NUMBER",choices:g.Bb}},Bo],[{name:"x_log_scale",config:{type:"CheckboxControl",label:(0,s.t)("X Log Scale"),default:!1,renderTrigger:!0,description:(0,s.t)("Use a log scale for the X-axis")}},zo]]},{label:(0,s.t)("Y Axis"),expanded:!0,tabOverride:"customize",controlSetRows:[[jo,Ro],["y_axis_format",null],[No,Po],[Eo]]}],controlOverrides:{color_scheme:{renderTrigger:!1}},formDataOverrides:e=>({...e,series:(0,f.a)().shiftColumn(),entity:(0,f.a)().shiftColumn(),x:(0,f.a)().shiftMetric(),y:(0,f.a)().shiftMetric(),size:(0,f.a)().shiftMetric()})},Yo=new l.A({category:(0,s.t)("Correlation"),credits:["http://nvd3.org"],description:(0,s.t)("Visualizes a metric across three dimensions of data in a single chart (X axis, Y axis, and bubble size). Bubbles from the same group can be showcased using bubble color."),exampleGallery:[{url:ko}],label:Re.jW.Deprecated,name:(0,s.t)("Bubble Chart (legacy)"),tags:[(0,s.t)("Multi-Dimensions"),(0,s.t)("Comparison"),(0,s.t)("Legacy"),(0,s.t)("Scatter"),(0,s.t)("Time"),(0,s.t)("Trend"),(0,s.t)("nvd3")],thumbnail:Fo,useLegacyApi:!0});class Go extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(1111),o.e(653)]).then(o.bind(o,10653)),metadata:Yo,transformProps:Ao,controlPanel:$o})}}const qo=o.p+"example.2018d670.jpg";var Wo=o(35962);const Uo={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["metric"],["adhoc_filters"]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[[{name:"ranges",config:{type:"TextControl",label:(0,s.t)("Ranges"),default:"",description:(0,s.t)("Ranges to highlight with shading")}},{name:"range_labels",config:{type:"TextControl",label:(0,s.t)("Range labels"),default:"",description:(0,s.t)("Labels for the ranges")}}],[{name:"markers",config:{type:"TextControl",label:(0,s.t)("Markers"),default:"",description:(0,s.t)("List of values to mark with triangles")}},{name:"marker_labels",config:{type:"TextControl",label:(0,s.t)("Marker labels"),default:"",description:(0,s.t)("Labels for the markers")}}],[{name:"marker_lines",config:{type:"TextControl",label:(0,s.t)("Marker lines"),default:"",description:(0,s.t)("List of values to mark with lines")}},{name:"marker_line_labels",config:{type:"TextControl",label:(0,s.t)("Marker line labels"),default:"",description:(0,s.t)("Labels for the marker lines")}}]]}]},Ho=new l.A({category:(0,s.t)("KPI"),credits:["http://nvd3.org"],description:(0,s.t)("Showcases the progress of a single metric against a given target. The higher the fill, the closer the metric is to the target."),exampleGallery:[{url:qo}],name:(0,s.t)("Bullet Chart"),tags:[(0,s.t)("Business"),(0,s.t)("Legacy"),(0,s.t)("Report"),(0,s.t)("nvd3")],thumbnail:Wo,useLegacyApi:!0});class Qo extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(1111),o.e(653)]).then(o.bind(o,10653)),metadata:Ho,transformProps:Ao,controlPanel:Uo})}}var Jo=o(55519);const Ko=o.p+"example.0df299a4.jpg",Xo={controlPanelSections:[Pe.sections.legacyTimeseriesTime,Vo[0],{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"]]},{label:(0,s.t)("X Axis"),expanded:!0,controlSetRows:[[Oo,Ro],[Bo,Io],[zo,null]]},{label:(0,s.t)("Y Axis"),expanded:!0,controlSetRows:[[jo,Mo],[Po,No],["y_axis_format",Eo]]},Vo[1],Pe.sections.annotations],formDataOverrides:e=>({...e,groupby:(0,f.a)().popAllColumns(),metrics:(0,f.a)().popAllMetrics()})},Zo=new l.A({category:(0,s.t)("Evolution"),credits:["http://nvd3.org"],description:(0,s.t)("Visualizes many different time-series objects in a single chart. This chart is being deprecated and we recommend using the Time-series Chart instead."),exampleGallery:[{url:Ko}],label:Re.jW.Deprecated,name:(0,s.t)("Time-series Percent Change"),tags:[(0,s.t)("Legacy"),(0,s.t)("Time"),(0,s.t)("nvd3"),(0,s.t)("Advanced-Analytics"),(0,s.t)("Comparison"),(0,s.t)("Line"),(0,s.t)("Percentages"),(0,s.t)("Predictive"),(0,s.t)("Trend")],thumbnail:Jo,useLegacyApi:!0});class er extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(1111),o.e(653)]).then(o.bind(o,10653)),metadata:Zo,transformProps:Ao,controlPanel:Xo})}}var tr=o(33459);const or={controlPanelSections:[Pe.sections.legacyTimeseriesTime,{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["metric"],["adhoc_filters"],[{name:"freq",config:{type:"SelectControl",label:(0,s.t)("Frequency"),default:"W-MON",freeForm:!0,clearable:!1,choices:[["AS",(0,s.t)("Year (freq=AS)")],["52W-MON",(0,s.t)("52 weeks starting Monday (freq=52W-MON)")],["W-SUN",(0,s.t)("1 week starting Sunday (freq=W-SUN)")],["W-MON",(0,s.t)("1 week starting Monday (freq=W-MON)")],["D",(0,s.t)("Day (freq=D)")],["4W-MON",(0,s.t)("4 weeks (freq=4W-MON)")]],description:(0,s.t)('The periodicity over which to pivot time. Users can provide\n            "Pandas" offset alias.\n            Click on the info bubble for more details on accepted "freq" expressions.'),tooltipOnClick:()=>{window.open("https://pandas.pydata.org/pandas-docs/stable/timeseries.html#offset-aliases")}}}]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[[Do],[Lo],["color_picker",null]]},{label:(0,s.t)("X Axis"),expanded:!0,controlSetRows:[[Oo],[Ro],[zo],[{name:Io.name,config:{...Io.config,default:"SMART_NUMBER",choices:g.Bb}}]]},{label:(0,s.t)("Y Axis"),expanded:!0,controlSetRows:[[jo],[Mo],[Po],[No],["y_axis_format"],[Eo]]}],controlOverrides:{metric:{clearable:!1}},formDataOverrides:e=>({...e,metric:(0,f.a)().shiftMetric})},rr=new l.A({category:(0,s.t)("Evolution"),credits:["http://nvd3.org"],description:"",name:(0,s.t)("Time-series Period Pivot"),tags:[(0,s.t)("Legacy"),(0,s.t)("Time"),(0,s.t)("nvd3")],thumbnail:tr,useLegacyApi:!0});class ar extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(1111),o.e(653)]).then(o.bind(o,10653)),metadata:rr,transformProps:Ao,controlPanel:or})}}var nr=o(59046);const ir=o.p+"example.71df2d6f.png",lr=()=>{};function sr(e){const{datasource:t,height:o,hooks:r,queriesData:a,rawFormData:n,width:i,filterState:l,emitCrossFilters:s}=e,{onAddFilter:c=lr,onContextMenu:d=lr,setControlValue:u=lr,setDataMask:m=lr}=r;return{datasource:t,emitCrossFilters:s,formData:n,height:o,onAddFilter:c,onContextMenu:d,payload:a[0],setControlValue:u,filterState:l,viewport:{...n.viewport,height:o,width:i},width:i,setDataMask:m}}var cr=o(51098),dr=o(92123),ur=o(99894);const mr={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[{name:"start_spatial",config:{type:"SpatialControl",label:(0,s.t)("Start Longitude & Latitude"),validators:[C.A],description:(0,s.t)("Point to your spatial columns"),mapStateToProps:e=>({choices:(0,cr.zP)(e.datasource)})}},{name:"end_spatial",config:{type:"SpatialControl",label:(0,s.t)("End Longitude & Latitude"),validators:[C.A],description:(0,s.t)("Point to your spatial columns"),mapStateToProps:e=>({choices:(0,cr.zP)(e.datasource)})}}],["row_limit",ur.xF],["adhoc_filters"]]},{label:(0,s.t)("Map"),controlSetRows:[[ur.FN],[ur.nR,ur.R9]]},{label:(0,s.t)("Arc"),controlSetRows:[[{name:"color_scheme_type",config:{...ur.LY.config,choices:[[dr.wP.fixed_color,(0,s.t)("Fixed color")],[dr.wP.categorical_palette,(0,s.t)("Categorical palette")]],default:dr.wP.fixed_color}}],[{name:"color_picker",config:{label:(0,s.t)("Source Color"),description:(0,s.t)("Color of the source location"),type:"ColorPickerControl",default:cr.VG,renderTrigger:!0,visibility:({controls:e})=>(0,dr.JL)(e,dr.wP.fixed_color)}},{name:"target_color_picker",config:{label:(0,s.t)("Target Color"),description:(0,s.t)("Color of the target location"),type:"ColorPickerControl",default:cr.VG,renderTrigger:!0,visibility:({controls:e})=>(0,dr.JL)(e,dr.wP.fixed_color)}}],[ur.OM],[ur.$M],[{name:"stroke_width",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Stroke Width"),validators:[h.A],default:null,renderTrigger:!0,choices:(0,dr.u8)([1,2,3,4,5])}}],[ur.ZR],[ur.Fj]]},{label:(0,s.t)("Advanced"),controlSetRows:[[ur.pw],[ur.If],[ur.JO],[ur.oh]]}],controlOverrides:{size:{validators:[]},time_grain_sqla:cr.Ay}},pr=new l.A({category:(0,s.t)("Map"),credits:["https://uber.github.io/deck.gl"],behaviors:[Re.nS.InteractiveChart,Re.nS.DrillBy,Re.nS.DrillToDetail],description:(0,s.t)("Plot the distance (like flight paths) between origin and destination."),name:(0,s.t)("deck.gl Arc"),thumbnail:nr,exampleGallery:[{url:ir}],useLegacyApi:!0,tags:[(0,s.t)("deckGL"),(0,s.t)("Geo"),(0,s.t)("3D"),(0,s.t)("Relational"),(0,s.t)("Web")]});class hr extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(204),o.e(7449),o.e(9427),o.e(3374)]).then(o.bind(o,83374)),controlPanel:mr,metadata:pr,transformProps:sr})}}var gr=o(893);const fr=o.p+"example.197589e8.png",br={name:"line_column",config:{...H.A.entity,label:(0,s.t)("Lines column"),description:(0,s.t)("The database columns that contains lines information")}},yr={name:"geojson",config:{...H.A.entity,label:(0,s.t)("GeoJson Column"),description:(0,s.t)("Select the geojson column")}},vr={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[yr],["row_limit"],[ur.xF],["adhoc_filters"]]},{label:(0,s.t)("Map"),controlSetRows:[[ur.FN,ur.R9],[ur.nR]]},{label:(0,s.t)("GeoJson Settings"),controlSetRows:[[ur.jz,ur.CZ],[ur.Bq,ur.RD],[ur.Q6],[ur.DT],[{name:"line_width_unit",config:{type:"SelectControl",label:(0,s.t)("Line width unit"),default:"pixels",choices:[["meters",(0,s.t)("meters")],["pixels",(0,s.t)("pixels")]],renderTrigger:!0}}],[{name:"point_radius_scale",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Point Radius Scale"),validators:[h.A],default:null,choices:(0,dr.u8)([0,100,200,300,500])}}]]},{label:(0,s.t)("Advanced"),controlSetRows:[[ur.pw],[ur.If],[ur.JO],[ur.oh]]}]},xr=new l.A({category:(0,s.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,s.t)("The GeoJsonLayer takes in GeoJSON formatted data and renders it as interactive polygons, lines and points (circles, icons and/or texts)."),exampleGallery:[{url:fr}],name:(0,s.t)("deck.gl Geojson"),thumbnail:gr,useLegacyApi:!0,tags:[(0,s.t)("deckGL"),(0,s.t)("2D")],behaviors:[Re.nS.InteractiveChart]});class _r extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(204),o.e(7449),o.e(5879),o.e(9427),o.e(5474)]).then(o.bind(o,46217)),controlPanel:vr,metadata:xr,transformProps:sr})}}var Sr=o(27580);const wr=o.p+"example.e9179e8a.png",Cr={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[ur.FV],["size"],["row_limit"],[ur.xF],["adhoc_filters"]]},{label:(0,s.t)("Map"),controlSetRows:[[ur.FN],[ur.R9],...(0,ur.sy)({defaultSchemeType:dr.wP.categorical_palette,disableCategoricalColumn:!0}),[ur.ZR],[ur.nR],[ur.oZ],[ur.Q6]]},{label:(0,s.t)("Advanced"),controlSetRows:[[ur.pw],[ur.If],[ur.JO],[ur.oh]]}],controlOverrides:{size:{label:(0,s.t)("Height"),description:(0,s.t)("Metric used to control height"),validators:[C.A]}},formDataOverrides:e=>({...e,size:(0,f.a)().shiftMetric()})},Tr=new l.A({category:(0,s.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,s.t)("Visualize geospatial data like 3D buildings, landscapes, or objects in grid view."),name:(0,s.t)("deck.gl Grid"),thumbnail:Sr,exampleGallery:[{url:wr}],useLegacyApi:!0,tags:[(0,s.t)("deckGL"),(0,s.t)("3D"),(0,s.t)("Comparison")],behaviors:[Re.nS.InteractiveChart]});class Ar extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(204),o.e(7449),o.e(8367),o.e(6997),o.e(8128),o.e(9427),o.e(3087)]).then(o.bind(o,73087)),controlPanel:Cr,metadata:Tr,transformProps:sr})}}var kr=o(5895);const Fr=o.p+"example.a260f7bd.png",Mr={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[ur.FV],["size"],["row_limit"],[ur.xF],["adhoc_filters"]]},{label:(0,s.t)("Map"),controlSetRows:[[ur.FN],...(0,ur.sy)({defaultSchemeType:dr.wP.categorical_palette,disableCategoricalColumn:!0}),[ur.R9],[ur.nR],[ur.oZ],[ur.Q6],[{name:"js_agg_function",config:{type:"SelectControl",label:(0,s.t)("Dynamic Aggregation Function"),description:(0,s.t)("The function to use when aggregating points into groups"),default:"sum",clearable:!1,renderTrigger:!0,choices:[["sum",(0,s.t)("sum")],["min",(0,s.t)("min")],["max",(0,s.t)("max")],["mean",(0,s.t)("mean")],["median",(0,s.t)("median")],["count",(0,s.t)("count")],["variance",(0,s.t)("variance")],["deviation",(0,s.t)("deviation")],["p1",(0,s.t)("p1")],["p5",(0,s.t)("p5")],["p95",(0,s.t)("p95")],["p99",(0,s.t)("p99")]]}}]]},{label:(0,s.t)("Advanced"),controlSetRows:[[ur.pw],[ur.If],[ur.JO],[ur.oh]]}],formDataOverrides:e=>({...e,size:(0,f.a)().shiftMetric()})},Pr=new l.A({category:(0,s.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,s.t)("Overlays a hexagonal grid on a map, and aggregates data within the boundary of each cell."),exampleGallery:[{url:Fr}],name:(0,s.t)("deck.gl 3D Hexagon"),thumbnail:kr,useLegacyApi:!0,tags:[(0,s.t)("deckGL"),(0,s.t)("3D"),(0,s.t)("Geo"),(0,s.t)("Comparison")],behaviors:[Re.nS.InteractiveChart]});class Lr extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(204),o.e(7449),o.e(8367),o.e(6997),o.e(7947),o.e(9427),o.e(6185)]).then(o.bind(o,76185)),controlPanel:Mr,metadata:Pr,transformProps:sr})}}var Dr=o(17942);const Or=Array.from({length:10},((e,t)=>(t+1)/10)),Rr=Array.from({length:14},((e,t)=>5*t+5)),Br={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[ur.FV],["size"],["row_limit"],[ur.xF],["adhoc_filters"],[{name:"intensity",config:{type:"SelectControl",label:(0,s.t)("Intensity"),description:(0,s.t)("Intensity is the value multiplied by the weight to obtain the final weight"),freeForm:!0,clearable:!1,validators:[Dr.A],default:1,choices:(0,j.u)(Or)}}],[{name:"radius_pixels",config:{type:"SelectControl",label:(0,s.t)("Intensity Radius"),description:(0,s.t)("Intensity Radius is the radius at which the weight is distributed"),freeForm:!0,clearable:!1,validators:[h.A],default:30,choices:(0,j.u)(Rr)}}]]},{label:(0,s.t)("Map"),controlSetRows:[[ur.FN],[ur.R9],[{name:"color_scheme_type",config:{...ur.LY.config,choices:[[dr.wP.fixed_color,(0,s.t)("Fixed color")],[dr.wP.linear_palette,(0,s.t)("Linear palette")]],default:dr.wP.linear_palette}}],[ur.Ay],[ur.sS],[ur.nR],[{name:"aggregation",config:{type:"SelectControl",label:(0,s.t)("Aggregation"),description:(0,s.t)("The function to use when aggregating points into groups"),default:"sum",clearable:!1,renderTrigger:!0,choices:[["sum",(0,s.t)("sum")],["mean",(0,s.t)("mean")]]}}]]},{label:(0,s.t)("Advanced"),controlSetRows:[[ur.pw],[ur.If],[ur.JO],[ur.oh]]}],controlOverrides:{size:{label:(0,s.t)("Weight"),description:(0,s.t)("Metric used as a weight for the grid's coloring"),validators:[C.A]}},formDataOverrides:e=>({...e})};var Ir=o(98918);const Nr=o.p+"example.789fda46.png",Er=new l.A({category:(0,s.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,s.t)("Uses Gaussian Kernel Density Estimation to visualize spatial distribution of data"),exampleGallery:[{url:Nr}],name:(0,s.t)("deck.gl Heatmap"),thumbnail:Ir,useLegacyApi:!0,tags:[(0,s.t)("deckGL"),(0,s.t)("Spatial"),(0,s.t)("Comparison")],behaviors:[Re.nS.InteractiveChart]});class zr extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(204),o.e(7449),o.e(5618),o.e(9427),o.e(2251)]).then(o.bind(o,49529)),controlPanel:Br,metadata:Er,transformProps:sr})}}var jr=o(12522);const Vr=o.p+"example.c37b40b5.png",$r={controlPanelSections:[{label:(0,s.t)("Map"),expanded:!0,controlSetRows:[[ur.FN],[ur.R9],[{name:"deck_slices",config:{type:"SelectAsyncControl",multi:!0,label:(0,s.t)("deck.gl charts"),validators:[C.A],default:[],description:(0,s.t)("Pick a set of deck.gl charts to layer on top of one another"),dataEndpoint:"api/v1/chart/?q=(filters:!((col:viz_type,opr:sw,value:deck)))",placeholder:(0,s.t)("Select charts"),onAsyncErrorMessage:(0,s.t)("Error while fetching charts"),mutator:e=>null!=e&&e.result?e.result.map((e=>({value:e.id,label:e.slice_name}))):[]}},null]]},{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["adhoc_filters"]]}]},Yr=new l.A({category:(0,s.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,s.t)("Compose multiple layers together to form complex visuals."),exampleGallery:[{url:Vr}],name:(0,s.t)("deck.gl Multiple Layers"),thumbnail:jr,useLegacyApi:!0,tags:[(0,s.t)("deckGL"),(0,s.t)("Multi-Layers")]});class Gr extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(204),o.e(7449),o.e(8367),o.e(6997),o.e(5879),o.e(7506),o.e(5618),o.e(8128),o.e(7947),o.e(9427),o.e(3374),o.e(210)]).then(o.bind(o,58505)),controlPanel:$r,metadata:Yr,transformProps:sr})}}var qr=o(94247);const Wr=o.p+"example.d9a48098.png",Ur={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[br],[{...ur.rI,config:{...ur.rI.config,choices:[["polyline",(0,s.t)("Polyline")],["json",(0,s.t)("JSON")]]}}],["row_limit"],[ur.xF],["adhoc_filters"]]},{label:(0,s.t)("Map"),expanded:!0,controlSetRows:[[ur.FN],[ur.R9],["color_picker"],[ur.DT],[{name:"line_width_unit",config:{type:"SelectControl",label:(0,s.t)("Line width unit"),default:"pixels",choices:[["meters",(0,s.t)("meters")],["pixels",(0,s.t)("pixels")]],renderTrigger:!0}}],[ur.kH],[ur.nR]]},{label:(0,s.t)("Advanced"),controlSetRows:[[ur.pw],[ur.If],[ur.JO],[ur.oh]]}]},Hr=new l.A({category:(0,s.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,s.t)("Visualizes connected points, which form a path, on a map."),name:(0,s.t)("deck.gl Path"),thumbnail:qr,exampleGallery:[{url:Wr}],useLegacyApi:!0,tags:[(0,s.t)("deckGL"),(0,s.t)("Web")],behaviors:[Re.nS.InteractiveChart]});class Qr extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(204),o.e(7449),o.e(9427),o.e(3405)]).then(o.bind(o,93405)),controlPanel:Ur,metadata:Hr,transformProps:sr})}}var Jr=o(10880);const Kr=o.p+"example.361d67a3.png",Xr={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[{...br,config:{...br.config,label:(0,s.t)("Polygon Column")}}],[{...ur.rI,config:{...ur.rI.config,label:(0,s.t)("Polygon Encoding")}}],["adhoc_filters"],["metric"],[{...ur.xp,config:{...ur.xp.config,label:(0,s.t)("Elevation")}}],["row_limit"],[ur.kH],[ur.xF]]},{label:(0,s.t)("Map"),expanded:!0,controlSetRows:[[ur.FN],[ur.R9],[ur.nR]]},{label:(0,s.t)("Polygon Settings"),expanded:!0,controlSetRows:[[{...ur.LY,config:{...ur.LY.config,choices:[[dr.wP.fixed_color,(0,s.t)("Fixed color")],[dr.wP.linear_palette,(0,s.t)("Linear palette")],[dr.wP.color_breakpoints,(0,s.t)("Color breakpoints")]],default:dr.wP.linear_palette}},ur.jz,ur.CZ,ur.sS,ur.x9,ur.Ys],[ur.Bq,ur.RD],[ur.Q6],[ur.IG],[ur.DT],[{name:"line_width_unit",config:{type:"SelectControl",label:(0,s.t)("Line width unit"),default:"pixels",choices:[["meters",(0,s.t)("meters")],["pixels",(0,s.t)("pixels")]],renderTrigger:!0}}],[{name:"opacity",config:{type:"SliderControl",label:(0,s.t)("Opacity"),default:80,step:1,min:0,max:100,renderTrigger:!0,description:(0,s.t)("Opacity, expects values between 0 and 100")}}],[{name:"num_buckets",config:{type:"SelectControl",multi:!1,freeForm:!0,label:(0,s.t)("Number of buckets to group data"),default:5,choices:(0,dr.u8)([2,3,5,10]),description:(0,s.t)("How many buckets should the data be grouped in."),renderTrigger:!0}}],[{name:"break_points",config:{type:"SelectControl",multi:!0,freeForm:!0,label:(0,s.t)("Bucket break points"),choices:(0,dr.u8)([]),description:(0,s.t)("List of n+1 values for bucketing metric into n buckets."),renderTrigger:!0}}],[ur.ZR],[ur.Fj]]},{label:(0,s.t)("Advanced"),controlSetRows:[[ur.pw],[ur.If],[ur.JO],[ur.oh]]}],controlOverrides:{metric:{validators:[]},time_grain_sqla:cr.Ay},formDataOverrides:e=>({...e,metric:(0,f.a)().shiftMetric()})},Zr=new l.A({category:(0,s.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,s.t)("Visualizes geographic areas from your data as polygons on a Mapbox rendered map. Polygons can be colored using a metric."),name:(0,s.t)("deck.gl Polygon"),thumbnail:Jr,exampleGallery:[{url:Kr}],useLegacyApi:!0,tags:[(0,s.t)("deckGL"),(0,s.t)("3D"),(0,s.t)("Multi-Dimensions"),(0,s.t)("Geo")],behaviors:[Re.nS.InteractiveChart]});class ea extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(204),o.e(7449),o.e(9427),o.e(9710)]).then(o.bind(o,69710)),controlPanel:Xr,metadata:Zr,transformProps:sr})}}var ta=o(85228);const oa=o.p+"example.2f2c30c6.png",ra={onInit:e=>({...e,time_grain_sqla:{...e.time_grain_sqla,value:null},granularity:{...e.granularity,value:null}}),controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[ur.FV,null],["row_limit",ur.xF],["adhoc_filters"]]},{label:(0,s.t)("Map"),expanded:!0,controlSetRows:[[ur.FN],[ur.nR,ur.R9]]},{label:(0,s.t)("Point Size"),controlSetRows:[[ur.xp],[{name:"point_unit",config:{type:"SelectControl",label:(0,s.t)("Point Unit"),default:"square_m",clearable:!1,choices:[["square_m",(0,s.t)("Square meters")],["square_km",(0,s.t)("Square kilometers")],["square_miles",(0,s.t)("Square miles")],["radius_m",(0,s.t)("Radius in meters")],["radius_km",(0,s.t)("Radius in kilometers")],["radius_miles",(0,s.t)("Radius in miles")]],description:(0,s.t)("The unit of measure for the specified point radius")}}],[{name:"min_radius",config:{type:"TextControl",label:(0,s.t)("Minimum Radius"),isFloat:!0,validators:[C.A],renderTrigger:!0,default:2,description:(0,s.t)("Minimum radius size of the circle, in pixels. As the zoom level changes, this insures that the circle respects this minimum radius.")}},{name:"max_radius",config:{type:"TextControl",label:(0,s.t)("Maximum Radius"),isFloat:!0,validators:[C.A],renderTrigger:!0,default:250,description:(0,s.t)("Maximum radius size of the circle, in pixels. As the zoom level changes, this insures that the circle respects this maximum radius.")}}],[ur.IG,null]]},{label:(0,s.t)("Point Color"),controlSetRows:[[ur.ZR],[ur.Fj],...(0,ur.sy)({})]},{label:(0,s.t)("Advanced"),controlSetRows:[[ur.pw],[ur.If],[ur.JO],[ur.oh]]}],controlOverrides:{size:{validators:[]},time_grain_sqla:cr.Ay}},aa=new l.A({category:(0,s.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,s.t)("A map that takes rendering circles with a variable radius at latitude/longitude coordinates"),name:(0,s.t)("deck.gl Scatterplot"),thumbnail:ta,exampleGallery:[{url:oa}],useLegacyApi:!0,tags:[(0,s.t)("deckGL"),(0,s.t)("Comparison"),(0,s.t)("Scatter"),(0,s.t)("2D"),(0,s.t)("Geo"),(0,s.t)("Intensity"),(0,s.t)("Density")],behaviors:[Re.nS.InteractiveChart]});class na extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(204),o.e(7449),o.e(9427),o.e(9599)]).then(o.bind(o,99599)),controlPanel:ra,metadata:aa,transformProps:sr})}}var ia=o(1480);const la=o.p+"example.7de75ac1.png",sa={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[ur.FV],["size"],["row_limit"],[ur.xF],["adhoc_filters"]]},{label:(0,s.t)("Map"),controlSetRows:[[ur.FN],[ur.nR,ur.R9]]},{label:(0,s.t)("Grid"),expanded:!0,controlSetRows:[[ur.oZ],[{name:"color_scheme_type",config:{...ur.LY.config,choices:[["default","Default"],[dr.wP.fixed_color,(0,s.t)("Fixed color")],[dr.wP.categorical_palette,(0,s.t)("Categorical palette")]],default:"default"}}],[ur.Ay],[ur.$M]]},{label:(0,s.t)("Advanced"),controlSetRows:[[ur.pw],[ur.If],[ur.JO],[ur.oh]]}],controlOverrides:{size:{label:(0,s.t)("Weight"),description:(0,s.t)("Metric used as a weight for the grid's coloring"),validators:[C.A]},time_grain_sqla:cr.Ay},formDataOverrides:e=>({...e,size:(0,f.a)().shiftMetric()})},ca=new l.A({category:(0,s.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,s.t)("Aggregates data within the boundary of grid cells and maps the aggregated values to a dynamic color scale"),name:(0,s.t)("deck.gl Screen Grid"),thumbnail:ia,exampleGallery:[{url:la}],useLegacyApi:!0,tags:[(0,s.t)("deckGL"),(0,s.t)("Comparison"),(0,s.t)("Intensity"),(0,s.t)("Density")],behaviors:[Re.nS.InteractiveChart]});class da extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(204),o.e(7449),o.e(8367),o.e(9427),o.e(5926)]).then(o.bind(o,85926)),controlPanel:sa,metadata:ca,transformProps:sr})}}const ua={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[ur.FV],["row_limit"],["size"],[ur.xF],["adhoc_filters"]]},{label:(0,s.t)("Map"),expanded:!0,controlSetRows:[[ur.FN],[ur.nR,ur.R9],[{name:"cellSize",config:{type:"TextControl",label:(0,s.t)("Cell Size"),default:300,isInt:!0,description:(0,s.t)("The size of each cell in meters"),renderTrigger:!0,clearable:!1}}],[{name:"aggregation",config:{type:"SelectControl",label:(0,s.t)("Aggregation"),description:(0,s.t)("The function to use when aggregating points into groups"),default:"sum",clearable:!1,renderTrigger:!0,choices:[["sum",(0,s.t)("sum")],["min",(0,s.t)("min")],["max",(0,s.t)("max")],["mean",(0,s.t)("mean")]]}}],[{name:"contours",config:{type:"ContourControl",label:(0,s.t)("Contours"),renderTrigger:!0,description:(0,s.t)("Define contour layers. Isolines represent a collection of line segments that serparate the area above and below a given threshold. Isobands represent a collection of polygons that fill the are containing values in a given threshold range.")}}]]},{label:(0,s.t)("Advanced"),controlSetRows:[[ur.pw],[ur.If],[ur.JO],[ur.oh]]}],controlOverrides:{size:{label:(0,s.t)("Weight"),description:(0,s.t)("Metric used as a weight for the grid's coloring"),validators:[C.A]}},formDataOverrides:e=>({...e,size:(0,f.a)().shiftMetric()})};var ma=o(31044);const pa=o.p+"example.d91f44db.png",ha=new l.A({category:(0,s.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,s.t)("Uses Gaussian Kernel Density Estimation to visualize spatial distribution of data"),exampleGallery:[{url:pa}],name:(0,s.t)("deck.gl Contour"),thumbnail:ma,useLegacyApi:!0,tags:[(0,s.t)("deckGL"),(0,s.t)("Spatial"),(0,s.t)("Comparison")],behaviors:[Re.nS.InteractiveChart]});class ga extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(204),o.e(7449),o.e(8367),o.e(7506),o.e(9427),o.e(7883)]).then(o.bind(o,83177)),controlPanel:ua,metadata:ha,transformProps:sr})}}class fa extends a.A{constructor(){super({name:"deck.gl charts",plugins:[(new hr).configure({key:"deck_arc"}),(new _r).configure({key:"deck_geojson"}),(new Ar).configure({key:"deck_grid"}),(new Lr).configure({key:"deck_hex"}),(new zr).configure({key:"deck_heatmap"}),(new Gr).configure({key:"deck_multi"}),(new Qr).configure({key:"deck_path"}),(new ea).configure({key:"deck_polygon"}),(new na).configure({key:"deck_scatter"}),(new da).configure({key:"deck_screengrid"}),(new ga).configure({key:"deck_contour"})]})}}var ba=o(94122);function ya(e){var t;const{selected_chart:o,geom_column:r,extra_form_data:a}=e,n=JSON.parse(o),i=n.viz_type,l=JSON.parse(n.params);l.extra_form_data={...l.extra_form_data,...a};let{groupby:s}=l;return s||(s=[]),null==(t=s)||t.unshift(r),l.groupby=s,(0,ba.A)().get(i)(l)}const va={controlPanelSections:[{label:(0,s.t)("Configuration"),expanded:!0,controlSetRows:[[{name:"selected_chart",config:{type:"SelectAsyncControl",mutator:(e,t)=>{if(null==e||!e.result)return t&&"string"==typeof t?[{label:JSON.parse(t).slice_name,value:t}]:[];const o=[];if(t&&"string"==typeof t){const r=JSON.parse(t);let a=!1;e.result.forEach((e=>{const n=JSON.stringify(e),i=e.id===r.id,l=n!==t,c=e.slice_name;i&&(a=!0),i&&l?(o.push({value:n,label:(0,fe.FD)("span",{children:[(0,fe.FD)("i",{children:["(",(0,s.t)("updated"),") "]}),c]})}),o.push({value:t,label:c})):o.push({value:n,label:c})})),a||o.push({value:t,label:r.slice_name})}else e.result.forEach((e=>{const t=JSON.stringify(e),r=e.slice_name;o.push({value:t,label:r})}));return o},multi:!1,label:(0,s.t)("Chart"),validators:[C.A],description:(0,s.t)("Choose a chart for displaying on the map"),placeholder:(0,s.t)("Select chart"),onAsyncErrorMessage:(0,s.t)("Error while fetching charts"),mapStateToProps:e=>{var t;if(null!=e&&null!=(t=e.datasource)&&t.id){const t={columns:["id","slice_name","params","viz_type"],filters:[{col:"datasource_id",opr:"eq",value:e.datasource.id}],page:0,page_size:999};return{dataEndpoint:`/api/v1/chart/?q=${JSON.stringify(t)}`}}return{}}}}],[{name:"geom_column",config:{type:"SelectControl",label:(0,s.t)("Geometry Column"),renderTrigger:!1,description:(0,s.t)("The name of the geometry column"),mapStateToProps:e=>{var t;return{choices:null==(t=e.datasource)?void 0:t.columns.map((e=>[e.column_name,e.column_name]))}},validators:[C.A]}}]]},{label:(0,s.t)("Map Options"),expanded:!0,controlSetRows:[[{name:"map_view",config:{type:"MapViewControl",renderTrigger:!0,description:(0,s.t)("The extent of the map on application start. FIT DATA automatically sets the extent so that all data points are included in the viewport. CUSTOM allows users to define the extent manually."),label:(0,s.t)("Extent"),dontRefreshOnChange:!0,default:{mode:"FIT_DATA"}}}],[{name:"layer_configs",config:{type:"LayerConfigsControl",renderTrigger:!0,label:(0,s.t)("Layers"),default:[],description:(0,s.t)("The configuration for the map layers")}}]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[[{name:"chart_background_color",config:{label:(0,s.t)("Background Color"),description:(0,s.t)("The background color of the charts."),type:"ColorPickerControl",default:{r:255,g:255,b:255,a:.2},renderTrigger:!0}}],[{name:"chart_background_border_radius",config:{label:(0,s.t)("Corner Radius"),description:(0,s.t)("The corner radius of the chart background"),type:"SliderControl",default:10,min:0,step:1,max:100,renderTrigger:!0}}],[{name:"chart_size",config:{type:"ZoomConfigControl",renderTrigger:!0,default:{type:"FIXED",configs:{zoom:6,width:100,height:100,slope:30,exponent:2},values:{...Array.from({length:29},(()=>({width:100,height:100})))}},label:(0,s.t)("Chart size"),description:(0,s.t)("Configure the chart size for each zoom level")}}]]}]};var xa=o(69376),_a=o(23805),Sa=o.n(_a),wa=o(69191);const Ca=e=>e.reduce(((e,t,o)=>{let r;try{r=JSON.parse(t)}catch{r=void 0}return r&&Sa()(r)&&"type"in r&&"coordinates"in r?[...e,o]:[...e]}),[]),Ta=(e,t)=>e.filter(((e,o)=>!t.includes(o))).join(", "),Aa=(e,t)=>{var o;const r=[],a=[];return null==(o=e.colnames)||o.forEach(((o,n)=>{if(o===t)return;const i=o.split(", "),l=Ca(i),s=l.length?[l[0]]:[],c=Ta(i,s);r.includes(c)||(r.push(c),a.push(e.coltypes[n]))})),{colnames:r,coltypes:a}},ka=(e,t,o,r)=>{const a=e.params,n=(0,wa.A)(a),i={...o,width:null,height:null,formData:n,rawFormData:a,datasource:{}},{queriesData:l}=o,[s]=l,c=s.data;let d;const u={type:"FeatureCollection",features:[]};if(!c)return u;d="x_axis"in e.params?((e,t,o)=>{const r={};return e?(e.forEach((e=>{Object.keys(e).filter((e=>e!==t.x_axis)).forEach((a=>{var n;const i=null==(n=o.label_map)?void 0:n[a];if(!i)return void console.log("Cannot extract location from queryData. label_map not defined");const l=Ca(i);l.length>1&&console.log("More than one geometry column detected. Using first found.");const s=i[l[0]],c=l.length?[l[0]]:[],d=Ta(i,c);Object.keys(r).includes(s)||(r[s]=[]);let u=r[s].find((o=>o[t.x_axis]===e[t.x_axis]));u||(u={[t.x_axis]:e[t.x_axis]},r[s].push(u)),u[d]=e[a]}))})),r):r})(c,e.params,s):((e,t)=>{const o={};return e.forEach((e=>{const r=e[t];if(!r)return;Object.keys(o).includes(r)||(o[r]=[]);const a={...e};delete a[t],o[r].push(a)})),o})(c,t);const m=((e,t)=>{const o={...structuredClone(e),...Aa(e,t)};return o.label_map&&(o.label_map=((e,t)=>{const o={};return Object.entries(e).forEach((([e,r])=>{if(e===t)return;const a=Ca(r),n=a.length?[a[0]]:[],i=Ta(r,n),l=r.filter(((e,t)=>!a.includes(t)));o[i]=l})),o})(e.label_map,t)),o})(s,t);return Object.keys(d).forEach((e=>{const t={...i,queriesData:[{...m,data:d[e]}]},o=r(t),a={type:"Feature",geometry:JSON.parse(e),properties:{...o}};u.features.push(a)})),u};function Fa(e){const{width:t,height:o,formData:r,hooks:a,theme:n}=e,{geomColumn:i,selectedChart:l,chartSize:s,layerConfigs:c,mapView:d,chartBackgroundColor:u,chartBackgroundBorderRadius:m}=r,{setControlValue:p=()=>{}}=a,h=(e=>{const t=JSON.parse(e);return t.params=JSON.parse(t.params),t})(l),g=(0,xa.A)().get(h.viz_type);return{width:t,height:o,geomColumn:i,selectedChart:h,chartConfigs:ka(h,i,e,g),chartVizType:h.viz_type,chartSize:s,layerConfigs:c,mapView:d,chartBackgroundColor:u,chartBackgroundBorderRadius:m,setControlValue:p,theme:n}}var Ma=o(91270);const Pa=o.p+"example1.bc09e45a.png",La=o.p+"example2.11a0c9f5.png";class Da extends c.A{constructor(e){const t=new l.A({description:"Display charts on a map. For using this plugin, users first have to create any other chart that can then be placed on the map.",name:(0,s.t)("Cartodiagram"),thumbnail:Ma,tags:[(0,s.t)("Geo"),(0,s.t)("2D"),(0,s.t)("Spatial"),(0,s.t)("Experimental")],category:(0,s.t)("Map"),exampleGallery:[{url:Pa,caption:(0,s.t)("Pie charts on a map")},{url:La,caption:(0,s.t)("Line charts on a map")}]});if(e.defaultLayers){const t=(e=>{let t;return e.controlPanelSections.forEach((e=>{if(!e)return;const{controlSetRows:o}=e;o.forEach((e=>{const o=e[0];o&&"layer_configs"===o.name&&(t=o)}))})),t})(va);t?t.config.default=e.defaultLayers:console.warn("Cannot set defaultLayers. layerConfig not found in control panel. Please check if the path to layerConfig should be adjusted.")}super({buildQuery:ya,controlPanel:va,loadChart:()=>Promise.all([o.e(8096),o.e(2021),o.e(7917)]).then(o.bind(o,63634)),metadata:t,transformProps:Fa})}}function Oa(e){const{cols:t}=e;return{...(0,Et.A)(e,(o=>{const r=[];r.push((0,Vt.t)(e,o));const a=(0,T.A)(e.time_compare).filter((e=>"custom"!==e&&"inherit"!==e)),n=(0,T.A)(e.time_compare).filter((e=>"custom"===e||"inherit"===e));let i=[];return Ee()(a)||(i=a),Ee()(n)||(n.includes("custom")&&(i=i.concat([e.start_date_offset])),n.includes("inherit")&&(i=i.concat(["inherit"]))),[{...o,groupby:t,post_processing:r,time_offsets:(0,jt.f)(e,o)?(0,T.A)(i):[]}]}))}}var Ra=o(63950),Ba=o.n(Ra);const Ia=[{label:(0,s.t)("Tiny"),value:.125},{label:(0,s.t)("Small"),value:.15},{label:(0,s.t)("Normal"),value:.2},{label:(0,s.t)("Large"),value:.3},{label:(0,s.t)("Huge"),value:.4}];function Na(e,t,o,r){return{name:e,config:{type:"SelectControl",label:(0,s.t)(t),renderTrigger:!0,clearable:!1,default:o,options:r}}}const Ea=Na("header_font_size","Big Number Font Size",.4,[{label:(0,s.t)("Tiny"),value:.2},{label:(0,s.t)("Small"),value:.3},{label:(0,s.t)("Normal"),value:.4},{label:(0,s.t)("Large"),value:.5},{label:(0,s.t)("Huge"),value:.6}]),za=Na("subtitle_font_size","Subtitle Font Size",.15,Ia),ja=Na("subheader_font_size","Subheader Font Size",.15,Ia),Va=Na("metric_name_font_size","Metric Name Font Size",.15,Ia),$a={name:"subtitle",config:{type:"TextControl",label:(0,s.t)("Subtitle"),renderTrigger:!0,description:(0,s.t)("Description text that shows up below your Big Number")}},Ya={name:"show_metric_name",config:{type:"CheckboxControl",label:(0,s.t)("Show Metric Name"),renderTrigger:!0,default:!1,description:(0,s.t)("Whether to display the metric name")}},Ga={...Va,config:{...Va.config,visibility:({controls:e})=>{var t;return!0===(null==e||null==(t=e.show_metric_name)?void 0:t.value)},resetOnHide:!1}};var qa=o(66854);const Wa={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["metric"],["adhoc_filters"],[{name:"row_limit",config:H.A.row_limit}]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[["y_axis_format"],[{name:"percentDifferenceFormat",config:{...H.A.y_axis_format,label:(0,s.t)("Percent Difference format")}}],["currency_format"],[{...Ea,config:{...Ea.config,default:.2}}],[$a],[za],[Ya],[Ga],[{...ja,config:{...ja.config,default:.125,label:(0,s.t)("Comparison font size")}}],[{name:"comparison_color_enabled",config:{type:"CheckboxControl",label:(0,s.t)("Add color for positive/negative change"),renderTrigger:!0,default:!1,description:(0,s.t)("Add color for positive/negative change")}}],[{name:"comparison_color_scheme",config:{type:"SelectControl",label:(0,s.t)("color scheme for comparison"),default:qa.m.Green,renderTrigger:!0,choices:[[qa.m.Green,"Green for increase, red for decrease"],[qa.m.Red,"Red for increase, green for decrease"]],visibility:({controls:e})=>{var t;return!0===(null==e||null==(t=e.comparison_color_enabled)?void 0:t.value)},description:(0,s.t)("Adds color to the chart symbols based on the positive or negative change from the comparison value.")}}],[{name:"column_config",config:{type:"ColumnConfigControl",label:(0,s.t)("Customize columns"),description:(0,s.t)("Further customize how to display each column"),width:400,height:320,renderTrigger:!0,configFormLayout:{[$e.s.Numeric]:[{tab:(0,s.t)("General"),children:[["customColumnName"],["displayTypeIcon"],["visible"]]}]},shouldMapStateToProps:()=>!0,mapStateToProps:(e,t,o)=>(Ba()(e,t,o),{columnsPropsObject:{colnames:["Previous value","Delta","Percent change"],coltypes:[$e.s.Numeric,$e.s.Numeric,$e.s.Numeric]}})}}]]},Pe.sections.timeComparisonControls({multi:!1,showCalculationType:!1,showFullChoices:!1})],controlOverrides:{y_axis_format:{label:(0,s.t)("Number format")}},formDataOverrides:e=>({...e,metric:(0,f.a)().shiftMetric()})},Ua=Wa;var Ha,Qa,Ja,Ka=o(74353),Xa=o.n(Ka),Za=o(83826),en=o.n(Za);const tn=[16,20,30,48,60],on=[16,20,26,32,40],rn=null!=(Ha=Va.config.options.map((e=>e.value)))?Ha:[],an=null!=(Qa=Ea.config.options.map((e=>e.value)))?Qa:[],nn=null!=(Ja=ja.config.options.map((e=>e.value)))?Ja:[],ln=(e,t)=>e.reduce(((e,o,r)=>{var a;return e[o]=null!=(a=t[r])?a:t[t.length-1],e}),{}),sn=ln(rn,on),cn=ln(an,tn),dn=ln(nn,on),un=e=>{var t;return null!=(t=cn[e])?t:tn[tn.length-1]},mn=e=>{var t;return null!=(t=dn[e])?t:on[on.length-1]};var pn=o(1734);Xa().extend(en());const hn=e=>{if("string"==typeof e){const t=Xa().utc(e,void 0,!0);return t.isValid()?t.valueOf():null}return e},gn=(e,t,o)=>e===qe.f?(0,u.PT)(t):(0,u.mo)(null!=e?e:o);function fn(e,t=[]){const o="string"==typeof e?e:e.label||"";if((0,pn.S_)(e)){const o=t.find((t=>t.metric_name===e));return(null==o?void 0:o.verbose_name)||(null==o?void 0:o.metric_name)||e||"Unknown Metric"}if((0,pn.IN)(e)){const t=e.column||{},o=t.column_name||"unknown_column",r=t.verbose_name||o,a=e.aggregate||"UNKNOWN";return e.hasCustomLabel&&e.label?e.label:`${a}(${r})`}return"object"==typeof e&&"expressionType"in e&&"SQL"===e.expressionType&&"sqlExpression"in e?e.hasCustomLabel&&e.label?e.label:o||"Custom Metric":o||"Unknown Metric"}Xa().extend(en());const bn=e=>{if("string"==typeof e){const t=Xa().utc(e,void 0,!0);return t.isValid()?t.valueOf():0}return null!=e?e:0};function yn(e){var t,o,r,a,n,i,l,s,c;const{width:u,height:m,formData:p,queriesData:h,datasource:{currencyFormats:g={},columnFormats:f={}}}=e,{boldText:b,headerFontSize:y,headerText:v,metric:x,metricNameFontSize:_,yAxisFormat:S,currencyFormat:w,subheaderFontSize:C,comparisonColorScheme:A,comparisonColorEnabled:k,percentDifferenceFormat:F,subtitle:M="",subtitleFontSize:P,columnConfig:L={}}=p,{data:D=[]}=h[0],O=D,R=x?(0,Ge.A)(x):"",B=(null==(t=e.datasource)?void 0:t.metrics)||[],I=fn(x,B),N=null!=(o=null==(r=e.rawFormData)?void 0:r.show_metric_name)&&o,E=(0,T.A)(null==(a=e.rawFormData)?void 0:a.time_compare)[0],z=null==(n=e.rawFormData)?void 0:n.start_date_offset,j=null==(i=e.rawFormData)||null==(i=i.adhoc_filters)||null==(i=i.filter((e=>"TEMPORAL_RANGE"===e.operator)))?void 0:i[0];let V;null!=(l=e.datasource)&&l.metrics&&(V=e.datasource.metrics.find((e=>e.metric_name===x)));const $="custom"===E||"inherit"===E;let Y=[];$&&(Y=E&&"custom"===E?[z]:(0,T.A)(E)||[]);const{value1:G,value2:q}=O.reduce(((e,t)=>(Object.keys(t).forEach((o=>{o.includes(`${R}__${$?Y[0]:E}`)?e.value2+=t[o]:o.includes(R)&&(e.value1+=t[o])})),e)),{value1:0,value2:0});let W=0===O.length?0:bn(G),U=0===O.length?0:bn(q);const H=(0,co.gC)(x,g,f,(null==(s=V)?void 0:s.d3format)||S,w),Q=(0,d.gV)(F);let J,K=W-U;J=W||U?W&&U?(W-U)/Math.abs(U):W?1:-1:0;const X={r:"Range",y:"Year",m:"Month",w:"Week"}[p.timeComparison];return W=H(W),U=H(U),K=H(K),{width:u,height:m,data:O,metricName:I,bigNumber:W,prevNumber:U,valueDifference:K,percentDifferenceFormattedString:Q(J),boldText:b,subtitle:M,subtitleFontSize:P,showMetricName:N,metricNameFontSize:(Z=_,null!=(ee=sn[Z])?ee:on[on.length-1]),headerFontSize:un(y),subheaderFontSize:mn(C),headerText:v,compType:X,comparisonColorEnabled:k,comparisonColorScheme:A,percentDifferenceNumber:J,currentTimeRangeFilter:j,startDateOffset:z,shift:E,dashboardTimeRange:null==p||null==(c=p.extraFormData)?void 0:c.time_range,columnConfig:L};var Z,ee}var vn=o(74946);class xn extends c.A{constructor(){const e=new l.A({category:(0,s.t)("KPI"),description:"Showcases a metric along with a comparison of value, change, and percent change for a selected time period.",name:(0,s.t)("Big Number with Time Period Comparison"),tags:[(0,s.t)("Comparison"),(0,s.t)("Business"),(0,s.t)("ECharts"),(0,s.t)("Percentages"),(0,s.t)("Report"),(0,s.t)("Advanced-Analytics")],thumbnail:vn});super({buildQuery:Oa,controlPanel:Ua,loadChart:()=>o.e(3495).then(o.bind(o,3495)),metadata:e,transformProps:yn})}}var _n=o(95790),Sn=o(91466);const wn={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["x_axis"],["time_grain_sqla"],[_n.WN],["metric"],["adhoc_filters"]]},{label:(0,s.t)("Options"),tabOverride:"data",expanded:!0,controlSetRows:[[{name:"compare_lag",config:{type:"TextControl",label:(0,s.t)("Comparison Period Lag"),isInt:!0,description:(0,s.t)("Based on granularity, number of time periods to compare against")}}],[{name:"compare_suffix",config:{type:"TextControl",label:(0,s.t)("Comparison suffix"),description:(0,s.t)("Suffix to apply after the percentage display")}}],[{name:"show_timestamp",config:{type:"CheckboxControl",label:(0,s.t)("Show Timestamp"),renderTrigger:!0,default:!1,description:(0,s.t)("Whether to display the timestamp")}}],[{name:"show_trend_line",config:{type:"CheckboxControl",label:(0,s.t)("Show Trend Line"),renderTrigger:!0,default:!0,description:(0,s.t)("Whether to display the trend line")}}],[{name:"start_y_axis_at_zero",config:{type:"CheckboxControl",label:(0,s.t)("Start y-axis at 0"),renderTrigger:!0,default:!0,description:(0,s.t)("Start y-axis at zero. Uncheck to start y-axis at minimum value in the data.")}}],[{name:"time_range_fixed",config:{type:"CheckboxControl",label:(0,s.t)("Fix to selected Time Range"),description:(0,s.t)("Fix the trend line to the full time range specified in case filtered results do not include the start or end dates"),renderTrigger:!0,visibility(e){const{time_range:t}=e.form_data;return!!t&&"No filter"!==t}}}]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[["color_picker",null],[Ea],[ja],[$a],[za],[Ya],[Ga],["y_axis_format"],["currency_format"],[{name:"time_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Date format"),renderTrigger:!0,choices:g.lR,description:g.YH,default:qe.f}}],[{name:"force_timestamp_formatting",config:{type:"CheckboxControl",label:(0,s.t)("Force date format"),renderTrigger:!0,default:!1,description:(0,s.t)("Use date formatting even when metric value is not a timestamp")}}]]},{label:(0,s.t)("Advanced Analytics"),expanded:!1,controlSetRows:[[(0,fe.Y)(be.y,{children:(0,s.t)("Rolling Window")})],[{name:"rolling_type",config:{type:"SelectControl",label:(0,s.t)("Rolling Function"),default:"None",choices:[["None",(0,s.t)("None")],["mean",(0,s.t)("mean")],["sum",(0,s.t)("sum")],["std",(0,s.t)("std")],["cumsum",(0,s.t)("cumsum")]],description:(0,s.t)("Defines a rolling window function to apply, works along with the [Periods] text box")}}],[{name:"rolling_periods",config:{type:"TextControl",label:(0,s.t)("Periods"),isInt:!0,description:(0,s.t)("Defines the size of the rolling window function, relative to the time granularity selected")}}],[{name:"min_periods",config:{type:"TextControl",label:(0,s.t)("Min Periods"),isInt:!0,description:(0,s.t)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods')}}],[(0,fe.Y)(be.y,{children:(0,s.t)("Resample")})],[{name:"resample_rule",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Rule"),default:null,choices:[["1T",(0,s.t)("1 minutely frequency")],["1H",(0,s.t)("1 hourly frequency")],["1D",(0,s.t)("1 calendar day frequency")],["7D",(0,s.t)("7 calendar day frequency")],["1MS",(0,s.t)("1 month start frequency")],["1M",(0,s.t)("1 month end frequency")],["1AS",(0,s.t)("1 year start frequency")],["1A",(0,s.t)("1 year end frequency")]],description:(0,s.t)("Pandas resample rule")}}],[{name:"resample_method",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Fill method"),default:null,choices:[["asfreq",(0,s.t)("Null imputation")],["zerofill",(0,s.t)("Zero imputation")],["linear",(0,s.t)("Linear interpolation")],["ffill",(0,s.t)("Forward values")],["bfill",(0,s.t)("Backward values")],["median",(0,s.t)("Median values")],["mean",(0,s.t)("Mean values")],["sum",(0,s.t)("Sum values")]],description:(0,s.t)("Pandas resample method")}}]]}],controlOverrides:{y_axis_format:{label:(0,s.t)("Number format")},x_axis:{label:(0,s.t)("Temporal X-Axis"),...Sn.eX}},formDataOverrides:e=>({...e,metric:(0,f.a)().shiftMetric()})};var Cn=o(89297),Tn=o(19236),An=o(29668),kn=o(46900);function Fn(e){return{appendToBody:!0,borderColor:"transparent",className:"echarts-tooltip",position:(t,o,r,a,n)=>{var i;const l=null==(i=e.divRef)||null==(i=i.current)?void 0:i.getBoundingClientRect(),s=t[0]+((null==l?void 0:l.x)||0),c=t[1]+((null==l?void 0:l.y)||0),d=n.contentSize[0],u=n.contentSize[1];let m=s+kn.fn,p=c-kn.fn-u;return m+d>=document.documentElement.clientWidth&&(m=s-kn.fn-d,m<=0&&(m=kn.SB)),p<=0&&(p=c+kn.fn,p+u>=document.documentElement.clientHeight&&(p=kn.SB)),[m-((null==l?void 0:l.x)||0),p-((null==l?void 0:l.y)||0)]}}}const Mn=(0,d.gV)(je.A.PERCENT_SIGNED_1_POINT);function Pn(e){var t,o,r,a,n,i;const{width:l,height:c,queriesData:d,formData:u,rawFormData:m,hooks:p,inContextMenu:h,theme:g,datasource:{currencyFormats:f={},columnFormats:b={}}}=e,{colorPicker:y,compareLag:v,compareSuffix:x="",timeFormat:_,metricNameFontSize:S,headerFontSize:w,metric:C="value",showTimestamp:T,showTrendLine:A,subtitle:k="",subtitleFontSize:F,aggregation:M,startYAxisAtZero:P,subheader:L="",subheaderFontSize:D,forceTimestampFormatting:O,yAxisFormat:R,currencyFormat:B,timeRangeFixed:I}=u,N=(0,Ye.A)(m),{data:E=[],colnames:z=[],coltypes:j=[],from_dttm:V,to_dttm:$}=d[0],Y=d.length>1?d[1]:null,G=(null==Y?void 0:Y.data)&&Y.data.length>0&&"LAST_VALUE"!==M,q=G?Y.data[0]:null,W={},U=(0,Ge.A)(C),H=(null==(t=e.datasource)?void 0:t.metrics)||[],Q=fn(C,H),J=null!=(o=null==(r=e.rawFormData)?void 0:r.show_metric_name)&&o,K=Number(v)||0;let X=L;const{r:Z,g:ee,b:te}=y,oe=`rgb(${Z}, ${ee}, ${te})`,re=(0,Cn.yj)(m);let ae,ne=0,ie=0===E.length?null:E[0][U],le=0===E.length?null:E[0][re],se=null,ce=[];if(E.length>0&&(ce=E.map((e=>[e[re],hn(e[U])])).sort(((e,t)=>null!==e[0]&&null!==t[0]?t[0]-e[0]:0))),ce.length>0){if(le=ce[0][0],"raw"===M&&G&&q)if(null!==q[U]&&void 0!==q[U])ie=q[U];else{const e=Object.keys(q).filter((e=>e!==re&&null!==q[e]&&"number"==typeof q[e]));ie=e.length>0?q[e[0]]:null}else ie=function(e,t){if(!e.length)return null;const o=Object.keys(_n.j_).find((e=>e.toLowerCase()===(t||"").toLowerCase())),r=o?_n.j_[o]:_n.j_.LAST_VALUE,a=e.map((([,e])=>e)).filter((e=>null!==e));return r.compute(a)}(ce,M);null===ie&&(se=ce.find((e=>null!==e[1])),ie=se?se[1]:null,le=se?se[0]:null)}if(K>0&&ce.length>0){const e=K;if(e<ce.length){const t=ce[e][1],o=ce[0][1];null!==o&&null!==t&&(ne=t?(Number(o)-t)/Math.abs(t):0,X=`${Mn(ne)} ${x}`)}}if(E.length>0){const e=[...ce].reverse();ae=A?e:void 0}let de="";ne>0?de="positive":ne<0&&(de="negative");const ue=z.findIndex((e=>e===U)),me=ue>-1?j[ue]:null;let pe;null!=(a=e.datasource)&&a.metrics&&(pe=e.datasource.metrics.find((e=>e.metric_name===C)));const he=gn(_,N,null==(n=pe)?void 0:n.d3format),ge=(0,co.gC)(C,f,b,(null==(i=pe)?void 0:i.d3format)||R,B),fe=me===$e.s.Temporal||me===$e.s.String||O?he:ge;if(ae&&I&&V){const e=null!=$?$:Date.now();(!ae[0][0]||ae[0][0]>V)&&ae.unshift([V,null]),(!ae[ae.length-1][0]||ae[ae.length-1][0]<e)&&ae.push([e,null])}const be=ae?{series:[{data:ae,type:"line",smooth:!0,symbol:"circle",symbolSize:10,showSymbol:!1,color:oe,areaStyle:{color:new An.A(0,0,0,1,[{offset:0,color:oe},{offset:1,color:g.colorBgContainer}])}}],xAxis:{min:ae[0][0],max:ae[ae.length-1][0],show:!1,type:"value"},yAxis:{scale:!P,show:!1},grid:{left:0,right:0,top:0,bottom:0},tooltip:{...Fn(W),show:!h,trigger:"axis",formatter:e=>(0,Tn.L)([[U,null===e[0].data[1]?(0,s.t)("N/A"):fe.format(e[0].data[1])]],he(e[0].data[0]))},aria:{enabled:!0,label:{description:`Big number visualization ${L}`}}}:{},{onContextMenu:ye}=p;return{width:l,height:c,bigNumber:ie,bigNumberFallback:se,className:de,headerFormatter:fe,formatTime:he,formData:u,metricName:Q,showMetricName:J,metricNameFontSize:S,headerFontSize:w,subtitleFontSize:F,subtitle:k,subheaderFontSize:D,mainColor:oe,showTimestamp:T,showTrendLine:A,startYAxisAtZero:P,subheader:X,timestamp:le,trendLineData:ae,echartOptions:be,onContextMenu:ye,xValueFormatter:he,refs:W}}var Ln=o(32557),Dn=o(64076),On=o(54834),Rn=o(60919),Bn=o(72562);function In(e){const t="raw"===e.aggregation,o=(0,Cn.aj)(e)?(0,T.A)((0,Cn.Od)(e)):[];return(0,Et.A)(e,(r=>{const a=[{...r,columns:[...o],...o.length?{}:{is_timeseries:!0},post_processing:[(0,Ln.L)(e,r),(0,Dn.q)(e,r),(0,On.M)(e,r),(0,Rn.P)(e,r)].filter(Boolean)}];return"raw"===e.aggregation&&a.push({...r,columns:[...t?[]:o],is_timeseries:!t,post_processing:t?[]:[(0,Ln.L)(e,r),(0,Bn.D)(e,r)].filter(Boolean)}),a}))}const Nn=o.p+"Big_Number_Trendline.bccce4c1.jpg";var En=o(48667),zn=o(13280);const jn={category:(0,s.t)("KPI"),description:(0,s.t)("Showcases a single number accompanied by a simple line chart, to call attention to an important metric along with its change over time or other dimension."),exampleGallery:[{url:Nn}],name:(0,s.t)("Big Number with Trendline"),tags:[(0,s.t)("Advanced-Analytics"),(0,s.t)("ECharts"),(0,s.t)("Line"),(0,s.t)("Percentages"),(0,s.t)("Featured"),(0,s.t)("Report"),(0,s.t)("Trend")],thumbnail:En,behaviors:[Re.nS.DrillToDetail]};class Vn extends zn.Qh{constructor(){super({loadChart:()=>Promise.all([o.e(4735),o.e(9399)]).then(o.bind(o,59399)),metadata:jn,buildQuery:In,transformProps:Pn,controlPanel:wn})}}const $n={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["metric"],["adhoc_filters"]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[[Ea],[$a],[za],[Ya],[Ga],["y_axis_format"],["currency_format"],[{name:"time_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Date format"),renderTrigger:!0,choices:g.lR,description:g.YH,default:qe.f}}],[{name:"force_timestamp_formatting",config:{type:"CheckboxControl",label:(0,s.t)("Force date format"),renderTrigger:!0,default:!1,description:(0,s.t)("Use date formatting even when metric value is not a timestamp")}}],[{name:"conditional_formatting",config:{type:"ConditionalFormattingControl",renderTrigger:!0,label:(0,s.t)("Conditional Formatting"),description:(0,s.t)("Apply conditional color formatting to metric"),shouldMapStateToProps:()=>!0,mapStateToProps(e,t,o){var r,a,n,i,l,s;const c=null!=e&&null!=(r=e.datasource)&&r.hasOwnProperty("verbose_map")?null==e||null==(a=e.datasource)?void 0:a.verbose_map:null!=(n=null==e||null==(i=e.datasource)?void 0:i.columns)?n:{},{colnames:d,coltypes:u}=null!=(l=null==o||null==(s=o.queriesResponse)?void 0:s[0])?l:{};return{columnOptions:Array.isArray(d)&&Array.isArray(u)?d.filter(((e,t)=>u[t]===$e.s.Numeric)).map((e=>{var t;return{value:e,label:null!=(Array.isArray(c),t=c[e])?t:e}})):[],verboseMap:c}}}}]]}],controlOverrides:{y_axis_format:{label:(0,s.t)("Number format")}},formDataOverrides:e=>({...e,metric:(0,f.a)().shiftMetric()})};function Yn(e){var t,o,r,a,n,i,l;const{width:s,height:c,queriesData:d,formData:u,rawFormData:m,hooks:p,datasource:{currencyFormats:h={},columnFormats:g={}},theme:f}=e,{metricNameFontSize:b,headerFontSize:y,metric:v="value",subtitle:x,subtitleFontSize:_,forceTimestampFormatting:S,timeFormat:w,yAxisFormat:C,conditionalFormatting:T,currencyFormat:A,subheader:k,subheaderFontSize:F}=u,{data:M=[],coltypes:P=[]}=d[0]||{},L=(0,Ye.A)(m),D=(null==(t=e.datasource)?void 0:t.metrics)||[],O=fn(v,D),R=(0,Ge.A)(v),B=null!=(o=null==(r=e.rawFormData)?void 0:r.show_metric_name)&&o,I=null!=x&&x.trim()?x:k||"",N=null!=x&&x.trim()?null!=_?_:1:null!=F?F:1,E=0===M.length?null:hn(M[0][R]);let z;null!=(a=e.datasource)&&a.metrics&&(z=e.datasource.metrics.find((e=>e.metric_name===v)));const j=gn(w,L,null==(n=z)?void 0:n.d3format),V=(0,co.gC)(v,h,g,(null==(i=z)?void 0:i.d3format)||C,A),$=P[0]===$e.s.Temporal||P[0]===$e.s.String||S?j:V,{onContextMenu:Y}=p;return{width:s,height:c,bigNumber:E,headerFormatter:$,headerFontSize:y,subheaderFontSize:F,subtitleFontSize:N,subtitle:I,onContextMenu:Y,refs:{},colorThresholdFormatters:null!=(l=(0,Qe.Lj)(T,M,f,!1))?l:[],metricName:O,showMetricName:B,metricNameFontSize:b}}function Gn(e){return(0,Et.A)(e,(e=>[e]))}const qn=o.p+"BigNumber.b33901bf.jpg",Wn=o.p+"BigNumber2.3f1427c2.jpg";var Un=o(59312);const Hn={category:(0,s.t)("KPI"),description:(0,s.t)("Showcases a single metric front-and-center. Big number is best used to call attention to a KPI or the one thing you want your audience to focus on."),exampleGallery:[{url:qn,caption:(0,s.t)("A Big Number")},{url:Wn,caption:(0,s.t)("With a subheader")}],name:(0,s.t)("Big Number"),tags:[(0,s.t)("Additive"),(0,s.t)("Business"),(0,s.t)("ECharts"),(0,s.t)("Legacy"),(0,s.t)("Percentages"),(0,s.t)("Featured"),(0,s.t)("Report")],thumbnail:Un,behaviors:[Re.nS.DrillToDetail]};class Qn extends zn.Qh{constructor(){super({loadChart:()=>Promise.all([o.e(4735),o.e(9399)]).then(o.bind(o,59399)),metadata:Hn,buildQuery:Gn,transformProps:Yn,controlPanel:$n})}}var Jn=o(47599);function Kn(e){return(0,Et.A)(e,(t=>[{...t,columns:[...(0===(0,T.A)(e.columns).length&&e.granularity_sqla?[e.granularity_sqla]:(0,T.A)(e.columns)).map((t=>{var o;return(0,St.eh)(t)&&e.time_grain_sqla&&null!=e&&null!=(o=e.temporal_columns_lookup)&&o[t]?{timeGrain:e.time_grain_sqla,columnType:"BASE_AXIS",sqlExpression:t,label:t,expressionType:"SQL"}:t})),...(0,T.A)(e.groupby)],series_columns:e.groupby,post_processing:[(0,Jn.j)(e,t)]}]))}var Xn=o(81500);const Zn={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["columns"],[{name:"time_grain_sqla",config:{...H.A.time_grain_sqla,visibility:({controls:e})=>{var t;const o=Object.fromEntries((0,T.A)(null==e||null==(t=e.columns)?void 0:t.options).map((e=>[e.column_name,e.is_dttm])));return(0,T.A)(null==e?void 0:e.columns.value).map((e=>!!(0,St.q0)(e)||!!(0,St.eh)(e)&&!!o[e])).some(Boolean)}}},"temporal_columns_lookup"],["groupby"],["metrics"],["adhoc_filters"],["series_limit"],["series_limit_metric"],["row_limit"],[{name:"whiskerOptions",config:{clearable:!1,type:"SelectControl",freeForm:!0,label:(0,s.t)("Whisker/outlier options"),default:"Tukey",description:(0,s.t)("Determines how whiskers and outliers are calculated."),choices:[["Tukey",(0,s.t)("Tukey")],["Min/max (no outliers)",(0,s.t)("Min/max (no outliers)")],["2/98 percentiles",(0,s.t)("2/98 percentiles")],["5/95 percentiles",(0,s.t)("5/95 percentiles")],["9/91 percentiles",(0,s.t)("9/91 percentiles")],["10/90 percentiles",(0,s.t)("10/90 percentiles")]]}}]]},Pe.sections.titleControls,{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[{name:"x_ticks_layout",config:{type:"SelectControl",label:(0,s.t)("X Tick Layout"),choices:[["auto",(0,s.t)("auto")],["flat",(0,s.t)("flat")],["45","45"],["90","90"],["staggered",(0,s.t)("staggered")]],default:"auto",clearable:!1,renderTrigger:!0,description:(0,s.t)("The way the ticks are laid out on the X-axis")}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Number format"),renderTrigger:!0,default:"SMART_NUMBER",choices:g.Bb,description:`${g.YH} ${g.s1}`}}],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Date format"),renderTrigger:!0,choices:g.lR,default:"smart_date",description:g.YH}}]]}],controlOverrides:{groupby:{label:(0,s.t)("Dimensions"),description:(0,s.t)("Categories to group by on the x-axis.")},columns:{label:(0,s.t)("Distribute across"),multi:!0,description:(0,s.t)("Columns to calculate distribution across."),initialValue:(e,t)=>t&&(null==e||!e.value||Array.isArray(null==e?void 0:e.value)&&0===e.value.length)?[(0,Xn.W)(t.datasource).defaultTemporalColumn]:e.value,validators:[C.A]}},formDataOverrides:e=>{const t=(0,f.a)().controls.columns.filter((t=>!(0,T.A)(e.columns).includes(t)));return(0,f.a)().controls.columns=(0,f.a)().controls.columns.filter((e=>!t.includes(e))),{...e,metrics:(0,f.a)().popAllMetrics(),groupby:t}}},ei=Zn;var ti=o(13934);const oi=e=>"number"!=typeof e?parseInt(e,10)||0:e;var ri=o(34859),ai=o(54603),ni=o(65894),ii=o(31463);const li=new RegExp(`(.+)(${zn.OW.ForecastLower}|${zn.OW.ForecastTrend}|${zn.OW.ForecastUpper})$`),si=e=>{const t=e,o=li.exec(t);return o?{name:o[1],type:o[2]}:{name:t,type:zn.OW.Observation}},ci=(e,t=!1)=>{const o={};return e.forEach((e=>{const{marker:r,seriesId:a,value:n}=e,i=si(a),l=t?n[0]:n[1];if("number"==typeof l){i.name in o||(o[i.name]={marker:r||""});const e=o[i.name];i.type===zn.OW.Observation&&(e.observation=l),i.type===zn.OW.ForecastTrend&&(e.forecastTrend=l),i.type===zn.OW.ForecastLower&&(e.forecastLower=l),i.type===zn.OW.ForecastUpper&&(e.forecastUpper=l)}})),o},di=({seriesName:e,observation:t,forecastTrend:o,forecastLower:r,forecastUpper:a,marker:n,formatter:i})=>{const l=`${n}${(0,ti.pn)(e)}`;let s="number"==typeof t?i(t):"";return(o||r||a)&&(o&&(s&&(s+=", "),s+=` = ${i(o)}`),r&&a&&(s&&(s+=" "),s+=`(${i(r)}, ${i(r+a)})`)),[l,s]};function ui(e,t={}){const o=e.length?Object.keys(e[0]):[];return e.map((e=>{const r={};return o.forEach((a=>{const n=si(a),i=a!==ii.Tf&&t[n.name]?`${t[n.name]}${n.type}`:a,l=`${n.name}${zn.OW.ForecastLower}`;let s=e[a];n.type===zn.OW.ForecastUpper&&o.includes(l)&&null!==s&&null!==e[l]&&(s-=e[l]),r[i]=s})),r}))}function mi(e){const t={[zn.OW.ForecastLower]:1,[zn.OW.ForecastUpper]:2,[zn.OW.ForecastTrend]:3,[zn.OW.Observation]:4};return e.some((e=>e.id&&t.hasOwnProperty(si(e.id).type)))?e.sort(((e,o)=>{var r,a,n,i;return(null!=(r=t[si(null!=(a=e.id)?a:"").type])?r:Number.MAX_SAFE_INTEGER)-(null!=(n=t[si(null!=(i=o.id)?i:"").type])?n:Number.MAX_SAFE_INTEGER)})):e}var pi=o(91407),hi=o(77709);function gi(e,t,o,r){const{value:a}=e;return t.map((e=>{let t=e[o];return r===Re.Gw.Time&&(t=new Date(t).getTime()),[t,(0,hi.p)(a,t||0)]}))}function fi(e){switch(e){case ni.h4.Low:return.2;case ni.h4.Medium:return.5;case ni.h4.High:return.8;default:return 1}}const bi={descriptionColumns:["long_descr"],intervalEndColumn:"end_dttm",timeColumn:"start_dttm",titleColumn:"short_descr"};function yi(e,t){const{name:o}=e,r=t[o],a=(null==r?void 0:r.records)||[],{descriptionColumns:n=[],intervalEndColumn:i="",timeColumn:l="",titleColumn:s=""}=(0,ni.n2)(e)?e:bi;return a.map((e=>({descriptions:n.map((t=>e[t]||"")),intervalEnd:e[i]||"",time:e[l]||"",title:e[s]||""})))}function vi(e,t,o=[]){const r=[],a=[],n=o.filter((e=>!!e));return e&&a.push(e),t&&a.push(t),a.length>0&&r.push(a.join(" - ")),n.length>0&&r.push(n.join("\n")),r.join("\n\n")}function xi(e){const t=e.filter((e=>e.annotationType===ni.UJ.Formula&&e.show)).map((e=>e.name)),o=e.filter((e=>e.annotationType===ni.UJ.Timeseries&&e.show)).map((e=>e.name));return t.concat(o)}function _i(e){var t;const o=null==e||null==(t=e.queriesData[0])?void 0:t.annotation_data;return Ee()(o)?{}:o}function Si(e,t){return e.data.map((e=>{const[o,r]=Array.isArray(e)?e:[null,null];return(t?o:r)<0?{value:e,label:{position:"outside"}}:e}))}function wi(e,t,o,r){var a;const{name:n,data:i}=e,{area:l,connectNulls:s,filterState:c,seriesContexts:d={},markerEnabled:u,markerSize:m,areaOpacity:p=1,seriesType:h,stack:g,stackIdSuffix:f,yAxisIndex:b=0,showValue:y,onlyTotal:v,formatter:x,legendState:_,totalStackedValues:S=[],showValueIndexes:w=[],thresholdValues:C=[],richTooltip:T,seriesKey:A,sliceId:k,isHorizontal:F=!1,queryIndex:M=0,timeCompare:P=[],timeShiftColor:L,theme:D}=r,O=d[n||""]||[],R=O.includes(zn.OW.ForecastTrend)||O.includes(zn.OW.ForecastLower)||O.includes(zn.OW.ForecastUpper),B=si(n||""),I=B.type===zn.OW.ForecastLower||B.type===zn.OW.ForecastUpper,N=!(null==c?void 0:c.selectedValues)||null!=c&&c.selectedValues.includes(n)?(null==(a=r.lineStyle)?void 0:a.opacity)||kn.hD.NonTransparent:kn.hD.SemiTransparent;if((g||l)&&I)return;const E=B.type===zn.OW.Observation,z=B.type===zn.OW.ForecastTrend;let j,V;I?j=B.name:g&&E?j=(0,ti._$)("obs",P,n):g&&z&&(j=(0,ti._$)(B.type,P,n)),j&&f&&(j+=f),V=!I&&("scatter"===h||R&&E)?"scatter":I?"line":"bar"===h?"bar":"line";const $=!!D&&(0,ai.Mw)(D),Y={color:t(L?o:A||B.name,k),opacity:N,borderWidth:0};"bar"===h&&s&&(Y.borderWidth=1.5,Y.borderType="dotted",Y.borderColor=Y.color);let G={},q=!1;I||("scatter"===V||R&&E||"line"===V&&y?q=!0:"line"!==V||T||u?u&&(q=!0):(q=!0,Y.opacity=0,G={itemStyle:{opacity:1}}));const W=I||g===kn.ad.Stream&&l?{...r.lineStyle,opacity:kn.hD.Transparent}:{...r.lineStyle,opacity:N},U="line"===V?$?"circle":"emptyCircle":void 0;return{...e,...Array.isArray(i)&&"bar"===h&&!g?{data:Si(e,F)}:null,connectNulls:s,queryIndex:M,yAxisIndex:b,name:B.name,itemStyle:Y,type:V,smooth:"smooth"===h,triggerLineEvent:!0,step:["start","middle","end"].includes(h)?h:void 0,stack:j,stackStrategy:I||g===kn.ad.Stream?"all":"samesign",lineStyle:W,areaStyle:l||B.type===zn.OW.ForecastUpper?{opacity:N*p}:void 0,emphasis:G,showSymbol:q,symbol:U,symbolSize:m,label:{show:!!y,position:F?"right":"top",color:null==D?void 0:D.colorText,textBorderWidth:0,formatter:e=>{if([zn.OW.ForecastUpper,zn.OW.ForecastLower].includes(B.type))return"";const{value:t,dataIndex:o,seriesIndex:r,seriesName:a}=e,n=F?t[0]:t[1],i=!_||_[a],l=g===kn.ad.Expand;return x?!g&&i?x(n):v?r===w[o]?x(l?1:S[o]):"":n>=(C[o]||Number.MIN_SAFE_INTEGER)?x(n):"":n}}}}function Ci(e,t,o,r,a,n,i){const{name:l,color:s,opacity:c,width:d,style:u}=e,m=i===pi.l.Horizontal;return{name:l,id:l,itemStyle:{color:s||a(l,n)},lineStyle:{opacity:fi(c),type:u,width:d},type:"line",smooth:!0,data:gi(e,t,o,r).map((([e,t])=>m?[t,e]:[e,t])),symbolSize:0}}function Ti(e,t,o,r,a,n,i){const l=[];return yi(e,o).forEach((t=>{const{name:o,color:s,opacity:c,showLabel:d}=e,{descriptions:u,intervalEnd:m,time:p,title:h}=t,g=vi(o,h,u),f=i===pi.l.Horizontal,b=[[{name:g,...f?{yAxis:p}:{xAxis:p}},f?{yAxis:m}:{xAxis:m}]],y=d?{show:!0,color:a.colorTextLabel,position:"insideTop",verticalAlign:"top",fontWeight:"bold",emphasis:{position:"insideTop",verticalAlign:"top",backgroundColor:a.colorPrimaryBgHover}}:{show:!1,color:a.colorTextLabel,emphasis:{fontWeight:"bold",show:!0,position:"insideTop",verticalAlign:"top",backgroundColor:a.colorPrimaryBgHover}};l.push({id:`Interval - ${g}`,type:"line",animation:!1,markArea:{silent:!1,itemStyle:{color:s||r(o,n),opacity:fi(c||ni.h4.Medium),emphasis:{opacity:.8}},label:y,data:b}})})),l}function Ai(e,t,o,r,a,n,i){const l=[];return yi(e,o).forEach((t=>{const{name:o,color:s,opacity:c,style:d,width:u,showLabel:m}=e,{descriptions:p,time:h,title:g}=t,f=vi(o,g,p),b=[{name:f,...i===pi.l.Horizontal?{yAxis:h}:{xAxis:h}}],y={width:u,type:d,color:s||r(o,n),opacity:fi(c),emphasis:{width:u?u+1:u,opacity:1}},v=m?{show:!0,color:a.colorTextLabel,position:"insideEndTop",fontWeight:"bold",formatter:e=>e.name,emphasis:{backgroundColor:a.colorPrimaryBgHover}}:{show:!1,color:a.colorTextLabel,position:"insideEndTop",emphasis:{formatter:e=>e.name,fontWeight:"bold",show:!0,backgroundColor:a.colorPrimaryBgHover}};l.push({id:`Event - ${f}`,type:"line",animation:!1,markLine:{silent:!1,symbol:"none",lineStyle:y,label:v,data:b}})})),l}function ki(e,t,o,r,a,n,i){const l=[],{hideLine:s,name:c,opacity:d,showMarkers:u,style:m,width:p,color:h}=e,g=r[c],f=i===pi.l.Horizontal,{records:b}=g;if(b){const e=b.map((e=>{const t=Object.keys(e),o=t.length>0?e[t[0]]:0,r=t.length>1?e[t[1]]:0;return f?[r,o]:[o,r]})),o={opacity:fi(d),type:m,width:s?0:p,color:h||a(c,n)};l.push({type:"line",id:c,name:c,data:e,symbolSize:u?t:0,itemStyle:o,lineStyle:o})}return l}function Fi(e,t,o,r,a,n,i,l,s,c){const d=o?kn.TM.yAxisLabelTopOffset:0,u=n&&Number(s)||0;return(0,ti.yX)(e,t,a,{top:i&&"Top"===i?kn.TM.gridOffsetTop+(Number(l)||0):kn.TM.gridOffsetTop+d,bottom:r&&!c?kn.TM.gridOffsetBottomZoomable+u:kn.TM.gridOffsetBottom+u,left:"Left"===i?kn.TM.gridOffsetLeft+(Number(l)||0):kn.TM.gridOffsetLeft,right:e&&t===zn.go.Right?0:kn.TM.gridOffsetRight},c)}function Mi(e){const{width:t,height:o,formData:r,hooks:a,filterState:n,queriesData:i,inContextMenu:l,emitCrossFilters:s}=e,{data:c=[]}=i[0],{setDataMask:m=()=>{},onContextMenu:p}=a,h=(0,ti.oi)(i[0]),{colorScheme:g,groupby:f=[],metrics:b=[],numberFormat:y,dateFormat:v,xTicksLayout:x,legendOrientation:_="top",xAxisTitle:S,yAxisTitle:w,xAxisTitleMargin:C,yAxisTitleMargin:T,yAxisTitlePosition:A,sliceId:k}=r,F={},M=no.getScale(g),P=(0,d.gV)(y),L=b.map(Ge.A),D=f.map(Wt.A),O=c.map((e=>{const t=(0,ti.YC)({datum:e,groupby:D,coltypeMapping:h,timeFormatter:(0,u.mo)(v)});return L.map((o=>{const r=1===L.length?t:`${t}, ${o}`,a=n.selectedValues&&!n.selectedValues.includes(r);return{name:r,value:[e[`${o}__min`],e[`${o}__q1`],e[`${o}__median`],e[`${o}__q3`],e[`${o}__max`],e[`${o}__mean`],e[`${o}__count`],e[`${o}__outliers`]],itemStyle:{color:M(t,k),opacity:a?kn.hD.SemiTransparent:.6,borderColor:M(t,k)}}}))})).flatMap((e=>e)),R=c.map((e=>L.map((t=>{const o=(0,ti.YC)({datum:e,groupby:D,coltypeMapping:h,timeFormatter:(0,u.mo)(v)}),r=1===L.length?o:`${o}, ${t}`,a=e[`${t}__outliers`]||[],i=n.selectedValues&&!n.selectedValues.includes(r);return{name:"outlier",type:"scatter",data:a.map((e=>[r,e])),tooltip:{...Fn(F),formatter:e=>{const[t,o]=e.data;return`${D.length?`<p><strong>${(0,ti.pn)(t)}</strong></p>`:""}${P(o)}`}},itemStyle:{color:M(o,k),opacity:i?kn.hD.SemiTransparent:kn.hD.NonTransparent}}})))).flat(2),B=c.reduce(((e,t)=>{const o=(0,ti.YC)({datum:t,groupby:D,coltypeMapping:h,timeFormatter:(0,u.mo)(v)});return{...e,[o]:D.map((e=>t[e]))}}),{}),I=(n.selectedValues||[]).reduce(((e,t)=>{const o=O.findIndex((({name:e})=>e===t));return{...e,[o]:t}}),{});let N;N="45"===x?{rotate:-45}:"90"===x?{rotate:-90}:"flat"===x?{rotate:0}:"staggered"===x?{rotate:-45}:{show:!0};const E=[{name:"boxplot",type:"boxplot",data:O,tooltip:{...Fn(F),formatter:e=>{const{value:t,name:o}=e,r=o?`<p><strong>${(0,ti.pn)(o)}</strong></p>`:"",a=[`Max: ${P(t[5])}`,`3rd Quartile: ${P(t[4])}`,`Mean: ${P(t[6])}`,`Median: ${P(t[3])}`,`1st Quartile: ${P(t[2])}`,`Min: ${P(t[1])}`,`# Observations: ${t[7]}`];return t[8].length>0&&a.push(`# Outliers: ${t[8].length}`),r+a.join("<br/>")}}},...R],z=Fi(!0,_,!!w,!1,null,!!S,A,oi(T),oi(C));return{formData:r,width:t,height:o,echartOptions:{grid:{...ri.Ox,...z},xAxis:{type:"category",data:O.map((e=>e.name)),axisLabel:N,name:S,nameGap:oi(C),nameLocation:"middle"},yAxis:{...ri.SG,type:"value",axisLabel:{formatter:P},name:w,nameGap:oi(T),nameLocation:"Left"===A?"middle":"end"},tooltip:{...Fn(F),show:!l,trigger:"item",axisPointer:{type:"shadow"}},series:E},setDataMask:m,emitCrossFilters:s,labelMap:B,groupby:f,selectedValues:I,onContextMenu:p,refs:F,coltypeMapping:h}}const Pi=o.p+"BoxPlot.1833526f.jpg";var Li,Di=o(19625);class Oi extends zn.Qh{constructor(){super({buildQuery:Kn,controlPanel:ei,loadChart:()=>Promise.all([o.e(4735),o.e(4018)]).then(o.bind(o,94018)),metadata:{behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],category:(0,s.t)("Distribution"),credits:["https://echarts.apache.org"],description:(0,s.t)("Also known as a box and whisker plot, this visualization compares the distributions of a related metric across multiple groups. The box in the middle emphasizes the mean, median, and inner 2 quartiles. The whiskers around each box visualize the min, max, range, and outer 2 quartiles."),exampleGallery:[{url:Pi}],name:(0,s.t)("Box Plot"),tags:[(0,s.t)("ECharts"),(0,s.t)("Range"),(0,s.t)("Statistical"),(0,s.t)("Featured")],thumbnail:Di},transformProps:Mi})}}function Ri(e){const{metric:t,sort_by_metric:o}=e;return(0,Et.A)(e,(e=>[{...e,...o&&{orderby:[[t,!1]]}}]))}!function(e){e[e.Key=0]="Key",e[e.Value=1]="Value",e[e.Percent=2]="Percent",e[e.KeyValue=3]="KeyValue",e[e.KeyPercent=4]="KeyPercent",e[e.KeyValuePercent=5]="KeyValuePercent",e[e.ValuePercent=6]="ValuePercent"}(Li||(Li={}));const Bi={...kn.I,groupby:[],labelLine:!1,labelType:Li.Key,defaultTooltipLabel:Li.KeyValuePercent,legendOrientation:zn.go.Top,legendType:zn.a_.Scroll,numberFormat:"SMART_NUMBER",showLabels:!0,sort:"descending",orient:"vertical",gap:0};var Ii;!function(e){e.Total="total",e.PreviousStep="prev_step",e.FirstStep="first_step"}(Ii||(Ii={}));const Ni={legendMargin:null,legendOrientation:zn.go.Top,legendType:zn.a_.Scroll,showLegend:!0,xAxisTitle:"",xAxisTitleMargin:0,yAxisTitle:"",yAxisTitleMargin:0,yAxisTitlePosition:"Top",...yt.Kd,annotationLayers:Pe.sections.annotationLayers,area:!1,forecastEnabled:Pe.sections.FORECAST_DEFAULT_DATA.forecastEnabled,forecastInterval:Pe.sections.FORECAST_DEFAULT_DATA.forecastInterval,forecastPeriods:Pe.sections.FORECAST_DEFAULT_DATA.forecastPeriods,forecastSeasonalityDaily:Pe.sections.FORECAST_DEFAULT_DATA.forecastSeasonalityDaily,forecastSeasonalityWeekly:Pe.sections.FORECAST_DEFAULT_DATA.forecastSeasonalityWeekly,forecastSeasonalityYearly:Pe.sections.FORECAST_DEFAULT_DATA.forecastSeasonalityYearly,logAxis:!1,markerEnabled:!1,markerSize:6,minorSplitLine:!1,opacity:.2,orderDesc:!0,rowLimit:1e4,seriesType:pi.y.Line,stack:!1,tooltipTimeFormat:"smart_date",xAxisTimeFormat:"smart_date",truncateXAxis:!0,truncateYAxis:!1,yAxisBounds:[null,null],zoomable:!1,richTooltip:!0,xAxisForceCategorical:!1,xAxisLabelRotation:ri.fG.xAxisLabelRotation,xAxisLabelInterval:ri.fG.xAxisLabelInterval,groupby:[],showValue:!1,onlyTotal:!1,percentageThreshold:0,orientation:pi.l.Vertical,sort_series_type:"sum",sort_series_ascending:!1},Ei=(0,s.t)("When using other than adaptive formatting, labels may overlap"),{legendMargin:zi,legendOrientation:ji,legendType:Vi,showLegend:$i}=kn.I,Yi={name:"show_legend",config:{type:"CheckboxControl",label:(0,s.t)("Show legend"),renderTrigger:!0,default:$i,description:(0,s.t)("Whether to display a legend for the chart")}},Gi={name:"legendMargin",config:{type:"TextControl",label:(0,s.t)("Margin"),renderTrigger:!0,isInt:!0,default:zi,description:(0,s.t)("Additional padding for legend."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.show_legend)?void 0:t.value)}}},qi={name:"legendType",config:{type:"SelectControl",freeForm:!1,label:(0,s.t)("Type"),choices:[["scroll",(0,s.t)("Scroll")],["plain",(0,s.t)("List")]],default:Vi,renderTrigger:!0,description:(0,s.t)("Legend type"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.show_legend)?void 0:t.value)}}},Wi={name:"legendOrientation",config:{type:"SelectControl",freeForm:!1,label:(0,s.t)("Orientation"),choices:[["top",(0,s.t)("Top")],["bottom",(0,s.t)("Bottom")],["left",(0,s.t)("Left")],["right",(0,s.t)("Right")]],default:ji,renderTrigger:!0,description:(0,s.t)("Legend Orientation"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.show_legend)?void 0:t.value)}}},Ui=[[(0,fe.Y)(be.y,{children:(0,s.t)("Legend")})],[Yi],[qi],[Wi],[Gi]],Hi={name:"show_value",config:{type:"CheckboxControl",label:(0,s.t)("Show Value"),default:!1,renderTrigger:!0,description:(0,s.t)("Show series values on the chart")}},Qi={name:"stack",config:{type:"SelectControl",label:(0,s.t)("Stacked Style"),renderTrigger:!0,choices:kn.ww,default:null,description:(0,s.t)("Stack series on top of each other")}},Ji={name:"only_total",config:{type:"CheckboxControl",label:(0,s.t)("Only Total"),default:!0,renderTrigger:!0,description:(0,s.t)("Only show the total value on the stacked chart, and not show on the selected category"),visibility:({controls:e})=>{var t,o;return Boolean(null==e||null==(t=e.show_value)?void 0:t.value)&&Boolean(null==e||null==(o=e.stack)?void 0:o.value)}}},Ki={name:"percentage_threshold",config:{type:"TextControl",label:(0,s.t)("Percentage threshold"),renderTrigger:!0,isFloat:!0,default:Ni.percentageThreshold,description:(0,s.t)("Minimum threshold in percentage points for showing labels."),visibility:({controls:e})=>{var t,o,r;return Boolean(null==e||null==(t=e.show_value)?void 0:t.value)&&Boolean(null==e||null==(o=e.stack)?void 0:o.value)&&Boolean(!(null!=e&&null!=(r=e.only_total)&&r.value))}}},Xi=[[Hi],[Qi],[Ji],[Ki]],Zi=[[Hi],[Ji]],el={name:"rich_tooltip",config:{type:"CheckboxControl",label:(0,s.t)("Rich tooltip"),renderTrigger:!0,default:!0,description:(0,s.t)("Shows a list of all series available at that point in time")}},tl={name:"tooltipTimeFormat",config:{...H.A.x_axis_time_format,label:(0,s.t)("Tooltip time format"),default:"smart_date",clearable:!1}},ol={name:"tooltipValuesFormat",config:{...H.A.y_axis_format,label:(0,s.t)("Number format"),clearable:!1}},rl={name:"tooltipSortByMetric",config:{type:"CheckboxControl",label:(0,s.t)("Tooltip sort by metric"),renderTrigger:!0,default:!1,description:(0,s.t)("Whether to sort tooltip by the selected metric in descending order."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.rich_tooltip)?void 0:t.value)}}},al={name:"showTooltipTotal",config:{type:"CheckboxControl",label:(0,s.t)("Show total"),renderTrigger:!0,default:!0,description:(0,s.t)("Whether to display the total value in the tooltip"),visibility:({controls:e,form_data:t})=>{var o;return Boolean(null==e||null==(o=e.rich_tooltip)?void 0:o.value)&&t.viz_type!==i.Y.MixedTimeseries}}},nl={name:"showTooltipPercentage",config:{type:"CheckboxControl",label:(0,s.t)("Show percentage"),renderTrigger:!0,default:!1,description:(0,s.t)("Whether to display the percentage value in the tooltip"),visibility:({controls:e,form_data:t})=>{var o,r;return Boolean(null==e||null==(o=e.rich_tooltip)?void 0:o.value)&&!(null!=e&&null!=(r=e.contributionMode)&&r.value)&&t.viz_type!==i.Y.MixedTimeseries}}},il=[[(0,fe.Y)(be.y,{children:(0,s.t)("Tooltip")})],[el],[al],[nl],[rl],[tl]],ll={name:"sort_series_type",config:{type:"SelectControl",freeForm:!1,label:(0,s.t)("Sort Series By"),choices:yt.Ow,default:yt.Kd.sort_series_type,renderTrigger:!0,description:(0,s.t)("Based on what should series be ordered on the chart and legend")}},sl={name:"sort_series_ascending",config:{type:"CheckboxControl",label:(0,s.t)("Sort Series Ascending"),default:yt.Kd.sort_series_ascending,renderTrigger:!0,description:(0,s.t)("Sort series in ascending order")}},cl={name:"xAxisLabelRotation",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,s.t)("Rotate x axis label"),choices:[[0,"0"],[45,"45"],[90,"90"]],default:ri.fG.xAxisLabelRotation,renderTrigger:!0,description:(0,s.t)("Input field supports custom rotation. e.g. 30 for 30")}},dl={name:"xAxisLabelInterval",config:{type:"SelectControl",freeForm:!1,clearable:!1,label:(0,s.t)("X Axis Label Interval"),choices:[["auto",(0,s.t)("Auto")],["0",(0,s.t)("All")]],default:ri.fG.xAxisLabelInterval,renderTrigger:!0,description:(0,s.t)("Choose how many X-Axis labels to show")}},ul=[[(0,fe.Y)(be.y,{children:(0,s.t)("Series Order")})],[ll],[sl]],ml={name:"truncateXAxis",config:{type:"CheckboxControl",label:(0,s.t)("Truncate X Axis"),default:Ni.truncateXAxis,renderTrigger:!0,description:(0,s.t)("Truncate X Axis. Can be overridden by specifying a min or max bound. Only applicable for numerical X axis.")}},pl={name:"xAxisBounds",config:{type:"BoundsControl",label:(0,s.t)("X Axis Bounds"),renderTrigger:!0,default:Ni.xAxisBounds,description:(0,s.t)("Bounds for numerical X axis. Not applicable for temporal or categorical axes. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.truncateXAxis)?void 0:t.value)}}},hl={name:"minorTicks",config:{type:"CheckboxControl",label:(0,s.t)("Minor ticks"),default:!1,renderTrigger:!0,description:(0,s.t)("Show minor ticks on axes.")}},gl=((0,s.t)("Force categorical"),(0,s.t)("Make the x-axis categorical"),{name:"show_extra_controls",config:{type:"CheckboxControl",label:(0,s.t)("Extra Controls"),renderTrigger:!0,default:!1}}),{labelType:fl,numberFormat:bl,showLabels:yl,defaultTooltipLabel:vl}=Bi,xl=[...Ui];xl.splice(2,1);const _l={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["groupby"],["metric"],["adhoc_filters"],[{name:"row_limit",config:{...H.A.row_limit,default:10}}],[{name:"sort_by_metric",config:{...H.A.sort_by_metric,default:!0}}],[{name:"percent_calculation_type",config:{type:"SelectControl",label:(0,s.t)("% calculation"),description:(0,s.t)("Display percents in the label and tooltip as the percent of the total value, from the first step of the funnel, or from the previous step in the funnel."),choices:[[Ii.FirstStep,(0,s.t)("Calculate from first step")],[Ii.PreviousStep,(0,s.t)("Calculate from previous step")],[Ii.Total,(0,s.t)("Percent of total")]],default:Ii.FirstStep,renderTrigger:!0}}]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],...xl,[(0,fe.Y)(be.y,{children:(0,s.t)("Labels")})],[{name:"label_type",config:{type:"SelectControl",label:(0,s.t)("Label Contents"),default:fl,renderTrigger:!0,choices:[[Li.Key,(0,s.t)("Category Name")],[Li.Value,(0,s.t)("Value")],[Li.Percent,(0,s.t)("Percentage")],[Li.KeyValue,(0,s.t)("Category and Value")],[Li.KeyPercent,(0,s.t)("Category and Percentage")],[Li.KeyValuePercent,(0,s.t)("Category, Value and Percentage")],[Li.ValuePercent,(0,s.t)("Value and Percentage")]],description:(0,s.t)("What should be shown as the label")}}],[{name:"tooltip_label_type",config:{type:"SelectControl",label:(0,s.t)("Tooltip Contents"),default:vl,renderTrigger:!0,choices:[[Li.Key,(0,s.t)("Category Name")],[Li.Value,(0,s.t)("Value")],[Li.Percent,(0,s.t)("Percentage")],[Li.KeyValue,(0,s.t)("Category and Value")],[Li.KeyPercent,(0,s.t)("Category and Percentage")],[Li.KeyValuePercent,(0,s.t)("Category, Value and Percentage")]],description:(0,s.t)("What should be shown as the tooltip label")}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Number format"),renderTrigger:!0,default:bl,choices:g.Bb,description:`${g.YH} ${g.s1}`}}],["currency_format"],[{name:"show_labels",config:{type:"CheckboxControl",label:(0,s.t)("Show Labels"),renderTrigger:!0,default:yl,description:(0,s.t)("Whether to display the labels.")}}],[{name:"show_tooltip_labels",config:{type:"CheckboxControl",label:(0,s.t)("Show Tooltip Labels"),renderTrigger:!0,default:yl,description:(0,s.t)("Whether to display the tooltip labels.")}}]]}],formDataOverrides:e=>({...e,metric:(0,f.a)().shiftMetric(),groupby:(0,f.a)().popAllColumns()})},Sl=(0,d.gV)(je.A.PERCENT_2_POINT);function wl({params:e,numberFormatter:t,percentCalculationType:o=Ii.FirstStep,sanitizeName:r=!1}){const{name:a="",value:n,percent:i,data:l}=e,s=r?(0,ti.pn)(a):a,c=t(n),{firstStepPercent:d,prevStepPercent:u}=l;let m;return m=o===Ii.Total?(null!=i?i:0)/100:o===Ii.PreviousStep?null!=u?u:0:null!=d?d:0,[s,c,Sl(m)]}function Cl(e){const{formData:t,height:o,hooks:r,filterState:a,queriesData:n,width:l,theme:s,emitCrossFilters:c,datasource:d}=e,u=n[0].data||[],m=(0,ti.oi)(n[0]),{colorScheme:p,groupby:h,orient:g,sort:f,gap:b,labelLine:y,labelType:v,tooltipLabelType:x,legendMargin:_,legendOrientation:S,legendType:w,metric:C="",numberFormat:T,currencyFormat:A,showLabels:k,inContextMenu:F,showTooltipLabels:M,showLegend:P,sliceId:L,percentCalculationType:D}={...kn.I,...Bi,...t},{currencyFormats:O={},columnFormats:R={}}=d,B={},I=(0,Ge.A)(C),N=h.map(Wt.A),E=u.map((e=>(0,ti.YC)({datum:e,groupby:N,coltypeMapping:{}}))),z=u.reduce(((e,t)=>{const o=(0,ti.YC)({datum:t,groupby:N,coltypeMapping:{}});return{...e,[o]:N.map((e=>t[e]))}}),{}),{setDataMask:j=()=>{},onContextMenu:V}=r,$=no.getScale(p),Y=(0,co.gC)(C,O,R,T,A),G=u.map(((e,t)=>{const o=(0,ti.YC)({datum:e,groupby:N,coltypeMapping:{}}),r=e[I],n=a.selectedValues&&!a.selectedValues.includes(o),i=r/u[0][I],l=0===t?1:r/u[t-1][I];return{value:r,name:o,itemStyle:{color:$(o,L),opacity:n?kn.hD.SemiTransparent:kn.hD.NonTransparent},firstStepPercent:i,prevStepPercent:l}})),q=(a.selectedValues||[]).reduce(((e,t)=>{const o=G.findIndex((({name:e})=>e===t));return{...e,[o]:t}}),{}),W={formatter:e=>{const[t,o,r]=wl({params:e,numberFormatter:Y,percentCalculationType:D});switch(v){case Li.Key:return t;case Li.Value:return o;case Li.Percent:return r;case Li.KeyValue:return`${t}: ${o}`;case Li.KeyValuePercent:return`${t}: ${o} (${r})`;case Li.KeyPercent:return`${t}: ${r}`;case Li.ValuePercent:return`${o} (${r})`;default:return t}},show:k,color:s.colorText,textBorderColor:s.colorBgBase,textBorderWidth:1},U=[{type:i.Y.Funnel,...(0,ti.yX)(P,S,_),animation:!0,minSize:"0%",maxSize:"100%",sort:f,orient:g,gap:b,funnelAlign:"center",labelLine:{show:!!y},label:{...W,position:y?"outer":"inner"},emphasis:{label:{show:!0,fontWeight:"bold"}},data:G}];return{formData:t,width:l,height:o,echartOptions:{grid:{...ri.Ox},tooltip:{...Fn(B),show:!F&&M,trigger:"item",formatter:e=>{const[t,o,r]=wl({params:e,numberFormatter:Y,percentCalculationType:D}),a=[],n=Li[x],i=n.includes("Key")?t:void 0;return(n.includes("Value")||n.includes("Percent"))&&a.push(I),n.includes("Value")&&a.push(o),n.includes("Percent")&&a.push(r),(0,Tn.L)([a],i)}},legend:{...(0,ti.g1)(w,S,P,s),data:E},series:U},setDataMask:j,emitCrossFilters:c,labelMap:z,groupby:h,selectedValues:q,onContextMenu:V,refs:B,coltypeMapping:m}}var Tl=o(80320);const Al=o.p+"example.6f0d126b.jpg";class kl extends zn.Qh{constructor(){super({buildQuery:Ri,controlPanel:_l,loadChart:()=>Promise.all([o.e(4735),o.e(5960)]).then(o.bind(o,25960)),metadata:{behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],category:(0,s.t)("KPI"),credits:["https://echarts.apache.org"],description:(0,s.t)("Showcases how a metric changes as the funnel progresses. This classic chart is useful for visualizing drop-off between stages in a pipeline or lifecycle."),exampleGallery:[{url:Al}],name:(0,s.t)("Funnel Chart"),tags:[(0,s.t)("Business"),(0,s.t)("ECharts"),(0,s.t)("Progressive"),(0,s.t)("Report"),(0,s.t)("Sequential"),(0,s.t)("Trend"),(0,s.t)("Featured")],thumbnail:Tl},transformProps:Cl})}}function Fl(e){const{metric:t,sort_by_metric:o,source:r,target:a}=e,n=[r,a];return(0,Et.A)(e,(e=>[{...e,groupby:n,...o&&{orderby:[[t,!1]]}}]))}var Ml=o(33842);const Pl={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[{name:"source",config:{...Ml.Eg,label:(0,s.t)("Source"),multi:!1,description:(0,s.t)("The column to be used as the source of the edge."),validators:[C.A],freeForm:!1}}],[{name:"target",config:{...Ml.Eg,label:(0,s.t)("Target"),multi:!1,description:(0,s.t)("The column to be used as the target of the edge."),validators:[C.A],freeForm:!1}}],["metric"],["adhoc_filters"],["row_limit"],["sort_by_metric"]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"]]}]};var Ll=o(87948);const Dl=e=>(0,d.gV)(e&&e!==je.A.SMART_NUMBER?e:je.A.PERCENT),Ol=(e,t,o,r,a)=>{if(t)return Dl(a);const n=(0,T.A)(e);return n.every(pn.S_)&&n.map((e=>o[e])).every(((e,t,o)=>{var r,a;return e instanceof We.A&&(null==e||null==(r=e.currency)?void 0:r.symbol)===(null==(a=o[0])||null==(a=a.currency)?void 0:a.symbol)}))?o[n[0]]:null!=r?r:(0,d.gV)()};function Rl(e){return e===qe.f?(0,u.mo)(Ll.M):e?(0,u.mo)(e):String}function Bl(e){if(e!==qe.f&&e)return e?(0,u.mo)(e):String}function Il(e){const t={},{formData:o,height:r,hooks:a,queriesData:n,width:i,theme:l}=e,{onLegendStateChanged:s}=a,{colorScheme:c,metric:u,source:m,target:p,sliceId:h}=o,{data:g}=n[0],f=no.getScale(c),b=(0,Ge.A)(u),y=(0,d.gV)(je.A.FLOAT_2_POINT),v=Dl(je.A.PERCENT_2_POINT),x=[],_=new Set;g.forEach((e=>{const t=String(e[(0,Wt.A)(m)]),o=String(e[(0,Wt.A)(p)]),r=e[b];_.add(t),_.add(o),x.push({source:t,target:o,value:r})}));const S=Array.from(_).map((e=>({name:e,itemStyle:{color:f(e,h)},label:{color:l.colorText,textShadow:l.colorBgBase}}))),w=new Map,C=new Map,T=new Set;x.forEach((e=>{const{source:t,target:o,value:r}=e;T.add(t),T.add(o),w.set(o,(w.get(o)||0)+r),C.set(t,(C.get(t)||0)+r)}));const A=new Map;T.forEach((e=>{const t=w.get(e)||0,o=C.get(e)||0;A.set(e,Math.max(t,o))}));const k={series:{animation:!1,data:S,lineStyle:{color:"source"},links:x,type:"sankey"},tooltip:{...Fn(t),formatter:e=>{const{name:t,data:o}=e,r=e.value,a=[[b,y.format(r)]],{source:n,target:i}=o;return n&&i&&(a.push([`% (${n})`,v.format(r/A.get(n))]),a.push([`% (${i})`,v.format(r/A.get(i))])),(0,Tn.L)(a,t)}}};return{refs:t,formData:o,width:i,height:r,echartOptions:k,onLegendStateChanged:s}}var Nl=o(13550);const El=o.p+"example1.7fb85f88.png",zl=o.p+"example2.0ce27c6f.png";class jl extends c.A{constructor(){super({buildQuery:Fl,controlPanel:Pl,loadChart:()=>Promise.all([o.e(4735),o.e(6378)]).then(o.bind(o,66378)),metadata:new l.A({credits:["https://echarts.apache.org"],category:(0,s.t)("Flow"),description:(0,s.t)("The Sankey chart visually tracks the movement and transformation of values across\n          system stages. Nodes represent stages, connected by links depicting value flow. Node\n          height corresponds to the visualized metric, providing a clear representation of\n          value distribution and transformation."),exampleGallery:[{url:El},{url:zl}],name:(0,s.t)("Sankey Chart"),tags:[(0,s.t)("Directional"),(0,s.t)("ECharts"),(0,s.t)("Distribution"),(0,s.t)("Flow")],thumbnail:Nl}),transformProps:Il})}}function Vl(e){const{metric:t,sort_by_metric:o}=e;return(0,Et.A)(e,(e=>[{...e,...o&&{orderby:[[t,!1]]}}]))}var $l;!function(e){e.Key="key",e.Value="value",e.KeyValue="key_value"}($l||($l={}));const Yl={groupby:[],labelType:$l.KeyValue,labelPosition:zn.NJ.InsideTopLeft,numberFormat:"SMART_NUMBER",showLabels:!0,showUpperLabels:!0,dateFormat:"smart_date"},{labelType:Gl,numberFormat:ql,showLabels:Wl,showUpperLabels:Ul,dateFormat:Hl}=Yl,Ql={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["groupby"],["metric"],["row_limit"],["sort_by_metric"],["adhoc_filters"]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[(0,fe.Y)(be.y,{children:(0,s.t)("Labels")})],[{name:"show_labels",config:{type:"CheckboxControl",label:(0,s.t)("Show Labels"),renderTrigger:!0,default:Wl,description:(0,s.t)("Whether to display the labels.")}}],[{name:"show_upper_labels",config:{type:"CheckboxControl",label:(0,s.t)("Show Upper Labels"),renderTrigger:!0,default:Ul,description:(0,s.t)("Show labels when the node has children.")}}],[{name:"label_type",config:{type:"SelectControl",label:(0,s.t)("Label Type"),default:Gl,renderTrigger:!0,choices:[["Key",(0,s.t)("Key")],["value",(0,s.t)("Value")],["key_value",(0,s.t)("Category and Value")]],description:(0,s.t)("What should be shown on the label?")}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Number format"),renderTrigger:!0,default:ql,choices:g.Bb,description:`${g.YH} ${g.s1}`}}],["currency_format"],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Date format"),renderTrigger:!0,choices:g.lR,default:Hl,description:g.YH}}]]}],formDataOverrides:e=>({...e,metric:(0,f.a)().shiftMetric(),groupby:(0,f.a)().popAllColumns()})};var Jl=o(94309),Kl=o(69752),Xl=o.n(Kl),Zl=o(94394),es=o.n(Zl);function ts(e,t){return"number"==typeof e[t]?e[t]:0}function os(e,t,o,r){const[a,...n]=t,i=es()(e,a);return Xl()(i,((e,t,l)=>{const s=i[l][0][a];if(n.length){const i=os(t,n,o,r),l=i.reduce(((e,t)=>e+t.value),0),c=r?i.reduce(((e,t)=>e+t.secondaryValue),0):l;e.push({name:s,children:i,value:l,secondaryValue:c,groupBy:a})}else(null!=t?t:[]).forEach((t=>{const n=ts(t,o),i=r?ts(t,r):n,l={name:s,value:n,secondaryValue:i,groupBy:a};e.push(l)}))}),[])}function rs(e){const{formData:t,height:o,queriesData:r,width:a,hooks:n,filterState:i,theme:l,inContextMenu:s,emitCrossFilters:c,datasource:m}=e,{data:p=[]}=r[0],{columnFormats:h={},currencyFormats:g={}}=m,{setDataMask:f=()=>{},onContextMenu:b}=n,y=(0,ti.oi)(r[0]),v=l.colorBgBase,{colorScheme:x,groupby:_=[],metric:S="",labelType:w,labelPosition:C,numberFormat:T,currencyFormat:A,dateFormat:k,showLabels:F,showUpperLabels:M,dashboardId:P,sliceId:L}={...Yl,...t},D={},O=no.getScale(x),R=(0,co.gC)(S,g,h,T,A),B=e=>function({params:e,labelType:t,numberFormatter:o}){const{name:r="",value:a}=e,n=o(a);switch(t){case $l.Key:return r;case $l.Value:return n;case $l.KeyValue:return`${r}: ${n}`;default:return r}}({params:e,numberFormatter:R,labelType:w}),I=new Map,N=(0,Ge.A)(S),E=os(p,_.map(Wt.A),N),z={color:l.colorText,borderColor:l.colorBgBase,borderWidth:1},j=(e,t)=>e.map((e=>{var o;const{name:r,value:a,groupBy:n}=e,s=(0,ti.Wy)(r,{timeFormatter:(0,u.mo)(k),...y[n]&&{coltype:y[n]}}),c=t.concat(s);let d={name:s,value:a,colorSaturation:Jl.B,itemStyle:{borderColor:v,color:O(s,L),borderWidth:Jl.gP,gapWidth:Jl.Ez}};if(null!=(o=e.children)&&o.length)d={...d,children:j(e.children,c)};else{const e=c.join(",");I.set(e,c),i.selectedValues&&!i.selectedValues.includes(e)&&(d={...d,itemStyle:{colorAlpha:kn.hD.SemiTransparent,color:l.colorText,borderColor:l.colorBgBase,borderWidth:2},label:{...z}})}return d})),V=[{name:N,colorSaturation:Jl.B,itemStyle:{borderColor:v,color:O(`${N}`,L),borderWidth:Jl.gP,gapWidth:Jl.Ez},upperLabel:{show:!1},children:j(E,[])}],$=[{upperLabel:{show:!1},label:{show:!1},itemStyle:{color:l.colorPrimary}}],Y=[{type:"treemap",width:"100%",height:"100%",nodeClick:void 0,roam:!P,breadcrumb:{show:!1,emptyItemWidth:25},emphasis:{label:{...z,show:!0}},levels:$,label:{...z,show:F,position:C,formatter:B,fontSize:Jl.Wx},upperLabel:{...z,show:M,formatter:B,textBorderColor:"transparent",fontSize:Jl.Wx},data:V}],G={tooltip:{...Fn(D),show:!s,trigger:"item",formatter:e=>function({params:e,numberFormatter:t}){const{value:o,treePathInfo:r=[]}=e,a=t(o),{metricLabel:n,treePath:i}=(0,Jl.Rq)(r),l=(0,d.gV)(je.A.PERCENT_2_POINT);let s="";const c=r[r.length-1],u=r[r.length-2];u&&(s=l(u.value?c.value/u.value:0));const m=[n,a];return s&&m.push(s),(0,Tn.L)([m],i.join("  "))}({params:e,numberFormatter:R})},series:Y};return{formData:t,width:a,height:o,echartOptions:G,setDataMask:f,emitCrossFilters:c,labelMap:Object.fromEntries(I),groupby:_,selectedValues:i.selectedValues||[],onContextMenu:b,refs:D,coltypeMapping:y}}var as=o(44345);const ns=o.p+"treemap_v2_1.f997bb13.png",is=o.p+"treemap_v2_2.bac597e9.jpg";class ls extends zn.Qh{constructor(){super({buildQuery:Vl,controlPanel:Ql,loadChart:()=>Promise.all([o.e(4735),o.e(4126)]).then(o.bind(o,34126)),metadata:{behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],category:(0,s.t)("Part of a Whole"),credits:["https://echarts.apache.org"],description:(0,s.t)("Show hierarchical relationships of data, with the value represented by area, showing proportion and contribution to the whole."),exampleGallery:[{url:ns},{url:is}],name:(0,s.t)("Treemap"),tags:[(0,s.t)("Categorical"),(0,s.t)("Comparison"),(0,s.t)("ECharts"),(0,s.t)("Multi-Levels"),(0,s.t)("Percentages"),(0,s.t)("Proportional"),(0,s.t)("Featured")],thumbnail:as},transformProps:rs})}}var ss;!function(e){e.StartTime="startTime",e.EndTime="endTime",e.Index="index",e.SeriesCount="seriesCount"}(ss||(ss={}));const cs=(e,t)=>{const o=t.value(ss.StartTime),r=t.value(ss.EndTime),a=Number(t.value(ss.Index)),n=Number(t.value(ss.SeriesCount));if(Number.isNaN(a))return null;const i=n-1-a,l=i-1,s=t.coord([o,i]),c=t.coord([r,l]),d=c[1]-s[1],u=.85*d,m=e.coordSys,p=[m.x,m.x+m.width];s[0]=Math.max(s[0],p[0]),c[0]=Math.max(s[0],c[0]),s[0]=Math.min(s[0],p[1]),c[0]=Math.min(c[0],p[1]);const h=c[0]-s[0];return h<=0||u<=0?null:{type:"rect",transition:["shape"],shape:{x:s[0],y:s[1]-u-(d-u)/2,width:h,height:u},style:t.style()}};function ds(e){const{formData:t,queriesData:o,height:r,hooks:a,filterState:n,width:i,theme:l,emitCrossFilters:c,datasource:u,legendState:m}=e,{startTime:p,endTime:h,yAxis:g,series:f,tooltipMetrics:b,tooltipColumns:y,xAxisTimeFormat:v,tooltipTimeFormat:x,tooltipValuesFormat:_,colorScheme:S,sliceId:w,zoomable:C,legendMargin:T,legendOrientation:A,legendType:k,showLegend:F,yAxisTitle:M,yAxisTitleMargin:P,xAxisTitle:L,xAxisTitleMargin:D,xAxisTimeBounds:O,subcategories:R}={...Ni,...t},{setControlValue:B,onLegendStateChanged:I}=a,{data:N=[],colnames:E=[],coltypes:z=[]}=o[0],j=(0,Wt.A)(p),V=(0,Wt.A)(h),$=(0,Wt.A)(g),Y=f?(0,Wt.A)(f):void 0,G=function({tooltipMetrics:e,tooltipColumns:t}){return[...(null!=e?e:[]).map((e=>(0,Ge.A)(e))),...(null!=t?t:[]).map((e=>(0,Wt.A)(e)))]}({tooltipMetrics:b,tooltipColumns:y}),q=(0,ti.Sq)(N,Y),W=new Map;N.forEach((e=>{const t=e[$];let o;if(Y){if(m&&!m[String(e[Y])])return;R&&(o=e[Y])}const r=W.get(t);r?void 0===r.get(o)&&r.set(o,r.size):W.set(t,new Map([[o,0]]))}));let U=0;const H=new Map;Array.from(W.entries()).forEach((([e,t])=>{H.set(e,new Map(Array.from(t.entries()).map((([e,t])=>[e,U+t])))),U+=t.size}));const Q=[],J=[];let K=0,X=0;Array.from(W.entries()).forEach((([e,t])=>{K+=t.size,J.push({yAxis:U-(K+X)/2,name:e?String(e):void 0}),Q.push({yAxis:U-K}),X=K}));const Z=Bl(v),ee=Rl(x),te=(0,d.gV)(_),oe=[void 0,void 0];if(null!=O&&O[0]){const e=Math.min(...N.map((e=>{var t;return Number(null!=(t=e[j])?t:0)}))),t=Xa()(O[0],"HH:mm:ss");oe[0]=+Xa().utc(e).hour(t.hour()).minute(t.minute()).second(t.second())}if(null!=O&&O[1]){const e=Math.min(...N.map((e=>{var t;return Number(null!=(t=e[V])?t:0)}))),t=Xa()(O[1],"HH:mm:ss");oe[1]=+Xa().utc(e).hour(t.hour()).minute(t.minute()).second(t.second())}const re=Fi(F&&q.size>1,A,!1,C,T,!!L,"Left",oi(P),oi(D)),ae=no.getScale(S),ne=e=>{const t=H.get(e[$]),o=R&&Y?e[Y]:void 0;return t?t.get(o):void 0},ie=Array.from(q.entries()).map((([e,t],o)=>({name:e,progressive:0,itemStyle:{color:ae(String(e),null!=w?w:o)},type:"custom",renderItem:cs,data:t.map((e=>({value:[e[j],e[V],ne(e),U,...Object.values(e)]}))),dimensions:[...Object.values(ss),...E],encode:{x:[0,1]}}))).sort(((e,t)=>String(e.name).localeCompare(String(t.name))));ie.push({animation:!1,type:"line",markLine:{silent:!0,symbol:["none","none"],lineStyle:{type:"dashed",color:"#dbe0ea"},label:{show:!1},data:Q}},{animation:!1,type:"line",markLine:{silent:!0,symbol:["none","none"],lineStyle:{type:"solid",color:"#00000000"},label:{show:!0,position:"start",formatter:"{b}",color:l.colorText},data:J}});const le={[$e.s.Numeric]:te,[$e.s.String]:void 0,[$e.s.Temporal]:ee,[$e.s.Boolean]:void 0},se={useUTC:!0,tooltip:{formatter:e=>(0,Tn.L)(G.map((t=>{var o,r;const a=Object.keys(ss).length,n=e.dimensionNames.slice(a),i=e.value.slice(a),l=n.findIndex((e=>e===t)),s=i[l],c=z[l];return[t,null!=(o=null==(r=le[c])?void 0:r.call(le,s))?o:s]})),Y?e.seriesName:void 0)},legend:{...(0,ti.g1)(k,A,F,l,C,m)},grid:{...ri.Ox,...re},dataZoom:C&&[{type:"slider",filterMode:"none",start:kn.TM.dataZoomStart,end:kn.TM.dataZoomEnd,bottom:kn.TM.zoomBottom}],toolbox:{show:C,top:kn.TM.toolboxTop,right:kn.TM.toolboxRight,feature:{dataZoom:{yAxisIndex:!1,title:{zoom:(0,s.t)("zoom area"),back:(0,s.t)("restore zoom")}}}},series:ie,xAxis:{name:L,nameLocation:"middle",type:Re.Gw.Time,nameGap:oi(D),axisLabel:{formatter:Z,hideOverlap:!0},min:oe[0],max:oe[1]},yAxis:{name:M,nameGap:oi(P),nameLocation:"middle",axisLabel:{show:!1},splitLine:{show:!1},type:Re.Gw.Value,min:0,max:U}};return{formData:t,queriesData:o,echartOptions:se,height:r,filterState:n,width:i,theme:l,hooks:a,emitCrossFilters:c,datasource:u,refs:{},setControlValue:B,onLegendStateChanged:I}}const us={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[{name:"start_time",config:{...H.A.entity,label:(0,s.t)("Start Time"),description:void 0,allowedDataTypes:[$e.s.Temporal]}}],[{name:"end_time",config:{...H.A.entity,label:(0,s.t)("End Time"),description:void 0,allowedDataTypes:[$e.s.Temporal]}}],[{name:"y_axis",config:{...H.A.x_axis,label:(0,s.t)("Y-axis"),description:(0,s.t)("Dimension to use on y-axis."),initialValue:()=>{}}}],["series"],[{name:"subcategories",config:{type:"CheckboxControl",label:(0,s.t)("Subcategories"),description:(0,s.t)("Divides each category into subcategories based on the values in the dimension. It can be used to exclude intersections."),renderTrigger:!0,default:!1,visibility:({controls:e})=>{var t;return!(null==e||null==(t=e.series)||!t.value)}}}],["tooltip_metrics"],["tooltip_columns"],["adhoc_filters"],["order_by_cols"],["row_limit"]]},{...Pe.sections.titleControls,controlSetRows:[...Pe.sections.titleControls.controlSetRows.slice(0,-1)]},{label:(0,s.t)("Chart Options"),expanded:!0,tabOverride:"customize",controlSetRows:[["color_scheme"],...Ui,["zoomable"],[gl],[(0,fe.Y)(be.y,{children:(0,s.t)("X Axis")})],[{name:"x_axis_time_bounds",config:{type:"TimeRangeControl",label:(0,s.t)("Bounds"),description:(0,s.t)("Bounds for the X-axis. Selected time merges with min/max date of the data. When left empty, bounds dynamically defined based on the min/max of the data."),renderTrigger:!0,allowClear:!0,allowEmpty:[!0,!0]}}],["x_axis_time_format"],[(0,fe.Y)(be.y,{children:(0,s.t)("Tooltip")})],[tl],[ol]]}]},ms=us;function ps(e){const{start_time:t,end_time:o,y_axis:r,series:a,tooltip_columns:n,tooltip_metrics:i,order_by_cols:l}=e,s=(0,T.A)(a),c=(0,T.A)(l).map((e=>JSON.parse(e))),d=Array.from(new Set([t,o,r,...s,...(0,T.A)(n),...c.map((e=>e[0]))]));return(0,Et.A)(e,(e=>[{...e,columns:d,metrics:(0,T.A)(i),orderby:c,series_columns:s}]))}var hs=o(11985);const gs=o.p+"example1.96a009c1.png",fs=o.p+"example2.32569ac7.png";class bs extends zn.Qh{constructor(){super({buildQuery:ps,controlPanel:ms,loadChart:()=>Promise.all([o.e(4735),o.e(1306)]).then(o.bind(o,1306)),metadata:{behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],credits:["https://echarts.apache.org"],name:(0,s.t)("Gantt Chart"),description:(0,s.t)("Gantt chart visualizes important events over a time span. Every data point displayed as a separate event along a horizontal line."),tags:[(0,s.t)("ECharts"),(0,s.t)("Featured"),(0,s.t)("Timeline"),(0,s.t)("Time")],thumbnail:hs,exampleGallery:[{url:gs},{url:fs}]},transformProps:ds})}}const ys={...kn.I,groupby:[],rowLimit:10,minVal:null,maxVal:null,fontSize:15,numberFormat:"SMART_NUMBER",animation:!0,showProgress:!0,overlap:!0,roundCap:!1,showAxisTick:!1,showSplitLine:!1,splitNumber:10,startAngle:225,endAngle:-45,showPointer:!0,intervals:"",intervalColorIndices:"",valueFormatter:"{value}"},vs={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...H.A.groupby,description:(0,s.t)("Columns to group by")}}],["metric"],["adhoc_filters"],[{name:"row_limit",config:{...H.A.row_limit,choices:[...Array(10).keys()].map((e=>e+1)),default:ys.rowLimit}}],["sort_by_metric"]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[[(0,fe.Y)(be.y,{children:(0,s.t)("General")})],[{name:"min_val",config:{type:"TextControl",isInt:!0,default:ys.minVal,renderTrigger:!0,label:(0,s.t)("Min"),description:(0,s.t)("Minimum value on the gauge axis")}},{name:"max_val",config:{type:"TextControl",isInt:!0,default:ys.maxVal,renderTrigger:!0,label:(0,s.t)("Max"),description:(0,s.t)("Maximum value on the gauge axis")}}],[{name:"start_angle",config:{type:"TextControl",label:(0,s.t)("Start angle"),description:(0,s.t)("Angle at which to start progress axis"),renderTrigger:!0,default:ys.startAngle}},{name:"end_angle",config:{type:"TextControl",label:(0,s.t)("End angle"),description:(0,s.t)("Angle at which to end progress axis"),renderTrigger:!0,default:ys.endAngle}}],["color_scheme"],[{name:"font_size",config:{type:"SliderControl",label:(0,s.t)("Font size"),description:(0,s.t)("Font size for axis labels, detail value and other text elements"),renderTrigger:!0,min:10,max:20,default:ys.fontSize}}],[{name:"number_format",config:{type:"SelectControl",label:(0,s.t)("Number format"),description:(0,s.t)("D3 format syntax: https://github.com/d3/d3-format"),freeForm:!0,renderTrigger:!0,default:ys.numberFormat,choices:g.Bb}}],["currency_format"],[{name:"value_formatter",config:{type:"TextControl",label:(0,s.t)("Value format"),description:(0,s.t)("Additional text to add before or after the value, e.g. unit"),renderTrigger:!0,default:ys.valueFormatter}}],[{name:"show_pointer",config:{type:"CheckboxControl",label:(0,s.t)("Show pointer"),description:(0,s.t)("Whether to show the pointer"),renderTrigger:!0,default:ys.showPointer}}],[{name:"animation",config:{type:"CheckboxControl",label:(0,s.t)("Animation"),description:(0,s.t)("Whether to animate the progress and the value or just display them"),renderTrigger:!0,default:ys.animation}}],[(0,fe.Y)(be.y,{children:(0,s.t)("Axis")})],[{name:"show_axis_tick",config:{type:"CheckboxControl",label:(0,s.t)("Show axis line ticks"),description:(0,s.t)("Whether to show minor ticks on the axis"),renderTrigger:!0,default:ys.showAxisTick}}],[{name:"show_split_line",config:{type:"CheckboxControl",label:(0,s.t)("Show split lines"),description:(0,s.t)("Whether to show the split lines on the axis"),renderTrigger:!0,default:ys.showSplitLine}}],[{name:"split_number",config:{type:"SliderControl",label:(0,s.t)("Split number"),description:(0,s.t)("Number of split segments on the axis"),renderTrigger:!0,min:3,max:30,default:ys.splitNumber}}],[(0,fe.Y)(be.y,{children:(0,s.t)("Progress")})],[{name:"show_progress",config:{type:"CheckboxControl",label:(0,s.t)("Show progress"),description:(0,s.t)("Whether to show the progress of gauge chart"),renderTrigger:!0,default:ys.showProgress}}],[{name:"overlap",config:{type:"CheckboxControl",label:(0,s.t)("Overlap"),description:(0,s.t)("Whether the progress bar overlaps when there are multiple groups of data"),renderTrigger:!0,default:ys.overlap}}],[{name:"round_cap",config:{type:"CheckboxControl",label:(0,s.t)("Round cap"),description:(0,s.t)("Style the ends of the progress bar with a round cap"),renderTrigger:!0,default:ys.roundCap}}],[(0,fe.Y)(be.y,{children:(0,s.t)("Intervals")})],[{name:"intervals",config:{type:"TextControl",label:(0,s.t)("Interval bounds"),description:(0,s.t)("Comma-separated interval bounds, e.g. 2,4,5 for intervals 0-2, 2-4 and 4-5. Last number should match the value provided for MAX."),renderTrigger:!0,default:ys.intervals}}],[{name:"interval_color_indices",config:{type:"TextControl",label:(0,s.t)("Interval colors"),description:(0,s.t)("Comma-separated color picks for the intervals, e.g. 1,2,4. Integers denote colors from the chosen color scheme and are 1-indexed. Length must be matching that of interval bounds."),renderTrigger:!0,default:ys.intervalColorIndices}}]]}],formDataOverrides:e=>({...e,metric:(0,f.a)().shiftMetric(),groupby:(0,f.a)().popAllColumns()})};var xs=o(23181),_s=o.n(xs);function Ss(e){if(null!=e&&!Number.isNaN(Number(e)))return Number(e)}function ws(e,t=";"){return null!=e&&e.trim()?e.split(t).map((e=>{if((0,_o.A)(e))throw new Error("All values must be numeric");return Number(e)})):[]}const Cs={splitLine:{lineStyle:{color:"auto"}},axisTick:{lineStyle:{color:"auto"}},axisLabel:{color:"auto"},pointer:{itemStyle:{color:"auto"}}};function Ts(e){var t,o,r,a,n,i;const{width:l,height:s,formData:c,queriesData:d,hooks:u,filterState:m,theme:p,emitCrossFilters:h,datasource:g}=e,f=(e=>({splitLine:{lineStyle:{color:e.colorPrimary}},axisLine:{lineStyle:{color:[[1,e.colorSplit]]}},axisLabel:{color:e.colorText},axisTick:{lineStyle:{width:2,color:e.colorPrimary}},detail:{color:e.colorText}}))(p),{verboseMap:b={},currencyFormats:y={},columnFormats:v={}}=g,{groupby:x,metric:_,minVal:S,maxVal:w,colorScheme:C,fontSize:T,numberFormat:A,currencyFormat:k,animation:F,showProgress:M,overlap:P,roundCap:L,showAxisTick:D,showSplitLine:O,splitNumber:R,startAngle:B,endAngle:I,showPointer:N,intervals:E,intervalColorIndices:z,valueFormatter:j,sliceId:V}={...ys,...c},$={},Y=(null==(t=d[0])?void 0:t.data)||[],G=(0,ti.oi)(d[0]),q=(0,co.gC)(_,y,v,A,k),W=no.getScale(C),U=((e,t,o)=>o?t:e.length*t)(Y,T,P),H=x.map(Wt.A),Q=e=>j.replace("{value}",q(e)),J=.25*T,K=1*T,X=2*T,Z=.9*T,ee=new Map,te=(0,Ge.A)(_),oe=Y.map(((e,t)=>{const o=H.map((t=>`${b[t]||t}: ${e[t]}`)).join(", "),r=H.map((t=>e[t]));ee.set(o,H.map((t=>e[t])));let a={value:e[te],name:o,itemStyle:{color:W(r,V)},title:{offsetCenter:["0%",t*X+20+"%"],fontSize:T,color:p.colorTextSecondary},detail:{offsetCenter:["0%",`${t*X+20+Z}%`],fontSize:1.2*T,color:p.colorText}};return m.selectedValues&&!m.selectedValues.includes(o)&&(a={...a,itemStyle:{color:W(t,V),opacity:kn.hD.SemiTransparent},detail:{show:!1},title:{show:!1}}),a})),{setDataMask:re=()=>{},onContextMenu:ae}=u,ne=null!=S?S:(e=>2*Math.min(...e.map((e=>e.value)).concat([0])))(oe),ie=null!=w?w:(e=>2*Math.max(...e.map((e=>e.value)).concat([0])))(oe),le=_s()(ne,ie,(ie-ne)/R),se=Math.max(...le.map((e=>q(e).length)).concat([1])),ce=((e,t,o,r,a)=>{let n,i;try{n=ws(e,","),i=ws(t,",")}catch(e){n=[],i=[]}const l=n.map((e=>(e-r)/(a-r))),s=i.map((e=>o.colors[(e-1)%o.colors.length]));return l.map(((e,t)=>[e,s[t]||o.colors[t]]))})(E,z,W,ne,ie),de=1.5*T*.35*se+(O?K:0)+(D?J:0)+10-U,ue=U+J+10,me={show:M,overlap:P,roundCap:L,width:T},pe={show:O,distance:-(U+K+10),length:K,lineStyle:{width:.25*T,color:null==(o=f.splitLine)||null==(o=o.lineStyle)?void 0:o.color}},he={roundCap:L,lineStyle:{width:U,color:null==(r=f.axisLine)||null==(r=r.lineStyle)?void 0:r.color}},ge={distance:-de,fontSize:T,formatter:q,color:null==(a=f.axisLabel)?void 0:a.color},fe={show:D,distance:-ue,length:J,lineStyle:null==(n=f.axisTick)?void 0:n.lineStyle},be={valueAnimation:F,formatter:e=>Q(e),color:null==(i=f.detail)?void 0:i.color},ye={...Fn($),formatter:e=>{const{name:t,value:o}=e;return(0,Tn.L)([[te,Q(o)]],t)}};let ve;var xe,_e,Se,we;ce.length?(pe.lineStyle.color=null==(xe=Cs.splitLine)||null==(xe=xe.lineStyle)?void 0:xe.color,fe.lineStyle.color=null==Cs||null==(_e=Cs.axisTick)||null==(_e=_e.lineStyle)?void 0:_e.color,ge.color=null==(Se=Cs.axisLabel)?void 0:Se.color,he.lineStyle.color=ce,ve={show:N,showAbove:!1,itemStyle:null==(we=Cs.pointer)?void 0:we.itemStyle}):ve={show:N,showAbove:!1};const Ce=[{type:"gauge",startAngle:B,endAngle:I,min:ne,max:ie,progress:me,animation:F,axisLine:he,splitLine:pe,splitNumber:R,axisLabel:ge,axisTick:fe,pointer:ve,detail:be,tooltip:ye,radius:Math.min(l,s)/2-de-ue,center:["50%","55%"],data:oe}];return{formData:c,width:l,height:s,echartOptions:{tooltip:{...Fn($),trigger:"item"},series:Ce},setDataMask:re,emitCrossFilters:h,labelMap:Object.fromEntries(ee),groupby:x,selectedValues:m.selectedValues||[],onContextMenu:ae,refs:$,coltypeMapping:G}}var As=o(23868);const ks=o.p+"example1.b8069aef.jpg",Fs=o.p+"example2.65d169da.jpg";function Ms(e){const{metric:t,sort_by_metric:o}=e;return(0,Et.A)(e,(e=>[{...e,...o&&{orderby:[[t,!1]]}}]))}class Ps extends zn.Qh{constructor(){super({buildQuery:Ms,controlPanel:vs,loadChart:()=>Promise.all([o.e(4735),o.e(3360)]).then(o.bind(o,13360)),metadata:{behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],category:(0,s.t)("KPI"),credits:["https://echarts.apache.org"],description:(0,s.t)("Uses a gauge to showcase progress of a metric towards a target. The position of the dial represents the progress and the terminal value in the gauge represents the target value."),exampleGallery:[{url:ks},{url:Fs}],name:(0,s.t)("Gauge Chart"),tags:[(0,s.t)("Multi-Variables"),(0,s.t)("Business"),(0,s.t)("Comparison"),(0,s.t)("ECharts"),(0,s.t)("Report"),(0,s.t)("Featured")],thumbnail:As},transformProps:Ts})}}const Ls={...kn.I,source:"",target:"",layout:"force",roam:!0,draggable:!1,selectedMode:"single",showSymbolThreshold:0,repulsion:1e3,gravity:.3,edgeSymbol:"none,arrow",edgeLength:400,baseEdgeWidth:3,baseNodeSize:20,friction:.2,legendOrientation:zn.go.Top,legendType:zn.a_.Scroll},Ds={...H.A.entity,clearable:!1},Os={...H.A.entity,clearable:!0,validators:[]},Rs={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[{name:"source",config:{...Ds,label:(0,s.t)("Source"),description:(0,s.t)("Name of the source nodes")}}],[{name:"target",config:{...Ds,label:(0,s.t)("Target"),description:(0,s.t)("Name of the target nodes")}}],["metric"],[{name:"source_category",config:{...Os,label:(0,s.t)("Source category"),description:(0,s.t)("The category of source nodes used to assign colors. If a node is associated with more than one category, only the first will be used.")}}],[{name:"target_category",config:{...Os,label:(0,s.t)("Target category"),description:(0,s.t)("Category of target nodes")}}],["adhoc_filters"],["row_limit"]]},{label:(0,s.t)("Chart options"),expanded:!0,controlSetRows:[["color_scheme"],...Ui,[(0,fe.Y)(be.y,{children:(0,s.t)("Layout")})],[{name:"layout",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,s.t)("Graph layout"),default:Ls.layout,options:[["force",(0,s.t)("Force")],["circular",(0,s.t)("Circular")]],description:(0,s.t)("Layout type of graph")}}],[{name:"edgeSymbol",config:{type:"SelectControl",renderTrigger:!0,label:(0,s.t)("Edge symbols"),description:(0,s.t)("Symbol of two ends of edge line"),default:Ls.edgeSymbol,choices:[["none,none",(0,s.t)("None -> None")],["none,arrow",(0,s.t)("None -> Arrow")],["circle,arrow",(0,s.t)("Circle -> Arrow")],["circle,circle",(0,s.t)("Circle -> Circle")]]}}],[{name:"draggable",config:{type:"CheckboxControl",label:(0,s.t)("Enable node dragging"),renderTrigger:!0,default:Ls.draggable,description:(0,s.t)("Whether to enable node dragging in force layout mode."),visibility:({form_data:{layout:e}})=>"force"===e||!e&&"force"===Ls.layout}}],[{name:"roam",config:{type:"SelectControl",label:(0,s.t)("Enable graph roaming"),renderTrigger:!0,default:Ls.roam,choices:[[!1,(0,s.t)("Disabled")],["scale",(0,s.t)("Scale only")],["move",(0,s.t)("Move only")],[!0,(0,s.t)("Scale and Move")]],description:(0,s.t)("Whether to enable changing graph position and scaling.")}}],[{name:"selectedMode",config:{type:"SelectControl",renderTrigger:!0,label:(0,s.t)("Node select mode"),default:Ls.selectedMode,choices:[[!1,(0,s.t)("Disabled")],["single",(0,s.t)("Single")],["multiple",(0,s.t)("Multiple")]],description:(0,s.t)("Allow node selections")}}],[{name:"showSymbolThreshold",config:{type:"TextControl",label:(0,s.t)("Label threshold"),renderTrigger:!0,isInt:!0,default:Ls.showSymbolThreshold,description:(0,s.t)("Minimum value for label to be displayed on graph.")}}],[{name:"baseNodeSize",config:{type:"TextControl",label:(0,s.t)("Node size"),renderTrigger:!0,isFloat:!0,default:Ls.baseNodeSize,description:(0,s.t)("Median node size, the largest node will be 4 times larger than the smallest")}},{name:"baseEdgeWidth",config:{type:"TextControl",label:(0,s.t)("Edge width"),renderTrigger:!0,isFloat:!0,default:Ls.baseEdgeWidth,description:(0,s.t)("Median edge width, the thickest edge will be 4 times thicker than the thinnest.")}}],[{name:"edgeLength",config:{type:"SliderControl",label:(0,s.t)("Edge length"),renderTrigger:!0,min:100,max:1e3,step:50,default:Ls.edgeLength,description:(0,s.t)("Edge length between nodes"),visibility:({form_data:{layout:e}})=>"force"===e||!e&&"force"===Ls.layout}}],[{name:"gravity",config:{type:"SliderControl",label:(0,s.t)("Gravity"),renderTrigger:!0,min:.1,max:1,step:.1,default:Ls.gravity,description:(0,s.t)("Strength to pull the graph toward center"),visibility:({form_data:{layout:e}})=>"force"===e||!e&&"force"===Ls.layout}}],[{name:"repulsion",config:{type:"SliderControl",label:(0,s.t)("Repulsion"),renderTrigger:!0,min:100,max:3e3,step:50,default:Ls.repulsion,description:(0,s.t)("Repulsion strength between nodes"),visibility:({form_data:{layout:e}})=>"force"===e||!e&&"force"===Ls.layout}}],[{name:"friction",config:{type:"SliderControl",label:(0,s.t)("Friction"),renderTrigger:!0,min:.1,max:1,step:.1,default:Ls.friction,description:(0,s.t)("Friction between nodes"),visibility:({form_data:{layout:e}})=>"force"===e||!e&&"force"===Ls.layout}}]]}],formDataOverrides:e=>({...e,metric:(0,f.a)().popAllMetrics()})};var Bs=o(24104);const Is={zoom:.7,circular:{rotateLabel:!0},force:{initLayout:"circular",layoutAnimation:!0},label:{show:!0,position:"right",distance:5,rotate:0,offset:[0,0],fontStyle:"normal",fontWeight:"normal",fontFamily:"sans-serif",fontSize:12,padding:[0,0,0,0],overflow:"truncate",formatter:"{b}"},emphasis:{focus:"adjacency"},animation:!0,animationDuration:500,animationEasing:"cubicOut",lineStyle:{color:"source",curveness:.1},select:{itemStyle:{borderWidth:3,opacity:1},label:{fontWeight:"bolder"}},tooltip:{formatter:"{b}: {c}"}};function Ns(e){return"none"===e||"circle"===e||"arrow"===e?e:"none"}function Es(e){const[t,o]=(e||"").split(",");return[Ns(t),Ns(o)]}function zs(e){return Math.max(5,Math.min(2*e,20))}function js(e,t){return Object.keys(e).find((o=>e[o]===t))}function Vs(e,t){return!1===t?`${e}: false`:!0===t?`${e}: true`:null==t?"N/A":String(t)}function $s(e){const{width:t,height:o,formData:r,queriesData:a,hooks:n,inContextMenu:i,filterState:l,emitCrossFilters:s,theme:c}=e,d=a[0].data||[],u=(0,ti.oi)(a[0]),{source:m,target:p,sourceCategory:h,targetCategory:g,colorScheme:f,metric:b="",layout:y,roam:v,draggable:x,selectedMode:_,showSymbolThreshold:S,edgeLength:w,gravity:C,repulsion:T,friction:A,legendMargin:k,legendOrientation:F,legendType:M,showLegend:P,baseEdgeWidth:L,baseNodeSize:D,edgeSymbol:O,sliceId:R}={...Ls,...r},B={},I=(0,Ge.A)(b),N=no.getScale(f),E=N.range()[0],z={},j=new Set,V=[],$=[];function Y(e,t,o,r){e in z||(z[e]=V.length,V.push({id:String(z[e]),name:e,col:t,value:0,category:o,select:Is.select,tooltip:{...Fn(B),...Is.tooltip},itemStyle:{color:r}}));const a=V[z[e]];return o&&(j.add(o),a.category||(a.category=o)),a}d.forEach((e=>{const t=e[I];if(!t)return;const o=e[m],r=e[p],a=h?Vs(h,e[h]):void 0,n=g?Vs(g,e[g]):void 0,i=a?N(a):E,l=n?N(n):E,s=Y(o,m,a,i),c=Y(r,p,n,l);s.value+=t,c.value+=t,$.push({source:s.id,target:c.id,value:t,lineStyle:{color:i},emphasis:{},select:{}})})),function(e,t,{baseNodeSize:o,baseEdgeWidth:r,showSymbolThreshold:a}){const n=.5*o,i=2*o,l=.5*r,s=2*r,[c,d]=(0,Bs.Xx)(e,(e=>e.value)),u=d-c;e.forEach((e=>{e.symbolSize=((e.value-c)/u*i||0)+n,e.label={...e.label,show:!a||e.value>a}}));const[m,p]=(0,Bs.Xx)(t,(e=>e.value)),h=p-m;t.forEach((e=>{const t=(e.value-m)/h*s||0+l;e.lineStyle.width=t,e.emphasis.lineStyle={...e.emphasis.lineStyle,width:zs(t)},e.select.lineStyle={...e.select.lineStyle,width:zs(.8*t),opacity:1}}))}(V,$,{showSymbolThreshold:S,baseEdgeWidth:L,baseNodeSize:D});const G=[...j],q=[{zoom:Is.zoom,type:"graph",categories:G.map((e=>({name:e,itemStyle:{color:N(e,R)}}))),layout:y,force:{...Is.force,edgeLength:w,gravity:C,repulsion:T,friction:A},circular:Is.circular,data:V,links:$,roam:v,draggable:x,edgeSymbol:Es(O),edgeSymbolSize:2*L,selectedMode:_,...(0,ti.yX)(P,F,k),animation:Is.animation,label:{...Is.label,color:c.colorText},lineStyle:Is.lineStyle,emphasis:Is.emphasis}],W={animationDuration:Is.animationDuration,animationEasing:Is.animationEasing,tooltip:{...Fn(B),show:!i,formatter:e=>{const t=`${(0,ti.pn)(js(z,Number(e.data.source)))} > ${(0,ti.pn)(js(z,Number(e.data.target)))}`;return(0,Tn.L)([[I,`${e.value}`]],t)}},legend:{...(0,ti.g1)(M,F,P,c),data:G},series:q},{onContextMenu:U,setDataMask:H}=n;return{width:t,height:o,formData:r,echartOptions:W,onContextMenu:U,setDataMask:H,filterState:l,refs:B,emitCrossFilters:s,coltypeMapping:u}}var Ys=o(28747);const Gs=o.p+"example.b2236be9.jpg";function qs(e){return(0,Et.A)(e,{queryFields:{source:"columns",target:"columns",source_category:"columns",target_category:"columns"}})}class Ws extends zn.Qh{constructor(){super({buildQuery:qs,controlPanel:Rs,loadChart:()=>Promise.all([o.e(4735),o.e(4074)]).then(o.bind(o,64074)),metadata:{category:(0,s.t)("Flow"),credits:["https://echarts.apache.org"],description:(0,s.t)("Displays connections between entities in a graph structure. Useful for mapping relationships and showing which nodes are important in a network. Graph charts can be configured to be force-directed or circulate. If your data has a geospatial component, try the deck.gl Arc chart."),exampleGallery:[{url:Gs}],name:(0,s.t)("Graph Chart"),tags:[(0,s.t)("Circular"),(0,s.t)("Comparison"),(0,s.t)("Directional"),(0,s.t)("ECharts"),(0,s.t)("Relational"),(0,s.t)("Structural"),(0,s.t)("Transformable"),(0,s.t)("Featured")],thumbnail:Ys,behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy]},transformProps:$s})}}function Us(e){const{series_limit_metric:t}=e,o=(0,T.A)(t)[0];return(0,Et.A)(e,(e=>{var t;let{metrics:r,orderby:a=[]}=e;return r=r||[],o?a=[[o,!1]]:(null==(t=r)?void 0:t.length)>0&&(a=[[r[0],!1]]),[{...e,orderby:a}]}))}var Hs;!function(e){e.Value="value",e.KeyValue="key_value"}(Hs||(Hs={}));const Qs={...kn.I,groupby:[],labelType:Hs.Value,labelPosition:zn.NJ.Top,legendOrientation:zn.go.Top,legendType:zn.a_.Scroll,numberFormat:"SMART_NUMBER",showLabels:!0,dateFormat:"smart_date",isCircle:!1},{labelType:Js,labelPosition:Ks,numberFormat:Xs,showLabels:Zs,isCircle:ec}=Qs,tc={name:"radarMetricMaxValue",config:{controlType:"InputNumber",label:(0,s.t)("Max"),description:(0,s.t)("The maximum value of metrics. It is an optional configuration"),width:120,placeholder:(0,s.t)("auto"),debounceDelay:400,validators:[_o.A]}},oc={name:"radarMetricMinValue",config:{controlType:"InputNumber",label:(0,s.t)("Min"),description:(0,s.t)("The minimum value of metrics. It is an optional configuration. If not set, it will be the minimum value of the data"),defaultValue:"0",width:120,placeholder:(0,s.t)("auto"),debounceDelay:400,validators:[_o.A]}},rc={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["groupby"],["metrics"],["timeseries_limit_metric"],["adhoc_filters"],[{name:"row_limit",config:{...H.A.row_limit,default:10}}]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],...Ui,[(0,fe.Y)(be.y,{children:(0,s.t)("Labels")})],[{name:"show_labels",config:{type:"CheckboxControl",label:(0,s.t)("Show Labels"),renderTrigger:!0,default:Zs,description:(0,s.t)("Whether to display the labels.")}}],[{name:"label_type",config:{type:"SelectControl",label:(0,s.t)("Label Type"),default:Js,renderTrigger:!0,choices:[["value",(0,s.t)("Value")],["key_value",(0,s.t)("Category and Value")]],description:(0,s.t)("What should be shown on the label?")}}],[{name:"label_position",config:{type:"SelectControl",freeForm:!1,label:(0,s.t)("Label position"),renderTrigger:!0,choices:kn.Zq,default:Ks,description:g.YH}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Number format"),renderTrigger:!0,default:Xs,choices:g.Bb,description:`${g.YH} ${g.s1}`}}],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Date format"),renderTrigger:!0,choices:g.lR,default:"smart_date",description:g.YH}}],[(0,fe.Y)(be.y,{children:(0,s.t)("Radar")})],[{name:"column_config",config:{type:"ColumnConfigControl",label:(0,s.t)("Customize Metrics"),description:(0,s.t)("Further customize how to display each metric"),renderTrigger:!0,configFormLayout:{[$e.s.Numeric]:[[oc,tc]]},shouldMapStateToProps:()=>!0,mapStateToProps(e,t,o){var r,a,n,i,l;const s=(null!=(r=null==e||null==(a=e.controls)||null==(a=a.metrics)?void 0:a.value)?r:[]).map((e=>"string"==typeof e?e:e.label)),{colnames:c,coltypes:d}=null!=(n=null==o||null==(i=o.queriesResponse)?void 0:i[0])?n:{},u=c||[],m=d||[];return{queryResponse:null==o||null==(l=o.queriesResponse)?void 0:l[0],appliedColumnNames:s,columnsPropsObject:{colnames:u,coltypes:m}}}}}],[{name:"is_circle",config:{type:"CheckboxControl",label:(0,s.t)("Circle radar shape"),renderTrigger:!0,default:ec,description:(0,s.t)("Radar render type, whether to display 'circle' shape.")}}]]}],formDataOverrides:e=>({...e,metrics:(0,f.a)().popAllMetrics(),groupby:(0,f.a)().popAllColumns()})};var ac=o(74842),nc=o(30256);function ic(e){const{formData:t,height:o,hooks:r,filterState:a,queriesData:n,width:i,theme:l,inContextMenu:s,emitCrossFilters:c}=e,m={},{data:p=[]}=n[0],h=((e,t)=>null!=e&&e.length&&null!=t&&t.length?e.reduce(((e,o)=>{const r=t.reduce(((e,t)=>{const r=o[t];return"number"==typeof r&&Number.isFinite(r)&&!Number.isNaN(r)?Math.max(e,r):e}),0);return Math.max(e,r)}),0):0)(p,Object.keys(p[0]||{})),g=(0,ti.oi)(n[0]),{colorScheme:f,groupby:b,labelType:y,labelPosition:v,legendOrientation:x,legendType:_,legendMargin:S,metrics:w=[],numberFormat:C,dateFormat:T,showLabels:A,showLegend:k,isCircle:F,columnConfig:M,sliceId:P}={...kn.I,...Qs,...t},{setDataMask:L=()=>{},onContextMenu:D}=r,O=no.getScale(f),R=(0,d.gV)(C),B={},I=(e,t)=>{var o,r;return null!=(o=null==B||null==(r=B[e])?void 0:r[t])?o:Number(t)},N=w.map(Ge.A),E=new Set(N.filter((e=>{const t=null==M?void 0:M[e],o=!!(0,ac.A)(null==t?void 0:t.radarMetricMaxValue),r=(0,ac.A)(null==t?void 0:t.radarMetricMinValue)&&0!==(null==t?void 0:t.radarMetricMinValue);return o||r}))),z=e=>function({params:e,labelType:t,numberFormatter:o,getDenormalizedSeriesValue:r,metricsWithCustomBounds:a,metricLabels:n}){const{name:i="",value:l,dimensionIndex:s=0}=e,c=n[s],d=o(a.has(c)?l:r(i,String(l)));switch(t){case Hs.Value:return d;case Hs.KeyValue:return`${i}: ${d}`;default:return i}}({params:e,numberFormatter:R,labelType:y,getDenormalizedSeriesValue:I,metricsWithCustomBounds:E,metricLabels:N}),j=b.map(Wt.A),V=new Map,$=new Map,Y=new Map,G=[];p.forEach((e=>{const t=(0,ti.YC)({datum:e,groupby:j,coltypeMapping:g,timeFormatter:(0,u.mo)(T)});Y.set(t,j.map((t=>e[t])));for(const[t,o]of Object.entries(e))V.has(t)?V.set(t,Math.max(o,(0,nc.A)(V.get(t),Number.MIN_SAFE_INTEGER))):V.set(t,o),$.has(t)?$.set(t,Math.min(o,(0,nc.A)($.get(t),Number.MAX_SAFE_INTEGER))):$.set(t,o);const o=a.selectedValues&&!a.selectedValues.includes(t);G.push({value:N.map((t=>e[t])),name:t,itemStyle:{color:O(t,P),opacity:o?kn.hD.Transparent:kn.hD.NonTransparent},lineStyle:{opacity:o?kn.hD.SemiTransparent:kn.hD.NonTransparent},label:{show:A,position:v,formatter:z}})}));const q=(a.selectedValues||[]).reduce(((e,t)=>{const o=G.findIndex((({name:e})=>e===t));return{...e,[o]:t}}),{}),W=(e,t=10,o)=>e.map(((r,a)=>{const n=N[a];if(E.has(n))return r;const i=Math.max(...e),l=Number((r/i).toFixed(t));return B[o][String(l)]=r,l})),U=G.map((e=>{if(Array.isArray(e.value)){const t=String((null==e?void 0:e.name)||"");return B[t]={},{...e,value:W(e.value,10,t)}}return e})),H=N.map((e=>{var t,o;if(!E.has(e))return{name:e,max:1,min:0};const r=null==M||null==(t=M[e])?void 0:t.radarMetricMaxValue,a=null==M||null==(o=M[e])?void 0:o.radarMetricMinValue,n=0===V.get(e)?Number.MAX_SAFE_INTEGER:h,i=(0,ac.A)(r)?r:n;let l;return l=(0,ac.A)(a)?a:0,{name:e,max:i,min:l}})),Q=[{type:"radar",...(0,ti.yX)(k,x,S),animation:!1,emphasis:{label:{show:!0,fontWeight:"bold"}},data:U}],J={grid:{...ri.Ox},tooltip:{...Fn(m),show:!s,trigger:"item",formatter:e=>((e,t,o,r)=>{const{color:a,name:n="",value:i}=e,l=`<span style="display:inline-block;margin-right:5px;border-radius:50%;width:5px;height:5px;background-color:${a}"></span>`;return`\n    <div style="font-weight:bold;margin-bottom:5px;">${n||"series0"}</div>\n    ${t.map(((e,t)=>{const a=i[t];return{metric:e,value:r.has(e)?a:o(n,String(a))}})).map((({metric:e,value:t})=>`\n        <div style="display:flex;">\n          <div>${l}${e}:</div>\n          <div style="font-weight:bold;margin-left:auto;">${t}</div>\n        </div>\n      `)).join("")}\n  `})(e,N,I,E)},legend:{...(0,ti.g1)(_,x,k,l),data:Array.from(Y.keys())},series:Q,radar:{shape:F?"circle":"polygon",indicator:H,splitLine:{show:!0,lineStyle:{color:l.colorSplit}},splitArea:{show:!0,areaStyle:{color:[l.colorBgLayout,l.colorBgContainer]}},axisLine:{lineStyle:{color:l.colorSplit}}}};return{formData:t,width:i,height:o,echartOptions:J,emitCrossFilters:c,setDataMask:L,labelMap:Object.fromEntries(Y),groupby:b,selectedValues:q,onContextMenu:D,refs:m,coltypeMapping:g}}var lc=o(37011);const sc=o.p+"example1.6c4d3e0c.jpg",cc=o.p+"example2.ea481d57.jpg";class dc extends zn.Qh{constructor(){super({buildQuery:Us,controlPanel:rc,loadChart:()=>Promise.all([o.e(4735),o.e(7550)]).then(o.bind(o,17550)),metadata:{behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],category:(0,s.t)("Ranking"),credits:["https://echarts.apache.org"],description:(0,s.t)("Visualize a parallel set of metrics across multiple groups. Each group is visualized using its own line of points and each metric is represented as an edge in the chart."),exampleGallery:[{url:sc},{url:cc}],name:(0,s.t)("Radar Chart"),tags:[(0,s.t)("Business"),(0,s.t)("Comparison"),(0,s.t)("Multi-Variables"),(0,s.t)("Report"),(0,s.t)("Web"),(0,s.t)("ECharts"),(0,s.t)("Featured")],thumbnail:lc},transformProps:ic})}}var uc=o(11460),mc=o(51157),pc=o(37523);function hc(e){const t={...e},o=(e=>{const t={};return Object.entries(e).forEach((([e,o])=>{e.endsWith("_b")||(t[e]=o)})),t})(t),r=((e,t)=>{const o={};return Object.entries(e).sort((([e],[o])=>{const r=e.endsWith(t)?1:0;return(o.endsWith(t)?1:0)-r})).forEach((([e,r])=>{e.endsWith(t)&&(o[e.slice(0,-2)]=r),e.endsWith(t)||e in o||(o[e]=r)})),o})(t,"_b"),a=[o,r].map((t=>(0,Et.A)(t,(o=>{const r={...o,columns:[...(0,Cn.aj)(e)?(0,T.A)((0,Cn.Od)(e)):[],...(0,T.A)(t.groupby)],series_columns:t.groupby,...(0,Cn.aj)(e)?{}:{is_timeseries:!0}},a=(0,jt.f)(t,r)?(0,mc.v)(t,r):(0,Ln.L)(t,r),n={...r,time_offsets:(0,jt.f)(t,r)?t.time_compare:[],post_processing:[a,(0,Dn.q)(t,r),(0,Vt.t)(t,r),(0,On.M)(t,r),(0,pc.Z)(t,r),(0,Rn.P)(t,r)]};return[(0,uc.A)(n)]}))));return{...a[0],queries:[...a[0].queries,...a[1].queries]}}var gc=o(88055),fc=o.n(gc);const bc={...kn.I,annotationLayers:[],minorSplitLine:Ni.minorSplitLine,truncateYAxis:Ni.truncateYAxis,truncateYAxisSecondary:Ni.truncateYAxis,logAxis:Ni.logAxis,logAxisSecondary:Ni.logAxis,yAxisBounds:Ni.yAxisBounds,yAxisBoundsSecondary:Ni.yAxisBounds,yAxisFormat:Ni.yAxisFormat,yAxisFormatSecondary:Ni.yAxisFormat,yAxisTitleSecondary:kn.jo.yAxisTitle,tooltipTimeFormat:Ni.tooltipTimeFormat,xAxisBounds:Ni.xAxisBounds,xAxisForceCategorical:Ni.xAxisForceCategorical,xAxisTimeFormat:Ni.xAxisTimeFormat,area:Ni.area,areaB:Ni.area,markerEnabled:Ni.markerEnabled,markerEnabledB:Ni.markerEnabled,markerSize:Ni.markerSize,markerSizeB:Ni.markerSize,opacity:Ni.opacity,opacityB:Ni.opacity,orderDesc:Ni.orderDesc,orderDescB:Ni.orderDesc,rowLimit:Ni.rowLimit,rowLimitB:Ni.rowLimit,seriesType:Ni.seriesType,seriesTypeB:Ni.seriesType,showValue:Ni.showValue,showValueB:Ni.showValue,stack:Ni.stack,stackB:Ni.stack,yAxisIndex:0,yAxisIndexB:0,groupby:[],groupbyB:[],zoomable:Ni.zoomable,richTooltip:Ni.richTooltip,showQueryIdentifiers:!1,xAxisLabelRotation:Ni.xAxisLabelRotation,xAxisLabelInterval:Ni.xAxisLabelInterval,...kn.jo},{area:yc,logAxis:vc,markerEnabled:xc,markerSize:_c,minorSplitLine:Sc,opacity:wc,orderDesc:Cc,rowLimit:Tc,seriesType:Ac,showValues:kc,stack:Fc,truncateYAxis:Mc,yAxisBounds:Pc,yAxisIndex:Lc}=bc;function Dc(e,t){return{label:e,expanded:!0,controlSetRows:[[{name:`metrics${t}`,config:H.A.metrics}],[{name:`groupby${t}`,config:H.A.groupby}],[{name:`adhoc_filters${t}`,config:H.A.adhoc_filters}],[{name:`limit${t}`,config:H.A.limit}],[{name:`timeseries_limit_metric${t}`,config:H.A.timeseries_limit_metric}],[{name:`order_desc${t}`,config:{type:"CheckboxControl",label:(0,s.t)("Sort Descending"),default:Cc,description:(0,s.t)("Whether to sort descending or ascending")}}],[{name:`row_limit${t}`,config:{...H.A.row_limit,default:Tc}}],[{name:`truncate_metric${t}`,config:{...H.A.truncate_metric,default:H.A.truncate_metric.default}}]]}}function Oc(e,t){return[[(0,fe.Y)(be.y,{children:e})],[{name:`seriesType${t}`,config:{type:"SelectControl",label:(0,s.t)("Series type"),renderTrigger:!0,default:Ac,choices:[[pi.y.Line,(0,s.t)("Line")],[pi.y.Scatter,(0,s.t)("Scatter")],[pi.y.Smooth,(0,s.t)("Smooth Line")],[pi.y.Bar,(0,s.t)("Bar")],[pi.y.Start,(0,s.t)("Step - start")],[pi.y.Middle,(0,s.t)("Step - middle")],[pi.y.End,(0,s.t)("Step - end")]],description:(0,s.t)("Series chart type (line, bar etc)")}}],[{name:`stack${t}`,config:{type:"CheckboxControl",label:(0,s.t)("Stack series"),renderTrigger:!0,default:Fc,description:(0,s.t)("Stack series on top of each other")}}],[{name:`area${t}`,config:{type:"CheckboxControl",label:(0,s.t)("Area chart"),renderTrigger:!0,default:yc,description:(0,s.t)("Draw area under curves. Only applicable for line types.")}}],[{name:`show_value${t}`,config:{type:"CheckboxControl",label:(0,s.t)("Show Values"),renderTrigger:!0,default:kc,description:(0,s.t)("Whether to display the numerical values within the cells")}}],[{name:`only_total${t}`,config:{type:"CheckboxControl",label:(0,s.t)("Only Total"),default:!0,renderTrigger:!0,description:(0,s.t)("Only show the total value on the stacked chart, and not show on the selected category"),visibility:({controls:e})=>{var t,o;return Boolean(null==e||null==(t=e.show_value)?void 0:t.value)&&Boolean(null==e||null==(o=e.stack)?void 0:o.value)}}}],[{name:`opacity${t}`,config:{type:"SliderControl",label:(0,s.t)("Opacity"),renderTrigger:!0,min:0,max:1,step:.1,default:wc,description:(0,s.t)("Opacity of area chart.")}}],[{name:`markerEnabled${t}`,config:{type:"CheckboxControl",label:(0,s.t)("Marker"),renderTrigger:!0,default:xc,description:(0,s.t)("Draw a marker on data points. Only applicable for line types.")}}],[{name:`markerSize${t}`,config:{type:"SliderControl",label:(0,s.t)("Marker size"),renderTrigger:!0,min:0,max:100,default:_c,description:(0,s.t)("Size of marker. Also applies to forecast observations.")}}],[{name:`yAxisIndex${t}`,config:{type:"SelectControl",label:(0,s.t)("Y Axis"),choices:[[0,(0,s.t)("Primary")],[1,(0,s.t)("Secondary")]],default:Lc,clearable:!1,renderTrigger:!0,description:(0,s.t)("Primary or secondary y-axis")}}],[(0,fe.Y)(be.y,{children:(0,s.t)("Series Order")})],[{name:`sort_series_type${t}`,config:{type:"SelectControl",freeForm:!1,label:(0,s.t)("Sort Series By"),choices:yt.Ow,default:yt.Kd.sort_series_type,renderTrigger:!0,description:(0,s.t)("Based on what should series be ordered on the chart and legend")}}],[{name:`sort_series_ascending${t}`,config:{type:"CheckboxControl",label:(0,s.t)("Sort Series Ascending"),default:yt.Kd.sort_series_ascending,renderTrigger:!0,description:(0,s.t)("Sort series in ascending order")}}]]}function Rc(e,t){const o=fc()(Pe.sections.advancedAnalyticsControls);return o.label=e,t?(o.controlSetRows.forEach((e=>e.forEach((e=>{null!=e&&e.name&&(e.name=`${e.name}${t}`)})))),o):o}const Bc={controlPanelSections:[{label:(0,s.t)("Shared query fields"),expanded:!0,controlSetRows:[["x_axis"],["time_grain_sqla"]]},Dc((0,s.t)("Query A"),""),Rc((0,s.t)("Advanced analytics Query A"),""),Dc((0,s.t)("Query B"),"_b"),Rc((0,s.t)("Advanced analytics Query B"),"_b"),Pe.sections.annotationsAndLayersControls,Pe.sections.titleControls,{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],["time_shift_color"],...Oc((0,s.t)("Query A"),""),...Oc((0,s.t)("Query B"),"B"),["zoomable"],[hl],...Ui,[(0,fe.Y)(be.y,{children:(0,s.t)("X Axis")})],["x_axis_time_format"],[cl],[dl],[(0,fe.Y)(be.y,{children:(0,s.t)("Tooltip")})],[{name:"show_query_identifiers",config:{type:"CheckboxControl",label:(0,s.t)("Show query identifiers"),description:(0,s.t)("Add Query A and Query B identifiers to tooltips to help differentiate series"),default:!1,renderTrigger:!0}}],...il.slice(1),[(0,fe.Y)(be.y,{children:(0,s.t)("Y Axis")})],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,s.t)("Minor Split Line"),renderTrigger:!0,default:Sc,description:(0,s.t)("Draw split lines for minor y-axis ticks")}}],[ml],[pl],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,s.t)("Truncate Y Axis"),default:Mc,renderTrigger:!0,description:(0,s.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,s.t)("Primary y-axis Bounds"),renderTrigger:!0,default:Pc,description:(0,s.t)("Bounds for the primary Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent.")}}],[{name:"y_axis_format",config:{...H.A.y_axis_format,label:(0,s.t)("Primary y-axis format")}}],["currency_format"],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,s.t)("Logarithmic y-axis"),renderTrigger:!0,default:vc,description:(0,s.t)("Logarithmic scale on primary y-axis")}}],[{name:"y_axis_bounds_secondary",config:{type:"BoundsControl",label:(0,s.t)("Secondary y-axis Bounds"),renderTrigger:!0,default:Pc,description:(0,s.t)("Bounds for the secondary Y-axis. Only works when Independent Y-axis\n                bounds are enabled. When left empty, the bounds are dynamically defined\n                based on the min/max of the data. Note that this feature will only expand\n                the axis range. It won't narrow the data's extent.")}}],[{name:"y_axis_format_secondary",config:{...H.A.y_axis_format,label:(0,s.t)("Secondary y-axis format")}}],[{name:"currency_format_secondary",config:{...H.A.currency_format,label:(0,s.t)("Secondary currency format")}}],[{name:"yAxisTitleSecondary",config:{type:"TextControl",label:(0,s.t)("Secondary y-axis title"),renderTrigger:!0,default:"",description:(0,s.t)("Logarithmic y-axis")}}],[{name:"logAxisSecondary",config:{type:"CheckboxControl",label:(0,s.t)("Logarithmic y-axis"),renderTrigger:!0,default:vc,description:(0,s.t)("Logarithmic scale on secondary y-axis")}}]]}],formDataOverrides:e=>{const t=(0,f.a)().controls.columns.filter((t=>!(0,T.A)(e.groupby_b).includes(t)));(0,f.a)().controls.columns=(0,f.a)().controls.columns.filter((e=>!t.includes(e)));const o=(0,f.a)().controls.metrics.filter((t=>!(0,T.A)(e.metrics_b).includes(t)));return(0,f.a)().controls.metrics=(0,f.a)().controls.metrics.filter((e=>!o.includes(e))),{...e,metrics:o,groupby:t}}};var Ic=o(40866),Nc=o.n(Ic),Ec=o(66925);const zc=(e,t={})=>{if("string"==typeof e)return t[e]||e;if(e.label)return e.label;if("SIMPLE"===e.expressionType){const o=e.column||{},r=o.column_name||"",a=o.verbose_name||r,n=e.aggregate||"";return t[r]?`${n}(${t[r]})`:`${n}(${a})`}return"SQL"===e.expressionType?e.sqlExpression||"Custom SQL Metric":"Unknown Metric"},jc=(e,t,o,r,a)=>{var n;return a?(0,d.gV)(",.0%"):null!=(n=(0,co.Em)(e,o,r))?n:t};function Vc(e){var t,o,r;const{width:a,height:n,formData:i,queriesData:l,hooks:s,filterState:c,datasource:u,theme:m,inContextMenu:p,emitCrossFilters:h,legendState:g}=e;let f=null;const{verboseMap:b={},currencyFormats:y={},columnFormats:v={}}=u,{label_map:x}=l[0],{label_map:_}=l[1],S=l[0].data||[],w=l[1].data||[],C=_i(e),A={...(0,ti.oi)(l[0]),...(0,ti.oi)(l[1])},{area:k,areaB:F,annotationLayers:M,colorScheme:P,timeShiftColor:L,contributionMode:D,legendOrientation:O,legendMargin:R,legendType:B,logAxis:I,logAxisSecondary:N,markerEnabled:E,markerEnabledB:z,markerSize:j,markerSizeB:V,opacity:$,opacityB:Y,minorSplitLine:G,minorTicks:q,seriesType:W,seriesTypeB:U,showLegend:H,showValue:Q,showValueB:J,onlyTotal:K,onlyTotalB:X,stack:Z,stackB:ee,truncateXAxis:te,truncateYAxis:oe,tooltipTimeFormat:re,yAxisFormat:ae,currencyFormat:ne,yAxisFormatSecondary:ie,currencyFormatSecondary:le,xAxisTimeFormat:se,yAxisBounds:ce,yAxisBoundsSecondary:de,yAxisIndex:ue,yAxisIndexB:me,yAxisTitleSecondary:pe,zoomable:he,richTooltip:ge,tooltipSortByMetric:fe,xAxisBounds:be,xAxisLabelRotation:ye,xAxisLabelInterval:ve,groupby:xe,groupbyB:_e,xAxis:Se,xAxisForceCategorical:we,xAxisTitle:Ce,yAxisTitle:Te,xAxisTitleMargin:Ae,yAxisTitleMargin:ke,yAxisTitlePosition:Fe,sliceId:Me,sortSeriesType:Pe,sortSeriesTypeB:Le,sortSeriesAscending:De,sortSeriesAscendingB:Oe,timeGrainSqla:Be,percentageThreshold:Ie,showQueryIdentifiers:Ne=!1,metrics:Ee=[],metricsB:ze=[]}={...bc,...i},je={},Ve=no.getScale(P);let Ye=(0,Cn.yj)(e.rawFormData);(0,St.eh)(null==(t=e.rawFormData)?void 0:t.x_axis)&&(0,ac.A)(b[Ye])&&(Ye=b[Ye]);const Ge=ui(S,b),{totalStackedValues:qe,thresholdValues:Ue}=(0,ti.Wt)(Ge,{stack:Z,percentageThreshold:Ie,xAxisCol:Ye}),He=zc(Ee[0],b),Qe=zc(ze[0],b),Je=(0,ti.oi)(l[0]),Ke=null!=(o=null==Je?void 0:Je[Ye])?o:null==Je?void 0:Je[Se],Xe=(0,ti.C$)(Z,we,Ke),[Ze,et]=(0,ti.vW)(Ge,{fillNeighborValue:Z?0:void 0,xAxis:Ye,sortSeriesType:Pe,sortSeriesAscending:De,stack:Z,totalStackedValues:qe,xAxisType:Xe}),tt=ui(w,b),{totalStackedValues:ot,thresholdValues:rt}=(0,ti.Wt)(tt,{stack:Boolean(ee),percentageThreshold:Ie,xAxisCol:Ye}),[at,nt]=(0,ti.vW)(tt,{fillNeighborValue:ee?0:void 0,xAxis:Ye,sortSeriesType:Le,sortSeriesAscending:Oe,stack:Boolean(ee),totalStackedValues:ot,xAxisType:Xe}),it=[],lt=D?(0,d.gV)(",.0%"):null!=ne&&ne.symbol?new We.A({d3Format:ae,currency:ne}):(0,d.gV)(ae),st=D?(0,d.gV)(",.0%"):null!=le&&le.symbol?new We.A({d3Format:ie,currency:le}):(0,d.gV)(ie),ct=(0,co.Xc)([...(0,T.A)(Ee),...(0,T.A)(ze)],y,v,ae,ne),dt=(0,co.Xc)([...(0,T.A)(Ee),...(0,T.A)(ze)],y,v,ie,le),ut=new Set,mt=new Set,pt=(e,t)=>{1===t?mt.add(e.id):ut.add(e.id)},ht=(0,ti.o$)(Ze,{stack:Z,onlyTotal:K}),gt=(0,ti.o$)(at,{stack:Z,onlyTotal:K});M.filter((e=>e.show)).forEach((e=>{(0,ni.Bg)(e)?it.push(Ci(e,S,Ye,Xe,Ve,Me)):(0,ni.Cv)(e)?it.push(...Ti(e,0,C,Ve,m,Me)):(0,ni.Tw)(e)?it.push(...Ai(e,0,C,Ve,m,Me)):(0,ni.No)(e)&&it.push(...ki(e,j,0,C,Ve,Me))}));const[ft,bt]=(be||[]).map(Ss);let[yt,vt]=(ce||[]).map(Ss),[xt,_t]=(de||[]).map(Ss);const wt=(0,T.A)(null==(r=e.rawFormData)?void 0:r.time_compare),Ct=Nc()(b);Ze.forEach((e=>{var t;const o=String(e.name||""),r=Ct[o]||o,a=(0,Ec.$5)(r,wt);let n;n=xe.length>0?`${Ne?`${He} (Query A)`:He}, ${o}`:Ne?`${o} (Query A)`:o;const i=jc(ct,lt,Ee,null==x||null==(t=x[r])?void 0:t[0],!!D),l=wi({...e,id:`${n||""}`,name:`${n||""}`},Ve,a,{area:k,markerEnabled:E,markerSize:j,areaOpacity:$,seriesType:W,showValue:Q,onlyTotal:K,stack:Boolean(Z),stackIdSuffix:"\na",yAxisIndex:ue,filterState:c,seriesKey:e.name,sliceId:Me,queryIndex:0,formatter:W===pi.y.Bar?(0,ti.LF)({max:vt,formatter:i}):i,totalStackedValues:et,showValueIndexes:ht,thresholdValues:Ue,timeShiftColor:L,theme:m});l&&(it.push(l),pt(l,ue))})),at.forEach((e=>{var t;const o=String(e.name||""),r=Ct[o]||o,a=`${r} (1)`,n=(0,Ec.$5)(r,wt);let i;i=_e.length>0?`${Ne?`${Qe} (Query B)`:Qe}, ${o}`:Ne?`${o} (Query B)`:o;const l=jc(dt,st,ze,null==_||null==(t=_[a])?void 0:t[0],!!D),s=wi({...e,id:`${i||""}`,name:`${i||""}`},Ve,n,{area:F,markerEnabled:z,markerSize:V,areaOpacity:Y,seriesType:U,showValue:J,onlyTotal:X,stack:Boolean(ee),stackIdSuffix:"\nb",yAxisIndex:me,filterState:c,seriesKey:e.name,sliceId:Me,queryIndex:1,formatter:U===pi.y.Bar?(0,ti.LF)({max:_t,formatter:l}):l,totalStackedValues:nt,showValueIndexes:gt,thresholdValues:rt,timeShiftColor:L,theme:m});s&&(it.push(s),pt(s,me))})),"row"===D&&Z&&(void 0===yt&&(yt=0),void 0===vt&&(vt=1),void 0===xt&&(xt=0),void 0===_t&&(_t=1));const Tt=Ke===$e.s.Temporal?Rl(re):String,At=Ke===$e.s.Temporal?Bl(se):String,kt=Fi(H,O,!(!Te&&!pe),he,R,!!Ce,Fe,oi(ke),oi(Ae)),{setDataMask:Ft=()=>{},onContextMenu:Mt}=s,Pt=ue!==me;return{formData:i,width:a,height:n,echartOptions:{useUTC:!0,grid:{...ri.Ox,...kt},xAxis:{type:Xe,name:Ce,nameGap:oi(Ae),nameLocation:"middle",axisLabel:{formatter:At,rotate:ye,interval:ve},minorTick:{show:q},minInterval:Xe===Re.Gw.Time&&Be?kn.iP[Be]:0,...(0,ti.pG)(Xe,te,ft,bt,W===pi.y.Bar||U===pi.y.Bar?pi.y.Bar:void 0)},yAxis:[{...ri.SG,type:I?"log":"value",min:yt,max:vt,minorTick:{show:q},minorSplitLine:{show:G},axisLabel:{formatter:Ol(Ee,!!D,ct,lt,ae)},scale:oe,name:Te,nameGap:oi(ke),nameLocation:"Left"===Fe?"middle":"end",alignTicks:Pt},{...ri.SG,type:N?"log":"value",min:xt,max:_t,minorTick:{show:q},splitLine:{show:!1},minorSplitLine:{show:G},axisLabel:{formatter:Ol(ze,!!D,dt,st,ie)},scale:oe,name:pe,alignTicks:Pt}],tooltip:{...Fn(je),show:!p,trigger:ge?"axis":"item",formatter:e=>{const t=ge?e[0].value[0]:e.value[0],o=ge?e:[e],r=(0,ti.RQ)(o,1,ge,fe),a=[],n=ci(o),i=Object.keys(n);let l;return r.filter((e=>i.includes(e))).forEach((e=>{const t=n[e];let o;var r,i;o=ut.has(e)?0===xe.length?Ct[e]:null==(r=x[e])?void 0:r[0]:0===_e.length?Ct[e]:null==(i=_[e])?void 0:i[0];const s=jc(ct,lt,Ee,o,!!D),c=jc(dt,st,ze,o,!!D),d=di({...t,seriesName:e,formatter:ut.has(e)?s:c});a.push(d),e===f&&(l=a.length-1)})),(0,Tn.L)(a,Tt(t),l)}},legend:{...(0,ti.g1)(B,O,H,m,he,g,kt),data:it.filter((e=>si(e.name||"").type===zn.OW.Observation)).map((e=>e.id||e.name||"")).concat(xi(M))},series:(0,ti.Kf)(mi(it)),toolbox:{show:he,top:kn.TM.toolboxTop,right:kn.TM.toolboxRight,feature:{dataZoom:{yAxisIndex:!1,title:{zoom:"zoom area",back:"restore zoom"}}}},dataZoom:he?[{type:"slider",start:kn.TM.dataZoomStart,end:kn.TM.dataZoomEnd,bottom:kn.TM.zoomBottom}]:[]},setDataMask:Ft,emitCrossFilters:h,labelMap:x,labelMapB:_,groupby:xe,groupbyB:_e,seriesBreakdown:Ze.length,selectedValues:c.selectedValues||[],onContextMenu:Mt,onFocusedSeries:e=>{f=e},xValueFormatter:Tt,xAxis:{label:Ye,type:Xe},refs:je,coltypeMapping:A}}var $c=o(26640);const Yc=o.p+"example.661644db.jpg";class Gc extends zn.Qh{constructor(){super({buildQuery:hc,controlPanel:Bc,loadChart:()=>Promise.all([o.e(4735),o.e(4556)]).then(o.bind(o,34556)),metadata:{behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],category:(0,s.t)("Evolution"),credits:["https://echarts.apache.org"],description:(0,s.t)("Visualize two different series using the same x-axis. Note that both series can be visualized with a different chart type (e.g. 1 using bars and 1 using a line)."),supportedAnnotationTypes:[ni.UJ.Event,ni.UJ.Formula,ni.UJ.Interval,ni.UJ.Timeseries],exampleGallery:[{url:Yc}],name:(0,s.t)("Mixed Chart"),thumbnail:$c,tags:[(0,s.t)("Advanced-Analytics"),(0,s.t)("ECharts"),(0,s.t)("Line"),(0,s.t)("Multi-Variables"),(0,s.t)("Time"),(0,s.t)("Transformable"),(0,s.t)("Featured")],queryObjectCount:2},transformProps:Vc})}}const qc=e=>`${e}__contribution`;function Wc(e){const{metric:t,sort_by_metric:o}=e,r=(0,Ge.A)(t);return(0,Et.A)(e,(e=>[{...e,...o&&{orderby:[[t,!1]]},post_processing:[{operation:"contribution",options:{columns:[r],rename_columns:[qc(r)]}}]}]))}var Uc;!function(e){e.Key="key",e.Value="value",e.Percent="percent",e.KeyValue="key_value",e.KeyPercent="key_percent",e.KeyValuePercent="key_value_percent",e.ValuePercent="value_percent",e.Template="template"}(Uc||(Uc={}));const Hc={...kn.I,donut:!1,groupby:[],innerRadius:30,labelLine:!1,labelType:Uc.Key,legendOrientation:zn.go.Top,legendType:zn.a_.Scroll,numberFormat:"SMART_NUMBER",outerRadius:70,showLabels:!0,labelsOutside:!0,showLabelsThreshold:5,dateFormat:"smart_date",roseType:null,thresholdForOther:0},{donut:Qc,innerRadius:Jc,labelsOutside:Kc,labelType:Xc,labelLine:Zc,outerRadius:ed,numberFormat:td,showLabels:od,roseType:rd}=Hc,ad={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["groupby"],["metric"],["adhoc_filters"],["row_limit"],[{name:"sort_by_metric",config:{...H.A.sort_by_metric,default:!0}}]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[{name:"show_labels_threshold",config:{type:"TextControl",label:(0,s.t)("Percentage threshold"),renderTrigger:!0,isFloat:!0,default:5,description:(0,s.t)("Minimum threshold in percentage points for showing labels.")}}],[{name:"threshold_for_other",config:{type:"NumberControl",label:(0,s.t)("Threshold for Other"),min:0,step:.5,max:100,default:0,renderTrigger:!0,description:(0,s.t)("Values less than this percentage will be grouped into the Other category.")}}],[{name:"roseType",config:{type:"SelectControl",label:(0,s.t)("Rose Type"),default:rd,renderTrigger:!0,choices:[["area",(0,s.t)("Area")],["radius",(0,s.t)("Radius")],[null,(0,s.t)("None")]],description:(0,s.t)("Whether to show as Nightingale chart.")}}],...Ui,[(0,fe.Y)(be.y,{children:(0,s.t)("Labels")})],[{name:"label_type",config:{type:"SelectControl",label:(0,s.t)("Label Type"),default:Xc,renderTrigger:!0,choices:[["key",(0,s.t)("Category Name")],["value",(0,s.t)("Value")],["percent",(0,s.t)("Percentage")],["key_value",(0,s.t)("Category and Value")],["key_percent",(0,s.t)("Category and Percentage")],["key_value_percent",(0,s.t)("Category, Value and Percentage")],["value_percent",(0,s.t)("Value and Percentage")],["template",(0,s.t)("Template")]],description:(0,s.t)("What should be shown on the label?")}}],[{name:"label_template",config:{type:"TextControl",label:(0,s.t)("Label Template"),renderTrigger:!0,description:(0,s.t)("Format data labels. Use variables: {name}, {value}, {percent}. \\n represents a new line. ECharts compatibility:\n{a} (series), {b} (name), {c} (value), {d} (percentage)"),visibility:({controls:e})=>{var t;return"template"===(null==e||null==(t=e.label_type)?void 0:t.value)}}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Number format"),renderTrigger:!0,default:td,choices:g.Bb,description:`${g.YH} ${g.s1}`,tokenSeparators:["\n","\t",";"]}}],["currency_format"],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Date format"),renderTrigger:!0,choices:g.lR,default:"smart_date",description:g.YH}}],[{name:"show_labels",config:{type:"CheckboxControl",label:(0,s.t)("Show Labels"),renderTrigger:!0,default:od,description:(0,s.t)("Whether to display the labels.")}}],[{name:"labels_outside",config:{type:"CheckboxControl",label:(0,s.t)("Put labels outside"),default:Kc,renderTrigger:!0,description:(0,s.t)("Put the labels outside of the pie?"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.show_labels)?void 0:t.value)}}}],[{name:"label_line",config:{type:"CheckboxControl",label:(0,s.t)("Label Line"),default:Zc,renderTrigger:!0,description:(0,s.t)("Draw line from Pie to label when labels outside?"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.show_labels)?void 0:t.value)}}}],[{name:"show_total",config:{type:"CheckboxControl",label:(0,s.t)("Show Total"),default:!1,renderTrigger:!0,description:(0,s.t)("Whether to display the aggregate count")}}],[(0,fe.Y)(be.y,{children:(0,s.t)("Pie shape")})],[{name:"outerRadius",config:{type:"SliderControl",label:(0,s.t)("Outer Radius"),renderTrigger:!0,min:10,max:100,step:1,default:ed,description:(0,s.t)("Outer edge of Pie chart")}}],[{name:"donut",config:{type:"CheckboxControl",label:(0,s.t)("Donut"),default:Qc,renderTrigger:!0,description:(0,s.t)("Do you want a donut or a pie?")}}],[{name:"innerRadius",config:{type:"SliderControl",label:(0,s.t)("Inner Radius"),renderTrigger:!0,min:0,max:100,step:1,default:Jc,description:(0,s.t)("Inner radius of donut hole"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.donut)?void 0:t.value)}}}]]}],controlOverrides:{series:{validators:[C.A],clearable:!1},row_limit:{default:100}},formDataOverrides:e=>({...e,metric:(0,f.a)().shiftMetric(),groupby:(0,f.a)().popAllColumns(),row_limit:(0,nc.A)(e.row_limit,100)>=100?100:e.row_limit})},nd=ad,id=(0,d.gV)(je.A.PERCENT_2_POINT);function ld({params:e,numberFormatter:t,sanitizeName:o=!1}){const{name:r="",value:a,percent:n}=e;return[o?(0,ti.pn)(r):r,t(a),id(n/100)]}function sd({chartPadding:e,donut:t,width:o,height:r}){const a={top:t?"middle":"0",left:"center"};if(e.top&&(a.top=t?50+e.top/r/2*100+"%":e.top/r*100+"%"),e.bottom&&(a.top=t?50-e.bottom/r/2*100+"%":"0"),e.left){const t=50+e.left/o*100*.25;a.left=`${t}%`}if(e.right){const t=50-e.right/o*100*.75;a.left=`${t}%`}return a}function cd(e){const{formData:t,height:o,hooks:r,filterState:a,queriesData:n,width:i,theme:l,inContextMenu:c,emitCrossFilters:d,datasource:m}=e,{columnFormats:p={},currencyFormats:h={}}=m,{data:g=[]}=n[0],f=(0,ti.oi)(n[0]),{colorScheme:b,donut:y,groupby:v,innerRadius:x,labelsOutside:_,labelLine:S,labelType:w,labelTemplate:C,legendMargin:T,legendOrientation:A,legendType:k,metric:F="",numberFormat:M,currencyFormat:P,dateFormat:L,outerRadius:D,showLabels:O,showLegend:R,showLabelsThreshold:B,sliceId:I,showTotal:N,roseType:E,thresholdForOther:z}={...kn.I,...Hc,...t},j={},V=(0,Ge.A)(F),$=qc(V),Y=v.map(Wt.A),G=3.6*(B||0),q=(0,co.gC)(F,h,p,M,P);let W=g;const U=[],H=[];let Q=null,J=0;if(z){let e=0;W=W.filter((t=>{const o=t[$];return!o||100*o>=z||(J+=t[V],e+=o,U.push(t),H.push([(0,ti.YC)({datum:t,groupby:Y,coltypeMapping:f,timeFormatter:(0,u.mo)(L)}),q(t[V]),id(o)]),!1)}));const t=(0,s.t)("Other");H.push([(0,s.t)("Total"),q(J),id(e)]),J&&(Q={name:t,value:J,itemStyle:{color:l.colorText,opacity:a.selectedValues&&!a.selectedValues.includes(t)?kn.hD.SemiTransparent:kn.hD.NonTransparent},isOther:!0})}const K=W.reduce(((e,t)=>{const o=(0,ti.YC)({datum:t,groupby:Y,coltypeMapping:f,timeFormatter:(0,u.mo)(L)});return{...e,[o]:Y.map((e=>t[e]))}}),{}),{setDataMask:X=()=>{},onContextMenu:Z}=r,ee=no.getScale(b);let te=0;const oe=W.map((e=>{const t=(0,ti.YC)({datum:e,groupby:Y,coltypeMapping:f,timeFormatter:(0,u.mo)(L)}),o=a.selectedValues&&!a.selectedValues.includes(t),r=e[V];return"number"!=typeof r&&"string"!=typeof r||(te+=oi(r)),{value:r,name:t,itemStyle:{color:ee(t,I),opacity:o?kn.hD.SemiTransparent:kn.hD.NonTransparent}}}));Q&&(oe.push(Q),te+=J);const re=(a.selectedValues||[]).reduce(((e,t)=>{const o=oe.findIndex((({name:e})=>e===t));return{...e,[o]:t}}),{}),ae={formatter:e=>{const[t,o,r]=ld({params:e,numberFormatter:q});switch(w){case Uc.Key:return t;case Uc.Value:return o;case Uc.Percent:return r;case Uc.KeyValue:return`${t}: ${o}`;case Uc.KeyValuePercent:return`${t}: ${o} (${r})`;case Uc.KeyPercent:return`${t}: ${r}`;case Uc.ValuePercent:return`${o} (${r})`;case Uc.Template:return C?((e,t,o)=>{const r={"{name}":t.name,"{value}":t.value,"{percent}":t.percent,"{a}":o.seriesName||"","{b}":o.name,"{c}":`${o.value}`,"{d}":`${o.percent}`,"\\n":"\n"};return Object.entries(r).reduce(((e,[t,o])=>e.replaceAll(t,o)),e)})(C,{name:t,value:o,percent:r},e):"";default:return t}},show:O,color:l.colorText},ne=(0,ti.yX)(R,A,T),ie=[{type:"pie",...ne,animation:!1,roseType:E||void 0,radius:[`${y?x:0}%`,`${D}%`],center:["50%","50%"],avoidLabelOverlap:!0,labelLine:_&&S?{show:!0}:{show:!1},minShowLabelAngle:G,label:_?{...ae,position:"outer",alignTo:"none",bleedMargin:5}:{...ae,position:"inner"},emphasis:{label:{show:!0,fontWeight:"bold",backgroundColor:l.colorBgContainer}},data:oe}];return{formData:t,width:i,height:o,echartOptions:{grid:{...ri.Ox},tooltip:{...Fn(j),show:!c,trigger:"item",formatter:e=>{var t;const[o,r,a]=ld({params:e,numberFormatter:q,sanitizeName:!0});return null!=e&&null!=(t=e.data)&&t.isOther?(0,Tn.L)(H,o):(0,Tn.L)([[V,r,a]],o)}},legend:{...(0,ti.g1)(k,A,R,l),data:oe.map((e=>e.name))},graphic:N?{type:"text",...sd({chartPadding:ne,donut:y,width:i,height:o}),style:{text:(0,s.t)("Total: %s",q(te)),fontSize:16,fontWeight:"bold",fill:l.colorText},z:10}:null,series:ie},setDataMask:X,labelMap:K,groupby:v,selectedValues:re,onContextMenu:Z,refs:j,emitCrossFilters:d,coltypeMapping:f}}var dd=o(52765);const ud=o.p+"Pie1.2cbe969f.jpg",md=o.p+"Pie2.42fece24.jpg",pd=o.p+"Pie3.8c46d429.jpg",hd=o.p+"Pie4.8bdccf82.jpg";class gd extends zn.Qh{constructor(){super({buildQuery:Wc,controlPanel:nd,loadChart:()=>Promise.all([o.e(4735),o.e(4514)]).then(o.bind(o,54514)),metadata:{behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],category:(0,s.t)("Part of a Whole"),credits:["https://echarts.apache.org"],description:(0,s.t)("The classic. Great for showing how much of a company each investor gets, what demographics follow your blog, or what portion of the budget goes to the military industrial complex.\n\n        Pie charts can be difficult to interpret precisely. If clarity of relative proportion is important, consider using a bar or other chart type instead."),exampleGallery:[{url:ud},{url:md},{url:pd},{url:hd}],name:(0,s.t)("Pie Chart"),tags:[(0,s.t)("Categorical"),(0,s.t)("Circular"),(0,s.t)("Comparison"),(0,s.t)("Percentages"),(0,s.t)("Featured"),(0,s.t)("Proportional"),(0,s.t)("ECharts"),(0,s.t)("Nightingale")],thumbnail:dd},transformProps:cd})}}var fd=o(34161),bd=o(99539),yd=o(9797),vd=o(34443);function xd(e){const{groupby:t}=e;return(0,Et.A)(e,(o=>{const r=(0,fd.d)(e),a=(0,jt.f)(e,o)?(0,mc.v)(e,o):(0,Ln.L)(e,o),n=[...(0,Cn.aj)(e)?(0,T.A)((0,Cn.Od)(e)):[],...(0,T.A)(t)],i=(0,jt.f)(e,o)?e.time_compare:[];return[{...o,metrics:[...o.metrics||[],...r],columns:n,series_columns:t,...(0,Cn.aj)(e)?{}:{is_timeseries:!0},orderby:(0,uc.A)(o).orderby,time_offsets:i,post_processing:[a,(0,Dn.q)(e,o),(0,Vt.t)(e,o),(0,On.M)(e,o),(0,pc.Z)(e,o),(0,bd.X)(e,o,i),(0,yd.N)(e,o),(0,Rn.P)(e,o),(0,vd.p)(e,o)]}]}))}const{logAxis:_d,markerEnabled:Sd,markerSize:wd,minorSplitLine:Cd,opacity:Td,rowLimit:Ad,seriesType:kd,truncateYAxis:Fd,yAxisBounds:Md}=Ni,Pd={controlPanelSections:[Pe.sections.echartsTimeSeriesQueryWithXAxisSort,Pe.sections.advancedAnalyticsControls,Pe.sections.annotationsAndLayersControls,Pe.sections.forecastIntervalControls,Pe.sections.titleControls,{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[...ul,["color_scheme"],["time_shift_color"],[{name:"seriesType",config:{type:"SelectControl",label:(0,s.t)("Series Style"),renderTrigger:!0,default:kd,choices:[[pi.y.Line,(0,s.t)("Line")],[pi.y.Smooth,(0,s.t)("Smooth Line")],[pi.y.Start,(0,s.t)("Step - start")],[pi.y.Middle,(0,s.t)("Step - middle")],[pi.y.End,(0,s.t)("Step - end")]],description:(0,s.t)("Series chart type (line, bar etc)")}}],[{name:"opacity",config:{type:"SliderControl",label:(0,s.t)("Area chart opacity"),renderTrigger:!0,min:0,max:1,step:.1,default:Td,description:(0,s.t)("Opacity of Area Chart. Also applies to confidence band.")}}],[Hi],[{name:"stack",config:{type:"SelectControl",label:(0,s.t)("Stacked Style"),renderTrigger:!0,choices:kn.RC,default:null,description:(0,s.t)("Stack series on top of each other")}}],[Ji],[Ki],[{name:"show_extra_controls",config:{type:"CheckboxControl",label:(0,s.t)("Extra Controls"),renderTrigger:!0,default:!1,description:(0,s.t)("Whether to show extra controls or not. Extra controls include things like making multiBar charts stacked or side by side.")}}],[{name:"markerEnabled",config:{type:"CheckboxControl",label:(0,s.t)("Marker"),renderTrigger:!0,default:Sd,description:(0,s.t)("Draw a marker on data points. Only applicable for line types.")}}],[{name:"markerSize",config:{type:"SliderControl",label:(0,s.t)("Marker Size"),renderTrigger:!0,min:0,max:20,default:wd,description:(0,s.t)("Size of marker. Also applies to forecast observations."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.markerEnabled)?void 0:t.value)}}}],[hl],["zoomable"],...Ui,[(0,fe.Y)(be.y,{children:(0,s.t)("X Axis")})],[{name:"x_axis_time_format",config:{...H.A.x_axis_time_format,default:"smart_date",description:`${g.gb}. ${Ei}`}}],[cl],[dl],...il,[(0,fe.Y)(be.y,{children:(0,s.t)("Y Axis")})],["y_axis_format"],["currency_format"],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,s.t)("Logarithmic y-axis"),renderTrigger:!0,default:_d,description:(0,s.t)("Logarithmic y-axis")}}],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,s.t)("Minor Split Line"),renderTrigger:!0,default:Cd,description:(0,s.t)("Draw split lines for minor y-axis ticks")}}],[ml],[pl],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,s.t)("Truncate Y Axis"),default:Fd,renderTrigger:!0,description:(0,s.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,s.t)("Y Axis Bounds"),renderTrigger:!0,default:Md,description:(0,s.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.truncateYAxis)?void 0:t.value)}}}]]}],controlOverrides:{row_limit:{default:Ad}},formDataOverrides:e=>({...e,metrics:(0,f.a)().popAllMetrics(),groupby:(0,f.a)().popAllColumns()})},Ld=Pd;var Dd=o(79895);function Od(e){var t,o,r;const{width:a,height:n,filterState:i,legendState:l,formData:c,hooks:u,queriesData:m,datasource:p,theme:h,inContextMenu:g,emitCrossFilters:f,legendIndex:b}=e;let y=null;const{verboseMap:v={},columnFormats:x={},currencyFormats:_={}}=p,[S]=m,{data:w=[],label_map:C={}}=S,A=(0,ti.oi)(S),k=_i(e),{area:F,annotationLayers:M,colorScheme:P,contributionMode:L,forecastEnabled:D,groupby:O,legendOrientation:R,legendType:B,legendMargin:I,logAxis:N,markerEnabled:E,markerSize:z,metrics:j,minorSplitLine:V,minorTicks:$,onlyTotal:Y,opacity:G,orientation:q,percentageThreshold:W,richTooltip:U,seriesType:H,showLegend:Q,showValue:J,sliceId:K,sortSeriesType:X,sortSeriesAscending:Z,timeGrainSqla:ee,timeCompare:te,timeShiftColor:oe,stack:re,tooltipTimeFormat:ae,tooltipSortByMetric:ne,showTooltipTotal:ie,showTooltipPercentage:le,truncateXAxis:se,truncateYAxis:ce,xAxis:de,xAxisBounds:ue,xAxisForceCategorical:me,xAxisLabelRotation:pe,xAxisLabelInterval:he,xAxisSort:ge,xAxisSortAsc:fe,xAxisTimeFormat:be,xAxisTitle:ye,xAxisTitleMargin:ve,yAxisBounds:xe,yAxisFormat:_e,currencyFormat:Se,yAxisTitle:we,yAxisTitleMargin:Ce,yAxisTitlePosition:Te,zoomable:Ae,stackDimension:ke}={...Ni,...c},Fe={},Me=(0,T.A)(O),Pe=Object.entries(C).reduce(((e,t)=>(t[1].length>Me.length&&Array.isArray(te)&&te.includes(t[1][0])&&t[1].shift(),{...e,[t[0]]:t[1]})),{}),Le=no.getScale(P),De=ui(w,v);let Oe=(0,Cn.yj)(e.rawFormData);(0,St.eh)(null==(t=e.rawFormData)?void 0:t.x_axis)&&(0,ac.A)(v[Oe])&&(Oe=v[Oe]);const Be=q===pi.l.Horizontal,{totalStackedValues:Ie,thresholdValues:Ne}=(0,ti.Wt)(De,{stack:re,percentageThreshold:W,xAxisCol:Oe,legendState:l}),Ee=(0,fd.d)(e.rawFormData).map(Ge.A),ze=Me.length||(null==j?void 0:j.length)>1,Ve=null!=(o=null==A?void 0:A[Oe])?o:null==A?void 0:A[de],Ye=(0,ti.C$)(re,me,Ve),[qe,Ue,He]=(0,ti.vW)(De,{fillNeighborValue:re&&!D?0:void 0,xAxis:Oe,extraMetricLabels:Ee,stack:re,totalStackedValues:Ie,isHorizontal:Be,sortSeriesType:X,sortSeriesAscending:Z,xAxisSortSeries:ze?ge:void 0,xAxisSortSeriesAscending:ze?fe:void 0,xAxisType:Ye}),Qe=(0,ti.o$)(qe,{stack:re,onlyTotal:Y,isHorizontal:Be,legendState:l}),Je=(Ke=qe.map((e=>e.name)),Ke.reduce(((e,t)=>{const o=si(t),r=e[o.name]||[];return r.push(o.type),{...e,[o.name]:r}}),{}));var Ke;const Xe=re===kn.ad.Expand,Ze=[],et=Boolean(L||Xe),tt=Dl(et?_e:je.A.PERCENT_2_POINT),ot=null!=Se&&Se.symbol?new We.A({d3Format:_e,currency:Se}):(0,d.gV)(_e),rt=(0,co.Xc)(j,_,x,_e,Se),at=(0,T.A)(null==(r=e.rawFormData)?void 0:r.time_compare),nt=Nc()(v);let it=0;if(qe.forEach((t=>{var o,r;const a=(0,Dd.$)(t,e.rawFormData),n={};a&&(it+=1,n.type=[it%5+1,it%3+1],n.opacity=kn.hD.DerivedSeries);const s=String(t.name||""),c=nt[s]||s;let d=(0,Ec.$5)(c,at);if(at&&at.includes(c)){const e=qe.find((e=>{const t=nt[String(e.name||"")]||String(e.name||"");return!at.includes(t)}));if(e){const t=nt[String(e.name||"")]||String(e.name||"");d=(0,Ec.$5)(t,at)}}const u=wi(t,Le,d,{area:F,connectNulls:a,filterState:i,seriesContexts:Je,markerEnabled:E,markerSize:z,areaOpacity:G,seriesType:H,legendState:l,stack:re,formatter:et?tt:null!=(o=(0,co.Em)(rt,j,null==Pe||null==(r=Pe[c])?void 0:r[0]))?o:ot,showValue:J,onlyTotal:Y,totalStackedValues:Ue,showValueIndexes:Qe,thresholdValues:Ne,richTooltip:U,sliceId:K,isHorizontal:Be,lineStyle:n,timeCompare:at,timeShiftColor:oe,theme:h});u&&(re===kn.ad.Stream?Ze.push({...u,data:u.data.map((e=>{var t;return[e[0],null!=(t=e[1])?t:0]}))}):Ze.push(u))})),re===kn.ad.Stream){const e=((e,t)=>{const o=e[0].length,r=new Array(o).fill([0,0]),a=e=>null!=e?e:0;for(let t=0;t<o;t+=1){let o=0,n=0;for(let r=0;r<e.length;r+=1){const i=t>0?a(e[r][t][1])-a(e[r][t-1][1]):a(e[r][t][1]);let l=0;for(let o=1;o<r-1;o+=1)l+=t>0?a(e[o][t][1])-a(e[o][t-1][1]):a(e[o][t][1]);n+=(.5*i+l)*a(e[r][t][1]),o+=a(e[r][t][1])}r[t]=[e[0][t][0],-n/o]}return{data:r.reduce(((e,t,o)=>(0===o?e.push(t):e.push([t[0],e[o-1][1]+t[1]]),e)),[]),name:"baseline",stack:"obs",stackStrategy:"all",type:"line",lineStyle:{opacity:0},tooltip:{show:!1},silent:!0,showSymbol:!1,areaStyle:{opacity:0},step:[pi.y.Start,pi.y.Middle,pi.y.End].includes(t)?t:void 0,smooth:t===pi.y.Smooth}})(Ze.map((e=>e.data)),H);Ze.unshift(e)}const lt=(i.selectedValues||[]).reduce(((e,t)=>{const o=Ze.findIndex((({name:e})=>e===t));return{...e,[o]:t}}),{});if(M.filter((e=>e.show)).forEach((e=>{(0,ni.Bg)(e)?Ze.push(Ci(e,w,Oe,Ye,Le,K,q)):(0,ni.Cv)(e)?Ze.push(...Ti(e,0,k,Le,h,K,q)):(0,ni.Tw)(e)?Ze.push(...Ai(e,0,k,Le,h,K,q)):(0,ni.No)(e)&&Ze.push(...ki(e,z,0,k,Le,K,q))})),re===kn.ad.Stack&&ke&&e.rawFormData.groupby){const t=c.metrics.length>1?1:0+e.rawFormData.groupby.indexOf(ke);for(const e of Ze)if(e.id){const o=Pe[e.id];e.stack=o[t]}}const[st,ct]=(ue||[]).map(Ss);let[dt,ut]=(xe||[]).map(Ss);("row"===L||Xe)&&re?(void 0===dt&&(dt=0),void 0===ut&&(ut=1)):N&&void 0===dt&&void 0!==He&&(dt=(0,ti.NZ)(He));const mt=Ve===$e.s.Temporal?Rl(ae):String,pt=Ve===$e.s.Temporal?Bl(be):String,{setDataMask:ht=()=>{},setControlValue:gt=()=>{},onContextMenu:ft,onLegendStateChanged:bt,onLegendScroll:yt}=u,vt=Fi(Q,R,!!we,Ae,I,!!ye,Te,oi(Ce),oi(ve),Be),xt=qe.filter((e=>si(e.name||"").type===zn.OW.Observation)).map((e=>e.name||"")).concat(xi(M));let _t={type:Ye,name:ye,nameGap:oi(ve),nameLocation:"middle",axisLabel:{hideOverlap:!0,formatter:pt,rotate:pe,interval:he},minorTick:{show:$},minInterval:Ye===Re.Gw.Time&&ee?kn.iP[ee]:0,...(0,ti.pG)(Ye,se,st,ct,H)},wt={...ri.SG,type:N?Re.Gw.Log:Re.Gw.Value,min:dt,max:ut,minorTick:{show:$},minorSplitLine:{show:V},axisLabel:{formatter:Ol(j,et,rt,ot,_e)},scale:ce,name:we,nameGap:oi(Ce),nameLocation:"Left"===Te?"middle":"end"};return Be&&([_t,wt]=[wt,_t],[vt.bottom,vt.left]=[vt.left,vt.bottom]),{echartOptions:{useUTC:!0,grid:{...ri.Ox,...vt},xAxis:_t,yAxis:wt,tooltip:{...Fn(Fe),show:!g,trigger:U?"axis":"item",formatter:e=>{var t;const[o,r]=Be?[1,0]:[0,1],a=U?e[0].value[o]:e.value[o],n=U?e:[e],i=(0,ti.RQ)(n,r,U,ne),l=n.filter((e=>!M.some((t=>e.seriesName===t.name)))),s=ci(n,Be),c=ci(l,Be),d=Object.values(s).some((e=>e.forecastTrend||e.forecastLower||e.forecastUpper)),u=et?tt:null!=(t=(0,co.Em)(rt,j))?t:ot,m=[],p=Object.values(c).reduce(((e,t)=>void 0!==t.observation?e+t.observation:e),0),h=Boolean(ze)&&U&&!d,g=h&&!et&&le,f=Object.keys(s);let b;if(i.filter((e=>f.includes(e))).forEach((e=>{const t=s[e];if(0===t.observation&&re)return;const o=di({...t,seriesName:e,formatter:u}),r=M.some((t=>t.name===e));g&&void 0!==t.observation&&!r&&o.push(tt.format(t.observation/(p||1))),m.push(o),e===y&&(b=m.length-1)})),re&&(m.reverse(),void 0!==b&&(b=m.length-b-1)),h&&ie){const e=["Total",u.format(p)];g&&e.push(tt.format(1)),m.push(e)}return(0,Tn.L)(m,mt(a),b)}},legend:{...(0,ti.g1)(B,R,Q,h,Ae,l,vt),scrollDataIndex:b||0,data:xt},series:(0,ti.Kf)(mi(Ze)),toolbox:{show:Ae,top:kn.TM.toolboxTop,right:kn.TM.toolboxRight,feature:{dataZoom:{...re?{yAxisIndex:!1}:{},title:{zoom:(0,s.t)("zoom area"),back:(0,s.t)("restore zoom")}}}},dataZoom:Ae?[{type:"slider",start:kn.TM.dataZoomStart,end:kn.TM.dataZoomEnd,bottom:kn.TM.zoomBottom,yAxisIndex:Be?0:void 0},{type:"inside",yAxisIndex:0,zoomOnMouseWheel:!1,moveOnMouseWheel:!0},{type:"inside",xAxisIndex:0,zoomOnMouseWheel:!1,moveOnMouseWheel:!0}]:[]},emitCrossFilters:f,formData:c,groupby:Me,height:n,labelMap:Pe,selectedValues:lt,setDataMask:ht,setControlValue:gt,width:a,legendData:xt,onContextMenu:ft,onLegendStateChanged:bt,onFocusedSeries:e=>{y=e},xValueFormatter:mt,xAxis:{label:Oe,type:Ye},refs:Fe,coltypeMapping:A,onLegendScroll:yt}}var Rd=o(59879);const Bd=o.p+"Area1.b13966ae.png",Id=e=>Od({...e,formData:{...e.formData,area:!0}});class Nd extends zn.Qh{constructor(){super({buildQuery:xd,controlPanel:Ld,loadChart:()=>Promise.all([o.e(4735),o.e(6011)]).then(o.bind(o,56011)),metadata:{behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],category:(0,s.t)("Evolution"),credits:["https://echarts.apache.org"],description:(0,s.t)("Area charts are similar to line charts in that they represent variables with the same scale, but area charts stack the metrics on top of each other."),exampleGallery:[{url:Bd}],supportedAnnotationTypes:[ni.UJ.Event,ni.UJ.Formula,ni.UJ.Interval,ni.UJ.Timeseries],name:(0,s.t)("Area Chart"),tags:[(0,s.t)("ECharts"),(0,s.t)("Predictive"),(0,s.t)("Advanced-Analytics"),(0,s.t)("Time"),(0,s.t)("Line"),(0,s.t)("Transformable"),(0,s.t)("Stacked"),(0,s.t)("Featured")],thumbnail:Rd},transformProps:Id})}}const{area:Ed,logAxis:zd,markerEnabled:jd,markerSize:Vd,minorSplitLine:$d,opacity:Yd,rowLimit:Gd,truncateYAxis:qd,yAxisBounds:Wd}=Ni,Ud={controlPanelSections:[Pe.sections.echartsTimeSeriesQueryWithXAxisSort,Pe.sections.advancedAnalyticsControls,Pe.sections.annotationsAndLayersControls,Pe.sections.forecastIntervalControls,Pe.sections.titleControls,{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[...ul,["color_scheme"],["time_shift_color"],...Xi,[{name:"area",config:{type:"CheckboxControl",label:(0,s.t)("Area Chart"),renderTrigger:!0,default:Ed,description:(0,s.t)("Draw area under curves. Only applicable for line types.")}}],[{name:"opacity",config:{type:"SliderControl",label:(0,s.t)("Area chart opacity"),renderTrigger:!0,min:0,max:1,step:.1,default:Yd,description:(0,s.t)("Opacity of Area Chart. Also applies to confidence band."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.area)?void 0:t.value)}}}],[{name:"markerEnabled",config:{type:"CheckboxControl",label:(0,s.t)("Marker"),renderTrigger:!0,default:jd,description:(0,s.t)("Draw a marker on data points. Only applicable for line types.")}}],[{name:"markerSize",config:{type:"SliderControl",label:(0,s.t)("Marker Size"),renderTrigger:!0,min:0,max:20,default:Vd,description:(0,s.t)("Size of marker. Also applies to forecast observations."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.markerEnabled)?void 0:t.value)}}}],["zoomable"],[hl],...Ui,[(0,fe.Y)(be.y,{children:(0,s.t)("X Axis")})],[{name:"x_axis_time_format",config:{...H.A.x_axis_time_format,default:"smart_date",description:`${g.gb}. ${Ei}`}}],[cl],[dl],...il,[(0,fe.Y)(be.y,{children:(0,s.t)("Y Axis")})],["y_axis_format"],["currency_format"],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,s.t)("Logarithmic y-axis"),renderTrigger:!0,default:zd,description:(0,s.t)("Logarithmic y-axis")}}],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,s.t)("Minor Split Line"),renderTrigger:!0,default:$d,description:(0,s.t)("Draw split lines for minor y-axis ticks")}}],[ml],[pl],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,s.t)("Truncate Y Axis"),default:qd,renderTrigger:!0,description:(0,s.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,s.t)("Y Axis Bounds"),renderTrigger:!0,default:Wd,description:(0,s.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.truncateYAxis)?void 0:t.value)}}}]]}],controlOverrides:{row_limit:{default:Gd}},formDataOverrides:e=>({...e,metrics:(0,f.a)().popAllMetrics(),groupby:(0,f.a)().popAllColumns()})},Hd=Ud;var Qd=o(98667);const Jd=o.p+"Time-series_Chart.8ff488d2.jpg";class Kd extends zn.Qh{constructor(){super({buildQuery:xd,controlPanel:Hd,loadChart:()=>Promise.all([o.e(4735),o.e(6011)]).then(o.bind(o,56011)),metadata:{behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],category:(0,s.t)("Evolution"),credits:["https://echarts.apache.org"],description:(0,s.t)("Swiss army knife for visualizing data. Choose between step, line, scatter, and bar charts. This viz type has many customization options as well."),exampleGallery:[{url:Jd}],supportedAnnotationTypes:[ni.UJ.Event,ni.UJ.Formula,ni.UJ.Interval,ni.UJ.Timeseries],name:(0,s.t)("Generic Chart"),tags:[(0,s.t)("Advanced-Analytics"),(0,s.t)("ECharts"),(0,s.t)("Line"),(0,s.t)("Predictive"),(0,s.t)("Time"),(0,s.t)("Transformable")],thumbnail:Qd},transformProps:Od})}}const{logAxis:Xd,minorSplitLine:Zd,truncateYAxis:eu,yAxisBounds:tu,orientation:ou}=Ni;function ru(e){const t="x"===e,o=e=>Boolean((null==e?void 0:e.orientation.value)===pi.l.Vertical),r=e=>Boolean((null==e?void 0:e.orientation.value)===pi.l.Horizontal);return[[{name:"x_axis_title",config:{type:"TextControl",label:(0,s.t)("Axis Title"),renderTrigger:!0,default:"",visibility:({controls:e})=>t?o(e):r(e),disableStash:!0,resetOnHide:!1}}],[{name:"x_axis_title_margin",config:{type:"SelectControl",freeForm:!0,clearable:!0,label:(0,s.t)("Axis title margin"),renderTrigger:!0,default:Pe.sections.TITLE_MARGIN_OPTIONS[0],choices:(0,j.u)(Pe.sections.TITLE_MARGIN_OPTIONS),visibility:({controls:e})=>t?o(e):r(e),disableStash:!0,resetOnHide:!1}}],[{name:"y_axis_title",config:{type:"TextControl",label:(0,s.t)("Axis Title"),renderTrigger:!0,default:"",visibility:({controls:e})=>t?r(e):o(e),disableStash:!0,resetOnHide:!1}}],[{name:"y_axis_title_margin",config:{type:"SelectControl",freeForm:!0,clearable:!0,label:(0,s.t)("Axis title margin"),renderTrigger:!0,default:Pe.sections.TITLE_MARGIN_OPTIONS[1],choices:(0,j.u)(Pe.sections.TITLE_MARGIN_OPTIONS),visibility:({controls:e})=>t?r(e):o(e),disableStash:!0,resetOnHide:!1}}],[{name:"y_axis_title_position",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,s.t)("Axis title position"),renderTrigger:!0,default:Pe.sections.TITLE_POSITION_OPTIONS[0][0],choices:Pe.sections.TITLE_POSITION_OPTIONS,visibility:({controls:e})=>t?r(e):o(e),disableStash:!0,resetOnHide:!1}}]]}function au(e){const t="x"===e,o=e=>Boolean((null==e?void 0:e.orientation.value)===pi.l.Vertical),r=e=>Boolean((null==e?void 0:e.orientation.value)===pi.l.Horizontal);return[[{name:"x_axis_time_format",config:{...H.A.x_axis_time_format,default:"smart_date",description:`${g.gb}. ${Ei}`,visibility:({controls:e})=>t?o(e):r(e),disableStash:!0,resetOnHide:!1}}],[{name:cl.name,config:{...cl.config,visibility:({controls:e})=>t?o(e):r(e),disableStash:!0,resetOnHide:!1}}],[{name:dl.name,config:{...dl.config,visibility:({controls:e})=>t?o(e):r(e),disableStash:!0,resetOnHide:!1}}],[{name:"y_axis_format",config:{...H.A.y_axis_format,label:(0,s.t)("Axis Format"),visibility:({controls:e})=>t?r(e):o(e),disableStash:!0,resetOnHide:!1}}],["currency_format"],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,s.t)("Logarithmic axis"),renderTrigger:!0,default:Xd,description:(0,s.t)("Logarithmic axis"),visibility:({controls:e})=>t?r(e):o(e),disableStash:!0,resetOnHide:!1}}],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,s.t)("Minor Split Line"),renderTrigger:!0,default:Zd,description:(0,s.t)("Draw split lines for minor axis ticks"),visibility:({controls:e})=>t?r(e):o(e),disableStash:!0,resetOnHide:!1}}],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,s.t)("Truncate Axis"),default:eu,renderTrigger:!0,description:(0,s.t)("Its not recommended to truncate axis in Bar chart."),visibility:({controls:e})=>t?r(e):o(e),disableStash:!0,resetOnHide:!1}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,s.t)("Axis Bounds"),renderTrigger:!0,default:tu,description:(0,s.t)("Bounds for the axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var a;return Boolean(null==e||null==(a=e.truncateYAxis)?void 0:a.value)&&(t?r(e):o(e))},disableStash:!0,resetOnHide:!1}}]]}const nu={controlPanelSections:[Pe.sections.echartsTimeSeriesQueryWithXAxisSort,Pe.sections.advancedAnalyticsControls,Pe.sections.annotationsAndLayersControls,Pe.sections.forecastIntervalControls,{label:(0,s.t)("Chart Orientation"),expanded:!0,controlSetRows:[[{name:"orientation",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,s.t)("Bar orientation"),default:ou,options:[[pi.l.Vertical,(0,s.t)("Vertical")],[pi.l.Horizontal,(0,s.t)("Horizontal")]],description:(0,s.t)("Orientation of bar chart")}}]]},{label:(0,s.t)("Chart Title"),tabOverride:"customize",expanded:!0,controlSetRows:[[(0,fe.Y)(be.y,{children:(0,s.t)("X Axis")})],...ru("x"),[(0,fe.Y)(be.y,{children:(0,s.t)("Y Axis")})],...ru("y")]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[...ul,["color_scheme"],["time_shift_color"],...Xi,[{name:"stackDimension",config:{type:"SelectControl",label:(0,s.t)("Split stack by"),visibility:({controls:e})=>{var t;return(null==e||null==(t=e.stack)?void 0:t.value)===kn.ad.Stack},renderTrigger:!0,description:(0,s.t)("Stack in groups, where each group corresponds to a dimension"),shouldMapStateToProps:(e,t,o,r)=>!0,mapStateToProps:(e,t,o)=>{var r;return{choices:(0,T.A)(null==(r=e.controls.groupby)?void 0:r.value).map((e=>e?[e.toString(),e.toString()]:["",""]))}}}}],[hl],["zoomable"],...Ui,[(0,fe.Y)(be.y,{children:(0,s.t)("X Axis")})],...au("x"),[ml],[pl],...il,[(0,fe.Y)(be.y,{children:(0,s.t)("Y Axis")})],...au("y")]}],formDataOverrides:e=>({...e,metrics:(0,f.a)().popAllMetrics(),groupby:(0,f.a)().popAllColumns()})},iu=nu;var lu=o(51726);const su=o.p+"Bar1.05db33fe.png",cu=o.p+"Bar2.c41826d8.png",du=o.p+"Bar3.0ace6ce6.png",uu=e=>Od({...e,formData:{...e.formData,seriesType:pi.y.Bar}});class mu extends zn.Qh{constructor(){super({buildQuery:xd,controlPanel:iu,loadChart:()=>Promise.all([o.e(4735),o.e(6011)]).then(o.bind(o,56011)),metadata:{behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],category:(0,s.t)("Evolution"),credits:["https://echarts.apache.org"],description:(0,s.t)("Bar Charts are used to show metrics as a series of bars."),exampleGallery:[{url:su},{url:cu},{url:du}],supportedAnnotationTypes:[ni.UJ.Event,ni.UJ.Formula,ni.UJ.Interval,ni.UJ.Timeseries],name:(0,s.t)("Bar Chart"),tags:[(0,s.t)("ECharts"),(0,s.t)("Predictive"),(0,s.t)("Advanced-Analytics"),(0,s.t)("Time"),(0,s.t)("Transformable"),(0,s.t)("Stacked"),(0,s.t)("Bar"),(0,s.t)("Featured")],thumbnail:lu},transformProps:uu})}}var pu=o(6329);const hu=o.p+"Line1.7282d4c8.png",gu=o.p+"Line2.c13c8aae.png",fu=e=>Od({...e,formData:{...e.formData,seriesType:pi.y.Line}});class bu extends zn.Qh{constructor(){super({buildQuery:xd,controlPanel:Hd,loadChart:()=>Promise.all([o.e(4735),o.e(6011)]).then(o.bind(o,56011)),metadata:{behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],category:(0,s.t)("Evolution"),credits:["https://echarts.apache.org"],description:(0,s.t)("Line chart is used to visualize measurements taken over a given category. Line chart is a type of chart which displays information as a series of data points connected by straight line segments. It is a basic type of chart common in many fields."),exampleGallery:[{url:hu},{url:gu}],canBeAnnotationTypes:[ni.UJ.Timeseries],supportedAnnotationTypes:[ni.UJ.Event,ni.UJ.Formula,ni.UJ.Interval,ni.UJ.Timeseries],name:(0,s.t)("Line Chart"),tags:[(0,s.t)("ECharts"),(0,s.t)("Predictive"),(0,s.t)("Advanced-Analytics"),(0,s.t)("Line"),(0,s.t)("Featured")],thumbnail:pu},transformProps:fu})}}const{logAxis:yu,markerEnabled:vu,markerSize:xu,minorSplitLine:_u,rowLimit:Su,truncateYAxis:wu,yAxisBounds:Cu}=Ni,Tu={controlPanelSections:[Pe.sections.echartsTimeSeriesQueryWithXAxisSort,Pe.sections.advancedAnalyticsControls,Pe.sections.annotationsAndLayersControls,Pe.sections.forecastIntervalControls,Pe.sections.titleControls,{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[...ul,["color_scheme"],["time_shift_color"],...Zi,[{name:"markerEnabled",config:{type:"CheckboxControl",label:(0,s.t)("Marker"),renderTrigger:!0,default:vu,description:(0,s.t)("Draw a marker on data points. Only applicable for line types.")}}],[{name:"markerSize",config:{type:"SliderControl",label:(0,s.t)("Marker Size"),renderTrigger:!0,min:0,max:20,default:xu,description:(0,s.t)("Size of marker. Also applies to forecast observations."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.markerEnabled)?void 0:t.value)}}}],["zoomable"],[hl],...Ui,[(0,fe.Y)(be.y,{children:(0,s.t)("X Axis")})],[{name:"x_axis_time_format",config:{...H.A.x_axis_time_format,default:"smart_date",description:`${g.gb}. ${Ei}`}}],[cl],[dl],...il,[(0,fe.Y)(be.y,{children:(0,s.t)("Y Axis")})],["y_axis_format"],["currency_format"],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,s.t)("Logarithmic y-axis"),renderTrigger:!0,default:yu,description:(0,s.t)("Logarithmic y-axis")}}],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,s.t)("Minor Split Line"),renderTrigger:!0,default:_u,description:(0,s.t)("Draw split lines for minor y-axis ticks")}}],[ml],[pl],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,s.t)("Truncate Y Axis"),default:wu,renderTrigger:!0,description:(0,s.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,s.t)("Y Axis Bounds"),renderTrigger:!0,default:Cu,description:(0,s.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.truncateYAxis)?void 0:t.value)}}}]]}],controlOverrides:{row_limit:{default:Su}},formDataOverrides:e=>({...e,metrics:(0,f.a)().popAllMetrics(),groupby:(0,f.a)().popAllColumns()})},Au=Tu;var ku=o(34007);const Fu=o.p+"SmoothLine1.97fed005.png",Mu=e=>Od({...e,formData:{...e.formData,seriesType:pi.y.Smooth}});class Pu extends zn.Qh{constructor(){super({buildQuery:xd,controlPanel:Au,loadChart:()=>Promise.all([o.e(4735),o.e(6011)]).then(o.bind(o,56011)),metadata:{behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],category:(0,s.t)("Evolution"),credits:["https://echarts.apache.org"],description:(0,s.t)("Smooth-line is a variation of the line chart. Without angles and hard edges, Smooth-line sometimes looks smarter and more professional."),exampleGallery:[{url:Fu}],supportedAnnotationTypes:[ni.UJ.Event,ni.UJ.Formula,ni.UJ.Interval,ni.UJ.Timeseries],name:(0,s.t)("Smooth Line"),tags:[(0,s.t)("ECharts"),(0,s.t)("Predictive"),(0,s.t)("Advanced-Analytics"),(0,s.t)("Time"),(0,s.t)("Line"),(0,s.t)("Transformable")],thumbnail:ku},transformProps:Mu})}}const{logAxis:Lu,markerEnabled:Du,markerSize:Ou,minorSplitLine:Ru,rowLimit:Bu,truncateYAxis:Iu,yAxisBounds:Nu}=Ni,Eu={controlPanelSections:[Pe.sections.echartsTimeSeriesQueryWithXAxisSort,Pe.sections.advancedAnalyticsControls,Pe.sections.annotationsAndLayersControls,Pe.sections.forecastIntervalControls,Pe.sections.titleControls,{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[...ul,["color_scheme"],["time_shift_color"],...Xi,[{name:"markerEnabled",config:{type:"CheckboxControl",label:(0,s.t)("Marker"),renderTrigger:!0,default:Du,description:(0,s.t)("Draw a marker on data points. Only applicable for line types.")}}],[{name:"markerSize",config:{type:"SliderControl",label:(0,s.t)("Marker Size"),renderTrigger:!0,min:0,max:100,default:Ou,description:(0,s.t)("Size of marker. Also applies to forecast observations."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.markerEnabled)?void 0:t.value)}}}],["zoomable"],[hl],...Ui,[(0,fe.Y)(be.y,{children:(0,s.t)("X Axis")})],[{name:"x_axis_time_format",config:{...H.A.x_axis_time_format,default:"smart_date",description:`${g.gb}. ${Ei}`}}],[cl],[dl],...il,[(0,fe.Y)(be.y,{children:(0,s.t)("Y Axis")})],["y_axis_format"],["currency_format"],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,s.t)("Logarithmic y-axis"),renderTrigger:!0,default:Lu,description:(0,s.t)("Logarithmic y-axis")}}],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,s.t)("Minor Split Line"),renderTrigger:!0,default:Ru,description:(0,s.t)("Draw split lines for minor y-axis ticks")}}],[ml],[pl],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,s.t)("Truncate Y Axis"),default:Iu,renderTrigger:!0,description:(0,s.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,s.t)("Y Axis Bounds"),renderTrigger:!0,default:Nu,description:(0,s.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.truncateYAxis)?void 0:t.value)}}}]]}],controlOverrides:{row_limit:{default:Bu}},formDataOverrides:e=>({...e,metrics:(0,f.a)().popAllMetrics(),groupby:(0,f.a)().popAllColumns()})},zu=Eu;var ju=o(98557);const Vu=o.p+"Scatter1.665fe2f7.png",$u=e=>Od({...e,formData:{...e.formData,seriesType:pi.y.Scatter}});class Yu extends zn.Qh{constructor(){super({buildQuery:xd,controlPanel:zu,loadChart:()=>Promise.all([o.e(4735),o.e(6011)]).then(o.bind(o,56011)),metadata:{behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],category:(0,s.t)("Evolution"),credits:["https://echarts.apache.org"],description:(0,s.t)("Scatter Plot has the horizontal axis in linear units, and the points are connected in order. It shows a statistical relationship between two variables."),exampleGallery:[{url:Vu}],supportedAnnotationTypes:[ni.UJ.Event,ni.UJ.Formula,ni.UJ.Interval,ni.UJ.Timeseries],name:(0,s.t)("Scatter Plot"),tags:[(0,s.t)("ECharts"),(0,s.t)("Predictive"),(0,s.t)("Advanced-Analytics"),(0,s.t)("Time"),(0,s.t)("Transformable"),(0,s.t)("Scatter"),(0,s.t)("Featured")],thumbnail:ju},transformProps:$u})}}const{area:Gu,logAxis:qu,markerEnabled:Wu,markerSize:Uu,minorSplitLine:Hu,opacity:Qu,rowLimit:Ju,truncateYAxis:Ku,yAxisBounds:Xu}=Ni,Zu={controlPanelSections:[Pe.sections.echartsTimeSeriesQueryWithXAxisSort,Pe.sections.advancedAnalyticsControls,Pe.sections.annotationsAndLayersControls,Pe.sections.forecastIntervalControls,Pe.sections.titleControls,{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[...ul,["color_scheme"],["time_shift_color"],[{name:"seriesType",config:{type:"SelectControl",label:(0,s.t)("Step type"),renderTrigger:!0,default:pi.y.Start,choices:[[pi.y.Start,(0,s.t)("Start")],[pi.y.Middle,(0,s.t)("Middle")],[pi.y.End,(0,s.t)("End")]],description:(0,s.t)("Defines whether the step should appear at the beginning, middle or end between two data points")}}],...Xi,[{name:"area",config:{type:"CheckboxControl",label:(0,s.t)("Area Chart"),renderTrigger:!0,default:Gu,description:(0,s.t)("Draw area under curves. Only applicable for line types.")}}],[{name:"opacity",config:{type:"SliderControl",label:(0,s.t)("Area chart opacity"),renderTrigger:!0,min:0,max:1,step:.1,default:Qu,description:(0,s.t)("Opacity of Area Chart. Also applies to confidence band."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.area)?void 0:t.value)}}}],[{name:"markerEnabled",config:{type:"CheckboxControl",label:(0,s.t)("Marker"),renderTrigger:!0,default:Wu,description:(0,s.t)("Draw a marker on data points. Only applicable for line types.")}}],[{name:"markerSize",config:{type:"SliderControl",label:(0,s.t)("Marker Size"),renderTrigger:!0,min:0,max:20,default:Uu,description:(0,s.t)("Size of marker. Also applies to forecast observations."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.markerEnabled)?void 0:t.value)}}}],["zoomable"],[hl],...Ui,[(0,fe.Y)(be.y,{children:(0,s.t)("X Axis")})],[{name:"x_axis_time_format",config:{...H.A.x_axis_time_format,default:"smart_date",description:`${g.gb}. ${Ei}`}}],[cl],[dl],...il,[(0,fe.Y)(be.y,{children:(0,s.t)("Y Axis")})],["y_axis_format"],["currency_format"],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,s.t)("Logarithmic y-axis"),renderTrigger:!0,default:qu,description:(0,s.t)("Logarithmic y-axis")}}],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,s.t)("Minor Split Line"),renderTrigger:!0,default:Hu,description:(0,s.t)("Draw split lines for minor y-axis ticks")}}],[ml],[pl],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,s.t)("Truncate Y Axis"),default:Ku,renderTrigger:!0,description:(0,s.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,s.t)("Y Axis Bounds"),renderTrigger:!0,default:Xu,description:(0,s.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.truncateYAxis)?void 0:t.value)}}}]]}],controlOverrides:{row_limit:{default:Ju}},formDataOverrides:e=>({...e,metrics:(0,f.a)().popAllMetrics(),groupby:(0,f.a)().popAllColumns()})},em=Zu;var tm=o(16548);const om=o.p+"Step1.297e1ce0.png",rm=o.p+"Step2.10e90fb7.png";class am extends zn.Qh{constructor(){super({buildQuery:xd,controlPanel:em,loadChart:()=>Promise.all([o.e(4735),o.e(6011)]).then(o.bind(o,56011)),metadata:{behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],category:(0,s.t)("Evolution"),credits:["https://echarts.apache.org"],description:(0,s.t)("Stepped-line graph (also called step chart) is a variation of line chart but with the line forming a series of steps between data points. A step chart can be useful when you want to show the changes that occur at irregular intervals."),exampleGallery:[{url:om},{url:rm}],supportedAnnotationTypes:[ni.UJ.Event,ni.UJ.Formula,ni.UJ.Interval,ni.UJ.Timeseries],name:(0,s.t)("Stepped Line"),tags:[(0,s.t)("ECharts"),(0,s.t)("Predictive"),(0,s.t)("Advanced-Analytics"),(0,s.t)("Time"),(0,s.t)("Transformable"),(0,s.t)("Stacked")],thumbnail:tm},transformProps:Od})}}function nm(e){const{x_axis:t,granularity_sqla:o,groupby:r}=e,a=[...(0,T.A)(t||o),...(0,T.A)(r)];return(0,Et.A)(e,(e=>[{...e,columns:a,orderby:null==a?void 0:a.map((e=>[e,!0]))}]))}const im={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["x_axis"],["time_grain_sqla"],["groupby"],["metric"],["adhoc_filters"],["row_limit"]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[[Hi],[{name:"show_legend",config:{type:"CheckboxControl",label:(0,s.t)("Show legend"),renderTrigger:!0,default:!1,description:(0,s.t)("Whether to display a legend for the chart")}}],[(0,fe.Y)(be.y,{children:(0,s.t)("Series colors")})],[{name:"increase_color",config:{label:(0,s.t)("Increase"),type:"ColorPickerControl",default:{r:90,g:193,b:137,a:1},renderTrigger:!0}},{name:"decrease_color",config:{label:(0,s.t)("Decrease"),type:"ColorPickerControl",default:{r:224,g:67,b:85,a:1},renderTrigger:!0}},{name:"total_color",config:{label:(0,s.t)("Total"),type:"ColorPickerControl",default:{r:102,g:102,b:102,a:1},renderTrigger:!0}}],[(0,fe.Y)(be.y,{children:(0,s.t)("X Axis")})],[{name:"x_axis_label",config:{type:"TextControl",label:(0,s.t)("X Axis Label"),renderTrigger:!0,default:""}}],[{name:"x_axis_time_format",config:{...H.A.x_axis_time_format,default:g.EN,description:`${g.gb}.`}}],[{name:"x_ticks_layout",config:{type:"SelectControl",label:(0,s.t)("X Tick Layout"),choices:(0,j.u)(["auto","flat","45","90","staggered"]),default:"auto",clearable:!1,renderTrigger:!0,description:(0,s.t)("The way the ticks are laid out on the X-axis")}}],[(0,fe.Y)(be.y,{children:(0,s.t)("Y Axis")})],[{name:"y_axis_label",config:{type:"TextControl",label:(0,s.t)("Y Axis Label"),renderTrigger:!0,default:""}}],["y_axis_format"],["currency_format"]]}],controlOverrides:{groupby:{label:(0,s.t)("Breakdowns"),description:(0,s.t)("Breaks down the series by the category specified in this control.\n      This can help viewers understand how each category affects the overall value."),multi:!1}}};var lm=o(73308);const sm=(0,s.t)("Total"),cm=(0,s.t)("Assist"),dm={INCREASE:(0,s.t)("Increase"),DECREASE:(0,s.t)("Decrease"),TOTAL:(0,s.t)("Total")},um="-";function mm(e){const{width:t,height:o,formData:r,legendState:a,queriesData:n,hooks:i,theme:l,inContextMenu:s}=e,c={},{data:m=[]}=n[0],p=(0,ti.oi)(n[0]),{setDataMask:h=()=>{},onContextMenu:g,onLegendStateChanged:f}=i,{currencyFormat:b,granularitySqla:y="",groupby:v,increaseColor:x={r:90,g:193,b:137},decreaseColor:_={r:224,g:67,b:85},totalColor:S={r:102,g:102,b:102},metric:w="",xAxis:C,xTicksLayout:A,xAxisTimeFormat:k,showLegend:F,yAxisLabel:M,xAxisLabel:P,yAxisFormat:L,showValue:D}=r,O=null!=b&&b.symbol?new We.A({d3Format:L,currency:b}):(0,d.gV)(L),R=(0,T.A)(v),B=R.length?R[0]:void 0,I=(0,St.q0)(B)?B.label:B,N=C||y,E=(0,St.q0)(N)?N.label:N,z=(0,Ge.A)(w),j=function({data:e,xAxis:t,metric:o,breakdown:r}){const a=e.reduce(((e,o)=>{const r=o[t],a=e.get(r)||[];return a.push(o),e.set(r,a),e}),new Map),n=[];if(r)a.forEach(((e,a)=>{const i=e,l=i.reduce(((e,t)=>{var r;return e+(null!=(r=t[o])?r:0)}),0);i.push({[t]:a,[r]:sm,[o]:l}),n.push(...i)}));else{let e=0;a.forEach(((r,a)=>{const i=r.reduce(((e,t)=>{var r;return e+(null!=(r=t[o])?r:0)}),0);n.push({[t]:a,[o]:i}),e+=i})),n.push({[t]:sm,[o]:e})}return n}({data:m,breakdown:I,xAxis:E,metric:z}),V=[],$=[],Y=[],G=[];let q=0;j.forEach(((e,t,o)=>{const r=o.slice(0,t+1).reduce(((e,t,o)=>{var r;if(I){if(t[I]!==sm||0===o)return e+(null!=(r=t[z])?r:0)}else if(t[E]!==sm){var a;return e+(null!=(a=t[z])?a:0)}return e}),0),n=I&&e[I]===sm||e[E]===sm,i=e[z];let l=i;const s=Math.sign(q)!==Math.sign(r);s&&(l=Math.sign(l)*(Math.abs(l)-Math.abs(q))),n?($.push({value:um}),Y.push({value:um}),G.push({value:r,originalValue:r,totalSum:r})):l<0?($.push({value:um}),Y.push({value:r<0?l:-l,originalValue:i,totalSum:r}),G.push({value:um})):($.push({value:r>0?l:-l,originalValue:i,totalSum:r}),Y.push({value:um}),G.push({value:um}));const c=s?l>0?(0,lm.Ob)(x.r,x.g,x.b):(0,lm.Ob)(_.r,_.g,_.b):"transparent";let d=1;(!1===(null==a?void 0:a[dm.INCREASE])&&l>0||!1===(null==a?void 0:a[dm.DECREASE])&&l<0)&&(d=0),n?V.push({value:um}):0===t?V.push({value:0}):s||Math.abs(r)>Math.abs(q)?V.push({value:q,itemStyle:{color:c,opacity:d}}):V.push({value:r,itemStyle:{color:c,opacity:d}}),q=r}));const W=[],U=j.map((e=>{let t=E,o=e[E];return I&&e[I]!==sm&&(t=I,o=e[I]),o||(o=kn.mu),"string"!=typeof o&&"number"!=typeof o&&(o=String(o)),W.push(t),o})),H=(e,t)=>e===sm?sm:p[W[t]]===$e.s.Temporal?"string"==typeof e?(0,u.mo)(k)(Number.parseInt(e,10)):(0,u.mo)(k)(e):String(e);let Q;Q="45"===A?{rotate:-45}:"90"===A?{rotate:-90}:"flat"===A?{rotate:0}:"staggered"===A?{rotate:-45}:{show:!0},Q.formatter=H,Q.hideOverlap=!1;const J={type:"bar",stack:"stack",emphasis:{disabled:!0}},K={show:D,formatter:e=>{const{data:t}=e,{originalValue:o}=t;return O(o)},color:l.colorText,borderColor:l.colorBgBase,borderWidth:1},X=[{...J,name:cm,data:V},{...J,name:dm.INCREASE,label:{...K,position:"top"},itemStyle:{color:(0,lm.Ob)(x.r,x.g,x.b)},data:$},{...J,name:dm.DECREASE,label:{...K,position:"bottom"},itemStyle:{color:(0,lm.Ob)(_.r,_.g,_.b)},data:Y},{...J,name:dm.TOTAL,label:{...K,position:"top"},itemStyle:{color:(0,lm.Ob)(S.r,S.g,S.b)},data:G}],Z={grid:{...ri.Ox,top:7*l.sizeUnit,bottom:7*l.sizeUnit,left:5*l.sizeUnit,right:7*l.sizeUnit},legend:{show:F,selected:a,data:[dm.INCREASE,dm.DECREASE,dm.TOTAL]},xAxis:{data:U,type:"category",name:P,nameTextStyle:{padding:[4*l.sizeUnit,0,0,0]},nameLocation:"middle",axisLabel:Q},yAxis:{...ri.SG,type:"value",nameTextStyle:{padding:[0,0,5*l.sizeUnit,0]},nameLocation:"middle",name:M,axisLabel:{formatter:O}},tooltip:{...Fn(c),appendToBody:!0,trigger:"axis",show:!s,formatter:e=>function({params:e,breakdownName:t,defaultFormatter:o,xAxisFormatter:r}){const a=e.find((e=>e.seriesName!==cm&&e.data.value!==um));if(!a)return"";const n=(null==a?void 0:a.seriesName)===dm.TOTAL;if(!a)return kn.mu;const i=!n||t?r(a.name,a.dataIndex):void 0,l=[];return n||l.push([a.seriesName,o(a.data.originalValue)]),l.push([sm,o(a.data.totalSum)]),(0,Tn.L)(l,i)}({params:e,breakdownName:I,defaultFormatter:O,xAxisFormatter:H})},series:X};return{refs:c,formData:r,width:t,height:o,echartOptions:Z,setDataMask:h,onContextMenu:g,onLegendStateChanged:f}}var pm=o(93001);const hm=o.p+"example1.56ea6b14.png",gm=o.p+"example2.15d8bad2.png",fm=o.p+"example3.89a5d8fd.png";class bm extends c.A{constructor(){super({buildQuery:nm,controlPanel:im,loadChart:()=>Promise.all([o.e(4735),o.e(6902)]).then(o.bind(o,26902)),metadata:new l.A({credits:["https://echarts.apache.org"],category:(0,s.t)("Evolution"),description:(0,s.t)("A waterfall chart is a form of data visualization that helps in understanding\n          the cumulative effect of sequentially introduced positive or negative values.\n          These intermediate values can either be time based or category based."),exampleGallery:[{url:hm},{url:gm},{url:fm}],name:(0,s.t)("Waterfall Chart"),tags:[(0,s.t)("Categorical"),(0,s.t)("Comparison"),(0,s.t)("ECharts"),(0,s.t)("Featured")],thumbnail:pm}),transformProps:mm})}}var ym=o(36533),vm=o.n(ym),xm=o(97551),_m=o.n(xm);const Sm=[0,200],wm=(0,ze.A)(((e,t,o,r)=>e.reduce(((e,a)=>{const n=a[r];if("number"!=typeof n)return e;const i=a[t],l=a[o],s=e.x[i]||0,c=e.y[l]||0;return{x:{...e.x,[i]:s+n},y:{...e.y,[l]:c+n},total:e.total+n}}),{x:{},y:{},total:0})));function Cm(e){var t;const o={},{width:r,height:a,formData:n,queriesData:i,datasource:l,theme:s}=e,{bottomMargin:c,xAxis:d,groupby:m,linearColorScheme:p,leftMargin:h,legendType:g="continuous",metric:f="",normalizeAcross:b,normalized:y,borderColor:v,borderWidth:x=0,showLegend:_,showPercentage:S,showValues:w,xscaleInterval:C,yscaleInterval:T,valueBounds:A,yAxisFormat:k,xAxisTimeFormat:F,xAxisLabelRotation:M,currencyFormat:P}=n,L=(0,Ge.A)(f),D=(0,Wt.A)(d),O=(0,Wt.A)(m),{data:R,colnames:B,coltypes:I}=i[0],{columnFormats:N={},currencyFormats:E={}}=l,z=y?"rank":L,j=null==(t=(0,ro.A)().get(p))?void 0:t.colors,V=e=>t=>e===$e.s.Temporal?"string"==typeof t?(0,u.mo)(F)(Number.parseInt(t,10)):(0,u.mo)(F)(t):String(t),$=V(I[0]),Y=V(I[1]),G=Dl(je.A.PERCENT_2_POINT),q=(0,co.gC)(f,E,N,k,P);let[W,U]=(A||[]).map(Ss);var H,Q;void 0===W&&(W=(null==(H=vm()(R,(e=>e[z])))?void 0:H[z])||Sm[0]),void 0===U&&(U=(null==(Q=_m()(R,(e=>e[z])))?void 0:Q[z])||Sm[1]);const J={grid:{containLabel:!0,bottom:c,left:h},series:[{name:L,type:"heatmap",data:R.map((e=>B.map((t=>{const o=e[t];return null==o?kn.mu:"boolean"==typeof o||"bigint"==typeof o?String(o):o})))),label:{show:w,formatter:e=>{const t=e.value;return q(null==t?void 0:t[2])}},itemStyle:{borderColor:(0,lm.o3)((0,lm.Ob)(v.r,v.g,v.b),v.a),borderWidth:x},emphasis:{itemStyle:{borderColor:"transparent",shadowBlur:10,shadowColor:(0,lm.o3)(s.colorText,.3)}}}],tooltip:{...Fn(o),formatter:e=>{const t=wm(R,D,O,L),o=e.value,r=null==o?void 0:o[0],a=null==o?void 0:o[1],n=null==o?void 0:o[2],i=$(r),l=Y(a),s=q(n);let c=0,d="heatmap";"number"==typeof n&&("x"===b?(c=n/t.x[r],d=i):"y"===b?(c=n/t.y[a],d=l):(c=n/t.total,d="heatmap"));const u=`${i} (${l})`,m=[B[2],s];return S&&m.push(`${G(c)} (${d})`),(0,Tn.L)([m],u)}},visualMap:{type:g,min:W,max:U,calculable:!0,orient:"horizontal",right:0,top:0,itemHeight:"continuous"===g?300:14,itemWidth:15,formatter:e=>q(e),inRange:{color:j},show:_,dimension:y?3:2},xAxis:{type:"category",axisLabel:{formatter:$,interval:-1===C?"auto":C-1,rotate:M}},yAxis:{type:"category",axisLabel:{formatter:Y,interval:-1===T?"auto":T-1}}};return{refs:o,echartOptions:J,width:r,height:a,formData:n}}var Tm=o(28175);function Am(e){const{groupby:t,normalize_across:o,sort_x_axis:r,sort_y_axis:a,x_axis:n}=e,i=(0,Ge.A)(e.metric),l=[...(0,T.A)((0,Cn.Od)(e)),...(0,T.A)(t)],s=[];r&&s.push([r.includes("value")?i:l[0],r.includes("asc")]),a&&s.push([a.includes("value")?i:l[1],a.includes("asc")]);const c="x"===o?(0,Wt.A)(n):"y"===o?(0,Wt.A)(t):void 0;return(0,Et.A)(e,(t=>[{...t,columns:l,orderby:s,post_processing:[(0,Tm.T)(e,t,{metric:i,group_by:c})]}]))}const km=o.p+"example1.023a2d67.png",Fm=o.p+"example2.c63be840.png",Mm=o.p+"example3.8faa0540.png";var Pm=o(47859);const Lm=[["alpha_asc",(0,s.t)("Axis ascending")],["alpha_desc",(0,s.t)("Axis descending")],["value_asc",(0,s.t)("Metric ascending")],["value_desc",(0,s.t)("Metric descending")]],Dm={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["x_axis"],["time_grain_sqla"],["groupby"],["metric"],["adhoc_filters"],["row_limit"],[{name:"sort_x_axis",config:{type:"SelectControl",label:(0,s.t)("Sort X Axis"),choices:Lm,renderTrigger:!1,clearable:!0}}],[{name:"sort_y_axis",config:{type:"SelectControl",label:(0,s.t)("Sort Y Axis"),choices:Lm,renderTrigger:!1,clearable:!0}}],[{name:"normalize_across",config:{type:"SelectControl",label:(0,s.t)("Normalize Across"),choices:[["heatmap",(0,s.t)("heatmap")],["x",(0,s.t)("x")],["y",(0,s.t)("y")]],default:"heatmap",renderTrigger:!1,description:(0,fe.FD)(fe.FK,{children:[(0,fe.Y)("div",{children:(0,s.t)("Color will be shaded based the normalized (0% to 100%) value of a given cell against the other cells in the selected range: ")}),(0,fe.FD)("ul",{children:[(0,fe.Y)("li",{children:(0,s.t)("x: values are normalized within each column")}),(0,fe.Y)("li",{children:(0,s.t)("y: values are normalized within each row")}),(0,fe.Y)("li",{children:(0,s.t)("heatmap: values are normalized across the entire heatmap")})]})]})}}]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[[{name:"legend_type",config:{type:"SelectControl",label:(0,s.t)("Legend Type"),renderTrigger:!0,choices:[["continuous",(0,s.t)("Continuous")],["piecewise",(0,s.t)("Piecewise")]],default:"continuous",clearable:!1}}],["linear_color_scheme"],[{name:"border_color",config:{type:"ColorPickerControl",label:(0,s.t)("Border color"),renderTrigger:!0,description:(0,s.t)("The color of the elements border"),default:{r:0,g:0,b:0,a:1}}},{name:"border_width",config:{type:"SliderControl",label:(0,s.t)("Border width"),renderTrigger:!0,min:0,max:2,default:0,step:.1,description:(0,s.t)("The width of the elements border")}}],[{name:"xscale_interval",config:{type:"SelectControl",label:(0,s.t)("X-scale interval"),renderTrigger:!0,choices:[[-1,(0,s.t)("Auto")]].concat((0,j.i)(1,50)),default:-1,clearable:!1,description:(0,s.t)("Number of steps to take between ticks when displaying the X scale")}}],[{name:"yscale_interval",config:{type:"SelectControl",label:(0,s.t)("Y-scale interval"),choices:[[-1,(0,s.t)("Auto")]].concat((0,j.i)(1,50)),default:-1,clearable:!1,renderTrigger:!0,description:(0,s.t)("Number of steps to take between ticks when displaying the Y scale")}}],[{name:"left_margin",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,s.t)("Left Margin"),choices:[["auto",(0,s.t)("Auto")],[50,"50"],[75,"75"],[100,"100"],[125,"125"],[150,"150"],[200,"200"]],default:"auto",renderTrigger:!0,description:(0,s.t)("Left margin, in pixels, allowing for more room for axis labels")}}],[{name:"bottom_margin",config:{type:"SelectControl",clearable:!1,freeForm:!0,label:(0,s.t)("Bottom Margin"),choices:[["auto",(0,s.t)("Auto")],[50,"50"],[75,"75"],[100,"100"],[125,"125"],[150,"150"],[200,"200"]],default:"auto",renderTrigger:!0,description:(0,s.t)("Bottom margin, in pixels, allowing for more room for axis labels")}}],[{name:"value_bounds",config:{type:"BoundsControl",label:(0,s.t)("Value bounds"),renderTrigger:!0,default:[null,null],description:(0,s.t)("Hard value bounds applied for color coding.")}}],["y_axis_format"],["x_axis_time_format"],[cl],["currency_format"],[{name:"show_legend",config:{type:"CheckboxControl",label:(0,s.t)("Legend"),renderTrigger:!0,default:!0,description:(0,s.t)("Whether to display the legend (toggles)")}}],[{name:"show_percentage",config:{type:"CheckboxControl",label:(0,s.t)("Show percentage"),renderTrigger:!0,description:(0,s.t)("Whether to include the percentage in the tooltip"),default:!0}}],[{name:"show_values",config:{type:"CheckboxControl",label:(0,s.t)("Show Values"),renderTrigger:!0,default:!1,description:(0,s.t)("Whether to display the numerical values within the cells")}}],[{name:"normalized",config:{type:"CheckboxControl",label:(0,s.t)("Normalized"),renderTrigger:!0,description:(0,s.t)("Whether to apply a normal distribution based on rank on the color scale"),default:!1}}]]}],controlOverrides:{groupby:{label:(0,s.t)("Y-Axis"),description:(0,s.t)("Dimension to use on y-axis."),multi:!1,validators:[C.A]},y_axis_format:{label:(0,s.t)("Value Format")}},formDataOverrides:e=>({...e,metric:(0,f.a)().shiftMetric()})},Om=new l.A({category:(0,s.t)("Correlation"),description:(0,s.t)("Visualize a related metric across pairs of groups. Heatmaps excel at showcasing the correlation or strength between two groups. Color is used to emphasize the strength of the link between each pair of groups."),exampleGallery:[{url:km},{url:Fm},{url:Mm}],name:(0,s.t)("Heatmap"),tags:[(0,s.t)("Business"),(0,s.t)("Intensity"),(0,s.t)("Density"),(0,s.t)("Single Metric"),(0,s.t)("ECharts"),(0,s.t)("Featured")],thumbnail:Pm});class Rm extends c.A{constructor(){super({buildQuery:Am,loadChart:()=>Promise.all([o.e(4735),o.e(6810)]).then(o.bind(o,96810)),metadata:Om,transformProps:Cm,controlPanel:Dm})}}var Bm=o(1155);function Im(e){const{column:t,groupby:o=[]}=e;return(0,Et.A)(e,(r=>[{...r,columns:[...o,t],post_processing:[(0,Bm.j)(e,r)],metrics:void 0}]))}const Nm={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[{name:"column",config:{...Ml.Eg,label:(0,s.t)("Column"),multi:!1,description:(0,s.t)("Numeric column used to calculate the histogram."),validators:[C.A],freeForm:!1,disabledTabs:new Set(["saved","sqlExpression"]),mapStateToProps:({datasource:e})=>({options:(0,Q.t)(e,$e.s.Numeric)})}}],["groupby"],["adhoc_filters"],["row_limit"],[{name:"bins",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Bins"),default:5,choices:(0,j.i)(5,20,5),description:(0,s.t)("The number of bins for the histogram"),validators:[wt.A]}}],[{name:"normalize",config:{type:"CheckboxControl",label:(0,s.t)("Normalize"),description:(0,s.t)("\n                The normalize option transforms the histogram values into proportions or\n                probabilities by dividing each bin's count by the total count of data points.\n                This normalization process ensures that the resulting values sum up to 1,\n                enabling a relative comparison of the data's distribution and providing a\n                clearer understanding of the proportion of data points within each bin."),default:!1}}],[{name:"cumulative",config:{type:"CheckboxControl",label:(0,s.t)("Cumulative"),description:(0,s.t)("\n                The cumulative option allows you to see how your data accumulates over different\n                values. When enabled, the histogram bars represent the running total of frequencies\n                up to each bin. This helps you understand how likely it is to encounter values\n                below a certain point. Keep in mind that enabling cumulative doesn't change your\n                original data, it just changes the way the histogram is displayed."),default:!1}}]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[Hi],[Yi],[{name:"x_axis_title",config:{type:"TextControl",label:(0,s.t)("X Axis Title"),renderTrigger:!0,default:""}}],[{name:"x_axis_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("X Axis Format"),renderTrigger:!0,default:"SMART_NUMBER",choices:g.Bb,description:`${g.YH} ${g.s1}`}}],[{name:"y_axis_title",config:{type:"TextControl",label:(0,s.t)("Y Axis Title"),renderTrigger:!0,default:""}}],[{name:"y_axis_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Y Axis Format"),renderTrigger:!0,default:"SMART_NUMBER",choices:g.Bb,description:`${g.YH} ${g.s1}`}}]]}]};function Em(e){const t={};let o;const{datasource:{currencyFormats:r={},columnFormats:a={}},formData:n,height:i,hooks:l,legendState:s={},queriesData:c,theme:d,width:u}=e,{onLegendStateChanged:m}=l,{colorScheme:p,column:h,groupby:g=[],normalize:f,showLegend:b,showValue:y,sliceId:v,xAxisFormat:x,xAxisTitle:_,yAxisTitle:S,yAxisFormat:w}=n,{data:C}=c[0],T=no.getScale(p),A=e=>(0,co.gC)(h,r,a,e,void 0),k=A(x),F=A(w),M=Dl(je.A.PERCENT_2_POINT),P=new Set(g),L=Object.keys(C[0]).filter((e=>!P.has(e))).map((e=>{const t=e.split(" - ").map((e=>parseFloat(e)));return`${k(t[0])} - ${k(t[1])}`})),D=C.map((e=>{const t=g.length>0?g.map((t=>e[(0,Wt.A)(t)])).join(", "):(0,Wt.A)(h);return{name:t,type:"bar",data:Object.keys(e).filter((e=>!1===P.has(e))).map((t=>e[t])),itemStyle:{color:T(t,v)},label:{show:y,position:"top",formatter:e=>{const{value:t}=e;return F.format(t)}}}})),O=D.map((e=>e.name));return Ee()(s)&&O.forEach((e=>{s[e]=!0})),{refs:t,formData:n,width:u,height:i,echartOptions:{grid:{...ri.Ox,left:"5%",right:"5%",top:"10%",bottom:"10%"},xAxis:{data:L,name:_,nameGap:35,type:"category",nameLocation:"middle"},yAxis:{...ri.SG,name:S,nameGap:f?55:40,type:"value",nameLocation:"middle",axisLabel:{formatter:e=>F.format(e)}},series:D,legend:{...(0,ti.g1)(zn.a_.Scroll,zn.go.Top,b,d,!1,s),data:O},tooltip:{...Fn(t),trigger:"axis",formatter:e=>{const t=e[0].name,r=e.map((e=>{const{marker:t,seriesName:o,value:r}=e;return[`${t}${o}`,F.format(r)]}));if(g.length>0){const t=e.reduce(((e,t)=>e+t.value),0);f||r.forEach(((o,r)=>o.push(M.format(e[r].value/(t||1)))));const o=["Total",F.format(t)];f||o.push(M.format(1)),r.push(o)}return(0,Tn.L)(r,t,o)}}},onFocusedSeries:e=>{o=e},onLegendStateChanged:m}}var zm=o(60021);const jm=o.p+"example1.bd493731.png",Vm=o.p+"example2.1e997473.png";class $m extends c.A{constructor(){super({buildQuery:Im,controlPanel:Nm,loadChart:()=>Promise.all([o.e(4735),o.e(8370)]).then(o.bind(o,88370)),metadata:new l.A({credits:["https://echarts.apache.org"],category:(0,s.t)("Distribution"),description:(0,s.t)("The histogram chart displays the distribution of a dataset by\n          representing the frequency or count of values within different ranges or bins.\n          It helps visualize patterns, clusters, and outliers in the data and provides\n          insights into its shape, central tendency, and spread."),exampleGallery:[{url:jm},{url:Vm}],name:(0,s.t)("Histogram"),tags:[(0,s.t)("Comparison"),(0,s.t)("ECharts"),(0,s.t)("Pattern"),(0,s.t)("Range")],thumbnail:zm}),transformProps:Em})}}const Ym={label:{position:"left",fontSize:15},animation:!0,animationDuration:500,animationEasing:"cubicOut"},Gm={id:"",parent:"",name:"",rootNodeId:"",layout:"orthogonal",orient:"LR",symbol:"emptyCircle",symbolSize:7,roam:!0,nodeLabelPosition:"left",childLabelPosition:"bottom",emphasis:"descendant"},qm={...H.A.entity,clearable:!1},Wm={...H.A.entity,clearable:!0,validators:[]},Um={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[{name:"id",config:{...qm,label:(0,s.t)("Id"),description:(0,s.t)("Name of the id column")}}],[{name:"parent",config:{...qm,label:(0,s.t)("Parent"),description:(0,s.t)("Name of the column containing the id of the parent node")}}],[{name:"name",config:{...Wm,label:(0,s.t)("Name"),description:(0,s.t)("Optional name of the data column.")}}],[{name:"root_node_id",config:{...Wm,renderTrigger:!0,type:"TextControl",label:(0,s.t)("Root node id"),description:(0,s.t)("Id of root node of the tree.")}}],[{name:"metric",config:{...H.A.metric,clearable:!0,validators:[],description:(0,s.t)("Metric for node values")}}],["adhoc_filters"],["row_limit"]]},{label:(0,s.t)("Chart options"),expanded:!0,controlSetRows:[[(0,fe.Y)(be.y,{children:(0,s.t)("Layout")})],[{name:"layout",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,s.t)("Tree layout"),default:Gm.layout,options:[["orthogonal",(0,s.t)("Orthogonal")],["radial",(0,s.t)("Radial")]],description:(0,s.t)("Layout type of tree")}}],[{name:"orient",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,s.t)("Tree orientation"),default:Gm.orient,options:[["LR",(0,s.t)("Left to Right")],["RL",(0,s.t)("Right to Left")],["TB",(0,s.t)("Top to Bottom")],["BT",(0,s.t)("Bottom to Top")]],description:(0,s.t)("Orientation of tree"),visibility:({form_data:{layout:e}})=>"orthogonal"===(e||Gm.layout)}}],[{name:"node_label_position",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,s.t)("Node label position"),default:Gm.nodeLabelPosition,options:[["left",(0,s.t)("left")],["top",(0,s.t)("top")],["right",(0,s.t)("right")],["bottom",(0,s.t)("bottom")]],description:(0,s.t)("Position of intermediate node label on tree")}}],[{name:"child_label_position",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,s.t)("Child label position"),default:Gm.childLabelPosition,options:[["left",(0,s.t)("left")],["top",(0,s.t)("top")],["right",(0,s.t)("right")],["bottom",(0,s.t)("bottom")]],description:(0,s.t)("Position of child node label on tree")}}],[{name:"emphasis",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,s.t)("Emphasis"),default:Gm.emphasis,options:[["ancestor",(0,s.t)("ancestor")],["descendant",(0,s.t)("descendant")]],description:(0,s.t)("Which relatives to highlight on hover"),visibility:({form_data:{layout:e}})=>"orthogonal"===(e||Gm.layout)}}],[{name:"symbol",config:{type:"SelectControl",renderTrigger:!0,label:(0,s.t)("Symbol"),default:Gm.symbol,options:[{label:(0,s.t)("Empty circle"),value:"emptyCircle"},{label:(0,s.t)("Circle"),value:"circle"},{label:(0,s.t)("Rectangle"),value:"rect"},{label:(0,s.t)("Triangle"),value:"triangle"},{label:(0,s.t)("Diamond"),value:"diamond"},{label:(0,s.t)("Pin"),value:"pin"},{label:(0,s.t)("Arrow"),value:"arrow"},{label:(0,s.t)("None"),value:"none"}],description:(0,s.t)("Layout type of tree")}}],[{name:"symbolSize",config:{type:"SliderControl",label:(0,s.t)("Symbol size"),renderTrigger:!0,min:5,max:30,step:2,default:Gm.symbolSize,description:(0,s.t)("Size of edge symbols")}}],[{name:"roam",config:{type:"SelectControl",label:(0,s.t)("Enable graph roaming"),renderTrigger:!0,default:Gm.roam,choices:[[!1,(0,s.t)("Disabled")],["scale",(0,s.t)("Scale only")],["move",(0,s.t)("Move only")],[!0,(0,s.t)("Scale and Move")]],description:(0,s.t)("Whether to enable changing graph position and scaling.")}}]]}],formDataOverrides:e=>({...e,metric:(0,f.a)().shiftMetric()})};function Hm(e){const{width:t,height:o,formData:r,queriesData:a,theme:n}=e,i={},l=a[0].data||[],{id:s,parent:c,name:d,metric:u="",rootNodeId:m,layout:p,orient:h,symbol:g,symbolSize:f,roam:b,nodeLabelPosition:y,childLabelPosition:v,emphasis:x}={...Gm,...r},_=(0,Ge.A)(u),S=d||s;function w(e){const t=function(e){let t="";return l.some((o=>o[s].toString()===e&&(t=o[S],!0))),t}(e),o={name:t,children:[]},r=[],a={};if(!t)return o;for(let e=0;e<l.length;e+=1)a[l[e][s]]=e,r[e]=[];for(let t=0;t<l.length;t+=1){var n;const s=l[t];if((null==(n=s[c])?void 0:n.toString())===e){var i;null==(i=o.children)||i.push({name:s[S],children:r[t],value:s[_]})}else{const e=s[c];l[a[e]]&&r[a[e]].push({name:s[S],children:r[t],value:s[_]})}}return o}let C={};if(m)C=w(m);else{const e={};l.forEach((t=>{const o=t[c];o in e?e[o].push({id:t[s]}):e[o]=[{id:t[s]}]}));let t=0;Object.keys(e).forEach((o=>{if(1===e[o].length){const r=w(e[o][0].id),a=function(e){let t=0;return function e(o){o.children.forEach((t=>{e(t)})),t+=1}(e),t}(r);a>t&&(t=a,C=r)}}))}const T=[{type:"tree",data:[C],label:{...Ym.label,position:y,color:n.colorText},emphasis:{focus:x},animation:Ym.animation,layout:p,orient:h,symbol:g,roam:b,symbolSize:f,lineStyle:{color:n.colorText,width:1.5},select:Ym.select,leaves:{label:{position:v}}}],A={animationDuration:Ym.animationDuration,animationEasing:Ym.animationEasing,series:T,tooltip:{...Fn(i),trigger:"item",triggerOn:"mousemove",formatter:e=>function({params:e,metricLabel:t}){const{value:o,treeAncestors:r}=e,a=(null!=r?r:[]).map((e=>(null==e?void 0:e.name)||"")).filter((e=>""!==e)),n=o?[t,String(o)]:[];return(0,Tn.L)([n],a.join("  "))}({params:e,metricLabel:_})}};return{formData:r,width:t,height:o,echartOptions:A,refs:i}}var Qm=o(80519);const Jm=o.p+"tree.4b27c6bb.png";function Km(e){return(0,Et.A)(e,{queryFields:{id:"columns",parent:"columns",name:"columns"}})}class Xm extends zn.Qh{constructor(){super({buildQuery:Km,controlPanel:Um,loadChart:()=>Promise.all([o.e(4735),o.e(6784)]).then(o.bind(o,92022)),metadata:{category:(0,s.t)("Part of a Whole"),credits:["https://echarts.apache.org"],description:(0,s.t)("Visualize multiple levels of hierarchy using a familiar tree-like structure."),exampleGallery:[{url:Jm}],name:(0,s.t)("Tree Chart"),tags:[(0,s.t)("Categorical"),(0,s.t)("ECharts"),(0,s.t)("Multi-Levels"),(0,s.t)("Relational"),(0,s.t)("Structural"),(0,s.t)("Featured")],thumbnail:Qm},transformProps:Hm})}}var Zm;!function(e){e.Key="key",e.Value="value",e.KeyValue="key_value"}(Zm||(Zm={}));const ep={groupby:[],numberFormat:"SMART_NUMBER",labelType:Zm.Key,showLabels:!1,dateFormat:"smart_date"};function tp(e){const{formData:t,height:o,hooks:r,filterState:a,queriesData:n,width:i,theme:l,inContextMenu:c,emitCrossFilters:m,datasource:p}=e,{data:h=[]}=n[0],g=(0,ti.oi)(n[0]),{groupby:f=[],columns:b=[],metric:y="",secondaryMetric:v="",colorScheme:x,linearColorScheme:_,labelType:S,numberFormat:w,currencyFormat:C,dateFormat:T,showLabels:A,showLabelsThreshold:k,showTotal:F,sliceId:M}=t,{currencyFormats:P={},columnFormats:L={},verboseMap:D={}}=p,O={},R=(0,co.gC)(y,P,L,w,C),B=v?(0,co.gC)(v,P,L,w,C):void 0,I=(0,d.gV)(w),N=3.6*(k||0),E={top:3*l.sizeUnit,right:l.sizeUnit,bottom:3*l.sizeUnit,left:l.sizeUnit},z=i-E.left-E.right,j=o-E.top-E.bottom,V=Math.min(z,j)/2,{setDataMask:$=()=>{},onContextMenu:Y}=r,G=new Map,q=(0,Ge.A)(y),W=v?(0,Ge.A)(v):void 0,U=os(h,b.map(Wt.A),q,W),H=U.reduce(((e,t)=>e+t.value),0),Q=U.reduce(((e,t)=>e+t.secondaryValue),0),J=no.getScale(x);let K,X=!0;if(v&&y!==v){var Z;const e=function(e){let t=0,o=0,r=null;return function e(a){a.forEach((a=>{var n,i;null!=(n=a.children)&&n.length&&e(a.children),r=(i=a).secondaryValue/i.value,null!==r&&(t>r&&(t=r),o<r&&(o=r))}))}(e),[t,o]}(U);X=!1,K=null==(Z=(0,ro.A)())||null==(Z=Z.get(_))?void 0:Z.createLinearScale(e)}X?J(q,M):K(Q/H);const ee={color:l.colorText,textBorderColor:l.colorBgBase,textBorderWidth:1},te=(e,t,o)=>e.map((e=>{var r,n;const{name:i,value:l,secondaryValue:s,groupBy:c}=e,d=[...o||[],i];let m=(0,ti.Wy)(i,{numberFormatter:I,timeFormatter:(0,u.mo)(T),...g[c]&&{coltype:g[c]}});const p=t.concat(m);let h={records:d,name:m,value:l,secondaryValue:s,itemStyle:{color:X?J(m,M):K(s/l)}};return null!=(r=e.children)&&r.length?h.children=te(e.children,p,d):m=p.join(","),G.set(m,p),!1===(null==(n=a.selectedValues)||null==(n=n[0])?void 0:n.includes(m))&&(h={...h,itemStyle:{...h.itemStyle,opacity:kn.hD.SemiTransparent},label:{...ee}}),h})),oe={grid:{...ri.Ox},tooltip:{...Fn(O),show:!c,trigger:"item",formatter:e=>function({params:e,primaryValueFormatter:t,secondaryValueFormatter:o,colorByCategory:r,totalValue:a,metricLabel:n,secondaryMetricLabel:i}){const{data:l,treePathInfo:c=[]}=e,u=l,m=t(u.value),p=null==o?void 0:o(u.secondaryValue),h=(0,d.gV)(je.A.PERCENT_2_POINT),g=h(u.secondaryValue/u.value),f=h(u.value/a),b=c.length>2?c[c.length-2]:void 0,y=(u.name||kn.mu).toString().replaceAll("<","&lt;").replaceAll(">","&gt;"),v=[[(0,s.t)("% of total"),f]];if(b){const e=h(u.value/b.value);v.push([(0,s.t)("% of parent"),e])}return v.push([n,m]),r||(v.push([i||kn.mu,p||kn.mu]),v.push([`${n}/${i}`,g])),(0,Tn.L)(v,y)}({params:e,primaryValueFormatter:R,secondaryValueFormatter:B,colorByCategory:X,totalValue:H,metricLabel:D[q]||q,secondaryMetricLabel:W?D[W]||W:void 0})},series:[{type:"sunburst",...E,nodeClick:!1,emphasis:{focus:"ancestor",label:{show:A}},label:{...ee,width:.6*V/(b.length||1),show:A,formatter:e=>function({params:e,labelType:t,numberFormatter:o}){const{name:r="",value:a}=e,n=o(a);switch(t){case Zm.Key:return r;case Zm.Value:return n;case Zm.KeyValue:return`${r}: ${n}`;default:return r}}({params:e,numberFormatter:R,labelType:S}),minAngle:N,overflow:"breakAll"},radius:[.3*V,V],data:te(U,[])}],graphic:F?{type:"text",top:"center",left:"center",style:{text:(0,s.t)("Total: %s",R(H)),fontSize:16,fontWeight:"bold"},z:10}:null};return{formData:t,width:i,height:o,echartOptions:oe,setDataMask:$,emitCrossFilters:m,labelMap:Object.fromEntries(G),groupby:f,selectedValues:a.selectedValues||[],onContextMenu:Y,refs:O,coltypeMapping:g}}var op=o(72131);const{labelType:rp,numberFormat:ap,showLabels:np}=ep,ip={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["columns"],["metric"],["secondary_metric"],["adhoc_filters"],["row_limit"],["sort_by_metric"]]},{label:(0,s.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],["linear_color_scheme"],[(0,fe.Y)(be.y,{children:(0,s.t)("Labels")})],[{name:"show_labels",config:{type:"CheckboxControl",label:(0,s.t)("Show Labels"),renderTrigger:!0,default:np,description:(0,s.t)("Whether to display the labels.")}}],[{name:"show_labels_threshold",config:{type:"TextControl",label:(0,s.t)("Percentage threshold"),renderTrigger:!0,isFloat:!0,default:5,description:(0,s.t)("Minimum threshold in percentage points for showing labels.")}}],[{name:"show_total",config:{type:"CheckboxControl",label:(0,s.t)("Show Total"),default:!1,renderTrigger:!0,description:(0,s.t)("Whether to display the aggregate count")}}],[{name:"label_type",config:{type:"SelectControl",label:(0,s.t)("Label Type"),default:rp,renderTrigger:!0,choices:[["key",(0,s.t)("Category Name")],["value",(0,s.t)("Value")],["key_value",(0,s.t)("Category and Value")]],description:(0,s.t)("What should be shown on the label?")}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Number format"),renderTrigger:!0,default:ap,choices:g.Bb,description:`${g.YH} ${g.s1}`}}],["currency_format"],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Date format"),renderTrigger:!0,choices:g.lR,default:"smart_date",description:g.YH}}]]}],controlOverrides:{metric:{label:(0,s.t)("Primary Metric"),description:(0,s.t)("The primary metric is used to define the arc segment sizes")},secondary_metric:{label:(0,s.t)("Secondary Metric"),default:null,description:(0,s.t)("[optional] this secondary metric is used to define the color as a ratio against the primary metric. When omitted, the color is categorical and based on labels")},color_scheme:{description:(0,s.t)("When only a primary metric is provided, a categorical color scale is used."),visibility:({controls:e})=>{var t,o;return Boolean(!(null!=e&&null!=(t=e.secondary_metric)&&t.value)||(null==e||null==(o=e.secondary_metric)?void 0:o.value)===(null==e?void 0:e.metric.value))}},linear_color_scheme:{description:(0,s.t)("When a secondary metric is provided, a linear color scale is used."),visibility:({controls:e})=>{var t,o;return Boolean((null==e||null==(t=e.secondary_metric)?void 0:t.value)&&(null==e||null==(o=e.secondary_metric)?void 0:o.value)!==(null==e?void 0:e.metric.value))}},columns:{label:(0,s.t)("Hierarchy"),description:(0,s.t)("Sets the hierarchy levels of the chart. Each level is\n        represented by one ring with the innermost circle as the top of the hierarchy.")}},formDataOverrides:e=>({...e,groupby:(0,f.a)().popAllColumns(),metric:(0,f.a)().shiftMetric(),secondary_metric:(0,f.a)().shiftMetric()})},lp=ip;function sp(e){const{metric:t,sort_by_metric:o}=e;return(0,Et.A)(e,(e=>[{...e,...o&&{orderby:[[t,!1]]}}]))}const cp=o.p+"Sunburst1.241865fc.png",dp=o.p+"Sunburst2.3421fc35.png";class up extends zn.Qh{constructor(){super({buildQuery:sp,controlPanel:lp,loadChart:()=>Promise.all([o.e(4735),o.e(6540)]).then(o.bind(o,66540)),metadata:{behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],category:(0,s.t)("Part of a Whole"),credits:["https://echarts.apache.org"],description:(0,s.t)("Uses circles to visualize the flow of data through different stages of a system. Hover over individual paths in the visualization to understand the stages a value took. Useful for multi-stage, multi-group visualizing funnels and pipelines."),exampleGallery:[{url:cp},{url:dp}],name:(0,s.t)("Sunburst Chart"),tags:[(0,s.t)("ECharts"),(0,s.t)("Multi-Levels"),(0,s.t)("Proportional"),(0,s.t)("Featured")],thumbnail:op},transformProps:tp})}}var mp=o(43913);const pp={...kn.I,emitFilter:!1,logXAis:!1,logYAxis:!1,xAxisTitleMargin:30,yAxisTitleMargin:30,truncateXAxis:!1,truncateYAxis:!1,xAxisBounds:[null,null],yAxisBounds:[null,null],xAxisLabelRotation:ri.fG.xAxisLabelRotation,xAxisLabelInterval:ri.fG.xAxisLabelInterval,opacity:.6},hp=e=>null!=e&&"function"==typeof e[Symbol.iterator];function gp(e){const{height:t,width:o,hooks:r,queriesData:a,formData:n,inContextMenu:i,theme:l}=e,{data:s=[]}=a[0],{x:c,y:u,size:m,entity:p,maxBubbleSize:h,colorScheme:g,series:f,xAxisLabel:b,yAxisLabel:y,xAxisBounds:v,xAxisFormat:x,yAxisFormat:_,yAxisBounds:S,logXAxis:w,logYAxis:C,xAxisTitleMargin:T,yAxisTitleMargin:A,truncateXAxis:k,truncateYAxis:F,xAxisLabelRotation:M,xAxisLabelInterval:P,yAxisLabelRotation:L,tooltipSizeFormat:D,opacity:O,showLegend:R,legendOrientation:B,legendMargin:I,legendType:N,sliceId:E}={...pp,...n},z=no.getScale(g),j=new Set,V=[],$=(0,Ge.A)(c),Y=(0,Ge.A)(u),G=(0,Ge.A)(m),q={};s.forEach((e=>{const t=f?e[f]:e[p],o=t?String(t):kn.mu,r=f?e[f]:null;V.push({name:o,data:[[e[$],e[Y],e[G],e[p],r]],type:"scatter",itemStyle:{color:z(o,E),opacity:O}}),j.add(o)})),function(e,t){const[o,r]=(0,Bs.Xx)(e,(e=>{var t;const o=null==(t=e.data)?void 0:t[0],r=hp(o)?o[2]:null;return"number"==typeof r?r:null}));if(void 0!==o&&void 0!==r){const a=r-o;e.forEach((e=>{var r;const n=null==(r=e.data)?void 0:r[0],i=hp(n)?n[2]:null;"number"==typeof i&&(e.symbolSize=((i-o)/a*(2*t)||0)+5)}))}}(V,h);const W=(0,d.gV)(x),U=(0,d.gV)(_),H=(0,d.gV)(D),[Q,J]=(v||[]).map(Ss),[K,X]=(S||[]).map(Ss),Z=Fi(R,B,!0,!1,I,!0,"Left",oi(A),oi(T)),ee=w?Re.Gw.Log:Re.Gw.Value,te={series:V,xAxis:{axisLabel:{formatter:W},splitLine:{lineStyle:{type:"dashed"}},nameRotate:M,interval:P,scale:!0,name:b,nameLocation:"middle",nameTextStyle:{fontWeight:"bolder"},nameGap:oi(T),type:ee,...(0,ti.pG)(ee,k,Q,J)},yAxis:{axisLabel:{formatter:U},splitLine:{lineStyle:{type:"dashed"}},nameRotate:L,scale:F,name:y,nameLocation:"middle",nameTextStyle:{fontWeight:"bolder"},nameGap:oi(A),min:K,max:X,type:C?Re.Gw.Log:Re.Gw.Value},legend:{...(0,ti.g1)(N,B,R,l),data:Array.from(j)},tooltip:{show:!i,...Fn(q),formatter:e=>function(e,t,o,r,a,n,i){const l=e.data[4]?`${e.data[4]} (${e.data[3]})`:e.data[3];return(0,Tn.L)([[t,a(e.data[0])],[o,n(e.data[1])],[r,i(e.data[2])]],l)}(e,$,Y,G,W,U,H)},grid:{...ri.Ox,...Z}},{onContextMenu:oe,setDataMask:re=()=>{}}=r;return{refs:q,height:t,width:o,echartOptions:te,onContextMenu:oe,setDataMask:re,formData:n}}function fp(e){const t=[...(0,T.A)(e.entity),...(0,T.A)(e.series)];return(0,Et.A)(e,(e=>[{...e,columns:t,orderby:e.orderby?[[e.orderby[0],!e.order_desc]]:void 0}]))}const{logAxis:bp,truncateYAxis:yp,yAxisBounds:vp,opacity:xp}=pp,_p={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["series"],["entity"],["x"],["y"],["adhoc_filters"],["size"],["orderby"],[{name:"order_desc",config:{...H.A.order_desc,visibility:({controls:e})=>Boolean(e.orderby.value)}}],["row_limit"]]},{label:(0,s.t)("Chart Options"),expanded:!0,tabOverride:"customize",controlSetRows:[["color_scheme"],...Ui,[{name:"max_bubble_size",config:{type:"SelectControl",renderTrigger:!0,freeForm:!0,label:(0,s.t)("Max Bubble Size"),default:"25",choices:(0,j.u)(["5","10","15","25","50","75","100"])}}],[{name:"tooltipSizeFormat",config:{...H.A.y_axis_format,label:(0,s.t)("Bubble size number format")}}],[{name:"opacity",config:{type:"SliderControl",label:(0,s.t)("Bubble Opacity"),renderTrigger:!0,min:0,max:1,step:.1,default:xp,description:(0,s.t)("Opacity of bubbles, 0 means completely transparent, 1 means opaque")}}]]},{label:(0,s.t)("X Axis"),expanded:!0,controlSetRows:[[{name:"x_axis_label",config:{type:"TextControl",label:(0,s.t)("X Axis Title"),renderTrigger:!0,default:""}}],[cl],[dl],[{name:"x_axis_title_margin",config:{type:"SelectControl",freeForm:!0,clearable:!0,label:(0,s.t)("X axis title margin"),renderTrigger:!0,default:Pe.sections.TITLE_MARGIN_OPTIONS[1],choices:(0,j.u)(Pe.sections.TITLE_MARGIN_OPTIONS)}}],[{name:"xAxisFormat",config:{...H.A.y_axis_format,label:(0,s.t)("X Axis Format")}}],[{name:"logXAxis",config:{type:"CheckboxControl",label:(0,s.t)("Logarithmic x-axis"),renderTrigger:!0,default:bp,description:(0,s.t)("Logarithmic x-axis")}}]]},{label:(0,s.t)("Y Axis"),expanded:!0,controlSetRows:[[{name:"y_axis_label",config:{type:"TextControl",label:(0,s.t)("Y Axis Title"),renderTrigger:!0,default:""}}],[{name:"yAxisLabelRotation",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,s.t)("Rotate y axis label"),choices:[[0,"0"],[45,"45"]],default:ri.SG.yAxisLabelRotation,renderTrigger:!0,description:(0,s.t)("Input field supports custom rotation. e.g. 30 for 30")}}],[{name:"y_axis_title_margin",config:{type:"SelectControl",freeForm:!0,clearable:!0,label:(0,s.t)("Y axis title margin"),renderTrigger:!0,default:Pe.sections.TITLE_MARGIN_OPTIONS[1],choices:(0,j.u)(Pe.sections.TITLE_MARGIN_OPTIONS)}}],["y_axis_format"],[{name:"logYAxis",config:{type:"CheckboxControl",label:(0,s.t)("Logarithmic y-axis"),renderTrigger:!0,default:bp,description:(0,s.t)("Logarithmic y-axis")}}],[ml],[pl],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,s.t)("Truncate Y Axis"),default:yp,renderTrigger:!0,description:(0,s.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,s.t)("Y Axis Bounds"),renderTrigger:!0,default:vp,description:(0,s.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.truncateYAxis)?void 0:t.value)}}}]]}]},Sp=_p,wp=o.p+"example1.f68a646e.png",Cp=o.p+"example2.207fccfb.png";class Tp extends c.A{constructor(){super({buildQuery:fp,controlPanel:Sp,loadChart:()=>Promise.all([o.e(4735),o.e(3236)]).then(o.bind(o,53236)),metadata:new l.A({category:(0,s.t)("Correlation"),credits:["https://echarts.apache.org"],description:(0,s.t)("Visualizes a metric across three dimensions of data in a single chart (X axis, Y axis, and bubble size). Bubbles from the same group can be showcased using bubble color."),exampleGallery:[{url:wp},{url:Cp}],name:(0,s.t)("Bubble Chart"),tags:[(0,s.t)("Multi-Dimensions"),(0,s.t)("Comparison"),(0,s.t)("Scatter"),(0,s.t)("Time"),(0,s.t)("Trend"),(0,s.t)("ECharts"),(0,s.t)("Featured")],thumbnail:mp}),transformProps:gp})}}const Ap={defaultValue:null,enableEmptyFilter:!1,inverseSelection:!1,defaultToFirstItem:!1,creatable:!0,multiSelect:!0,searchAllOptions:!1,sortAscending:!0},kp=(e,t)=>{const{search:o,coltypeMap:r}=(null==t?void 0:t.ownState)||{},{sortAscending:a,sortMetric:n}={...Ap,...e};return(0,Et.A)(e,(e=>{const{columns:t=[],filters:i=[]}=e,l=[];o&&t.filter(St.eh).forEach((e=>{const t=(0,Wt.A)(e);(r[t]===$e.s.String||r[t]===$e.s.Numeric&&!Number.isNaN(Number(o)))&&l.push({col:e,op:"ILIKE",val:`%${o}%`})}));const s=n?[n]:t;return[{...e,columns:t,metrics:n?[n]:[],filters:i.concat(l),orderby:n||void 0!==a?s.map((e=>[e,!!a])):[]}]}))},{enableEmptyFilter:Fp,inverseSelection:Mp,multiSelect:Pp,creatable:Lp,defaultToFirstItem:Dp,searchAllOptions:Op,sortAscending:Rp}=Ap,Bp={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...H.A.groupby,label:(0,s.t)("Column"),required:!0}}]]},{label:(0,s.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"sortAscending",config:{type:"CheckboxControl",renderTrigger:!0,label:(0,s.t)("Sort ascending"),default:Rp,description:(0,s.t)("Check for sorting ascending")}}],[{name:"creatable",config:{type:"CheckboxControl",label:(0,s.t)("Allow creation of new values"),default:Lp,affectsDataMask:!0,renderTrigger:!0}}],[{name:"multiSelect",config:{type:"CheckboxControl",label:(0,s.t)("Can select multiple values"),default:Pp,resetConfig:!0,affectsDataMask:!0,renderTrigger:!0}}],[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,s.t)("Filter value is required"),default:Fp,renderTrigger:!0,description:(0,s.t)("User must select a value before applying the filter")}}],[{name:"defaultToFirstItem",config:{type:"CheckboxControl",label:(0,s.t)("Select first filter value by default"),default:Dp,resetConfig:!0,affectsDataMask:!0,renderTrigger:!0,requiredFirst:!0,description:(0,s.t)("When using this option, default value cant be set. Using this option may impact the load times for your dashboard.")}}],[{name:"inverseSelection",config:{type:"CheckboxControl",renderTrigger:!0,affectsDataMask:!0,label:(0,s.t)("Inverse selection"),default:Mp,description:(0,s.t)("Exclude selected values")}}],[{name:"searchAllOptions",config:{type:"CheckboxControl",renderTrigger:!0,affectsDataMask:!0,label:(0,s.t)("Dynamically search all filter values"),default:Op,description:(0,s.t)("By default, each filter loads at most 1000 choices at the initial page load. Check this box if you have more than 1000 filter values and want to enable dynamically searching that loads filter values as users type (may add stress to your database).")}}]]}],controlOverrides:{groupby:{multi:!1,validators:[C.A]}}};var Ip=o(93590);function Np(e){const{formData:t,height:o,hooks:r,queriesData:a,width:n,displaySettings:i,behaviors:l,appSection:s,filterState:c,isRefreshing:d,inputRef:u}=e,m={...Ap,...t},{setDataMask:p=Ip.fZ,setHoveredFilter:h=Ip.fZ,unsetHoveredFilter:g=Ip.fZ,setFocusedFilter:f=Ip.fZ,unsetFocusedFilter:b=Ip.fZ,setFilterActive:y=Ip.fZ,clearAllTrigger:v,onClearAllComplete:x}=r,[_]=a,{colnames:S=[],coltypes:w=[],data:C=[]}=_||{};return{filterState:c,coltypeMap:S.reduce(((e,t,o)=>({...e,[t]:w[o]})),{}),appSection:s,width:n,behaviors:l,height:o,data:C,formData:m,isRefreshing:d,setDataMask:p,setHoveredFilter:h,unsetHoveredFilter:g,setFocusedFilter:f,unsetFocusedFilter:b,setFilterActive:y,inputRef:u,filterBarOrientation:null==i?void 0:i.filterBarOrientation,isOverflowingFilterBar:null==i?void 0:i.isOverflowingFilterBar,clearAllTrigger:v,onClearAllComplete:x}}var Ep=o(79329);class zp extends c.A{constructor(){const e=new l.A({name:(0,s.t)("Select filter"),description:(0,s.t)("Select filter plugin using AntD"),behaviors:[Re.nS.InteractiveChart,Re.nS.NativeFilter],enableNoResults:!1,tags:[(0,s.t)("Experimental")],thumbnail:Ep});super({buildQuery:kp,controlPanel:Bp,loadChart:()=>Promise.all([o.e(8096),o.e(2658)]).then(o.bind(o,38489)),metadata:e,transformProps:Np})}}function jp(e){const{groupby:t}=e,[o=""]=t||[];return(0,Et.A)(e,(e=>[{...e,columns:[],metrics:[{aggregate:"MIN",column:{column_name:o,id:1,type_generic:$e.s.Numeric},expressionType:"SIMPLE",hasCustomLabel:!0,label:"min"},{aggregate:"MAX",column:{column_name:o,id:2,type_generic:$e.s.Numeric},expressionType:"SIMPLE",hasCustomLabel:!0,label:"max"}]}]))}var Vp=o(1984);const $p={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...H.A.groupby,label:(0,s.t)("Column"),required:!0}}]]},{label:(0,s.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,s.t)("Filter value is required"),default:!1,renderTrigger:!0,description:(0,s.t)("User must select a value before applying the filter")}},{name:"enableSingleValue",config:{type:"CheckboxControl",label:(0,s.t)("Single value"),default:Vp.y.Exact,renderTrigger:!0,description:(0,s.t)("Use only a single value.")}}]]}]};function Yp(e){const{formData:t,height:o,hooks:r,queriesData:a,width:n,behaviors:i,filterState:l,inputRef:s,displaySettings:c}=e,{setDataMask:d=Ip.fZ,setFocusedFilter:u=Ip.fZ,unsetFocusedFilter:m=Ip.fZ,setHoveredFilter:p=Ip.fZ,unsetHoveredFilter:h=Ip.fZ,setFilterActive:g=Ip.fZ}=r,{data:f}=a[0];return{data:f,formData:t,behaviors:i,height:o,setDataMask:d,filterState:l,width:n,setHoveredFilter:p,unsetHoveredFilter:h,setFocusedFilter:u,unsetFocusedFilter:m,setFilterActive:g,inputRef:s,isOverflowingFilterBar:null==c?void 0:c.isOverflowingFilterBar,filterBarOrientation:null==c?void 0:c.filterBarOrientation}}var Gp=o(72996);class qp extends c.A{constructor(){const e=new l.A({name:(0,s.t)("Range filter"),description:(0,s.t)("Range filter plugin using AntD"),behaviors:[Re.nS.InteractiveChart,Re.nS.NativeFilter],tags:[(0,s.t)("Experimental")],thumbnail:Gp});super({buildQuery:jp,controlPanel:$p,loadChart:()=>Promise.all([o.e(8096),o.e(5168),o.e(7412)]).then(o.bind(o,2171)),metadata:e,transformProps:Yp})}}const Wp={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...H.A.groupby,label:(0,s.t)("Column"),required:!0}}]]},{label:(0,s.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,s.t)("Filter value is required"),default:!1,renderTrigger:!0,description:(0,s.t)("User must select a value before applying the filter")}}]]}]},Up={defaultValue:null};function Hp(e){const{formData:t,height:o,hooks:r,queriesData:a,width:n,behaviors:i,filterState:l,inputRef:s,displaySettings:c}=e,{setDataMask:d=Ip.fZ,setHoveredFilter:u=Ip.fZ,unsetHoveredFilter:m=Ip.fZ,setFocusedFilter:p=Ip.fZ,unsetFocusedFilter:h=Ip.fZ,setFilterActive:g=Ip.fZ}=r,{data:f}=a[0];return{data:f,filterState:l,formData:{...Up,...t},height:o,behaviors:i,setDataMask:d,setHoveredFilter:u,unsetHoveredFilter:m,setFocusedFilter:p,unsetFocusedFilter:h,setFilterActive:g,width:n,inputRef:s,filterBarOrientation:null==c?void 0:c.filterBarOrientation,isOverflowingFilterBar:null==c?void 0:c.isOverflowingFilterBar}}var Qp=o(8056);class Jp extends c.A{constructor(){const e=new l.A({name:(0,s.t)("Time filter"),description:(0,s.t)("Custom time filter plugin"),behaviors:[Re.nS.InteractiveChart,Re.nS.NativeFilter],thumbnail:Qp,tags:[(0,s.t)("Experimental")],datasourceCount:0});super({controlPanel:Wp,loadChart:()=>Promise.all([o.e(8096),o.e(4313),o.e(7721)]).then(o.bind(o,62539)),metadata:e,transformProps:Hp})}}function Kp(e){return(0,Et.A)(e,(()=>[{result_type:"columns",columns:[],metrics:[],orderby:[]}]))}const Xp={controlPanelSections:[{label:(0,s.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,s.t)("Filter value is required"),default:!1,renderTrigger:!0,description:(0,s.t)("User must select a value before applying the filter")}}]]}]},Zp={defaultValue:null};function eh(e){const{behaviors:t,formData:o,height:r,hooks:a,queriesData:n,width:i,filterState:l,inputRef:s}=e,{setDataMask:c=Ip.fZ,setHoveredFilter:d=Ip.fZ,unsetHoveredFilter:u=Ip.fZ,setFocusedFilter:m=Ip.fZ,unsetFocusedFilter:p=Ip.fZ,setFilterActive:h=Ip.fZ}=a,{data:g}=n[0];return{filterState:l,behaviors:t,width:i,height:r,data:g,formData:{...Zp,...o},setDataMask:c,setHoveredFilter:d,unsetHoveredFilter:u,setFocusedFilter:m,unsetFocusedFilter:p,setFilterActive:h,inputRef:s}}var th=o(47477);class oh extends c.A{constructor(){const e=new l.A({name:(0,s.t)("Time column"),description:(0,s.t)("Time column filter plugin"),behaviors:[Re.nS.InteractiveChart,Re.nS.NativeFilter],tags:[(0,s.t)("Experimental")],thumbnail:th});super({buildQuery:Kp,controlPanel:Xp,loadChart:()=>Promise.all([o.e(8096),o.e(2144)]).then(o.bind(o,12823)),metadata:e,transformProps:eh})}}function rh(e){return(0,Et.A)(e,(()=>[{result_type:"timegrains",columns:[],metrics:[],orderby:[]}]))}const ah={controlPanelSections:[{label:(0,s.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,s.t)("Filter value is required"),default:!1,renderTrigger:!0,description:(0,s.t)("User must select a value before applying the filter")}}]]}]},nh={defaultValue:null};function ih(e){const{formData:t,height:o,hooks:r,queriesData:a,width:n,filterState:i,inputRef:l}=e,{setDataMask:s=Ip.fZ,setHoveredFilter:c=Ip.fZ,unsetHoveredFilter:d=Ip.fZ,setFocusedFilter:u=Ip.fZ,unsetFocusedFilter:m=Ip.fZ,setFilterActive:p=Ip.fZ}=r,{data:h}=a[0];return{filterState:i,width:n,height:o,data:h,formData:{...nh,...t},setDataMask:s,setHoveredFilter:c,unsetHoveredFilter:d,setFocusedFilter:u,unsetFocusedFilter:m,setFilterActive:p,inputRef:l}}var lh=o(29257);class sh extends c.A{constructor(){const e=new l.A({name:(0,s.t)("Time grain"),description:(0,s.t)("Time grain filter plugin"),behaviors:[Re.nS.InteractiveChart,Re.nS.NativeFilter],tags:[(0,s.t)("Experimental")],thumbnail:lh});super({buildQuery:rh,controlPanel:ah,loadChart:()=>Promise.all([o.e(8096),o.e(2368)]).then(o.bind(o,583)),metadata:e,transformProps:ih})}}function ch(e){const{groupbyColumns:t=[],groupbyRows:o=[],extra_form_data:r}=e,a=(null==r?void 0:r.time_grain_sqla)||e.time_grain_sqla,n=Array.from(new Set([...(0,T.A)(t),...(0,T.A)(o)])).map((t=>{var o;return(0,St.eh)(t)&&a&&(null!=e&&null!=(o=e.temporal_columns_lookup)&&o[t]||e.granularity_sqla===t)?{timeGrain:a,columnType:"BASE_AXIS",sqlExpression:t,label:t,expressionType:"SQL"}:t}));return(0,Et.A)(e,(e=>{const{series_limit_metric:t,metrics:o,order_desc:r}=e;let a;return t?a=[[t,!r]]:Array.isArray(o)&&o[0]&&(a=[[o[0],!r]]),[{...e,orderby:a,columns:n}]}))}var dh=o(64311);const uh={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupbyColumns",config:{...H.A.groupby,label:(0,s.t)("Columns"),description:(0,s.t)("Columns to group by on the columns")}}],[{name:"groupbyRows",config:{...H.A.groupby,label:(0,s.t)("Rows"),description:(0,s.t)("Columns to group by on the rows")}}],[{name:"time_grain_sqla",config:{...H.A.time_grain_sqla,visibility:({controls:e})=>{var t;const o=Object.fromEntries((0,T.A)(null==e||null==(t=e.groupbyColumns)?void 0:t.options).map((e=>[e.column_name,e.is_dttm])));return[...(0,T.A)(null==e?void 0:e.groupbyColumns.value),...(0,T.A)(null==e?void 0:e.groupbyRows.value)].map((e=>!!(0,St.q0)(e)||!!(0,St.eh)(e)&&!!o[e])).some(Boolean)}}},"temporal_columns_lookup"],[{name:"metrics",config:{...H.A.metrics,validators:[C.A],rerender:["conditional_formatting"]}}],[{name:"metricsLayout",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,s.t)("Apply metrics on"),default:dh.P.COLUMNS,options:[[dh.P.COLUMNS,(0,s.t)("Columns")],[dh.P.ROWS,(0,s.t)("Rows")]],description:(0,s.t)("Use metrics as a top level group for columns or for rows")}}],["adhoc_filters"],["series_limit"],[{name:"row_limit",config:{...H.A.row_limit,label:(0,s.t)("Cell limit"),description:(0,s.t)("Limits the number of cells that get retrieved.")}}],[{name:"series_limit_metric",config:{...H.A.series_limit_metric,description:(0,s.t)("Metric used to define how the top series are sorted if a series or cell limit is present. If undefined reverts to the first metric (where appropriate).")}}],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,s.t)("Sort Descending"),default:!0,description:(0,s.t)("Whether to sort descending or ascending")}}]]},{label:(0,s.t)("Options"),expanded:!0,tabOverride:"data",controlSetRows:[[{name:"aggregateFunction",config:{type:"SelectControl",label:(0,s.t)("Aggregation function"),clearable:!1,choices:[["Count",(0,s.t)("Count")],["Count Unique Values",(0,s.t)("Count Unique Values")],["List Unique Values",(0,s.t)("List Unique Values")],["Sum",(0,s.t)("Sum")],["Average",(0,s.t)("Average")],["Median",(0,s.t)("Median")],["Sample Variance",(0,s.t)("Sample Variance")],["Sample Standard Deviation",(0,s.t)("Sample Standard Deviation")],["Minimum",(0,s.t)("Minimum")],["Maximum",(0,s.t)("Maximum")],["First",(0,s.t)("First")],["Last",(0,s.t)("Last")],["Sum as Fraction of Total",(0,s.t)("Sum as Fraction of Total")],["Sum as Fraction of Rows",(0,s.t)("Sum as Fraction of Rows")],["Sum as Fraction of Columns",(0,s.t)("Sum as Fraction of Columns")],["Count as Fraction of Total",(0,s.t)("Count as Fraction of Total")],["Count as Fraction of Rows",(0,s.t)("Count as Fraction of Rows")],["Count as Fraction of Columns",(0,s.t)("Count as Fraction of Columns")]],default:"Sum",description:(0,s.t)("Aggregate function to apply when pivoting and computing the total rows and columns"),renderTrigger:!0}}],[{name:"rowTotals",config:{type:"CheckboxControl",label:(0,s.t)("Show rows total"),default:!1,renderTrigger:!0,description:(0,s.t)("Display row level total")}}],[{name:"rowSubTotals",config:{type:"CheckboxControl",label:(0,s.t)("Show rows subtotal"),default:!1,renderTrigger:!0,description:(0,s.t)("Display row level subtotal")}}],[{name:"colTotals",config:{type:"CheckboxControl",label:(0,s.t)("Show columns total"),default:!1,renderTrigger:!0,description:(0,s.t)("Display column level total")}}],[{name:"colSubTotals",config:{type:"CheckboxControl",label:(0,s.t)("Show columns subtotal"),default:!1,renderTrigger:!0,description:(0,s.t)("Display column level subtotal")}}],[{name:"transposePivot",config:{type:"CheckboxControl",label:(0,s.t)("Transpose pivot"),default:!1,description:(0,s.t)("Swap rows and columns"),renderTrigger:!0}}],[{name:"combineMetric",config:{type:"CheckboxControl",label:(0,s.t)("Combine metrics"),default:!1,description:(0,s.t)("Display metrics side by side within each column, as opposed to each column being displayed side by side for each metric."),renderTrigger:!0}}]]},{label:(0,s.t)("Options"),expanded:!0,controlSetRows:[[{name:"valueFormat",config:{...H.A.y_axis_format,label:(0,s.t)("Value format")}}],["currency_format"],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Date format"),default:qe.f,renderTrigger:!0,choices:g.lR,description:(0,s.t)("D3 time format for datetime columns")}}],[{name:"rowOrder",config:{type:"SelectControl",label:(0,s.t)("Sort rows by"),default:"key_a_to_z",choices:[["key_a_to_z",(0,s.t)("key a-z")],["key_z_to_a",(0,s.t)("key z-a")],["value_a_to_z",(0,s.t)("value ascending")],["value_z_to_a",(0,s.t)("value descending")]],renderTrigger:!0,description:(0,fe.FD)(fe.FK,{children:[(0,fe.Y)("div",{children:(0,s.t)("Change order of rows.")}),(0,fe.Y)("div",{children:(0,s.t)("Available sorting modes:")}),(0,fe.FD)("ul",{children:[(0,fe.Y)("li",{children:(0,s.t)("By key: use row names as sorting key")}),(0,fe.Y)("li",{children:(0,s.t)("By value: use metric values as sorting key")})]})]})}}],[{name:"colOrder",config:{type:"SelectControl",label:(0,s.t)("Sort columns by"),default:"key_a_to_z",choices:[["key_a_to_z",(0,s.t)("key a-z")],["key_z_to_a",(0,s.t)("key z-a")],["value_a_to_z",(0,s.t)("value ascending")],["value_z_to_a",(0,s.t)("value descending")]],renderTrigger:!0,description:(0,fe.FD)(fe.FK,{children:[(0,fe.Y)("div",{children:(0,s.t)("Change order of columns.")}),(0,fe.Y)("div",{children:(0,s.t)("Available sorting modes:")}),(0,fe.FD)("ul",{children:[(0,fe.Y)("li",{children:(0,s.t)("By key: use column names as sorting key")}),(0,fe.Y)("li",{children:(0,s.t)("By value: use metric values as sorting key")})]})]})}}],[{name:"rowSubtotalPosition",config:{type:"SelectControl",label:(0,s.t)("Rows subtotal position"),default:!1,choices:[[!0,(0,s.t)("Top")],[!1,(0,s.t)("Bottom")]],renderTrigger:!0,description:(0,s.t)("Position of row level subtotal")}}],[{name:"colSubtotalPosition",config:{type:"SelectControl",label:(0,s.t)("Columns subtotal position"),default:!1,choices:[[!0,(0,s.t)("Left")],[!1,(0,s.t)("Right")]],renderTrigger:!0,description:(0,s.t)("Position of column level subtotal")}}],[{name:"conditional_formatting",config:{type:"ConditionalFormattingControl",renderTrigger:!0,label:(0,s.t)("Conditional formatting"),description:(0,s.t)("Apply conditional color formatting to metrics"),mapStateToProps(e,t,o){var r,a,n,i,l,s;const c=null!=(r=null==e||null==(a=e.controls)||null==(a=a.metrics)?void 0:a.value)?r:[],d=null!=e&&null!=(n=e.datasource)&&n.hasOwnProperty("verbose_map")?null==e||null==(i=e.datasource)?void 0:i.verbose_map:null!=(l=null==e||null==(s=e.datasource)?void 0:s.columns)?l:{};return{removeIrrelevantConditions:"success"===(null==o?void 0:o.chartStatus),columnOptions:c.map((e=>"string"==typeof e?{value:e,label:Array.isArray(d)?e:d[e]}:{value:e.label,label:e.label})),verboseMap:d}}}}],[{name:"allow_render_html",config:{type:"CheckboxControl",label:(0,s.t)("Render columns in HTML format"),renderTrigger:!0,default:!0,description:(0,s.t)("Renders table cells as HTML when applicable. For example, HTML <a> tags will be rendered as hyperlinks.")}}]]}],formDataOverrides:e=>{const t=(0,f.a)().controls.columns.filter((t=>!(0,T.A)(e.groupbyRows).includes(t)));return(0,f.a)().controls.columns=(0,f.a)().controls.columns.filter((e=>!t.includes(e))),{...e,metrics:(0,f.a)().popAllMetrics(),groupbyColumns:t}}},mh=uh,{DATABASE_DATETIME:ph}=Ve.A;function hh(e){const{width:t,height:o,queriesData:r,formData:a,rawFormData:n,hooks:{setDataMask:i=()=>{},onContextMenu:l},filterState:s,datasource:{verboseMap:c={},columnFormats:d={},currencyFormats:m={}},emitCrossFilters:p,theme:h}=e,{data:g,colnames:f,coltypes:b}=r[0],{groupbyRows:y,groupbyColumns:v,metrics:x,tableRenderer:_,colOrder:S,rowOrder:w,aggregateFunction:C,transposePivot:T,combineMetric:A,rowSubtotalPosition:k,colSubtotalPosition:F,colTotals:M,colSubTotals:P,rowTotals:L,rowSubTotals:D,valueFormat:O,dateFormat:R,metricsLayout:B,conditionalFormatting:I,timeGrainSqla:N,currencyFormat:E,allowRenderHtml:z}=a,{selectedFilters:j}=s,V=(0,Ye.A)(n),$=f.filter(((e,t)=>b[t]===$e.s.Temporal)).reduce(((e,t)=>{let o;return R===qe.f?o=V?(0,u.PT)(V):function(e,t=[]){return t.every((t=>null===t[e]||void 0===t[e]||"number"==typeof t[e]))}(t,g)?(0,u.mo)(ph):String:R&&(o=(0,u.mo)(R)),o&&(e[t]=o),e}),{}),Y=(0,Qe.Lj)(I,g,h);return{width:t,height:o,data:g,groupbyRows:y,groupbyColumns:v,metrics:x,tableRenderer:_,colOrder:S,rowOrder:w,aggregateFunction:C,transposePivot:T,combineMetric:A,rowSubtotalPosition:k,colSubtotalPosition:F,colTotals:M,colSubTotals:P,rowTotals:L,rowSubTotals:D,valueFormat:O,currencyFormat:E,emitCrossFilters:p,setDataMask:i,selectedFilters:j,verboseMap:c,columnFormats:d,currencyFormats:m,metricsLayout:B,metricColorFormatters:Y,dateFormatters:$,onContextMenu:l,timeGrainSqla:N,allowRenderHtml:z}}var gh=o(86995);const fh=o.p+"example.b4ba0c5a.jpg";class bh extends c.A{constructor(){const e=new l.A({behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],category:(0,s.t)("Table"),description:(0,s.t)("Used to summarize a set of data by grouping together multiple statistics along two axes. Examples: Sales numbers by region and month, tasks by status and assignee, active users by age and location. Not the most visually stunning visualization, but highly informative and versatile."),exampleGallery:[{url:fh}],name:(0,s.t)("Pivot Table"),tags:[(0,s.t)("Additive"),(0,s.t)("Report"),(0,s.t)("Tabular"),(0,s.t)("Featured")],thumbnail:gh});super({buildQuery:ch,controlPanel:mh,loadChart:()=>o.e(1085).then(o.bind(o,21085)),metadata:e,transformProps:hh})}}var yh=o(97930);const vh=o.p+"example1.297446aa.jpg",xh=o.p+"example2.ef2d1091.jpg";function _h(e){return(0,Et.A)(e,(e=>[{...e,orderby:(0,uc.A)(e).orderby}]))}function Sh(e){var t,o;const r=null==e||null==(t=e.query_mode)?void 0:t.value;if(r===Ue.g.Aggregate||r===Ue.g.Raw)return r;const a=null==e||null==(o=e.all_columns)?void 0:o.value;return a&&a.length>0?Ue.g.Raw:Ue.g.Aggregate}function wh(e){return({controls:t})=>Sh(t)===e}const Ch=wh(Ue.g.Aggregate),Th=wh(Ue.g.Raw),Ah=(e,t)=>t.every((e=>0===(0,T.A)(e).length))&&Ch({controls:e})?[(0,s.t)("Group By, Metrics or Percentage Metrics must have a value")]:[],kh={type:"DndColumnSelect",label:(0,s.t)("Columns"),description:(0,s.t)("Columns to display"),default:[],mapStateToProps({datasource:e,controls:t},o){const r={};var a,n;return e&&(null!=e&&null!=(a=e.columns[0])&&a.hasOwnProperty("filterable")?r.options=null==e||null==(n=e.columns)?void 0:n.filter((e=>e.filterable)):r.options=e.columns),r.queryMode=Sh(t),r.externalValidationErrors=Th({controls:t})&&0===(0,T.A)(null==o?void 0:o.value).length?[(0,s.t)("must have a value")]:[],r},visibility:Th,resetOnHide:!1},Fh={name:"all_columns",config:kh},Mh={name:"groupby",override:{visibility:Ch,resetOnHide:!1,mapStateToProps:(e,t)=>{var o,r,a,n;const{controls:i}=e,l=null==H.A||null==(o=H.A.groupby)?void 0:o.mapStateToProps,s=null!=(r=null==l?void 0:l(e,t))?r:{};return s.externalValidationErrors=Ah(i,[null==(a=i.metrics)?void 0:a.value,null==(n=i.percent_metrics)?void 0:n.value,t.value]),s},rerender:["metrics","percent_metrics"]}};var Ph=o(50290),Lh=o(7437),Dh=o(70470);o(15850),o(16987),o(48320),o(51289);const Oh=({mode:e,theme:t,name:o,width:r,height:a,value:n,...i})=>{const l=o||Math.random().toString(36).substring(7),s="light"===t?"github":"monokai",c=e||"handlebars",d=a||"300px",u=r||"100%";return(0,fe.Y)("div",{className:"code-editor",style:{minHeight:a,width:u},children:(0,fe.Y)(Dh.default,{mode:c,theme:s,name:l,height:d,width:u,fontSize:14,showPrintMargin:!0,focus:!0,editorProps:{$blockScrolling:!0},wrapEnabled:!0,highlightActiveLine:!0,value:n,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2,showGutter:!0},...i})})},Rh=({children:e})=>(0,fe.Y)("div",{className:"ControlHeader",children:(0,fe.Y)("div",{className:"pull-left",children:e})});var Bh=o(38221),Ih=o.n(Bh),Nh=o(23575);const Eh=Ih()(((e,t)=>e(t)),Nh.Y.SLOW_DEBOUNCE),zh={name:"handlebarsTemplate",config:{...H.A.entity,type:e=>{const t=(0,Ph.DP)(),o=String(null!=e&&e.value?null==e?void 0:e.value:null!=e&&e.default?null==e?void 0:e.default:""),r=`\n${(0,s.t)("Available Handlebars Helpers in Superset:")}\n\n${[{key:"dateFormat",descKey:"Formats a date using a specified format."},{key:"stringify",descKey:"Converts an object to a JSON string."},{key:"formatNumber",descKey:"Formats a number using locale-specific formatting."},{key:"parseJson",descKey:"Parses a JSON string into a JavaScript object."}].map((({key:e,descKey:t})=>`- **${e}**: ${(0,s.t)(t)}`)).join("\n")}\n`;return(0,fe.FD)("div",{children:[(0,fe.Y)(Rh,{children:(0,fe.FD)("div",{children:[e.label,(0,fe.Y)(xe.I,{iconStyle:{marginLeft:t.sizeUnit},tooltip:(0,fe.Y)(Lh.z,{source:r})})]})}),(0,fe.Y)(Oh,{theme:"dark",value:o,onChange:t=>{Eh(e.onChange,t||"")}})]})},label:(0,s.t)("Handlebars Template"),description:(0,s.t)("A handlebars template that is applied to the data"),default:'<ul class="data-list">\n  {{#each data}}\n    <li>{{stringify this}}</li>\n  {{/each}}\n</ul>',isInt:!1,renderTrigger:!0,valueKey:null,validators:[C.A],mapStateToProps:({controls:e})=>{var t;return{value:null==e||null==(t=e.handlebars_template)?void 0:t.value}}}},jh={name:"include_time",config:{type:"CheckboxControl",label:(0,s.t)("Include time"),description:(0,s.t)("Whether to include the time granularity as defined in the time section"),default:!1,visibility:Ch,resetOnHide:!1}},Vh={name:"timeseries_limit_metric",override:{visibility:Ch,resetOnHide:!1}},$h={type:"MetricsControl",label:(0,s.t)("Percentage metrics"),description:(0,s.t)("Select one or many metrics to display, that will be displayed in the percentages of total. Percentage metrics will be calculated only from data within the row limit. You can use an aggregation function on a column or write custom SQL to create a percentage metric."),multi:!0,visibility:Ch,resetOnHide:!1,mapStateToProps:({datasource:e,controls:t},o)=>{var r,a;return{columns:(null==e?void 0:e.columns)||[],savedMetrics:(0,xt._)(e),datasource:e,datasourceType:null==e?void 0:e.type,queryMode:Sh(t),externalValidationErrors:Ah(t,[null==(r=t.groupby)?void 0:r.value,null==(a=t.metrics)?void 0:a.value,null==o?void 0:o.value])}},rerender:["groupby","metrics"],default:[],validators:[]},Yh={name:"percent_metrics",config:{...{...$h,type:"DndMetricSelect"}}},Gh={name:"metrics",override:{validators:[],visibility:Ch,mapStateToProps:({controls:e,datasource:t,form_data:o},r)=>{var a,n,i,l;return{columns:null!=t&&null!=(a=t.columns[0])&&a.hasOwnProperty("filterable")?null==t||null==(n=t.columns)?void 0:n.filter((e=>e.filterable)):null==t?void 0:t.columns,savedMetrics:(0,xt._)(t),selectedMetrics:o.metrics||(o.metric?[o.metric]:[]),datasource:t,externalValidationErrors:Ah(e,[null==(i=e.groupby)?void 0:i.value,null==(l=e.percent_metrics)?void 0:l.value,r.value])}},rerender:["groupby","percent_metrics"],resetOnHide:!1}},qh={name:"show_totals",config:{type:"CheckboxControl",label:(0,s.t)("Show summary"),default:!1,description:(0,s.t)("Show total aggregations of selected metrics. Note that row limit does not apply to the result."),visibility:Ch,resetOnHide:!1}},Wh={name:"order_by_cols",config:{type:"SelectControl",label:(0,s.t)("Ordering"),description:(0,s.t)("Order results by selected columns"),multi:!0,default:[],mapStateToProps:({datasource:e})=>({choices:null!=e&&e.hasOwnProperty("order_by_choices")?null==e?void 0:e.order_by_choices:(null==e?void 0:e.columns)||[]}),visibility:Th,resetOnHide:!1}},Uh={name:"order_desc",config:{type:"CheckboxControl",label:(0,s.t)("Sort descending"),default:!0,description:(0,s.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>!(!Ch({controls:e})||null==e||!e.timeseries_limit_metric.value||Ee()(null==e?void 0:e.timeseries_limit_metric.value)),resetOnHide:!1}},Hh={type:"RadioButtonControl",label:(0,s.t)("Query mode"),default:null,options:[[Ue.g.Aggregate,yt.cA[Ue.g.Aggregate]],[Ue.g.Raw,yt.cA[Ue.g.Raw]]],mapStateToProps:({controls:e})=>({value:Sh(e)}),rerender:["all_columns","groupby","metrics","percent_metrics"]},Qh={name:"query_mode",config:Hh},Jh={name:"styleTemplate",config:{...H.A.entity,type:e=>{const t=(0,Ph.DP)(),o=null!=e&&e.value?void 0:"/*\n  .data-list {\n    background-color: yellow;\n  }\n*/";return(0,fe.FD)("div",{children:[(0,fe.Y)(Rh,{children:(0,fe.FD)("div",{children:[e.label,(0,fe.Y)(xe.I,{iconStyle:{marginLeft:t.sizeUnit},tooltip:(0,s.t)("You need to configure HTML sanitization to use CSS")})]})}),(0,fe.Y)(Oh,{theme:"dark",mode:"css",value:e.value,defaultValue:o,onChange:t=>{Eh(e.onChange,t||"")}})]})},label:(0,s.t)("CSS Styles"),description:(0,s.t)("CSS applied to the chart"),isInt:!1,renderTrigger:!0,valueKey:null,validators:[],mapStateToProps:({controls:e})=>{var t;return{value:null==e||null==(t=e.handlebars_template)?void 0:t.value}}}},Kh={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[Qh],[Mh],[Gh,Fh],[Yh],[Vh,Wh],[Uh],[{name:"row_limit",override:{visibility:({controls:e})=>{var t;return!(null!=e&&null!=(t=e.server_pagination)&&t.value)}}}],[jh],[qh],["adhoc_filters"]]},{label:(0,s.t)("Options"),expanded:!0,controlSetRows:[[zh],[Jh]]}],formDataOverrides:e=>({...e,groupby:(0,f.a)().popAllColumns(),metrics:(0,f.a)().popAllMetrics()})},Xh=Kh;function Zh(e){const{width:t,height:o,formData:r,queriesData:a}=e;return{width:t,height:o,data:a[0].data,formData:r}}class eg extends c.A{constructor(){const e=new l.A({description:(0,s.t)("Write a handlebars template to render the data"),name:(0,s.t)("Handlebars"),thumbnail:yh,exampleGallery:[{url:vh},{url:xh}]});super({buildQuery:_h,controlPanel:Xh,loadChart:()=>o.e(4887).then(o.bind(o,44887)),metadata:e,transformProps:Zh})}}var tg,og=o(85923),rg=o(2404),ag=o.n(rg),ng=o(64157);!function(e){e.Green="Green",e.Red="Red"}(tg||(tg={}));const{PERCENT_3_POINT:ig}=je.A,{DATABASE_DATETIME:lg}=Ve.A;function sg(e,t=[]){return t.every((t=>null===t[e]||void 0===t[e]||"number"==typeof t[e]))}const cg=(e,t)=>{const o=e-t;let r;return r=e||t?e&&t?(e-t)/Math.abs(t):e?1:-1:0,{valueDifference:o,percentDifferenceNum:r}},dg=(e,t,o)=>o[`${e} ${t}`]||{},ug=(e,t,o,r,a)=>{var n,i;const l=dg(e,t.key,o),s=null==(n=l.currencyFormat)?void 0:n.symbol,c=l.d3NumberFormat||(null==(i=t.config)?void 0:i.d3NumberFormat);let{formatter:u}=t;if("%"===e)u=(0,d.gV)(c||ig);else if(c||s){const e=l.currencyFormat||a,t=c||r;u=e?new We.A({d3Format:t,currency:e}):(0,d.gV)(t)}return u},mg=(0,ze.A)((function(e,t,o){return null==e?void 0:e.map((e=>{const r={};return t.forEach((t=>{if((t.isMetric||t.isPercentMetric)&&!t.key.includes(o)&&t.isNumeric){const a=e[t.key]||0,n=t.isMetric?(null==e?void 0:e[`${t.key}__${o}`])||0:e[`%${t.key.slice(1)}__${o}`]||0,{valueDifference:i,percentDifferenceNum:l}=cg(a,n);r[`Main ${t.key}`]=a,r[`# ${t.key}`]=n,r[` ${t.key}`]=i,r[`% ${t.key}`]=l}})),Object.keys(e).forEach((o=>{t.some((e=>e.key===o&&(e.isMetric||e.isPercentMetric)))||(r[o]=e[o])})),r}))})),pg=new Map,hg=(0,ze.A)((function(e,t){if(null==e||!e[0])return e||[];const o=t.filter((e=>e.dataType===$e.s.Temporal));return o.length>0?e.map((e=>{const t={...e};return o.forEach((({key:o,formatter:r})=>{t[o]=new ng.A(e[o],{formatter:r})})),t})):e})),gg=(0,ze.A)((function(e){const{datasource:{columnFormats:t,currencyFormats:o,verboseMap:r},rawFormData:{table_timestamp_format:a,metrics:n,percent_metrics:i,column_config:l={}},queriesData:s}=e,c=(0,Ye.A)(e.rawFormData),{data:m,colnames:p,coltypes:h}=s[0]||{},g=(null!=n?n:[]).map(Ge.A),f=(null!=i?i:[]).map(Ge.A),b=f.map((e=>`%${e}`)),y=new Set(g),v=new Set(b),x=new Set(f),_=(p||[]).filter((e=>!(x.has(e)&&!y.has(e)))).map(((e,n)=>{var i;const s=h[n],p=l[e]||{},g=y.has(e)&&sg(e,m),f=v.has(e),b=f&&null!=r&&r.hasOwnProperty(e.replace("%",""))?`%${r[e.replace("%","")]}`:(null==r?void 0:r[e])||e,x=s===$e.s.Temporal,_=s===$e.s.Numeric,S=null==t?void 0:t[e],w=null==o?void 0:o[e],C=p.d3NumberFormat||S,T=null!=(i=p.currencyFormat)&&i.symbol?p.currencyFormat:w;let A;if(x||p.d3TimeFormat){const t=p.d3TimeFormat||S,o=t||a;o===qe.f?A=c?(0,u.PT)(c):t?(0,u.mo)(t):sg(e,m)?(0,u.mo)(lg):String:o&&(A=(0,u.mo)(o))}else f?A=(0,d.gV)(C||ig):(g||_&&(C||T))&&(A=null!=T&&T.symbol?new We.A({d3Format:C,currency:T}):(0,d.gV)(C));return{key:e,label:b,dataType:s,isNumeric:s===$e.s.Numeric,isMetric:g,isPercentMetric:f,formatter:A,config:p}}));return[g,b,_]}),(function(e,t){var o,r,a,n;const i=e[0],l=t[0];return i.datasource.columnFormats===l.datasource.columnFormats&&i.datasource.currencyFormats===l.datasource.currencyFormats&&i.datasource.verboseMap===l.datasource.verboseMap&&i.formData.tableTimestampFormat===l.formData.tableTimestampFormat&&i.formData.timeGrainSqla===l.formData.timeGrainSqla&&JSON.stringify(i.formData.columnConfig||null)===JSON.stringify(l.formData.columnConfig||null)&&(0,Je.A)(i.formData.metrics,l.formData.metrics)&&(0,Je.A)(null==(o=i.queriesData)||null==(o=o[0])?void 0:o.colnames,null==(r=l.queriesData)||null==(r=r[0])?void 0:r.colnames)&&(0,Je.A)(null==(a=i.queriesData)||null==(a=a[0])?void 0:a.coltypes,null==(n=l.queriesData)||null==(n=n[0])?void 0:n.coltypes)&&JSON.stringify(i.formData.extraFilters||null)===JSON.stringify(l.formData.extraFilters||null)&&JSON.stringify(i.formData.extraFormData||null)===JSON.stringify(l.formData.extraFormData||null)&&JSON.stringify(i.rawFormData.column_config||null)===JSON.stringify(l.rawFormData.column_config||null)})),fg=e=>{var t,o,r,a,i,l,c;const{height:d,width:u,rawFormData:m,queriesData:p=[],ownState:h,filterState:g,hooks:{setDataMask:f=()=>{}},emitCrossFilters:b,theme:y}=e,{include_search:v=!1,page_length:x,order_desc:_=!1,slice_id:S,time_compare:w,comparison_type:C,server_pagination:A=!1,server_page_length:k=10,query_mode:F,align_pn:M=!0,show_cell_bars:P=!0,color_pn:L=!0,show_totals:D,conditional_formatting:O,comparison_color_enabled:R=!1,comparison_color_scheme:B=tg.Green}=m,I=!Ee()(w)&&F===Ue.g.Aggregate&&C===He.g1.Values&&(0,n.G7)(n.TO.TableV2TimeComparisonEnabled),N=(0,T.A)(m.time_compare).filter((e=>"custom"!==e&&"inherit"!==e)),E=(0,T.A)(m.time_compare).filter((e=>"custom"===e||"inherit"===e));let z=[];I&&!Ee()(N)&&(z=N),I&&!Ee()(E)&&(E.includes("custom")&&(z=z.concat([m.start_date_offset])),E.includes("inherit")&&(z=z.concat(["inherit"])));const j=(e,t)=>{if(0===e)return{arrow:"",arrowColor:"",backgroundColor:"rgba(0,0,0,0.2)"};const o=e>0;return{arrow:o?"":"",arrowColor:t===tg.Green?o?tg.Green:tg.Red:o?tg.Red:tg.Green,backgroundColor:t===tg.Green?`rgba(${o?"0,150,0":"150,0,0"},0.2)`:`rgba(${o?"150,0,0":"0,150,0"},0.2)`}},V=(0,ze.A)((function(e,t,o){const r=o?t.filter((e=>o.some((t=>{var o;return null==t||null==(o=t.column)?void 0:o.includes(e.key)})))):t;return null==e?void 0:e.map((e=>{const t={};return r.forEach((r=>{if((r.isMetric||r.isPercentMetric)&&!r.key.includes((0,T.A)(z)[0])&&r.isNumeric){const a=e[r.key]||0,n=r.isMetric?(null==e?void 0:e[`${r.key}__${(0,T.A)(z)[0]}`])||0:e[`%${r.key.slice(1)}__${(0,T.A)(z)[0]}`]||0,{percentDifferenceNum:i}=cg(a,n);if(o)o.forEach((e=>{var o;if(null!=e&&null!=(o=e.column)&&o.includes(r.key)){const{arrow:o,arrowColor:r,backgroundColor:a}=j(i,e.colorScheme||B);t[e.column]={mainArrow:o,arrowColor:r,backgroundColor:a}}}));else{const{arrow:e,arrowColor:o,backgroundColor:a}=j(i,B);t[`${r.key}`]={mainArrow:e,arrowColor:o,backgroundColor:a}}}})),t}))}));let $=!1;const Y=pg.get(S);ag()(Y,k)||(pg.set(S,k),$=!0);const[,G,q]=gg(e),W=(0,Ye.A)(m),U=I?(0,T.A)(z)[0]:"";let H,Q,J,K,X=[];var Z,ee,te,oe;I&&(X=((e,t,o)=>e.map((e=>{const{datasource:{columnFormats:r,currencyFormats:a},rawFormData:{column_config:n={}}}=t,i=null==r?void 0:r[e.key],l=null==a?void 0:a[e.key],c=e.label;return(e.isMetric||e.isPercentMetric)&&!e.key.includes(o)&&e.isNumeric?[{...e,originalLabel:c,metricName:e.key,label:(0,s.t)("Main"),key:`${(0,s.t)("Main")} ${e.key}`,config:dg((0,s.t)("Main"),e.key,n),formatter:ug((0,s.t)("Main"),e,n,i,l)},{...e,originalLabel:c,metricName:e.key,label:"#",key:`# ${e.key}`,config:dg("#",e.key,n),formatter:ug("#",e,n,i,l)},{...e,originalLabel:c,metricName:e.key,label:"",key:` ${e.key}`,config:dg("",e.key,n),formatter:ug("",e,n,i,l)},{...e,originalLabel:c,metricName:e.key,label:"%",key:`% ${e.key}`,config:dg("%",e.key,n),formatter:ug("%",e,n,i,l)}]:e.isMetric||e.isPercentMetric||e.key.includes(o)?[]:[e]})).flat())(q,e,U)),A?([H,Q,K]=p,J=null!=(Z=null==(ee=Q)||null==(ee=ee.data)||null==(ee=ee[0])?void 0:ee.rowcount)?Z:0):([H,K]=p,J=null!=(te=null==(oe=H)?void 0:oe.rowcount)?te:0);const re=hg(null==(t=H)?void 0:t.data,q),ae=mg(null==(o=H)?void 0:o.data,q,U),ne=I?ae||[]:re,ie=I?X:q,le=R&&V(null==(r=H)?void 0:r.data,q),se=null!=(a=(0,Qe.Lj)(O,ne,y))?a:[],ce=((e,t,o)=>{const r=null==o?void 0:o.filter((e=>e.column&&(e.colorScheme===tg.Green||e.colorScheme===tg.Red)));return null!=r&&r.length?V(e,t,r):void 0})(null==(i=H)?void 0:i.data,q,O),de=function(e){const t=Number(e);return null!=e&&""!==e&&!Number.isNaN(t)&&t>0}(x),ue=D&&F===Ue.g.Aggregate?I?((e,t)=>{if(!t)return t;const o={};return t.map((t=>Object.keys(t).forEach((r=>{if(void 0!==t[r]&&!r.includes(e)){var a,n,i,l;o[`Main ${r}`]=parseInt((null==(a=o[`Main ${r}`])?void 0:a.toString())||"0",10)+parseInt((null==(n=t[r])?void 0:n.toString())||"0",10),o[`# ${r}`]=parseInt((null==(i=o[`# ${r}`])?void 0:i.toString())||"0",10)+parseInt((null==(l=t[`${r}__${e}`])?void 0:l.toString())||"0",10);const{valueDifference:s,percentDifferenceNum:c}=cg(o[`Main ${r}`],o[`# ${r}`]);o[` ${r}`]=s,o[`% ${r}`]=c}})))),o})(U,null==(l=K)?void 0:l.data):null==(c=K)?void 0:c.data[0]:void 0;return{height:d,width:u,data:ne,columns:ie,percentMetrics:G,setDataMask:f,sortDesc:_,includeSearch:v,pageSize:(me=x,pe=re.length,he=q.length,"number"==typeof me?me||0:"string"==typeof me?Number(me)||0:pe*he>5e3?200:0),filters:g.filters,emitCrossFilters:b,allowRearrangeColumns:!0,slice_id:S,serverPagination:A,rowCount:J,serverPaginationData:h,hasServerPageLengthChanged:$,serverPageLength:k,hasPageLength:de,timeGrain:W,isRawRecords:F===Ue.g.Raw,alignPositiveNegative:M,showCellBars:P,isUsingTimeComparison:I,colorPositiveNegative:L,totals:ue,showTotals:D,columnColorFormatters:se,basicColorColumnFormatters:ce,basicColorFormatters:le,formData:m};var me,pe,he};var bg=o(84484);const yg=o.p+"Table.f8a6698c.jpg",vg=o.p+"Table2.c8533c18.jpg",xg=o.p+"Table3.8997ea72.jpg";var _g=o(34317);function Sg(e){var t,o;const r=null==e||null==(t=e.query_mode)?void 0:t.value;if(r===Ue.g.Aggregate||r===Ue.g.Raw)return r;const a=null==e||null==(o=e.all_columns)?void 0:o.value;return a&&a.length>0?Ue.g.Raw:Ue.g.Aggregate}function wg(e){return({controls:t})=>Sg(t)===e}const Cg=wg(Ue.g.Aggregate),Tg=wg(Ue.g.Raw),Ag=(e,t)=>t.every((e=>0===(0,T.A)(e).length))&&Cg({controls:e})?[(0,s.t)("Group By, Metrics or Percentage Metrics must have a value")]:[],kg={type:"RadioButtonControl",label:(0,s.t)("Query mode"),default:null,options:[[Ue.g.Aggregate,yt.cA[Ue.g.Aggregate]],[Ue.g.Raw,yt.cA[Ue.g.Raw]]],mapStateToProps:({controls:e})=>({value:Sg(e)}),rerender:["all_columns","groupby","metrics","percent_metrics"]},Fg={...H.A.groupby,label:(0,s.t)("Columns"),description:(0,s.t)("Columns to display"),multi:!0,freeForm:!0,allowAll:!0,commaChoosesOption:!1,optionRenderer:e=>(0,fe.Y)(vt.K,{showType:!0,column:e}),valueRenderer:e=>(0,fe.Y)(vt.K,{column:e}),valueKey:"column_name",mapStateToProps:({datasource:e,controls:t},o)=>({options:(null==e?void 0:e.columns)||[],queryMode:Sg(t),externalValidationErrors:Tg({controls:t})&&0===(0,T.A)(null==o?void 0:o.value).length?[(0,s.t)("must have a value")]:[]}),visibility:Tg,resetOnHide:!1},Mg={...H.A.metrics,label:(0,s.t)("Percentage metrics"),description:(0,s.t)("Select one or many metrics to display, that will be displayed in the percentages of total. Percentage metrics will be calculated only from data within the row limit. You can use an aggregation function on a column or write custom SQL to create a percentage metric."),visibility:Cg,resetOnHide:!1,mapStateToProps:({datasource:e,controls:t},o)=>{var r,a;return{columns:(null==e?void 0:e.columns)||[],savedMetrics:(0,xt._)(e),datasource:e,datasourceType:null==e?void 0:e.type,queryMode:Sg(t),externalValidationErrors:Ag(t,[null==(r=t.groupby)?void 0:r.value,null==(a=t.metrics)?void 0:a.value,null==o?void 0:o.value])}},rerender:["groupby","metrics"],default:[],validators:[]},Pg={controlPanelSections:[{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[[{name:"query_mode",config:kg}],[{name:"groupby",override:{visibility:Cg,resetOnHide:!1,mapStateToProps:(e,t)=>{var o,r,a;const{controls:n}=e,i=null==H.A||null==(o=H.A.groupby)?void 0:o.mapStateToProps,l=null!=(r=null==i?void 0:i(e,t))?r:{};return l.externalValidationErrors=Ag(n,[null==(a=n.metrics)?void 0:a.value,t.value]),l},rerender:["metrics","percent_metrics"]}}],[{name:"time_grain_sqla",config:{...H.A.time_grain_sqla,visibility:({controls:e})=>{var t;const o=Object.fromEntries((0,T.A)(null==e||null==(t=e.groupby)?void 0:t.options).map((e=>[e.column_name,e.is_dttm])));return(0,T.A)(null==e?void 0:e.groupby.value).map((e=>!!(0,St.q0)(e)||!!(0,St.eh)(e)&&!!o[e])).some(Boolean)}}},"temporal_columns_lookup"],[{name:"metrics",override:{validators:[],visibility:Cg,resetOnHide:!1,mapStateToProps:({controls:e,datasource:t,form_data:o},r)=>{var a,n,i;return{columns:null!=t&&null!=(a=t.columns[0])&&a.hasOwnProperty("filterable")?null==t||null==(n=t.columns)?void 0:n.filter((e=>e.filterable)):null==t?void 0:t.columns,savedMetrics:(0,xt._)(t),selectedMetrics:o.metrics||(o.metric?[o.metric]:[]),datasource:t,externalValidationErrors:Ag(e,[null==(i=e.groupby)?void 0:i.value,r.value])}},rerender:["groupby"]}},{name:"all_columns",config:Fg}],[{name:"percent_metrics",config:Mg}],["adhoc_filters"],[{name:"timeseries_limit_metric",override:{visibility:Cg,resetOnHide:!1}},{name:"order_by_cols",config:{type:"SelectControl",label:(0,s.t)("Ordering"),description:(0,s.t)("Order results by selected columns"),multi:!0,default:[],mapStateToProps:({datasource:e})=>({choices:null!=e&&e.hasOwnProperty("order_by_choices")?null==e?void 0:e.order_by_choices:(null==e?void 0:e.columns)||[]}),visibility:Tg,resetOnHide:!1}}],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,s.t)("Sort descending"),default:!0,description:(0,s.t)("If enabled, this control sorts the results/values descending, otherwise it sorts the results ascending."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.timeseries_limit_metric)?void 0:t.value)&&Cg({controls:e})},resetOnHide:!1}}],[{name:"server_pagination",config:{type:"CheckboxControl",label:(0,s.t)("Server pagination"),description:(0,s.t)("Enable server side pagination of results (experimental feature)"),default:!1}}],[{name:"server_page_length",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Server Page Length"),default:10,choices:_g.Dd,description:(0,s.t)("Rows per page, 0 means no pagination"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.server_pagination)?void 0:t.value)},validators:[wt.A]}}],[{name:"row_limit",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Row limit"),clearable:!1,mapStateToProps:e=>{var t,o,r;return{maxValue:null==e||null==(t=e.common)||null==(t=t.conf)?void 0:t.TABLE_VIZ_MAX_ROW_SERVER,server_pagination:null==e||null==(o=e.form_data)?void 0:o.server_pagination,maxValueWithoutServerPagination:null==e||null==(r=e.common)||null==(r=r.conf)?void 0:r.SQL_MAX_ROW}},validators:[wt.A,(e,t)=>(0,Ct.A)(e,(null==t?void 0:t.maxValue)||yt.Vt),(e,t)=>(0,Tt.A)(e,null==t?void 0:t.server_pagination,(null==t?void 0:t.maxValueWithoutServerPagination)||yt.sH,(null==t?void 0:t.maxValue)||yt.Vt)],validationDependancies:["server_pagination"],default:1e4,choices:(0,j.u)([10,50,100,250,500,1e3,5e3,1e4,5e4,1e5,15e4,2e5,25e4,3e5,35e4,4e5,45e4,5e5]),description:(0,s.t)("Limits the number of the rows that are computed in the query that is the source of the data used for this chart.")},override:{default:1e3}}],[{name:"show_totals",config:{type:"CheckboxControl",label:(0,s.t)("Show summary"),default:!1,description:(0,s.t)("Show total aggregations of selected metrics. Note that row limit does not apply to the result."),visibility:Cg,resetOnHide:!1}}]]},{label:(0,s.t)("Options"),expanded:!0,controlSetRows:[[{name:"table_timestamp_format",config:{type:"SelectControl",freeForm:!0,label:(0,s.t)("Timestamp format"),default:qe.f,renderTrigger:!0,clearable:!1,choices:g.lR,description:(0,s.t)("D3 time format for datetime columns")}}],[{name:"page_length",config:{type:"SelectControl",freeForm:!0,renderTrigger:!0,label:(0,s.t)("Page length"),default:null,choices:_g.xp,description:(0,s.t)("Rows per page, 0 means no pagination"),visibility:({controls:e})=>{var t;return!(null!=e&&null!=(t=e.server_pagination)&&t.value)}}},null],[{name:"include_search",config:{type:"CheckboxControl",label:(0,s.t)("Search box"),renderTrigger:!0,default:!1,description:(0,s.t)("Whether to include a client-side search box")}}],[{name:"column_config",config:{type:"ColumnConfigControl",label:(0,s.t)("Customize columns"),description:(0,s.t)("Further customize how to display each column"),width:400,height:320,renderTrigger:!0,shouldMapStateToProps:()=>!0,mapStateToProps(e,t,o){var r,a,n;const i=null==e||null==(r=e.controls)||null==(r=r.time_compare)?void 0:r.value,{colnames:l,coltypes:c}=null!=(a=null==o||null==(n=o.queriesResponse)?void 0:n[0])?a:{};let d=l||[],u=c||[];const m={},p={};if(!Ee()(i)){const t=[],o=[];d.filter((e=>bt()(e.split("__"))!==i)).forEach(((r,a)=>{if((0,_t.Du)({colname:r,colnames:d,formData:e.form_data}))return;const n=(0,_t.je)(r,e.form_data),i=(0,_t.Cn)(r,e.form_data);if(n||i){const e=(e=>[`${(0,s.t)("Main")} ${e}`,`# ${e}`,` ${e}`,`% ${e}`])(r);e.forEach(((e,r)=>{t.push(e),o.push(...Array(4).fill($e.s.Numeric)),p[e]=!0,0===r&&e.startsWith("Main ")?m[e]=!1:m[e]=!0}))}else t.push(r),o.push(u[a]),m[r]=!1,p[r]=!1})),d=t,u=o}return{columnsPropsObject:{colnames:d,coltypes:u,childColumnMap:m,timeComparisonColumnMap:p}}}}}]]},{label:(0,s.t)("Visual formatting"),expanded:!0,controlSetRows:[[{name:"show_cell_bars",config:{type:"CheckboxControl",label:(0,s.t)("Show cell bars"),renderTrigger:!0,default:!0,description:(0,s.t)("Whether to display a bar chart background in table columns")}}],[{name:"align_pn",config:{type:"CheckboxControl",label:(0,s.t)("Align +/-"),renderTrigger:!0,default:!1,description:(0,s.t)("Whether to align background charts with both positive and negative values at 0")}}],[{name:"color_pn",config:{type:"CheckboxControl",label:(0,s.t)("Add colors to cell bars for +/-"),renderTrigger:!0,default:!0,description:(0,s.t)("Whether to colorize numeric values by whether they are positive or negative")}}],[{name:"comparison_color_enabled",config:{type:"CheckboxControl",label:(0,s.t)("Basic conditional formatting"),renderTrigger:!0,visibility:({controls:e})=>{var t;return!Ee()(null==e||null==(t=e.time_compare)?void 0:t.value)},default:!1,description:(0,s.t)("This will be applied to the whole table. Arrows ( and ) will be added to main columns for increase and decrease. Basic conditional formatting can be overwritten by conditional formatting below.")}}],[{name:"comparison_color_scheme",config:{type:"SelectControl",label:(0,s.t)("color type"),default:tg.Green,renderTrigger:!0,choices:[[tg.Green,"Green for increase, red for decrease"],[tg.Red,"Red for increase, green for decrease"]],visibility:({controls:e})=>{var t,o;return!Ee()(null==e||null==(t=e.time_compare)?void 0:t.value)&&Boolean(null==e||null==(o=e.comparison_color_enabled)?void 0:o.value)},description:(0,s.t)("Adds color to the chart symbols based on the positive or negative change from the comparison value.")}}],[{name:"conditional_formatting",config:{type:"ConditionalFormattingControl",renderTrigger:!0,label:(0,s.t)("Custom conditional formatting"),extraColorChoices:[{value:tg.Green,label:(0,s.t)("Green for increase, red for decrease")},{value:tg.Red,label:(0,s.t)("Red for increase, green for decrease")}],description:(0,s.t)("Apply conditional color formatting to numeric columns"),shouldMapStateToProps:()=>!0,mapStateToProps(e,t,o){var r,a,n,i,l,c,d,u,m;const p=null!=e&&null!=(r=e.datasource)&&r.hasOwnProperty("verbose_map")?null==e||null==(a=e.datasource)?void 0:a.verbose_map:null!=(n=null==e||null==(i=e.datasource)?void 0:i.columns)?n:{},h=null==o?void 0:o.chartStatus,{colnames:g,coltypes:f}=null!=(l=null==o||null==(c=o.queriesResponse)?void 0:c[0])?l:{},b=Array.isArray(g)&&Array.isArray(f)?g.filter(((e,t)=>f[t]===$e.s.Numeric)).map((e=>{var t;return{value:e,label:Array.isArray(p)?e:null!=(t=p[e])?t:e}})):[];var y,v;return{removeIrrelevantConditions:"success"===h,columnOptions:null!=e&&null!=(d=e.controls)&&null!=(d=d.time_compare)&&d.value?(y=b||[],v=(null==(u=(0,T.A)(null==e||null==(m=e.controls)||null==(m=m.time_compare)?void 0:m.value)[0])?void 0:u.toString())||"",y.map((e=>e.label.includes(v)?[]:[{label:`${(0,s.t)("Main")} ${e.label}`,value:`${(0,s.t)("Main")} ${e.value}`},{label:`# ${e.label}`,value:`# ${e.value}`},{label:` ${e.label}`,value:` ${e.value}`},{label:`% ${e.label}`,value:`% ${e.value}`}])).flat()):b,verboseMap:p}}}}]]},{...Pe.sections.timeComparisonControls({multi:!1,showCalculationType:!1,showFullChoices:!1}),visibility:({controls:e})=>Cg({controls:e})&&(0,n.G7)(n.TO.TableV2TimeComparisonEnabled)}],formDataOverrides:e=>({...e,metrics:(0,f.a)().popAllMetrics(),groupby:(0,f.a)().popAllColumns()})},Lg=Pg;var Dg=o(90457);const Og=(()=>{let e={};const t=t=>{e={...e,...t}};return(o,r)=>{var a;return((e,t)=>{const{percent_metrics:o,order_desc:r=!1,extra_form_data:a}=e,n=function(e){const{query_mode:t}=e;if(t===Ue.g.Aggregate||t===Ue.g.Raw)return t;const o=null==e?void 0:e.all_columns;return o&&o.length>0?Ue.g.Raw:Ue.g.Aggregate}(e),i=(0,T.A)(e.timeseries_limit_metric)[0],l=(null==a?void 0:a.time_grain_sqla)||e.time_grain_sqla;let s=e;return n===Ue.g.Raw&&(s={...e,include_time:!1}),(0,Et.A)(s,(a=>{var c,d,u,m,p,h;let{metrics:g,orderby:f=[],columns:b=[]}=a;const{extras:y={}}=a;let v=[];const x=(0,T.A)(e.time_compare).filter((e=>"custom"!==e&&"inherit"!==e)),_=(0,T.A)(e.time_compare).filter((e=>"custom"===e||"inherit"===e));let S=[];(0,jt.f)(e,a)&&!Ee()(x)&&(S=x),(0,jt.f)(e,a)&&!Ee()(_)&&(_.includes("custom")&&(S=S.concat([e.start_date_offset])),_.includes("inherit")&&(S=S.concat(["inherit"])));let w=!1,C=null;if(n===Ue.g.Aggregate){var A;if(g=g||[],i?f=[[i,!r]]:(null==(A=g)?void 0:A.length)>0&&(f=[[g[0],!1]]),o&&o.length>0){const t=(0,jt.f)(e,a)?((e,t)=>e.reduce(((e,o)=>{const r=t.map((e=>`${o}__${e}`));return e.concat([o,...r])}),[]))(o.map(Ge.A),S):o.map(Ge.A),r=(0,zt.A)(t);g=(0,zt.A)(g.concat(o),Ge.A),v=[{operation:"contribution",options:{columns:r,rename_columns:r.map((e=>`%${e}`))}}]}Ee()(S)||v.push((0,Vt.t)(e,a));const t=null==e?void 0:e.temporal_columns_lookup;b=b.filter((e=>!((0,St.eh)(e)&&l&&(null==t?void 0:t[e])&&!w&&(C={timeGrain:l,columnType:"BASE_AXIS",sqlExpression:e,label:e,expressionType:"SQL"},w=!0,1)))),C&&(b=[C,...b])}const k={},F=null!=(c=null==t?void 0:t.ownState)?c:{},M=["csv","xlsx"].includes((null==e?void 0:e.result_format)||"")||"json"===(null==e?void 0:e.result_format)&&"results"===(null==e?void 0:e.result_type);if(M&&(k.row_limit=Number(s.row_limit)||0,k.row_offset=0),!M&&s.server_pagination){var P,L;const e=null!=(P=F.pageSize)?P:s.server_page_length,t=null!=(L=F.currentPage)?L:0;k.row_limit=e,k.row_offset=t*e}let D;if(Array.isArray(null==F?void 0:F.sortBy)&&(null==F?void 0:F.sortBy.length)>0){const e=null==F?void 0:F.sortBy[0];D=[[null==e?void 0:e.key,!(null!=e&&e.desc)]]}let O={...a,columns:b,extras:y,orderby:e.server_pagination&&D?D:f,metrics:g,post_processing:v,time_offsets:S,...k};if(e.server_pagination&&null!=t&&null!=(d=t.extras)&&null!=(d=d.cachedChanges)&&d[e.slice_id]&&JSON.stringify(null==t||null==(u=t.extras)||null==(u=u.cachedChanges)?void 0:u[e.slice_id])!==JSON.stringify(O.filters)){var R,B;O={...O,row_offset:0};const e={...(null==t?void 0:t.ownState)||{},currentPage:0,pageSize:null!=(R=O.row_limit)?R:0};(0,Dg.F)(null==t||null==(B=t.hooks)?void 0:B.setDataMask,e)}null==t||null==(m=t.hooks)||m.setCachedChanges({[e.slice_id]:O.filters});const I=[];null!=(p=g)&&p.length&&e.show_totals&&n===Ue.g.Aggregate&&I.push({...O,columns:[],row_limit:0,row_offset:0,post_processing:[],order_desc:void 0,orderby:void 0});const N=null==(h=e.extra_form_data)?void 0:h.interactive_groupby;var E;return N&&O.columns&&(O.columns=[...new Set([...O.columns,...N])]),e.server_pagination&&F.searchText&&null!=F&&F.searchColumn&&(O={...O,filters:[...O.filters||[],{col:null==F?void 0:F.searchColumn,op:"ILIKE",val:`${F.searchText}%`}]}),e.server_pagination&&!M?[{...O},{...O,time_offsets:[],row_limit:null!=(E=Number(null==e?void 0:e.row_limit))?E:0,row_offset:0,post_processing:[],is_rowcount:!0},...I]:[O,...I]}))})({...o},{extras:{cachedChanges:e},ownState:null!=(a=null==r?void 0:r.ownState)?a:{},hooks:{...null==r?void 0:r.hooks,setDataMask:()=>{},setCachedChanges:t}})}})(),Rg=new l.A({behaviors:[Re.nS.InteractiveChart,Re.nS.DrillToDetail,Re.nS.DrillBy],category:(0,s.t)("Table"),canBeAnnotationTypes:["EVENT","INTERVAL"],description:(0,s.t)("Classic row-by-column spreadsheet like view of a dataset. Use tables to showcase a view into the underlying data or to show aggregated metrics."),exampleGallery:[{url:yg},{url:vg},{url:xg}],name:(0,s.t)("Table V2"),tags:[(0,s.t)("Additive"),(0,s.t)("Business"),(0,s.t)("Pattern"),(0,s.t)("Featured"),(0,s.t)("Report"),(0,s.t)("Sequential"),(0,s.t)("Tabular")],thumbnail:bg});class Bg extends c.A{constructor(){super({loadChart:()=>Promise.all([o.e(8096),o.e(1423)]).then(o.bind(o,81423)),metadata:Rg,transformProps:fg,controlPanel:Lg,buildQuery:Og})}}const Ig={controlPanelSections:[Pe.sections.legacyTimeseriesTime,{label:(0,s.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit"],[{name:"column_collection",config:{type:"CollectionControl",label:(0,s.t)("Time series columns"),renderTrigger:!0,validators:[C.A],controlName:"TimeSeriesColumnControl"}}],["row_limit"],[{name:"url",config:{type:"TextControl",label:(0,s.t)("URL"),description:(0,s.t)("Templated link, it's possible to include {{ metric }} or other values coming from the controls."),default:""}}]]}],controlOverrides:{groupby:{multiple:!1}},formDataOverrides:e=>({...e,groupby:(0,f.a)().popAllColumns(),metrics:(0,f.a)().popAllMetrics()})};function Ng(e){const{height:t,datasource:o,formData:r,queriesData:a}=e,{columnCollection:n=[],groupby:i,metrics:l,url:s}=r,{records:c,columns:d}=a[0].data,u=(null==i?void 0:i.length)>0;let m;if(u)m=d.map((e=>"object"==typeof e?e:{label:e}));else{const e=o.metrics.reduce(((e,t)=>{const o=e;return o[t.metric_name]=t,o}),{});m=l.map((t=>"object"==typeof t?t:e[t]))}return n.forEach((e=>{const t=e;"string"==typeof t.timeLag&&t.timeLag&&(t.timeLag=parseInt(t.timeLag,10))})),{height:t,data:c,columnConfigs:n,rows:m,rowType:u?"column":"metric",url:s}}var Eg=o(52547);const zg=o.p+"example.74513bdf.jpg",jg=new l.A({category:(0,s.t)("Table"),name:(0,s.t)("Time-series Table"),description:(0,s.t)("Compare multiple time series charts (as sparklines) and related metrics quickly."),exampleGallery:[{url:zg}],tags:[(0,s.t)("Multi-Variables"),(0,s.t)("Comparison"),(0,s.t)("Legacy"),(0,s.t)("Percentages"),(0,s.t)("Tabular"),(0,s.t)("Text"),(0,s.t)("Trend")],thumbnail:Eg,useLegacyApi:!0});class Vg extends c.A{constructor(){super({metadata:jg,transformProps:Ng,loadChart:()=>o.e(1488).then(o.bind(o,51488)),controlPanel:Ig})}}class $g extends a.A{constructor(){const e=(0,n.G7)(n.TO.ChartPluginsExperimental)?[(new xn).configure({key:i.Y.BigNumberPeriodOverPeriod})]:[],t=(0,n.G7)(n.TO.AgGridTableEnabled)?[(new Bg).configure({key:i.Y.TableAgGrid})]:[];super({name:"Legacy charts",presets:[new fa],plugins:[(new Vn).configure({key:i.Y.BigNumber}),(new Qn).configure({key:i.Y.BigNumberTotal}),(new Oi).configure({key:i.Y.BoxPlot}),(new Go).configure({key:i.Y.LegacyBubble}),(new Qo).configure({key:i.Y.Bullet}),(new x).configure({key:i.Y.Calendar}),(new F).configure({key:i.Y.Chord}),(new er).configure({key:i.Y.Compare}),(new I).configure({key:i.Y.CountryMap}),(new kl).configure({key:i.Y.Funnel}),(new jl).configure({key:i.Y.Sankey}),(new ls).configure({key:i.Y.Treemap}),(new bs).configure({key:i.Y.Gantt}),(new Ps).configure({key:i.Y.Gauge}),(new Ws).configure({key:i.Y.Graph}),(new dc).configure({key:i.Y.Radar}),(new Gc).configure({key:i.Y.MixedTimeseries}),(new Y).configure({key:i.Y.Horizon}),(new ee).configure({key:i.Y.MapBox}),(new ne).configure({key:i.Y.PairedTTest}),(new me).configure({key:i.Y.ParallelCoordinates}),(new Te).configure({key:i.Y.Partition}),(new gd).configure({key:i.Y.Pie}),(new bh).configure({key:i.Y.PivotTable}),(new Oe).configure({key:i.Y.Rose}),(new qt).configure({key:i.Y.Table}),(new ar).configure({key:i.Y.TimePivot}),(new Vg).configure({key:i.Y.TimeTable}),(new lo).configure({key:i.Y.WordCloud}),(new vo).configure({key:i.Y.WorldMap}),(new Nd).configure({key:i.Y.Area}),(new Kd).configure({key:i.Y.Timeseries}),(new mu).configure({key:i.Y.Bar}),(new bu).configure({key:i.Y.Line}),(new Pu).configure({key:i.Y.SmoothLine}),(new Yu).configure({key:i.Y.Scatter}),(new am).configure({key:i.Y.Step}),(new bm).configure({key:i.Y.Waterfall}),(new Rm).configure({key:i.Y.Heatmap}),(new $m).configure({key:i.Y.Histogram}),(new zp).configure({key:og.fJ.Select}),(new qp).configure({key:og.fJ.Range}),(new Jp).configure({key:og.fJ.Time}),(new oh).configure({key:og.fJ.TimeColumn}),(new sh).configure({key:og.fJ.TimeGrain}),(new Xm).configure({key:i.Y.Tree}),(new up).configure({key:i.Y.Sunburst}),(new eg).configure({key:i.Y.Handlebars}),(new Tp).configure({key:i.Y.Bubble}),new Da({defaultLayers:[{type:"WMS",version:"1.3.0",url:"https://ows.terrestris.de/osm-gray/service",layersParam:"OSM-WMS",title:"OpenStreetMap",attribution:' Map data from <a href="openstreetmap.org/copyright">OpenStreetMap</a>. Service provided by <a href="https://www.terrestris.de">terrestris GmbH & Co. KG</a>'}]}).configure({key:i.Y.Cartodiagram}),...e,...t]})}}var Yg=o(28674);const Gg={controlPanelSections:[{label:(0,s.t)("Code"),controlSetRows:[[{name:"markup_type",config:{type:"SelectControl",label:(0,s.t)("Markup type"),clearable:!1,choices:(0,Yg.u8)(["markdown","html"]),default:"markdown",validators:[C.A],description:(0,s.t)("Pick your favorite markup language")}}],[{name:"code",config:{type:"TextAreaControl",label:(0,s.t)("Code"),description:(0,s.t)("Put your code here"),mapStateToProps:e=>({language:e.controls&&e.controls.markup_type?e.controls.markup_type.value:"markdown"}),default:""}}]]}],controlOverrides:{code:{default:"####Section Title\nA paragraph describing the section of the dashboard, right before the separator line \n\n---------------"}},sectionOverrides:{sqlaTimeSeries:{controlSetRows:[]}}};function qg(){(new $g).register(),(0,r.A)().registerValue("separator",Gg)}},90457:(e,t,o)=>{o.d(t,{F:()=>r});const r=(e=()=>{},t)=>e({ownState:t})},91407:(e,t,o)=>{var r,a;o.d(t,{l:()=>r,y:()=>a}),function(e){e.Vertical="vertical",e.Horizontal="horizontal"}(r||(r={})),function(e){e.Line="line",e.Scatter="scatter",e.Smooth="smooth",e.Bar="bar",e.Start="start",e.Middle="middle",e.End="end"}(a||(a={}))},92123:(e,t,o)=>{o.d(t,{JL:()=>n,st:()=>i,u8:()=>a,wP:()=>r});const r={fixed_color:"fixed_color",categorical_palette:"categorical_palette",linear_palette:"linear_palette",color_breakpoints:"color_breakpoints"};function a(e){return e.map((e=>[e,e.toString()]))}const n=(e,t)=>{var o;return(null==(o=e.color_scheme_type)?void 0:o.value)===t},i=(e,t)=>{const[o,r]=e,a=t[0],n=t[1];return o>=a[0]&&o<=n[0]&&r>=a[1]&&r<=n[1]}},94309:(e,t,o)=>{o.d(t,{B:()=>r,Ez:()=>i,Rq:()=>l,Wx:()=>a,gP:()=>n});const r=[.7,.4],a=11,n=2,i=2,l=e=>{const t=(null!=e?e:[]).map((e=>(null==e?void 0:e.name)||"")).filter((e=>""!==e));return{metricLabel:t.shift()||"",treePath:t}}},96254:(e,t,o)=>{var r;o.d(t,{m:()=>r}),function(e){e.Green="Green",e.Red="Red"}(r||(r={}))},99894:(e,t,o)=>{o.d(t,{$M:()=>Q,Ay:()=>U,Bq:()=>B,CZ:()=>R,DL:()=>b,DT:()=>D,FN:()=>q,FV:()=>j,Fj:()=>P,IG:()=>$,If:()=>k,JO:()=>F,LY:()=>W,OM:()=>H,Q6:()=>N,R9:()=>z,RD:()=>I,Ys:()=>K,ZR:()=>L,jz:()=>O,kH:()=>G,nR:()=>C,oZ:()=>E,oh:()=>M,pw:()=>A,rI:()=>Y,sS:()=>J,sy:()=>Z,x9:()=>X,xF:()=>w,xp:()=>V});var r=o(2445),a=o(96548),n=o(96469),i=o(74098),l=o(99106),s=o(88396),c=o(73744),d=o(58233),u=o(71403),m=o(1020),p=o(51098),h=o(92123);const g=(0,a.A)(),f=(0,n.A)(),b={r:158,g:158,b:158,a:1};let y;const v=[["https://tile.openstreetmap.org/{z}/{x}/{y}.png","Streets (OSM)"],["https://tile.osm.ch/osm-swiss-style/{z}/{x}/{y}.png","Topography (OSM)"],["mapbox://styles/mapbox/streets-v9","Streets (Mapbox)"],["mapbox://styles/mapbox/dark-v9","Dark (Mapbox)"],["mapbox://styles/mapbox/light-v9","Light (Mapbox)"],["mapbox://styles/mapbox/satellite-streets-v9","Satellite Streets (Mapbox)"],["mapbox://styles/mapbox/satellite-v9","Satellite (Mapbox)"],["mapbox://styles/mapbox/outdoors-v9","Outdoors (Mapbox)"]],x=()=>{if(!y){var e;const t=document.getElementById("app"),{common:o}=JSON.parse((null==t?void 0:t.getAttribute("data-bootstrap"))||"{}");y=null!=(e=null==o?void 0:o.deckgl_tiles)?e:v}return y},_=(0,r.FD)("div",{children:[(0,i.t)("For more information about objects are in context in the scope of this function, refer to the"),(0,r.FD)("a",{href:"https://github.com/apache/superset/blob/master/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utils/sandbox.ts",children:[(0,i.t)(" source code of Superset's sandboxed parser"),"."]}),"."]});function S(e,t,o=null,a=100,n=""){return{type:"TextAreaControl",language:"javascript",label:e,description:t,height:a,default:n,aboveEditorSection:(0,r.FD)("div",{children:[(0,r.Y)("p",{children:t}),(0,r.Y)("p",{children:_}),o]}),warning:(0,l.G7)(l.TO.EnableJavascriptControls)?null:(0,i.t)("This functionality is disabled in your environment for security reasons."),readOnly:!(0,l.G7)(l.TO.EnableJavascriptControls)}}const w={name:"filter_nulls",config:{type:"CheckboxControl",label:(0,i.t)("Ignore null locations"),default:!0,description:(0,i.t)("Whether to ignore locations that are null")}},C={name:"autozoom",config:{type:"CheckboxControl",label:(0,i.t)("Auto Zoom"),default:!0,renderTrigger:!0,description:(0,i.t)("When checked, the map will zoom to your data after each query")}},T={...d.A.groupby,label:(0,i.t)("Dimension"),description:(0,i.t)("Select a dimension"),multi:!1,default:null},A={name:"js_columns",config:{...d.A.groupby,label:(0,i.t)("Extra data for JS"),default:[],description:(0,i.t)("List of extra columns made available in JavaScript functions")}},k={name:"js_data_mutator",config:S((0,i.t)("JavaScript data interceptor"),(0,i.t)("Define a javascript function that receives the data array used in the visualization and is expected to return a modified version of that array. This can be used to alter properties of the data, filter, or enrich the array."))},F={name:"js_tooltip",config:S((0,i.t)("JavaScript tooltip generator"),(0,i.t)("Define a function that receives the input and outputs the content for a tooltip"))},M={name:"js_onclick_href",config:S((0,i.t)("JavaScript onClick href"),(0,i.t)("Define a function that returns a URL to navigate to when user clicks"))},P={name:"legend_format",config:{label:(0,i.t)("Legend Format"),description:(0,i.t)("Choose the format for legend values"),type:"SelectControl",clearable:!1,default:u.Bb[0][0],choices:u.Bb,renderTrigger:!0,freeForm:!0}},L={name:"legend_position",config:{label:(0,i.t)("Legend Position"),description:(0,i.t)("Choose the position of the legend"),type:"SelectControl",clearable:!1,default:"tr",choices:[[null,(0,i.t)("None")],["tl",(0,i.t)("Top left")],["tr",(0,i.t)("Top right")],["bl",(0,i.t)("Bottom left")],["br",(0,i.t)("Bottom right")]],renderTrigger:!0}},D=((0,i.t)("Lines column"),(0,i.t)("The database columns that contains lines information"),s.A,{name:"line_width",config:{type:"TextControl",label:(0,i.t)("Line width"),renderTrigger:!0,isInt:!0,default:1,description:(0,i.t)("The width of the lines")}}),O={name:"fill_color_picker",config:{label:(0,i.t)("Fill Color"),description:(0,i.t)(" Set the opacity to 0 if you do not want to override the color specified in the GeoJSON"),type:"ColorPickerControl",default:p.VG,renderTrigger:!0,visibility:({controls:e})=>(0,h.JL)(e,h.wP.fixed_color)}},R={name:"stroke_color_picker",config:{label:(0,i.t)("Stroke Color"),description:(0,i.t)(" Set the opacity to 0 if you do not want to override the color specified in the GeoJSON"),type:"ColorPickerControl",default:p.VG,renderTrigger:!0,visibility:({controls:e})=>(0,h.JL)(e,h.wP.fixed_color)}},B={name:"filled",config:{type:"CheckboxControl",label:(0,i.t)("Filled"),renderTrigger:!0,description:(0,i.t)("Whether to fill the objects"),default:!0}},I={name:"stroked",config:{type:"CheckboxControl",label:(0,i.t)("Stroked"),renderTrigger:!0,description:(0,i.t)("Whether to display the stroke"),default:!1}},N={name:"extruded",config:{type:"CheckboxControl",label:(0,i.t)("Extruded"),renderTrigger:!0,default:!0,description:(0,i.t)("Whether to make the grid 3D")}},E={name:"grid_size",config:{type:"TextControl",label:(0,i.t)("Grid Size"),renderTrigger:!0,default:20,isInt:!0,description:(0,i.t)("Defines the grid size in pixels")}},z={name:"viewport",config:{type:"ViewportControl",label:(0,i.t)("Viewport"),renderTrigger:!1,description:(0,i.t)("Parameters related to the view and perspective on the map"),default:{longitude:6.85236157047845,latitude:31.222656842808707,zoom:1,bearing:0,pitch:0},dontRefreshOnChange:!0}},j={name:"spatial",config:{type:"SpatialControl",label:(0,i.t)("Longitude & Latitude"),validators:[s.A],description:(0,i.t)("Point to your spatial columns"),mapStateToProps:e=>({choices:(0,p.zP)(e.datasource)})}},V={name:"point_radius_fixed",config:{type:"FixedOrMetricControl",label:(0,i.t)("Point Size"),default:{type:"fix",value:1e3},description:(0,i.t)("Fixed point radius"),mapStateToProps:e=>({datasource:e.datasource})}},$={name:"multiplier",config:{type:"TextControl",label:(0,i.t)("Multiplier"),isFloat:!0,renderTrigger:!0,default:1,description:(0,i.t)("Factor to multiply the metric by")}},Y={name:"line_type",config:{type:"SelectControl",label:(0,i.t)("Lines encoding"),clearable:!1,default:"json",description:(0,i.t)("The encoding format of the lines"),choices:[["polyline",(0,i.t)("Polyline")],["json",(0,i.t)("JSON")],["geohash",(0,i.t)("geohash (square)")]]}},G={name:"reverse_long_lat",config:{type:"CheckboxControl",label:(0,i.t)("Reverse Lat & Long"),default:!1}},q={name:"mapbox_style",config:{type:"SelectControl",label:(0,i.t)("Map Style"),clearable:!1,renderTrigger:!0,freeForm:!0,validators:[c.A],choices:x(),default:x()[0][0],description:(0,i.t)("Base layer map style. See Mapbox documentation: %s","Mapbox base layer map style (see Mapbox documentation: %s) or tile server URL.","https://docs.mapbox.com/help/glossary/style-url/")}},W=((0,i.t)("GeoJson Column"),s.A,(0,i.t)("Select the geojson column"),{name:"color_scheme_type",config:{type:"SelectControl",label:(0,i.t)("Color Scheme Type"),description:(0,i.t)("Select the type of color scheme to use."),clearable:!1,renderTrigger:!0,validators:[],choices:[[h.wP.fixed_color,(0,i.t)("Fixed color")],[h.wP.categorical_palette,(0,i.t)("Categorical palette")],[h.wP.color_breakpoints,(0,i.t)("Color breakpoints")]],default:h.wP.categorical_palette}}),U={name:"color_picker",config:{type:"ColorPickerControl",label:(0,i.t)("Fixed Color"),default:p.VG,renderTrigger:!0,description:(0,i.t)("Select the fixed color"),visibility:({controls:e})=>(0,h.JL)(e,h.wP.fixed_color)}},H={name:"dimension",config:{...T,label:(0,i.t)("Categorical Color"),description:(0,i.t)("Pick a dimension from which categorical colors are defined"),visibility:({controls:e})=>(0,h.JL)(e,h.wP.categorical_palette)}},Q={name:"color_scheme",config:{type:"ColorSchemeControl",label:(0,i.t)("Color Scheme"),default:g.getDefaultKey(),renderTrigger:!0,choices:()=>g.keys().map((e=>[e,e])),description:(0,i.t)("The color scheme for rendering chart"),schemes:()=>g.getMap(),visibility:({controls:e})=>(0,h.JL)(e,h.wP.categorical_palette)}},J={name:"linear_color_scheme",config:{type:"ColorSchemeControl",label:(0,i.t)("Linear Color Scheme"),choices:()=>f.values().map((e=>[e.id,e.label])),default:f.getDefaultKey(),clearable:!1,description:(0,i.t)("Select a linear color scheme"),renderTrigger:!0,schemes:()=>f.getMap(),isLinear:!0,mapStateToProps:e=>(0,m.c)(e),visibility:({controls:e})=>(0,h.JL)(e,h.wP.linear_palette)}},K={name:"color_breakpoints",config:{label:(0,i.t)("Color breakpoints"),type:"ColorBreakpointsControl",description:(0,i.t)("Define color breakpoints for the data"),renderTrigger:!0,visibility:({controls:e})=>(0,h.JL)(e,h.wP.color_breakpoints)}},X={name:"deafult_breakpoint_color",config:{label:(0,i.t)("Default color"),type:"ColorPickerControl",description:(0,i.t)("The color used when a value doesn't match any defined breakpoints."),default:b,renderTrigger:!0,visibility:({controls:e})=>(0,h.JL)(e,h.wP.color_breakpoints)}},Z=({defaultSchemeType:e,disableCategoricalColumn:t=!1})=>[[{name:"color_scheme_type",config:{type:"SelectControl",label:(0,i.t)("Color Scheme Type"),description:(0,i.t)("Select the type of color scheme to use."),clearable:!1,renderTrigger:!0,validators:[],choices:[[h.wP.fixed_color,(0,i.t)("Fixed color")],[h.wP.categorical_palette,(0,i.t)("Categorical palette")],[h.wP.color_breakpoints,(0,i.t)("Color breakpoints")]],default:e||h.wP.categorical_palette}}],[U],t?[]:[H],[Q],[X],[K]]}}]);
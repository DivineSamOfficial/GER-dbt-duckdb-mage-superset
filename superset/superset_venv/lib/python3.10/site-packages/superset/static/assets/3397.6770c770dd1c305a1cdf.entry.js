(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[3397],{1020:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});const n=e=>{var t,r,n,o,a,i,s;const l=null==e||null==(t=e.form_data)?void 0:t.dashboardId;return{chartId:null==e||null==(r=e.slice)?void 0:r.slice_id,dashboardId:l,hasDashboardColorScheme:!!l&&!(null==e||null==(n=e.form_data)||!n.dashboard_color_scheme),hasCustomLabelsColor:Object.keys((null==e||null==(o=e.form_data)?void 0:o.label_colors)||{}).length>0,colorNamespace:null==e||null==(a=e.form_data)?void 0:a.color_namespace,mapLabelsColors:(null==e||null==(i=e.form_data)?void 0:i.map_label_colors)||{},sharedLabelsColors:(null==e||null==(s=e.form_data)?void 0:s.shared_label_colors)||[]}}},1071:(e,t,r)=>{"use strict";r.d(t,{B:()=>o});var n=r(96540);const o=e=>{(0,n.useEffect)(e,[])}},1086:(e,t,r)=>{"use strict";r.d(t,{M5:()=>n,Mb:()=>h,TI:()=>d,Wk:()=>o,fH:()=>a,kj:()=>u,lW:()=>c,oU:()=>l,ro:()=>i,wS:()=>s});const n=e=>"object"==typeof e&&null!==e&&"string"==typeof("name"in e&&e.name)&&"object"==typeof("config"in e&&e.config)&&null!==e.config,o=e=>{var t,r;return(null==e||null==(t=e.standardizedFormData)?void 0:t.controls)&&(null==e||null==(r=e.standardizedFormData)?void 0:r.memorizedFormData)&&Array.isArray(e.standardizedFormData.controls.metrics)&&Array.isArray(e.standardizedFormData.controls.columns)};var a;!function(e){e.None="None",e.GreaterThan=">",e.LessThan="<",e.GreaterOrEqual="≥",e.LessOrEqual="≤",e.Equal="=",e.NotEqual="≠",e.Between="< x <",e.BetweenOrEqual="≤ x ≤",e.BetweenOrLeftEqual="≤ x <",e.BetweenOrRightEqual="< x ≤"}(a||(a={}));const i=[a.Between,a.BetweenOrEqual,a.BetweenOrLeftEqual,a.BetweenOrRightEqual];function s(e){return!!e&&"column_name"in e}function l(e){return"column_name"in e&&"expression"in e&&!!e.expression}function c(e){return null!==e}function d(e){return!!e&&"columns"in e&&!("sqlEditorId"in e)}function u(e){return!!e&&"results"in e&&"sqlEditorId"in e}var h;!function(e){e.Name="name",e.Max="max",e.Min="min",e.Sum="sum",e.Avg="avg"}(h||(h={}))},1367:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>d,FC:()=>l});var n=r(85179),o=r(48813),a=r(91003),i=r(15830),s=r(65091);const l={scope:[a.wv],immune:[]},c=[n.mg];function d(e={},t){const r={[n.mg](e){const{newSelectedValues:r,merge:n}=t,o=Object.keys(r).reduce(((e,t)=>n&&t in e?{...e,[t]:[...e[t],...r[t]]}:{...e,[t]:r[t]}),{...e.columns});return{...e,columns:o}},[n.J2](e){const{path:r}=t;return{...e,directPathToFilter:r}}};if(t.type===n.GK)return(0,i.kl)({dashboardFilters:e,components:t.components}),e;if(t.type===n.GS){const r=t.scopes,n=Object.entries(r).reduce(((e,t)=>{const[r,{scope:n,immune:o}]=t,{chartId:a,column:i}=(0,s.w)(r),l={...e[a].scopes,[i]:{scope:n,immune:o}};return{...e,[a]:{...e[a],scopes:l}}}),e);return(0,i.kl)({dashboardFilters:n}),n}if(t.type===o.n)return t.data.dashboardFilters;if(t.type in r){const n={...e,[t.chartId]:r[t.type](e[t.chartId])};return c.includes(t.type)&&(0,i.kl)({dashboardFilters:n}),n}return e}},1734:(e,t,r)=>{"use strict";function n(e){return"string"==typeof e}function o(e){return"string"!=typeof e&&"SIMPLE"===(null==e?void 0:e.expressionType)}function a(e){return"string"!=typeof e&&"SQL"===(null==e?void 0:e.expressionType)}function i(e){return n(e)||o(e)||a(e)}r.d(t,{Ay:()=>s,IN:()=>o,Pr:()=>i,S_:()=>n,WL:()=>a});const s={}},1763:(e,t,r)=>{"use strict";r.d(t,{a:()=>i});var n=r(10384),o=r(39892);class a extends n.A{constructor(...e){super(...e),this.name="ExtensionsRegistry"}}const i=(0,o.A)(a,{})},2341:(e,t,r)=>{"use strict";r.d(t,{PX:()=>b,Rc:()=>S,D3:()=>g,Cl:()=>y,cL:()=>A,fD:()=>D,Yd:()=>I,jd:()=>w,NW:()=>h,YX:()=>F,Qk:()=>N,a0:()=>E,zp:()=>_,$5:()=>v,zT:()=>C,lL:()=>x,nH:()=>P,gn:()=>R,$K:()=>L,m2:()=>m,qp:()=>f});var n=r(84700),o=r(74098),a=r(91412),i=r(29624),s=r(91003),l=r(43875),c=r(93606),d=r(85179),u=r(91448);const h="UPDATE_COMPONENTS";function p(e){return(...t)=>(r,n)=>{const o=e(...t);r("function"==typeof o?o(r,n):o);const{dashboardLayout:a,dashboardState:i}=n();if(o.type!==h||!o.payload||!o.payload.nextComponents){const e=a.present;r((0,d.C1)(e))}i.hasUnsavedChanges||r((0,u.MR)(!0))}}const m=p((e=>({type:h,payload:{nextComponents:e}})));function f(e){return(t,r)=>{const{dashboardLayout:n}=r();t(m({[s.XY]:{...n.present[s.XY],meta:{text:e}}}))}}const g="DASHBOARD_TITLE_CHANGED";function _(e){return{type:g,text:e}}const y="DELETE_COMPONENT",v=p(((e,t)=>({type:y,payload:{id:e,parentId:t}}))),b="CREATE_COMPONENT",E=p((e=>({type:b,payload:{dropResult:e}}))),S="CREATE_TOP_LEVEL_TABS",T=p((e=>({type:S,payload:{dropResult:e}}))),A="DELETE_TOP_LEVEL_TABS",C=p((()=>({type:A,payload:{}}))),w="RESIZE_COMPONENT";function R({id:e,width:t,height:r}){return(n,o)=>{const{dashboardLayout:a}=o(),{present:i}=a,s=i[e],l=t&&s.meta.width!==t,c=r&&s.meta.height!==r;if(s&&(l||c)){const o={[e]:{...s,meta:{...s.meta,width:t||s.meta.width,height:r||s.meta.height}}};n(m(o))}}}const I="MOVE_COMPONENT",O=p((e=>({type:I,payload:{dropResult:e}}))),D="HANDLE_COMPONENT_DROP";function x(e){return(t,r)=>{const n=function(e,t){const r=(0,l.A)({dropResult:e,layout:t});return"number"==typeof r&&r<0}(e,r().dashboardLayout.present);if(n)return t((0,a.Zd)((0,o.t)("There is not enough space for this component. Try decreasing its width, or increasing the destination width.")));const{source:d,destination:u}=e,h=u&&u.id===s.wv,p=d.id===s.k0,m=r().dashboardLayout.present[s.wv],f=m&&m.children?m.children[0]:"";if(h)t(T(e));else if(u&&p)t(E(e));else{if(d.type===i.wc&&u.type===i.wc&&d.id===f&&u.id!==f)return t((0,a.Zd)((0,o.t)("Can not move top level tab into nested tabs")));u&&d&&(u.id!==d.id||u.index!==d.index)&&t(O(e))}const{dashboardFilters:g,dashboardLayout:_}=r();if(!p){const{present:e}=_,r=e[d.id]||{},n=e[u.id]||{};if((r.type===i.wc||r.type===i._8)&&r.children&&0===r.children.length){const r=(0,c.A)({childId:d.id,layout:e});t(v(d.id,r))}(function({dashboardFilters:e={},source:t=[],destination:r=[]}){const n=new Set(t),o=new Set(r);return[].concat(...Object.values(e).map((({scopes:e})=>[].concat(...Object.values(e).map((({scope:e})=>e)))))).some((e=>o.has(e)!==n.has(e)))})({dashboardFilters:g,source:(r.parents||[]).concat(d.id),destination:(n.parents||[]).concat(u.id)})&&t((0,a.Zd)((0,o.t)("This chart has been moved to a different filter scope.")))}return null}}const N=()=>n.IE.clearHistory();function L(){return(e,t)=>{e(n.IE.undo());const{dashboardLayout:r,dashboardState:o}=t();0!==r.past.length||o.maxUndoHistoryExceeded||o.updatedColorScheme||e((0,u.MR)(!1))}}const P=p(n.IE.redo),F="UPDATE_COMPONENTS_PARENTS_LIST"},2801:(e,t,r)=>{"use strict";r.d(t,{A:()=>b});var n=r(63375),o=r.n(n),a=r(2404),i=r.n(a),s=r(38221),l=r.n(s),c=r(2445),d=r(96540),u=r(74098),h=r(67413),p=r(90924),m=r(23575),f=r(7466),g=r(99183),_=r(5032),y=r(28392),v=r(88217);const b=(0,d.forwardRef)((({className:e,allowClear:t,allowNewOptions:r=!1,allowSelectAll:n=!0,ariaLabel:a,autoClearSearchValue:s=!1,filterOption:b=!0,header:E=null,headerPosition:S="top",helperText:T,invertSelection:A=!1,labelInValue:C=!1,loading:w,mode:R="single",name:I,notFoundContent:O,onBlur:D,onChange:x,onClear:N,onOpenChange:L,onDeselect:P,onSearch:F,onSelect:M,optionFilterProps:k=["label","value"],options:q,placeholder:z=(0,u.t)("Select ..."),showSearch:U=!0,sortComparator:Y=_.Ou,tokenSeparators:$=_.hR,value:B,getPopupContainer:H,oneLine:j,maxTagCount:Q,virtual:V,...G},W)=>{const K="single"===R,X=!!r||U,[J,Z]=(0,d.useState)(B),[ee,te]=(0,d.useState)(""),[re,ne]=(0,d.useState)(w),[oe,ae]=(0,d.useState)(!1),[ie,se]=(0,d.useState)(!1),[le,ce]=(0,d.useState)([]),[de,ue]=(0,d.useState)(null!=Q?Q:_.GB),[he,pe]=(0,d.useState)(0),me=(0,h.Z)(he,0),fe=(0,d.useCallback)((()=>pe(he+1)),[he]);(0,d.useEffect)((()=>{j&&ue(oe?0:1)}),[oe,j]);const[ge,_e]=(0,d.useState)(de),ye=(0,d.useRef)(!1);(0,d.useEffect)((()=>{if(j)return oe&&!ye.current?(ye.current=!0,void requestAnimationFrame((()=>{_e(0),ye.current=!1}))):void(oe||(_e(1),ye.current=!1));_e(de)}),[de,oe,j]);const ve=K?void 0:"multiple",be=(0,d.useCallback)(((e,t)=>(0,f.SZ)(e,t,J)),[J]),Ee=(0,d.useCallback)(((e,t)=>(0,f.P9)(e,t,ee,be,Y)),[ee,Y,oe]),Se=(0,d.useMemo)((()=>Array.isArray(q)?q.slice():_.X_),[q]),Te=(0,d.useMemo)((()=>Se.slice().sort(be)),[Se,be]),[Ae,Ce]=(0,d.useState)(Te),we=(0,d.useMemo)((()=>{let e;Ae.some((e=>e.options))&&(e=Ae.reduce(((e,t)=>[...e,...t.options]),[]));const t=(0,p.A)(J).filter((t=>!(0,f.Kz)((0,f._W)(t),e||Ae))).map((e=>(0,f.pK)(e)?e:{value:e,label:String(e)}));return(t.length>0?t.concat(Ae):Ae).slice().sort(be)}),[Ae,J,be]),Re=(0,d.useMemo)((()=>le.filter((e=>!e.disabled))),[le]),Ie=(0,d.useMemo)((()=>le.filter((e=>((0,f.Kz)(e.value,J)||!e.disabled)&&!e.isNewOption))),[le,J]),Oe=(0,d.useMemo)((()=>!K&&n&&Ae.length>0&&Re.length>1),[K,n,Ae.length,Re.length]),De=(0,d.useMemo)((()=>(0,p.A)(J).length===Ie.length+1),[J,Ie]),xe=(0,d.useMemo)((()=>{const e=new Set((0,p.A)(J).map(f._W));return le.reduce(((t,r)=>{const n=e.has(r.value),o=r.disabled,a=r.isNewOption;return o&&!n||!(a&&n||!a)||(t.selectable+=1),n&&!o&&(t.deselectable+=1),t}),{selectable:0,deselectable:0})}),[le,J]),Ne=(e,t)=>(0,f.qY)(e,t,k,b),Le=l()((e=>{const t=e.trim();se(!!t);let n=Ae;if(r){const e=(0,p.A)(we).filter((e=>!e.isNewOption)),r=t&&!(0,f.Kz)(t,e,!0)&&{label:t,value:t,isNewOption:!0},o=(0,p.A)(we).filter((e=>!e.isNewOption||(0,f.Kz)(e.value,J)));n=r?[r,...o]:o,Ce(n)}const o=n.map((t=>{if("options"in t&&Array.isArray(t.options)){const r=t.options.filter((t=>Ne(e,t)));return r.length>0?{...t,options:r}:null}return Ne(e,t)?t:null})).filter((e=>null!==e));ce(o),te(t),null==F||F(t)}),m.Y.FAST_DEBOUNCE);(0,d.useEffect)((()=>()=>Le.cancel()),[Le]);const Pe=(0,d.useCallback)((()=>{if(K)return;const e=ie?le.filter((e=>!e.isNewOption)):Re,t=(0,p.A)(J),r=new Set(t.map(f._W)),n=[...t];e.forEach((e=>{!e.value||e.disabled||r.has(e.value)||n.push(e.value)})),Z(n),fe()}),[K,ie,le,Re,J,fe]),Fe=(0,d.useCallback)((()=>{if(K)return;const e=new Set(Re.map((e=>e.value))),t=(0,p.A)(J).filter((t=>{const r=(0,f._W)(t);return!e.has(r)}));Z(t),fe()}),[K,Re,J,fe]),Me=(0,d.useMemo)((()=>(0,c.FD)(g.Ws,{justify:"center",children:[(0,c.Y)(v.$,{type:"link",buttonStyle:"link",buttonSize:"xsmall",disabled:0===xe.selectable,onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),Pe()},children:`${(0,u.t)("Select all")} (${xe.selectable})`}),(0,c.Y)(v.$,{type:"link",buttonStyle:"link",buttonSize:"xsmall",disabled:0===xe.deselectable,onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onClick:e=>{e.preventDefault(),e.stopPropagation(),Fe()},children:`${(0,u.t)("Deselect all")} (${xe.deselectable})`})]})),[Pe,Fe,xe.selectable,xe.deselectable]);(0,d.useEffect)((()=>{Ce(Se),ce(Se)}),[Se]),(0,d.useEffect)((()=>{void 0!==w&&w!==re&&ne(w)}),[re,w]),(0,d.useEffect)((()=>{Z(B)}),[B]);const ke=(0,d.useCallback)(((e,t)=>{let r=e,n=t;if(!K&&(0,p.A)(e).length===Ie.length&&De){const e=Ie.filter((e=>(0,f.Kz)(e.value,J)&&e.disabled));r=(0,f.LG)(e,C),n=(0,f.tS)(e)}null==x||x(r,n)}),[K,C,x,Ie,De,J]);(0,d.useEffect)((()=>{if(he!==me){const e=(0,p.A)(J),t=new Set(e.map(f._W)),r=(0,f.tS)(we.filter((e=>t.has(e.value))));K?ke(J,J?r[0]:void 0):ke(e,r)}}),[we,ke,K,x,he,me,J]);const qe=(0,d.useMemo)((()=>(0,p.A)(J).length-ge-(De?1:0)),[ge,De,J]);let ze=ge;"responsive"!==ze&&0===qe&&De&&(ze-=1);const Ue=(0,d.useCallback)((e=>{const t=(0,f.om)(e,we,!0);if(t||r){if(C){const r={label:e,value:e};return t&&(r.label=(0,f.Gv)(t)?t.label:t,r.value=(0,f.Gv)(t)?t.value:t),r}return t?(0,f.Gv)(t)?t.value:t:e}}),[r,we,C]);return(0,c.FD)(g.rf,{className:e,headerPosition:S,children:[E&&(0,c.Y)(g.h9,{headerPosition:S,children:E}),(0,c.Y)(g.Iu,{id:I,allowClear:!re&&t,"aria-label":K&&(0,f.pK)(J)&&"string"==typeof J.label?`${a||I}: ${J.label}`:a||I,autoClearSearchValue:s,popupRender:e=>(0,f.gd)(e,oe,re,we.length,T,void 0,Oe?Me:void 0),filterOption:Ne,filterSort:Ee,getPopupContainer:H||(e=>e.parentNode),headerPosition:S,labelInValue:C,maxTagCount:ze,maxTagPlaceholder:()=>`+ ${qe>0?qe:1} ...`,mode:ve,notFoundContent:re?(0,u.t)("Loading..."):O,onBlur:e=>{te(""),null==D||D(e)},onDeselect:(e,t)=>{if(Array.isArray(J)){const r=J.filter((t=>(0,f._W)(t)!==(0,f._W)(e)));if(Z(r),t.isNewOption){const t=we.filter((t=>(0,f._W)(t.value)!==(0,f._W)(e)));Ce(t),ce(t)}}fe(),null==P||P(e,t)},onOpenChange:e=>{ae(e),ce(we),e&&!ee&&Ae.length>1&&(i()(Te,Ae)||Ce(Te)),e||Ce(Te),L&&L(e)},onPaste:e=>{const t=e.clipboardData.getData("text");if(K){const e=Ue(t);e&&Z(e)}else{const e=$.find((e=>t.includes(e))),n=e?o()(t.split(e)):[t],a=[],i=n.map((e=>{if(!(0,f.om)(e,we,!0)&&r){const t={label:e,value:e,isNewOption:!0};a.push(t)}return Ue(e)})).filter((e=>void 0!==e));if(a.length>0){const e=[...we,...a];Ce(e),ce(e)}Z((e=>[...e||[],...i]))}fe()},onPopupScroll:void 0,onSearch:X?Le:void 0,onSelect:(e,t)=>{if(K){const t=!(0,f.n4)(e,J,"value");Z(e),t&&fe()}else Z((t=>{const r=(0,p.A)(t),n=(0,f._W)(e);if(!(0,f.Kz)(n,r)){const t=[...r,e];return t.length===Ie.length&&Oe?((0,f.pK)(e),[...t]):t}return t})),fe();null==M||M(e,t)},onClear:()=>{Z(K?void 0:we.filter((e=>e.disabled&&(0,f.Kz)(e.value,J))).map((e=>C?{label:e.label,value:e.value}:e.value)).filter((e=>null!=e))),fe(),N&&N()},placeholder:z,tokenSeparators:$,value:J,virtual:void 0!==V?V:we.length>_.kx,suffixIcon:(0,f.Jp)(re,X,oe),menuItemSelectedIcon:A?(0,c.Y)(g.UX,{iconSize:"m","aria-label":"stop"}):(0,c.Y)(g.EL,{iconSize:"m","aria-label":"check"}),options:le,optionRender:e=>(0,c.Y)(y.A,{children:e.label||e.value}),oneLine:j,css:G.css,...G,showSearch:X,ref:W})]})}))},3666:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(41479);class o{constructor(e){this.id=void 0,this.type=void 0;const[t,r]=e.split("__");this.id=parseInt(t,10),this.type=n.cT.Table,this.type="query"===r?n.cT.Query:this.type}toString(){return`${this.id}__${this.type}`}toObject(){return{id:this.id,type:this.type}}}},5032:(e,t,r)=>{"use strict";r.d(t,{yQ:()=>s,Ou:()=>d,X_:()=>i,GB:()=>o,RB:()=>l,hR:()=>a,kx:()=>c});var n=r(74098);const o=4,a=[",","\r\n","\n","\t",";"],i=[],s=100,l=(0,n.t)("Select All"),c=20,d=(String(l),(e,t,r)=>{let n,o;return"string"==typeof e.label&&"string"==typeof t.label?(n=e.label,o=t.label):"string"==typeof e.value&&"string"==typeof t.value&&(n=e.value,o=t.value),"string"==typeof n&&"string"==typeof o?r?function(e,t,r){const n=e.toLowerCase()||"",o=t.toLowerCase()||"",a=r.toLowerCase()||"";return r&&(Number(t===r)-Number(e===r)||Number(t.startsWith(r))-Number(e.startsWith(r))||Number(o===a)-Number(n===a)||Number(o.startsWith(a))-Number(n.startsWith(a))||Number(t.includes(r))-Number(e.includes(r))||Number(o.includes(a))-Number(e.includes(a)))||e.localeCompare(t)}(n,o,r):n.localeCompare(o):e.value-t.value})},5147:(e,t,r)=>{"use strict";r.d(t,{b:()=>h,k:()=>p});var n=r(88055),o=r.n(n),a=r(74842),i=r(18749),s=r(81115),l=r(43101),c=r(61412),d=r(79104),u=r(29624);const h=e=>void 0===e||e,p=(e,t,r)=>{var n;const h=Object.values(e).filter((e=>(null==e?void 0:e.type)===u.oT)),p=null!=(n=t.global_chart_configuration)&&n.scope?{scope:t.global_chart_configuration.scope,chartsInScope:(0,l._)(t.global_chart_configuration.scope,Object.values(r).map((e=>e.id)),h)}:{scope:d.e2,chartsInScope:Object.values(r).map((e=>e.id))},m={};return h.forEach((e=>{var n,d,u,f,g;const _=null==(n=e.meta)?void 0:n.chartId;var y;(0,a.A)(_)&&((null!=(d=null==(u=null!=(f=(0,i.A)().get(null==(g=r[_])||null==(g=g.form_data)?void 0:g.viz_type))?f:{})?void 0:u.behaviors)?d:[]).includes(s.nS.InteractiveChart)&&(null!=(y=t.chart_configuration)&&y[_]&&(m[_]=o()(t.chart_configuration[_])),m[_]||(m[_]={id:_,crossFilters:{scope:c.TY,chartsInScope:[]}}),m[_].crossFilters.chartsInScope=(0,c.YD)(m[_].crossFilters.scope)?p.chartsInScope.filter((e=>e!==Number(_))):(0,l._)(m[_].crossFilters.scope,Object.values(r).map((e=>e.id)),h)))})),{chartConfiguration:m,globalChartConfiguration:p}}},5250:(e,t,r)=>{"use strict";r.d(t,{I:()=>y});var n=r(20249),o=r.n(n),a=r(2445),i=r(96540),s=r(50290),l=r(17437),c=r(54603),d=r(74098),u=r(29248),h=r(21348),p=r(50378),m=r(70462),f=r(99552),g=r(79249),_=r(95018);const y=({type:e="info",iconSize:t="s",label:r,tooltip:n,onClick:y,className:v="text-muted",placement:b="right",iconStyle:E})=>{var S;const T=(0,s.DP)(),A=(0,i.useMemo)((()=>({info:{color:T.colorIcon,icon:(0,a.Y)(u.A,{})},question:{color:T.colorIcon,icon:(0,a.Y)(h.A,{})},warning:{color:T.colorWarning,icon:(0,a.Y)(p.A,{})},notice:{color:T.colorWarning,icon:(0,a.Y)(m.A,{})},error:{color:T.colorError,icon:(0,a.Y)(f.A,{})}})),[T]),C=e?A[e]:null,w=l.AH`
    color: ${null!=(S=null==C?void 0:C.color)?S:T.colorIcon};
    font-size: ${(0,c.ny)(T,t)}px;
  `,R=(0,a.Y)(g.Ay,{type:"text",variant:"text","aria-label":(0,d.t)("Show info tooltip"),className:v,css:[e=>l.AH`
          vertical-align: text-bottom;
          box-shadow: none;
          padding: 0;
          height: auto;
          background: none;
          &&&:hover,
          &&&:focus,
          &&&:active {
            box-shadow: none;
            background: none;
            outline: none;
            color: ${e.colorTextTertiary};
          }
          ${y?"cursor: pointer;":""}
        `,w,E],onClick:y,onKeyDown:e=>{!y||"Enter"!==e.key&&" "!==e.key||y()},children:null==C?void 0:C.icon});return n?(0,a.Y)(_.m,{id:`${o()(r)||Math.floor(1e4*Math.random())}-tooltip`,title:n,placement:b,children:R}):R}},5376:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(32064);function o(e){return`${(0,n.N8)()}${e.startsWith("/")?e:`/${e}`}`}},7308:(e,t,r)=>{"use strict";r.d(t,{V:()=>c});var n=r(2445),o=r(74098),a=r(17437),i=r(5250),s=r(95018),l=r(8558);function c({name:e,description:t,label:r,tooltipOnClick:c,onClick:d,warning:u,danger:h,leftNode:p,rightNode:m,validationErrors:f=[],renderTrigger:g=!1,hovered:_=!1,required:y=!1}){if(!r)return null;const v=f.length>0?"text-danger":"";return(0,n.FD)("div",{className:"ControlHeader",children:[(0,n.Y)("div",{className:"pull-left",children:(0,n.FD)("label",{className:"control-label",htmlFor:e,children:[p&&(0,n.Y)(n.FK,{children:p}),(0,n.Y)("span",{role:d?"button":void 0,...d?{onClick:d,tabIndex:0}:{},className:v,children:r})," ",u&&(0,n.FD)("span",{children:[(0,n.Y)(s.m,{id:"error-tooltip",placement:"top",title:u,children:(0,n.Y)(l.F.InfoCircleOutlined,{iconSize:"m",css:e=>a.AH`
                    color: ${e.colorError};
                  `})})," "]}),h&&(0,n.FD)("span",{children:[(0,n.FD)(s.m,{id:"error-tooltip",placement:"top",title:h,children:[(0,n.Y)(l.F.InfoCircleOutlined,{iconSize:"m",css:e=>a.AH`
                    color: ${e.colorError};
                  `})," "]})," "]}),f.length>0&&(0,n.FD)("span",{children:[(0,n.FD)(s.m,{id:"error-tooltip",placement:"top",title:f.join(" "),children:[(0,n.Y)(l.F.InfoCircleOutlined,{iconSize:"m",css:e=>a.AH`
                    color: ${e.colorError};
                  `})," "]})," "]}),_?(0,n.FD)("span",{children:[t&&(0,n.FD)("span",{children:[(0,n.Y)(i.I,{label:(0,o.t)("description"),tooltip:t,placement:"top",onClick:c})," "]}),g&&(0,n.FD)("span",{children:[(0,n.Y)(i.I,{label:(0,o.t)("bolt"),tooltip:(0,o.t)("Changing this control takes effect instantly"),placement:"top",type:"notice"})," "]})]}):null,y&&(0,n.Y)("strong",{children:" *"})]})}),m&&(0,n.Y)("div",{className:"pull-right",children:m}),(0,n.Y)("div",{className:"clearfix"})]})}},7437:(e,t,r)=>{"use strict";r.d(t,{z:()=>u});var n=r(6924),o=r.n(n),a=r(2445),i=r(96540),s=r(63142),l=r(30709),c=r(8834),d=r(99106);function u({source:e,htmlSanitization:t=!0,htmlSchemaOverrides:n={}}){const u=(0,d.G7)(d.TO.EscapeMarkdownHtml),[h,p]=(0,i.useState)(null),[m,f]=(0,i.useState)(null);(0,i.useEffect)((()=>{Promise.all([Promise.all([r.e(4693),r.e(9993)]).then(r.bind(r,49993)),Promise.all([r.e(4693),r.e(9544)]).then(r.bind(r,89544))]).then((([e,t])=>{p((()=>e.default)),f((()=>t.default))}))}),[]);const g=(0,i.useMemo)((()=>{const e=[];if(!u&&h&&(e.push(h),t)){const t=function(e,t){return o()(e,t,((e,t)=>Array.isArray(e)?e.concat(t):void 0))}(s.j,n);e.push([l.A,t])}return e}),[u,t,n,h]);return m&&h?(0,a.Y)(m,{rehypePlugins:g,remarkPlugins:[c.A],skipHtml:!1,transformLinkUri:null,children:e}):null}},7466:(e,t,r)=>{"use strict";r.d(t,{Gv:()=>c,Jp:()=>v,Kz:()=>m,LG:()=>S,N3:()=>y,P9:()=>_,SZ:()=>g,_W:()=>u,gd:()=>b,n4:()=>h,om:()=>p,pK:()=>d,qY:()=>E,qw:()=>f,tS:()=>T});var n=r(2445),o=r(90924),a=r(74098),i=r(8558),s=r(5032),l=r(99183);function c(e){return null!==e&&"object"==typeof e&&!1===Array.isArray(e)}function d(e){return c(e)&&"value"in e&&"label"in e}function u(e){return d(e)?e.value:e}function h(e,t,r){return(c(e)&&r in e?e[r]:e)==(c(t)&&r in t?t[r]:t)}function p(e,t,r=!1){return(0,o.A)(t).find((t=>h(t,e,"value")||r&&h(t,e,"label")))}function m(e,t,r=!1){return void 0!==p(e,t,r)}const f=e=>(t,r)=>{const n=t[e],o=r[e];return"string"==typeof n&&"string"==typeof o?n.localeCompare(o):"number"==typeof n&&"number"==typeof o?n-o:String(n).localeCompare(String(o))},g=(e,t,r)=>e.value===s.RB?-1:t.value===s.RB?1:r&&void 0!==e.value&&void 0!==t.value?Number(m(t.value,r))-Number(m(e.value,r)):0,_=(e,t,r,n,o)=>n(e,t)||o(e,t,r),y=(e,t,r,n)=>r(e,t)||n(e,t,""),v=(e,t,r)=>e?(0,n.Y)(l.IO,{size:"small"}):t&&r?(0,n.Y)(i.F.SearchOutlined,{iconSize:"s"}):(0,n.Y)(i.F.DownOutlined,{iconSize:"s","aria-label":"down"}),b=(e,t,r,i,s,c,d)=>{var u;if(t||null==(u=e.ref)||null==(u=u.current)||u.scrollTo({top:0}),r&&0===i)return(0,n.Y)(l.Vg,{children:(0,a.t)("Loading...")});if(c)return c;const h={...e,props:{...e.props,flattenOptions:(0,o.A)(e.props.flattenOptions).map(((t,r)=>{var n;return{...t,data:{...t.data,"aria-setsize":(null==(n=e.props.flattenOptions)?void 0:n.length)||0,"aria-posinset":r+1}}}))}};return(0,n.FD)(n.FK,{children:[s&&(0,n.Y)(l.tK,{role:"note",children:s}),h,d]})},E=(e,t,r,n)=>{if("function"==typeof n)return n(e,t);if(n){const n=e.trim().toLowerCase();if(null!=r&&r.length)return r.some((e=>(null!=t&&t[e]?String(t[e]).trim().toLowerCase():"").includes(n)))}return!1},S=(e,t)=>t?e.map((e=>({key:e.value,value:e.value,label:e.label}))):e.map((e=>e.value)),T=e=>e.map((e=>({children:e.label,key:e.value,...e})))},7566:(e,t,r)=>{"use strict";r.d(t,{Eo:()=>h,Id:()=>s,Vi:()=>p,fE:()=>l,nn:()=>d,pU:()=>c,pn:()=>i,y4:()=>m,zF:()=>u});var n=r(2445),o=r(34005);const a=new o.FilterXSS({whiteList:{...(0,o.getDefaultWhiteList)(),span:["style","class","title"],div:["style","class"],a:["style","class","href","title","target"],img:["style","class","src","alt","title","width","height"],video:["autoplay","controls","loop","preload","src","height","width","muted"],table:["width","border","align","valign","style"],tr:["rowspan","align","valign","style"],td:["width","rowspan","colspan","align","valign","style"],th:["width","rowspan","colspan","align","valign","style"],tbody:["align","valign","style"],thead:["align","valign","style"],tfoot:["align","valign","style"]},stripIgnoreTag:!0,css:!1});function i(e){return a.process(e)}function s(e){return/<(html|head|body|div|span|a|p|h[1-6]|title|meta|link|script|style)/i.test(e)}function l(e){const t=e.trim().toLowerCase();if(t.startsWith("<!doctype html>")&&s(t))return!0;if(!s(e))return!1;const r=(new DOMParser).parseFromString(t,"text/html"),n=Array.from(r.body.childNodes).filter((e=>1===e.nodeType));return 0!==n.length&&n.some((e=>{const t=e.tagName.toLowerCase();return["div","span","p","a","b","i","u","em","strong","h1","h2","h3","h4","h5","h6","table","tr","td","th","tbody","thead","tfoot","ul","ol","li","img","br","hr","pre","code","blockquote","section","article","nav","header","footer","form","input","button","select","option","textarea","label","fieldset","legend","video","audio","canvas","iframe","script","style","link","meta","title"].includes(t)}))}function c(e){return l(e)?i(e):e}function d(e){return l(e)?(0,n.Y)("span",{className:"safe-html-wrapper",dangerouslySetInnerHTML:{__html:i(e)}}):e}function u(e){var t,r;const n=(new DOMParser).parseFromString(e,"text/html"),o=(null==(t=n.body)?void 0:t.textContent)||"";return((null==(r=n.head)?void 0:r.textContent)||"")+o}function h(e){try{return JSON.parse(e),!0}catch(e){return!1}}function p(e){if(!l(e))return null;const t=(new DOMParser).parseFromString(e,"text/html").querySelectorAll("p");if(0===t.length)return null;const r={};return t.forEach(((e,t)=>{r[`p${t+1}`]=e.textContent||""})),r}function m(e){return"string"==typeof e&&l(e)?u(e):e}},7683:(e,t,r)=>{"use strict";var n;r.d(t,{A:()=>o,s:()=>n}),function(e){e[e.Numeric=0]="Numeric",e[e.String=1]="String",e[e.Temporal=2]="Temporal",e[e.Boolean=3]="Boolean"}(n||(n={}));const o={}},7741:(e,t,r)=>{"use strict";var n;r.d(t,{Y:()=>n}),function(e){e.Area="echarts_area",e.Bar="echarts_timeseries_bar",e.BigNumber="big_number",e.BigNumberTotal="big_number_total",e.BigNumberPeriodOverPeriod="pop_kpi",e.BoxPlot="box_plot",e.Bubble="bubble_v2",e.Bullet="bullet",e.Calendar="cal_heatmap",e.Cartodiagram="cartodiagram",e.Chord="chord",e.Compare="compare",e.CountryMap="country_map",e.Funnel="funnel",e.Gantt="gantt_chart",e.Gauge="gauge_chart",e.Graph="graph_chart",e.Handlebars="handlebars",e.Heatmap="heatmap_v2",e.Histogram="histogram_v2",e.Horizon="horizon",e.LegacyBubble="bubble",e.Line="echarts_timeseries_line",e.MapBox="mapbox",e.MixedTimeseries="mixed_timeseries",e.PairedTTest="paired_ttest",e.ParallelCoordinates="para",e.Partition="partition",e.Pie="pie",e.PivotTable="pivot_table_v2",e.Radar="radar",e.Rose="rose",e.Sankey="sankey_v2",e.Scatter="echarts_timeseries_scatter",e.SmoothLine="echarts_timeseries_smooth",e.Step="echarts_timeseries_step",e.Sunburst="sunburst_v2",e.Table="table",e.TableAgGrid="ag-grid-table",e.TimePivot="time_pivot",e.TimeTable="time_table",e.Timeseries="echarts_timeseries",e.Tree="tree_chart",e.Treemap="treemap_v2",e.Waterfall="waterfall",e.WordCloud="word_cloud",e.WorldMap="world_map"}(n||(n={}))},7840:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(()=>{try{return r(19593)||{}}catch(e){return{}}})()},8387:(e,t,r)=>{"use strict";r.d(t,{y:()=>a});var n=r(50290),o=r(17437);const a=n.I4.div`
  ${({theme:e})=>o.AH`
    font-weight: ${e.fontWeightStrong};
    margin-bottom: ${e.sizeUnit}px;
    font-size: ${e.fontSizeSM}px;
  `}
`},8558:(e,t,r)=>{"use strict";r.d(t,{F:()=>Mt});var n=r(2445),o=r(92295),a=r(11058),i=r(41889),s=r(31942),l=r(1372),c=r(34331),d=r(51802),u=r(42761),h=r(30845),p=r(20778),m=r(40562),f=r(83762),g=r(66893),_=r(58937),y=r(56679),v=r(55144),b=r(44297),E=r(18591),S=r(32153),T=r(71263),A=r(26362),C=r(26067),w=r(71295),R=r(38811),I=r(7713),O=r(67345),D=r(47852),x=r(99552),N=r(82734),L=r(30359),P=r(21143),F=r(6746),M=r(90888),k=r(57046),q=r(48990),z=r(80088),U=r(41566),Y=r(39069),$=r(93598),B=r(14103),H=r(40756),j=r(40261),Q=r(52318),V=r(52629),G=r(7541),W=r(20763),K=r(30234),X=r(8597),J=r(6516),Z=r(69988),ee=r(89666),te=r(31628),re=r(21883),ne=r(25840),oe=r(56179),ae=r(65710),ie=r(87942),se=r(39277),le=r(85225),ce=r(78027),de=r(57287),ue=r(40183),he=r(17122),pe=r(87851),me=r(54700),fe=r(29248),ge=r(17850),_e=r(92171),ye=r(19803),ve=r(84890),be=r(49120),Ee=r(385),Se=r(93567),Te=r(26555),Ae=r(65619),Ce=r(29197),we=r(31201),Re=r(76157),Ie=r(35709),Oe=r(35066),De=r(31972),xe=r(78854),Ne=r(78620),Le=r(92396),Pe=r(85900),Fe=r(39822),Me=r(49237),ke=r(80581),qe=r(21348),ze=r(68e3),Ue=r(43903),Ye=r(42877),$e=r(78602),Be=r(97919),He=r(38589),je=r(62786),Qe=r(82726),Ve=r(74581),Ge=r(1005),We=r(64595),Ke=r(49932),Xe=r(13341),Je=r(75763),Ze=r(77028),et=r(74046),tt=r(83853),rt=r(75182),nt=r(26574),ot=r(87450),at=r(98361),it=r(91475),st=r(97),lt=r(17451),ct=r(29567),dt=r(70462),ut=r(73108),ht=r(57939),pt=r(36704),mt=r(50378),ft=r(84801),gt=r(25714),_t=r(62648),yt=r(22630),vt=r(21952),bt=r(85061),Et=r(46325),St=r(86405),Tt=r(50290),At=r(54603),Ct=r(17437);const wt=({component:e,iconColor:t,iconSize:r,viewBox:o,customIcons:a,fileName:i,...s})=>{const l=(0,Tt.DP)(),c=null!=s&&s.onClick?"button":"img",d=(e=>{const t=e.replace(/_/g,"-"),r=t.split(/(?<=[a-z])(?=[A-Z])/);return 2===r.length?r[0].toLowerCase():r.length>=3?`${r[0].toLowerCase()}-${r[1].toLowerCase()}`:t.toLowerCase()})(i||""),u={color:t,fontSize:r?`${(0,At.ny)(l,r)}px`:`${l.fontSize}px`,cursor:null!=s&&s.onClick?"pointer":void 0};return a?(0,n.Y)("span",{role:c,"aria-label":d,css:[Ct.AH`
          display: inline-flex;
          align-items: center;
          line-height: 0;
          vertical-align: middle;
        `],children:(0,n.Y)(e,{viewBox:o||"0 0 24 24",style:u,width:r?`${(0,At.ny)(l,r)||l.fontSize}px`:`${l.fontSize}px`,height:r?`${(0,At.ny)(l,r)||l.fontSize}px`:`${l.fontSize}px`,...s})}):(0,n.Y)(e,{role:c,style:u,"aria-label":d,...s})},Rt=["TwoTone"],It={AlignCenterOutlined:o.A,AlignLeftOutlined:a.A,AlignRightOutlined:i.A,ApartmentOutlined:s.A,AppstoreOutlined:l.A,AreaChartOutlined:c.A,ArrowRightOutlined:d.A,ArrowsAltOutlined:u.A,BarChartOutlined:h.A,BgColorsOutlined:p.A,BellOutlined:m.A,BookOutlined:f.A,BugOutlined:g.A,BulbOutlined:_.A,CalculatorOutlined:y.A,CaretUpOutlined:v.A,CaretDownOutlined:b.A,CaretLeftOutlined:E.A,CaretRightOutlined:S.A,CaretRightFilled:T.A,CalendarOutlined:A.A,CheckOutlined:C.A,CheckCircleOutlined:w.A,CheckCircleFilled:R.A,CheckSquareOutlined:I.A,ClearOutlined:O.A,CloseOutlined:D.A,CloseCircleOutlined:x.A,ClockCircleOutlined:N.A,ColumnHeightOutlined:L.A,ColumnWidthOutlined:P.A,CommentOutlined:F.A,ConsoleSqlOutlined:M.A,CopyOutlined:k.A,DashboardOutlined:q.A,DatabaseOutlined:z.A,DeleteFilled:U.A,DownSquareOutlined:Y.A,DeleteOutlined:$.A,DownOutlined:B.A,DownloadOutlined:H.A,EditOutlined:j.A,EllipsisOutlined:Q.A,ExclamationCircleOutlined:V.A,ExclamationCircleFilled:G.A,ExpandOutlined:W.A,EyeOutlined:K.A,EyeInvisibleOutlined:X.A,FacebookOutlined:J.A,FallOutlined:Z.A,FieldNumberOutlined:ee.A,FieldTimeOutlined:te.A,FileImageOutlined:re.A,FileMarkdownOutlined:ne.A,FileOutlined:oe.A,FileTextOutlined:ae.A,FireOutlined:ie.A,FormOutlined:se.A,FullscreenExitOutlined:le.A,FullscreenOutlined:ce.A,FundProjectionScreenOutlined:de.A,FunctionOutlined:ue.A,GithubOutlined:he.A,GoogleOutlined:pe.A,HighlightOutlined:me.A,InfoCircleOutlined:fe.A,InfoCircleFilled:ge.A,InsertRowAboveOutlined:_e.A,InsertRowBelowOutlined:ye.A,LineChartOutlined:ve.A,LineOutlined:be.A,LinkOutlined:Ee.A,LoadingOutlined:Se.A,LoginOutlined:Te.A,MailOutlined:Ae.A,MenuOutlined:Ce.A,MenuFoldOutlined:we.A,MenuUnfoldOutlined:Re.A,MinusCircleOutlined:Ie.A,MonitorOutlined:Oe.A,MoonOutlined:De.A,MoreOutlined:xe.A,OrderedListOutlined:Ne.A,PieChartOutlined:Le.A,PicCenterOutlined:Pe.A,PlusCircleOutlined:Fe.A,PlusOutlined:Me.A,ReloadOutlined:ke.A,QuestionCircleOutlined:qe.A,RightOutlined:ze.A,SaveOutlined:Ue.A,SearchOutlined:Ye.A,SettingOutlined:$e.A,ShareAltOutlined:Be.A,SunOutlined:He.A,StarOutlined:je.A,StarFilled:Qe.A,StopOutlined:Ve.A,SyncOutlined:Ge.A,TagOutlined:We.A,TagsOutlined:Ke.A,TableOutlined:Xe.A,LockOutlined:Je.A,UploadOutlined:Ze.A,UnlockOutlined:et.A,UpOutlined:tt.A,UserAddOutlined:rt.A,UsergroupAddOutlined:nt.A,UserOutlined:ot.A,VerticalAlignBottomOutlined:at.A,VerticalAlignTopOutlined:it.A,VerticalLeftOutlined:st.A,VerticalRightOutlined:lt.A,NumberOutlined:ct.A,ThunderboltOutlined:dt.A,FilterOutlined:ut.A,FontColorsOutlined:ht.A,UnorderedListOutlined:pt.A,WarningOutlined:mt.A,SortAscendingOutlined:ft.A,KeyOutlined:gt.A,DesktopOutlined:_t.A,FormatPainterOutlined:yt.A,ExportOutlined:vt.A,CompressOutlined:bt.A,HistoryOutlined:Et.A,SlackOutlined:St.A},Ot=Object.keys(It).filter((e=>!Rt.some((t=>e.includes(t))))).reduce(((e,t)=>(e[t]=e=>(0,n.Y)(wt,{component:It[t],fileName:t,...e}),e)),{});var Dt=r(96540);function xt(){return xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xt.apply(null,arguments)}const Nt=({title:e,titleId:t,...r},n)=>Dt.createElement("svg",xt({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",ref:n,"aria-labelledby":t},r)),Lt=(0,Dt.forwardRef)(Nt),Pt=e=>{const[,t]=(0,Dt.useState)(!1),o=(0,Dt.useRef)(),{fileName:a,customIcons:i,iconSize:s,iconColor:l,viewBox:c,...d}=e;return(0,Dt.useEffect)((()=>{let e=!1;return async function(){o.current=(await r(27724)(`./${a}.svg`)).default,e||t(!0)}(),()=>{e=!0}}),[a,o]),(0,n.Y)(wt,{component:o.current||Lt,fileName:a,customIcons:i,iconSize:s,iconColor:l,viewBox:c,...d})},Ft={};["Ballot","BigNumberChartTile","Binoculars","Category","Certified","CheckboxHalf","CheckboxOff","CheckboxOn","CircleSolid","Drag","ErrorSolidSmallRed","Error","Full","Layers","Queued","Redo","Running","Slack","Square","SortAsc","SortDesc","Sort","Transparent","TriangleDown","Undo"].forEach((e=>{const t=e.replace(/([a-z0-9])([A-Z])/g,"$1_$2").toLowerCase();Ft[e]=e=>(0,n.Y)(Pt,{customIcons:!0,fileName:t,...e})}));const Mt={...Ot,...Ft}},8903:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(96540);const o=()=>{const[e,t]=(0,n.useState)(0),[r,o]=(0,n.useState)(!1),a=(0,n.useRef)(null),i=(0,n.useRef)(null);return(0,n.useLayoutEffect)((()=>{var e;const r=()=>{const e=a.current;if(!e)return;const r=i.current,{scrollWidth:n,clientWidth:s,childNodes:l}=e;if(n>s){const e=6,n=(null==r?void 0:r.offsetWidth)||0,a=s-e,i=l.length;let c=0,d=0;for(let e=0;e<i;e+=1)a-c-n<=0&&(d+=1),c+=l[e].offsetWidth;i>1&&d?(o(!0),t(d)):(o(!1),t(1))}else o(!1),t(0)},n=new ResizeObserver(r),s=null==(e=a.current)?void 0:e.parentElement;return s&&n.observe(s),r(),()=>{n.disconnect()}}),[i.current]),[a,i,e,r]}},9485:(e,t,r)=>{"use strict";r.d(t,{oq:()=>ve,uO:()=>se,kv:()=>ce.D,c0:()=>le});var n=r(2445),o=r(50290),a=r(74098),i=r(96540),s=r(46942),l=r.n(s),c=r(60227),d=r(51692),u=r(79378),h=r(97163),p=r(88217),m=r(23195),f=r(49965),g=r(57771);const _=o.I4.div`
  .bulk-tag-text {
    margin-bottom: ${({theme:e})=>2.5*e.sizeUnit}px;
  }
`,y=({show:e,selected:t=[],onHide:r,refreshData:o,resourceName:s,addSuccessToast:l,addDangerToast:c})=>{(0,i.useEffect)((()=>{}),[]);const[y,v]=(0,i.useState)([]);return(0,n.Y)(h.aF,{title:(0,n.Y)(d.r,{title:(0,a.t)("Bulk tag")}),show:e,onHide:()=>{v([]),r()},footer:(0,n.FD)("div",{children:[(0,n.Y)(p.$,{buttonStyle:"secondary",onClick:r,children:(0,a.t)("Cancel")}),(0,n.Y)(p.$,{buttonStyle:"primary",onClick:async()=>{await u.A.post({endpoint:"/api/v1/tag/bulk_create",jsonPayload:{tags:y.map((e=>({name:e.label,objects_to_tag:t.map((e=>[s,+e.original.id]))})))}}).then((({json:e={}})=>{const t=e.result.objects_skipped,r=e.result.objects_tagged;t.length>0&&l((0,a.t)("%s items could not be tagged because you don’t have edit permissions to all selected objects.",t.length,s)),l((0,a.t)("Tagged %s %ss",r.length,s))})).catch((e=>{c((0,a.t)("Failed to tag items"))})),o(),r(),v([])},children:(0,a.t)("Save")})]}),children:(0,n.FD)(_,{children:[(0,n.Y)("div",{className:"bulk-tag-text",children:(0,a.t)("You are adding tags to %s %ss",t.length,s)}),(0,n.Y)(m.l,{children:(0,a.t)("tags")}),(0,n.Y)(f.A,{ariaLabel:"tags",value:y,options:g.m,onHide:r,onChange:e=>v(e),placeholder:(0,a.t)("Select Tags"),mode:"multiple"})]})})};var v=r(94185),b=r(91196),E=r(8558),S=r(38134);const T=o.I4.div`
  ${({theme:e,showThumbnails:t})=>`\n    display: grid;\n    justify-content: start;\n    grid-gap: ${12*e.sizeUnit}px ${4*e.sizeUnit}px;\n    grid-template-columns: repeat(auto-fit, 300px);\n    margin-top: ${-6*e.sizeUnit}px;\n    padding: ${t?`${8*e.sizeUnit+3}px ${20*e.sizeUnit}px`:`${8*e.sizeUnit+1}px ${20*e.sizeUnit}px`};\n  `}
`,A=o.I4.div`
  border: 2px solid transparent;
  &.card-selected {
    border: 2px solid ${({theme:e})=>e.colorPrimary};
  }
  &.bulk-select {
    cursor: pointer;
  }
`;function C({bulkSelectEnabled:e,loading:t,prepareRow:r,renderCard:o,rows:a,showThumbnails:i}){return o?(0,n.FD)(T,{showThumbnails:i,children:[t&&0===a.length&&[...new Array(25)].map(((e,r)=>(0,n.Y)("div",{children:o({loading:t})},r))),a.length>0&&a.map((a=>o?(r(a),(0,n.Y)(A,{className:l()({"card-selected":e&&a.isSelected,"bulk-select":e}),onClick:t=>{return r=t,n=a.toggleRowSelected,void(e&&(r.preventDefault(),r.stopPropagation(),n()));var r,n},role:"none",children:o({...a.original,loading:t})},a.id)):null))]}):null}var w=r(98837),R=r(76576),I=r(5250),O=r(17355),D=r(17437);const x=(0,o.I4)(R.s)`
  ${({theme:e,width:t})=>D.AH`
    width: ${t?`${t}px`:"auto"};

    label {
      display: block;
      font-size: ${e.fontSizeSM}px;
      color: ${e.colorTextLabel};
      margin-bottom: ${e.sizeUnit}px;
    }
    .anticon-info-circle {
      margin: 0px 0px ${e.sizeUnit}px ${e.sizeUnit}px;
   }
  }
  `}
`;var N=r(66124);function L({Header:e,name:t,initialValue:r,toolTipDescription:s,onSubmit:l},c){const d=(0,o.DP)(),[u,h]=(0,i.useState)(r||""),p=()=>{u&&l(u.trim())};return(0,i.useImperativeHandle)(c,(()=>({clearFilter:()=>{h(""),l("")}}))),(0,n.FD)(x,{width:N.uZ,vertical:!0,justify:"center",align:"start",children:[(0,n.FD)(R.s,{children:[(0,n.Y)(m.l,{children:e}),s&&(0,n.Y)(I.I,{tooltip:s})]}),(0,n.Y)(O.A,{allowClear:!0,placeholder:(0,a.t)("Type a value"),name:t,value:u,onChange:e=>{h(e.currentTarget.value),""===e.currentTarget.value&&l("")},onPressEnter:p,onBlur:p,prefix:(0,n.Y)(E.F.SearchOutlined,{iconColor:d.colorIcon,iconSize:"l"})})]})}const P=(0,i.forwardRef)(L);var F=r(2801);function M({Header:e,name:t,fetchSelects:r,initialValue:o,onSelect:s,selects:l=[],loading:c=!1,dropdownStyle:d},u){const[h,p]=(0,i.useState)(o),g=e=>{s(e?{label:e.label,value:e.value}:void 0),p(e)},_=()=>{s(void 0,!0),p(void 0)};(0,i.useImperativeHandle)(u,(()=>({clearFilter:()=>{_()}})));const y=(0,i.useMemo)((()=>async(e,t,n)=>{if(r){const o=await r(e,t,n);return{data:o.data,totalCount:o.totalCount}}return{data:[],totalCount:0}}),[r]),v=(0,a.t)("Choose...");return(0,n.FD)(x,{width:N.uZ,vertical:!0,justify:"center",align:"start",children:[(0,n.Y)(m.l,{children:e}),r?(0,n.Y)(f.A,{allowClear:!0,ariaLabel:"string"==typeof e?e:t||(0,a.t)("Filter"),onChange:g,onClear:_,options:y,placeholder:v,dropdownStyle:d,showSearch:!0,value:h}):(0,n.Y)(F.A,{allowClear:!0,ariaLabel:"string"==typeof e?e:t||(0,a.t)("Filter"),labelInValue:!0,onChange:g,onClear:_,options:l,placeholder:v,dropdownStyle:d,showSearch:!0,value:h,loading:c})]})}const k=(0,i.forwardRef)(M);var q=r(89064),z=r(59674),U=r(92998),Y=r(20668),$=r(64535);function B({Header:e,initialValue:t,onSubmit:r,dateFilterValueType:o="unix"},s){const[l,c]=(0,i.useState)(null!=t?t:null),d=(0,i.useMemo)((()=>!l||Array.isArray(l)&&!l.length?null:[(0,z.XV)(l[0]),(0,z.XV)(l[1])]),[l]),u=(0,q.Y)();return(0,i.useImperativeHandle)(s,(()=>({clearFilter:()=>{c(null),r([])}}))),null===u?(0,n.Y)(U.R,{position:"inline-centered"}):(0,n.Y)(Y.Q,{locale:u,children:(0,n.FD)(x,{vertical:!0,justify:"center",align:"start",width:N.vr,children:[(0,n.Y)(m.l,{children:e}),(0,n.Y)($.c,{placeholder:[(0,a.t)("Start date"),(0,a.t)("End date")],showTime:!0,value:d,onCalendarChange:e=>{var t,n,a,i,s,l;if(null==e||null==(t=e[0])||!t.valueOf()||null==e||null==(n=e[1])||!n.valueOf())return c(null),void r([]);const d="iso"===o?[e[0].toISOString(),e[1].toISOString()]:[null!=(a=null==(i=e[0])?void 0:i.valueOf())?a:0,null!=(s=null==(l=e[1])?void 0:l.valueOf())?s:0];c(d),r(d)}})]})})}const H=(0,i.forwardRef)(B);var j=r(7142);const Q=o.I4.div`
  display: flex;
  align-items: center;
  width: 100%;
  position: relative;
`,V=o.I4.span`
  margin: 0 ${({theme:e})=>2*e.sizeUnit}px;
  color: ${({theme:e})=>e.colorText};
  font-weight: ${({theme:e})=>e.fontWeightNormal};
  font-size: ${({theme:e})=>e.fontSize}px;
`,G=o.I4.div`
  color: ${({theme:e})=>e.colorErrorText};
  font-size: ${({theme:e})=>e.fontSizeSM}px;
  font-weight: ${({theme:e})=>e.fontWeightNormal};
  position: absolute;
  bottom: -50%;
  left: 0;
`;function W({Header:e,initialValue:t,onSubmit:r},o){const[s,l]=(0,i.useState)(null!=t?t:[null,null]),[c,d]=(0,i.useState)(!1);return(0,i.useImperativeHandle)(o,(()=>({clearFilter:()=>{l([null,null]),d(!1),r([null,null])}}))),(0,n.FD)(x,{width:N.vr,vertical:!0,justify:"center",align:"start",children:[(0,n.Y)(m.l,{children:e}),(0,n.FD)(Q,{children:[(0,n.Y)(j.A,{value:s[0],onChange:e=>{const t=[e,s[1]];l(t),null!==e&&null!==s[1]&&e>=s[1]?d(!0):(d(!1),r(t))},placeholder:(0,a.t)("Value greater than"),style:{width:"100%"}}),(0,n.Y)(V,{children:"-"}),(0,n.Y)(j.A,{value:s[1],onChange:e=>{const t=[s[0],e];l(t),null!==s[0]&&null!==e&&s[0]>=e?d(!0):(d(!1),r(t))},placeholder:(0,a.t)("Value less than"),style:{width:"100%"}}),c&&(0,n.Y)(G,{children:(0,a.t)("Minimum must be strictly less than maximum")})]})]})}const K=(0,i.forwardRef)(W);function X({filters:e,internalFilters:t=[],updateFilterValue:r},o){const a=(0,i.useMemo)((()=>Array.from({length:e.length},(()=>(0,i.createRef)()))),[e.length]);return(0,i.useImperativeHandle)(o,(()=>({clearFilters:()=>{a.forEach((e=>{var t;null==(t=e.current)||null==t.clearFilter||t.clearFilter()}))}}))),(0,n.Y)(n.FK,{children:e.map((({Header:e,fetchSelects:o,key:i,id:s,input:l,paginate:c,selects:d,toolTipDescription:u,onFilterUpdate:h,loading:p,dateFilterValueType:m,min:f,max:g,dropdownStyle:_},y)=>{var v;const b=null==t||null==(v=t[y])?void 0:v.value;return"select"===l?(0,n.Y)(k,{ref:a[y],Header:e,fetchSelects:o,initialValue:b,name:s,onSelect:(e,t)=>{h&&(t||h(e)),r(y,e)},paginate:c,selects:d,loading:null!=p&&p,dropdownStyle:_},i):"search"===l&&"string"==typeof e?(0,n.Y)(P,{ref:a[y],Header:e,initialValue:b,name:s,toolTipDescription:u,onSubmit:e=>{h&&h(e),r(y,e)}},i):"datetime_range"===l?(0,n.Y)(H,{ref:a[y],Header:e,initialValue:b,name:s,onSubmit:e=>r(y,e),dateFilterValueType:m||"unix"},i):"numerical_range"===l?(0,n.Y)(K,{ref:a[y],Header:e,initialValue:b,min:f,max:g,name:s,onSubmit:e=>r(y,e)},i):null}))})}const J=(0,w.b)((0,i.forwardRef)(X)),Z=o.I4.div`
  display: inline-flex;
  font-size: ${({theme:e})=>e.fontSizeSM}px;
  align-items: center;
  text-align: left;
  width: ${N.uZ}px;
`,ee=({initialSort:e,onChange:t,options:r})=>{const o=e&&r.find((({id:t,desc:r})=>t===e[0].id&&r===e[0].desc))||r[0],[s,l]=(0,i.useState)({label:o.label,value:o.value}),c=(0,i.useMemo)((()=>r.map((e=>({label:e.label,value:e.value})))),[r]);return(0,n.Y)(Z,{children:(0,n.Y)(F.A,{ariaLabel:(0,a.t)("Sort"),header:(0,n.Y)(m.l,{children:(0,a.t)("Sort")}),labelInValue:!0,onChange:e=>{l(e);const n=r.find((({value:t})=>t===e.value));if(n){const e=[{id:n.id,desc:n.desc}];t(e)}},options:c,showSearch:!0,value:s})})},te=o.I4.div`
  ${({theme:e})=>`\n    text-align: center;\n    background-color: ${e.colorBgLayout};\n    padding-top: ${e.paddingXS}px;\n\n    .superset-list-view {\n      text-align: left;\n      border-radius: 4px 0;\n      margin: 0 ${4*e.sizeUnit}px;\n\n      .header {\n        display: flex;\n        padding-bottom: ${4*e.sizeUnit}px;\n\n        & .controls {\n          display: flex;\n          flex-wrap: wrap;\n          column-gap: ${7*e.sizeUnit}px;\n          row-gap: ${4*e.sizeUnit}px;\n        }\n      }\n\n      .body.empty table {\n        margin-bottom: 0;\n      }\n\n      .body {\n        overflow-x: auto;\n        overflow-y: hidden;\n      }\n\n      .ant-empty {\n        .ant-empty-image {\n          height: auto;\n        }\n      }\n    }\n\n    .pagination-container {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      margin-bottom: ${4*e.sizeUnit}px;\n    }\n\n    .row-count-container {\n      margin-top: ${2*e.sizeUnit}px;\n      color: ${e.colorText};\n    }\n  `}
`,re=(0,o.I4)(v.F)`
  ${({theme:e})=>`\n    border-radius: 0;\n    margin-bottom: 0;\n    color: ${e.colorText};\n    background-color: ${e.colorPrimaryBg};\n\n    .selectedCopy {\n      display: inline-block;\n      padding: ${2*e.sizeUnit}px 0;\n    }\n\n    .deselect-all, .tag-btn {\n      color: ${e.colorPrimary};\n      margin-left: ${4*e.sizeUnit}px;\n    }\n\n    .divider {\n      margin: ${2*-e.sizeUnit}px 0 ${2*-e.sizeUnit}px ${4*e.sizeUnit}px;\n      width: 1px;\n      height: ${8*e.sizeUnit}px;\n      box-shadow: inset -1px 0px 0px ${e.colorBorder};\n      display: inline-flex;\n      vertical-align: middle;\n      position: relative;\n    }\n\n    .ant-alert-close-icon {\n      margin-top: ${1.5*e.sizeUnit}px;\n    }\n  `}
`,ne={Cell:({row:e})=>(0,n.Y)(b.A,{...e.getToggleRowSelectedProps(),id:e.id}),Header:({getToggleAllRowsSelectedProps:e})=>(0,n.Y)(b.A,{...e(),id:"header-toggle-all"}),id:"selection",size:"sm"},oe=o.I4.div`
  ${({theme:e})=>`\n    padding-right: ${4*e.sizeUnit}px;\n    margin-top: ${5*e.sizeUnit+1}px;\n    white-space: nowrap;\n    display: inline-block;\n\n    .toggle-button {\n      display: inline-block;\n      border-radius: ${e.borderRadius}px;\n      padding: ${e.sizeUnit}px;\n      padding-bottom: ${.5*e.sizeUnit}px;\n\n      &:first-of-type {\n        margin-right: ${2*e.sizeUnit}px;\n      }\n    }\n\n    .active {\n      background-color: ${e.colorText};\n\n      svg {\n        color: ${e.colorBgLayout};\n      }\n    }\n  `}
`,ae=o.I4.div`
  ${({theme:e})=>`\n    padding: ${40*e.sizeUnit}px 0;\n\n    &.table {\n      background: ${e.colorBgContainer};\n    }\n  `}
`,ie=({mode:e,setMode:t})=>(0,n.FD)(oe,{children:[(0,n.Y)("div",{role:"button",tabIndex:0,onClick:e=>{e.currentTarget.blur(),t("card")},className:l()("toggle-button",{active:"card"===e}),children:(0,n.Y)(E.F.AppstoreOutlined,{iconSize:"xl"})}),(0,n.Y)("div",{role:"button",tabIndex:0,onClick:e=>{e.currentTarget.blur(),t("table")},className:l()("toggle-button",{active:"table"===e}),children:(0,n.Y)(E.F.UnorderedListOutlined,{iconSize:"xl"})})]});function se({columns:e,data:t,count:r,pageSize:o,fetchData:s,refreshData:l,loading:d,initialSort:u=[],className:h="",filters:m=[],bulkActions:f=[],bulkSelectEnabled:g=!1,disableBulkSelect:_=()=>{},renderBulkSelectCopy:v=e=>(0,a.t)("%s Selected",e.length),renderCard:b,showThumbnails:E,cardSortSelectOptions:T,defaultViewMode:A="card",highlightRowId:w,emptyState:R,columnsForWrapText:I,enableBulkTag:O=!1,bulkTagResourceName:D,addSuccessToast:x,addDangerToast:L}){const{getTableProps:P,getTableBodyProps:F,headerGroups:M,rows:k,prepareRow:q,pageCount:z=1,gotoPage:U,applyFilterValue:Y,setSortBy:$,selectedFlatRows:B,toggleAllRowsSelected:H,setViewMode:j,state:{pageIndex:Q,pageSize:V,internalFilters:G,sortBy:W,viewMode:K},query:X}=(0,N.mj)({bulkSelectColumnConfig:ne,bulkSelectMode:g&&Boolean(f.length),columns:e,count:r,data:t,fetchData:s,initialPageSize:o,initialSort:u,initialFilters:m,renderCard:Boolean(b),defaultViewMode:A}),Z=D&&O,oe=Boolean(m.length);if(oe){const t=e.reduce(((e,t)=>({...e,[t.id||t.accessor]:!0})),{});m.forEach((e=>{if(!t[e.id])throw new N.gS(`Invalid filter config, ${e.id} is not present in columns`)}))}const se=(0,i.useRef)(null),le=(0,i.useCallback)((()=>{var e;X.filters&&(null==(e=se.current)||e.clearFilters())}),[X.filters]),ce=Boolean(b),[de,ue]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{g||H(!1)}),[g,H]),(0,i.useEffect)((()=>{!d&&Q>z-1&&z>0&&U(0)}),[U,d,z,Q]),(0,n.FD)(te,{children:[Z&&(0,n.Y)(y,{show:de,selected:B,refreshData:l,resourceName:D,addSuccessToast:x,addDangerToast:L,onHide:()=>ue(!1)}),(0,n.FD)("div",{className:`superset-list-view ${h} `,children:[(0,n.FD)("div",{className:"header",children:[ce&&(0,n.Y)(ie,{mode:K,setMode:j}),(0,n.FD)("div",{className:"controls",children:[oe&&(0,n.Y)(J,{ref:se,filters:m,internalFilters:G,updateFilterValue:Y}),"card"===K&&T&&(0,n.Y)(ee,{initialSort:W,onChange:e=>$(e),options:T})]})]}),(0,n.FD)("div",{className:`body ${0===k.length?"empty":""} `,children:[g&&(0,n.Y)(re,{type:"info",closable:!0,showIcon:!1,onClose:_,message:(0,n.FD)(n.FK,{children:[(0,n.Y)("div",{className:"selectedCopy",children:v(B)}),Boolean(B.length)&&(0,n.FD)(n.FK,{children:[(0,n.Y)("span",{style:{cursor:"pointer"},role:"button",tabIndex:0,className:"deselect-all",onClick:()=>H(!1),children:(0,a.t)("Deselect all")}),(0,n.Y)("div",{className:"divider"}),f.map((e=>(0,n.Y)(p.$,{buttonStyle:e.type,cta:!0,onClick:()=>e.onSelect(B.map((e=>e.original))),children:e.name},e.key))),O&&(0,n.Y)("span",{role:"button",style:{cursor:"pointer"},tabIndex:0,className:"tag-btn",onClick:()=>ue(!0),children:(0,a.t)("Add Tag")})]})]})}),"card"===K&&(0,n.Y)(C,{bulkSelectEnabled:g,prepareRow:q,renderCard:b,rows:k,loading:d,showThumbnails:E}),"table"===K&&(0,n.Y)(c.A,{getTableProps:P,getTableBodyProps:F,prepareRow:q,headerGroups:M,setSortBy:$,rows:k,columns:e,loading:d,highlightRowId:w,columnsForWrapText:I,bulkSelectEnabled:g,selectedFlatRows:B,toggleRowSelected:(e,t)=>{const r=k.find((t=>t.id===e));r&&(q(r),r.toggleRowSelected(t))},toggleAllRowsSelected:H,pageIndex:Q,pageSize:V,totalCount:r,onPageChange:e=>{U(e)}}),!d&&0===k.length&&(0,n.Y)(ae,{className:K,children:X.filters?(0,n.Y)(S.p,{title:(0,a.t)("No results match your filter criteria"),description:(0,a.t)("Try different criteria to display results."),size:"large",image:"filter-results.svg",buttonAction:()=>le(),buttonText:(0,a.t)("clear all filters")}):(0,n.Y)(S.p,{...R,title:(null==R?void 0:R.title)||(0,a.t)("No Data"),size:"large",image:(null==R?void 0:R.image)||"filter-results.svg"})})]})]})]})}var le;!function(e){e.StartsWith="sw",e.EndsWith="ew",e.Contains="ct",e.Equals="eq",e.NotStartsWith="nsw",e.NotEndsWith="new",e.NotContains="nct",e.NotEquals="neq",e.GreaterThan="gt",e.LessThan="lt",e.RelationManyMany="rel_m_m",e.RelationOneMany="rel_o_m",e.TitleOrSlug="title_or_slug",e.NameOrDescription="name_or_description",e.AllText="all_text",e.ChartAllText="chart_all_text",e.DatasetIsNullOrEmpty="dataset_is_null_or_empty",e.Between="between",e.DashboardIsFav="dashboard_is_favorite",e.ChartIsFav="chart_is_favorite",e.ChartIsCertified="chart_is_certified",e.DashboardIsCertified="dashboard_is_certified",e.DatasetIsCertified="dataset_is_certified",e.DashboardHasCreatedBy="dashboard_has_created_by",e.ChartHasCreatedBy="chart_has_created_by",e.DashboardTagByName="dashboard_tags",e.DashboardTagById="dashboard_tag_id",e.ChartTagByName="chart_tags",e.ChartTagById="chart_tag_id",e.SavedQueryTagByName="saved_query_tags",e.SavedQueryTagById="saved_query_tag_id"}(le||(le={}));var ce=r(47263),de=r(90924),ue=r(8903),he=r(71519),pe=r(95018);const me=o.I4.div`
  .link {
    color: ${({theme:e})=>e.colorLink};
    display: block;
    text-decoration: underline;
  }
`;function fe({children:e,crossLinks:t=[],moreItems:r,show:o=!1}){return(0,n.Y)(pe.m,{placement:"top",title:o&&(0,n.FD)(me,{children:[t.map((e=>(0,n.Y)(he.N_,{className:"link",to:e.to,target:"_blank",rel:"noreferer noopener",children:e.title},e.to))),r&&(0,n.Y)("span",{children:(0,a.t)("+ %s more",r)})]}),children:e})}const ge=o.I4.div`
  ${({theme:e})=>`\n    & > span {\n      width: 100%;\n      display: flex;\n\n      .ant-tooltip-open {\n        display: inline;\n      }\n\n      .truncated {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        display: inline-block;\n        width: 100%;\n        vertical-align: bottom;\n      }\n\n      .count {\n        cursor: pointer;\n        color: ${e.colorTextSecondary};\n        font-weight: ${e.fontWeightStrong};\n      }\n    }\n  `}
`;function _e({crossLinks:e,maxLinks:t=20,linkPrefix:r="/superset/dashboard/"}){const[o,a,s,l]=(0,ue.A)(),c=(0,i.useMemo)((()=>e.length>t?e.length-t:void 0),[e,t]),d=(0,i.useMemo)((()=>(0,n.Y)("span",{className:"truncated",ref:o,children:e.map(((e,t)=>(0,n.Y)(he.N_,{to:r+e.id,children:0===t?e.title:`, ${e.title}`},e.id)))})),[e,o,r]),u=(0,i.useMemo)((()=>e.slice(0,t).map((e=>({title:e.title,to:r+e.id})))),[e,r,t]);return(0,n.Y)(ge,{children:(0,n.FD)(fe,{moreItems:c,crossLinks:u,show:!!s,children:[d,l&&(0,n.FD)("span",{ref:a,className:"count",children:["+",s]})]})})}const ye=(0,i.memo)(_e),ve=(0,i.memo)((({dashboards:e})=>{const t=(0,i.useMemo)((()=>(0,de.A)(e).map((e=>({title:e.dashboard_title,id:e.id})))),[e]);return(0,n.Y)(ye,{crossLinks:t})}))},9992:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(2445),o=r(96540),a=r(8558),i=r(95018);const s=({onClick:e,tooltipContent:t,disabled:r})=>{const s=(0,o.forwardRef)(((e,t)=>(0,n.Y)(a.F.SyncOutlined,{iconSize:"l",...e})));return(0,n.Y)(i.m,{title:t,children:(0,n.Y)(s,{role:"button",onClick:r?void 0:e,css:e=>({cursor:"pointer",color:e.colorIcon,"&:hover":{color:e.colorPrimary}})})})}},10384:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=class{constructor(e){this.name="TypedRegistry",this.records=void 0,this.records=e}get(e){return this.records[e]}set(e,t){this.records[e]=t}}},10900:(e,t,r)=>{"use strict";var n,o;function a(e){return void 0===e.filterType&&e.hasOwnProperty("values")}function i(e){return"filter_select"===e.filterType&&e.hasOwnProperty("values")}function s(e){return e.type===n.NativeFilter}function l(e){var t;return s(e)&&(null==(t=e.dataMask)||null==(t=t.filterState)?void 0:t.value)}function c(e){return e.type===n.Divider}r.d(t,{Ay:()=>d,EH:()=>n,O2:()=>c,Ub:()=>a,ee:()=>l,p_:()=>o,qQ:()=>s,ve:()=>i}),function(e){e.NativeFilter="NATIVE_FILTER",e.Divider="DIVIDER"}(n||(n={})),function(e){e.NativeFilters="nativeFilters",e.CrossFilters="crossFilters"}(o||(o={}));const d={}},12930:(e,t,r)=>{"use strict";r.d(t,{St:()=>s,Zn:()=>i,gN:()=>a});var n=r(5131),o=r(53118);function a(e){const{algorithm:t,...r}=e;let a;return Array.isArray(t)?a=t.map((e=>e===n.A.defaultAlgorithm?o.lJ.DEFAULT:e===n.A.darkAlgorithm?o.lJ.DARK:e===n.A.compactAlgorithm?o.lJ.COMPACT:o.lJ.DEFAULT)):t&&(a=t===n.A.defaultAlgorithm?o.lJ.DEFAULT:t===n.A.darkAlgorithm?o.lJ.DARK:t===n.A.compactAlgorithm?o.lJ.COMPACT:o.lJ.DEFAULT),{...r,algorithm:a}}function i(e){return function(e){const{algorithm:t}=e;return void 0===t||(Array.isArray(t)?t.every((e=>"string"==typeof e)):"string"==typeof t)}(e)?function(e){const{algorithm:t,...r}=e,o={default:n.A.defaultAlgorithm,dark:n.A.darkAlgorithm,compact:n.A.compactAlgorithm};let a;if(Array.isArray(t)){const e=t.map((e=>o[e])).filter(Boolean);a=e.length>0?1===e.length?e[0]:e:n.A.defaultAlgorithm}else a=t&&o[t]?o[t]:n.A.defaultAlgorithm;return{...r,algorithm:a}}(e):e}function s(e,t){return{token:e,algorithm:t?n.A.darkAlgorithm:n.A.defaultAlgorithm}}},13235:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>y,qM:()=>_});var n=r(96540),o=r(61225),a=r(75574),i=r(71086),s=r.n(i),l=r(89105);const c=r(40115).F.injectEndpoints({endpoints:e=>({updateSqlEditorTab:e.mutation({query:({queryEditor:{version:e=l.N0,id:t,dbId:r,catalog:n,schema:o,queryLimit:a,sql:i,name:c,latestQueryId:d,hideLeftBar:u,templateParams:h,autorun:p,updatedAt:m,tabViewId:f},extra:g})=>({method:"PUT",endpoint:encodeURI(`/tabstateview/${null!=f?f:t}`),postPayload:s()({database_id:r,catalog:n,schema:o,sql:i,label:c,query_limit:a,latest_query_id:d,template_params:h,hide_left_bar:u,autorun:p,extra_json:JSON.stringify({updatedAt:m,version:e,...g})},(e=>void 0!==e))})}),updateCurrentSqlEditorTab:e.mutation({query:e=>({method:"POST",endpoint:encodeURI(`/tabstateview/${e}/activate`),transformResponse:()=>e})}),deleteSqlEditorTab:e.mutation({query:e=>({method:"DELETE",endpoint:encodeURI(`/tabstateview/${e}`),transformResponse:()=>e})})})}),{useUpdateSqlEditorTabMutation:d,useUpdateCurrentSqlEditorTabMutation:u,useDeleteSqlEditorTabMutation:h}=c;var p=r(70532),m=r(49299),f=r(66991);const g=5e3;function _(e,t,r){return e.map((e=>({...e,...t.id===e.id&&t}))).filter((e=>function(e,t){return e.inLocalStorage||e.updatedAt&&e.updatedAt>t}(e,r)))}const y=()=>{const e=(0,o.d4)((e=>e.sqlLab.queryEditors)),t=(0,n.useMemo)((()=>e.reduce(((e,t)=>(e[t.id]=t,e)),{})),[e]),r=(0,o.d4)((e=>e.sqlLab.unsavedQueryEditor)),i=(0,o.d4)((e=>e.sqlLab.editorTabLastUpdatedAt)),s=(0,o.wA)(),l=(0,n.useRef)(i),c=(0,o.d4)((({sqlLab:e})=>e.tabHistory.slice(-1)[0]||"")),y=(0,o.d4)((({sqlLab:e})=>e.lastUpdatedActiveTab)),v=(0,o.d4)((({sqlLab:e})=>e.destroyedQueryEditors)),[b,{error:E}]=d(),[S]=u(),[T]=h(),A=(0,p.Q)(r,g),C=(0,f.A)((t=>_(e,t,l.current))),w=(0,f.A)((()=>_(e,r,l.current).find((({inLocalStorage:e})=>Boolean(e))))),R=(0,f.A)((()=>{var r;if(c&&c!==y&&(null==(r=e.find((({id:e})=>e===c)))||!r.inLocalStorage)){var n,o;const e=null!=(n=null==(o=t[c])?void 0:o.tabViewId)?n:c;S(e).then((()=>{s((0,m.setLastUpdatedActiveTab)(c))}))}})),I=(0,f.A)((()=>{Object.keys(v).length>0&&Object.keys(v).forEach((e=>{var r,n;const o=null!=(r=null==(n=t[e])?void 0:n.tabViewId)?r:e;T(o).then((()=>{s((0,m.clearDestoryedQueryEditor)(e))})).catch((({status:t})=>{404===t&&s((0,m.clearDestoryedQueryEditor)(e))}))}))}));return(0,n.useEffect)((()=>{let e;const t=setInterval(R,g);e=setTimeout((function t(){const r=w();r&&s((0,m.syncQueryEditor)(r)),e=setTimeout(t,g)}),g);const r=setInterval(I,g);return()=>{clearTimeout(e),clearInterval(t),clearInterval(r)}}),[w,R,I,s]),(0,n.useEffect)((()=>{const e=C(A);Promise.all(e.filter((({inLocalStorage:e})=>!e)).map((e=>b({queryEditor:e})))).then((e=>{e.some((e=>"error"in e))||(l.current=Date.now(),s((0,m.setEditorTabLastUpdate)(l.current)))}))}),[A,C,s,b]),(0,n.useEffect)((()=>{E&&a.A.warn("An error occurred while saving your editor state.",E)}),[s,E]),null}},14125:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(74098);function o(e){return!(!e||!Number.isNaN(Number(e))&&parseInt(e,10)===Number(e))&&(0,n.t)("is expected to be an integer")}},14240:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>i,fH:()=>a,iw:()=>n});var n,o=r(39892);!function(e){e[e.Dashboard=0]="Dashboard",e[e.Explore=1]="Explore"}(n||(n={}));class a{constructor(){this.chartsLabelsMap=void 0,this.colorMap=void 0,this.source=void 0,this.chartsLabelsMap=new Map,this.colorMap=new Map,this.source=n.Dashboard}updateColorMap(e,t,r=!1){const n=this.colorMap;r||n.clear(),this.chartsLabelsMap.forEach(((o,a)=>{const{labels:i,ownScheme:s}=o,l=t||s,c=e.getScale(l);i.forEach((e=>{if(!r||!this.colorMap.has(e)){const t=c.getColor(e,a,l);n.set(e,t)}}))})),this.colorMap=n}getColorMap(){return this.colorMap}addSlice(e,t,r,o){const a=this.chartsLabelsMap.get(r)||{labels:[],scheme:void 0,ownScheme:void 0},{labels:i}=a;i.includes(e)||(i.push(e),this.chartsLabelsMap.set(r,{labels:i,scheme:o,ownScheme:a.ownScheme})),this.source===n.Dashboard&&this.colorMap.set(e,t)}setOwnColorScheme(e,t){const r=this.chartsLabelsMap.get(e);r&&this.chartsLabelsMap.set(e,{...r,ownScheme:t})}removeSlice(e){if(this.source!==n.Dashboard)return;this.chartsLabelsMap.delete(e);const t=new Map;this.chartsLabelsMap.forEach((e=>{const{labels:r}=e;r.forEach((e=>{t.set(e,this.colorMap.get(e))}))})),this.colorMap=t}clear(){this.colorMap.clear()}reset(){this.clear(),this.chartsLabelsMap.clear()}}const i=(0,o.A)(a)},14503:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DEFAULT_NAMESPACE:()=>d,default:()=>l,getColor:()=>h,getNamespace:()=>u,getScale:()=>p});var n=r(88055),o=r.n(n),a=r(64514),i=r(96548),s=r(99467);class l{constructor(e){this.name=void 0,this.forcedItems=void 0,this.scales=void 0,this.name=e,this.scales={},this.forcedItems={}}getScale(e){var t,r;const n=null!=(t=null!=e?e:(0,i.A)().getDefaultKey())?t:"",o=(0,i.A)().get(n);return new a.A(null!=(r=null==o?void 0:o.colors)?r:[],this.forcedItems,e)}setColor(e,t){return this.forcedItems[(0,s.A)(e)]=t,this}resetColors(){this.forcedItems={}}resetColorsForLabels(e=[]){const t=o()(this.forcedItems);e.forEach((e=>{t.hasOwnProperty(e)&&delete t[e]})),this.forcedItems={...t}}}const c={},d="GLOBAL";function u(e=d){const t=c[e];if(t)return t;const r=new l(e);return c[e]=r,r}function h(e,t,r){return u(r).getScale(t).getColor(e)}function p(e,t){return u(t).getScale(e)}},15830:(e,t,r)=>{"use strict";r.d(t,{MB:()=>y,_i:()=>v,kl:()=>b,ug:()=>_});var n=r(8209),o=r.n(n),a=r(89899),i=r.n(a),s=r(89143),l=r.n(s),c=r(62193),d=r.n(c),u=r(65091),h=r(29624),p=r(1367);let m={},f={},g={};function _(){return m}function y(e,t){if(!(e in f)){const r=Object.entries(t||m).filter((([,{scope:t}])=>t.includes(e)));f[e]=i()(o()((([e])=>(0,u.w)(e).column)),l()((([,{values:e}])=>e)))(r)}return f[e]}function v({filterScope:e}){function t(e=[],r={},n=[]){r&&(r.type===h.oT&&r.meta&&r.meta.chartId&&!n.includes(r.meta.chartId)?e.push(r.meta.chartId):r.children&&r.children.forEach((r=>t(e,g[r],n))))}const r=[],{scope:n,immune:o}=e||p.FC;return n.forEach((e=>t(r,g[e],o))),r}function b({dashboardFilters:e={},components:t={}}){d()(t)||(g=t),f={},m=Object.values(e).reduce(((e,t)=>{const{chartId:r,columns:n,scopes:o}=t,a={};return Object.keys(n).forEach((e=>{if(Array.isArray(n[e])?n[e].length:void 0!==n[e]){const t=v({filterScope:o[e]}).filter((e=>r!==e));a[(0,u.s)({chartId:r,column:e})]={values:n[e],scope:t}}})),{...e,...a}}),{})}},16042:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(75574);function o({currentComponent:e,layout:t={}}){if(e&&t)if(t[e.id]){const r=Array.isArray(e.parents)?e.parents.slice():[];r.push(e.id),Array.isArray(e.children)&&e.children.forEach((e=>{t[e]?(t[e]={...t[e],parents:r},o({currentComponent:t[e],layout:t})):n.A.warn(`The current layout does not contain a component with the id: ${e}.  Skipping this component`)}))}else n.A.warn(`The current layout does not contain a component with the id: ${null==e?void 0:e.id}.  Skipping this component`)}},16751:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(58180);function o(e){const{subject:t}=e;if((0,n.TI)(e)){const{operator:r}=e;return{col:t,op:r}}if((0,n.bo)(e)){const{operator:r}=e;return{col:t,op:r,val:e.comparator}}const{operator:r}=e;return{col:t,op:r,val:e.comparator}}},17658:(e,t,r)=>{"use strict";var n;r.d(t,{A:()=>o,g:()=>n}),function(e){e.Aggregate="aggregate",e.Raw="raw"}(n||(n={}));const o={}},18009:(e,t,r)=>{"use strict";r.d(t,{Kn:()=>E,un:()=>v,XI:()=>x,QS:()=>S,Ay:()=>N});var n=r(2445),o=r(96540),a=r(58746),i=r(50290),s=r(74098),l=r(75574),c=r(92998);const d=(e,t,r)=>{let n=!1;const o=t-e;return o>0&&o<=r&&(n=!0),n};class u{constructor(e,t,r){this.tableRef=void 0,this.columnRef=void 0,this.setDerivedColumns=void 0,this.isDragging=void 0,this.resizable=void 0,this.reorderable=void 0,this.derivedColumns=void 0,this.RESIZE_INDICATOR_THRESHOLD=void 0,this.clearListeners=()=>{document.removeEventListener("mouseup",this.handleMouseup),this.initializeResizableColumns(!1,this.tableRef),this.initializeDragDropColumns(!1,this.tableRef)},this.setTableRef=e=>{this.tableRef=e},this.getColumnIndex=()=>{var e;let t=-1;const r=null==(e=this.columnRef)?void 0:e.parentNode;return r&&(t=Array.prototype.indexOf.call(r.children,this.columnRef)),t},this.handleColumnDragStart=e=>{var t;const r=null==e?void 0:e.currentTarget;r&&(this.columnRef=r),this.isDragging=!0;const n=this.getColumnIndex(),o={index:n,columnData:this.derivedColumns[n]};null==e||null==(t=e.dataTransfer)||t.setData(v,JSON.stringify(o))},this.handleDragDrop=e=>{var t;if(null==(t=e.dataTransfer)||null==t.getData?void 0:t.getData(v)){var r;e.preventDefault();const t=null==(r=e.currentTarget)?void 0:r.parentNode,n=Array.prototype.indexOf.call(t.children,e.currentTarget),o=this.getColumnIndex(),a=[...this.derivedColumns],i=a.slice(o,o+1);a.splice(o,1),a.splice(n,0,i[0]),this.derivedColumns=[...a],this.setDerivedColumns(a)}},this.allowDrop=e=>{e.preventDefault()},this.handleMouseDown=e=>{const t=null==e?void 0:e.currentTarget;t&&(this.columnRef=t,e&&d(e.offsetX,t.offsetWidth,this.RESIZE_INDICATOR_THRESHOLD)?(t.mouseDown=!0,t.oldX=e.x,t.oldWidth=t.offsetWidth,t.draggable=!1):this.reorderable&&(t.draggable=!0))},this.handleMouseMove=e=>{if(!0===this.resizable&&!this.isDragging){const t=e.currentTarget;e&&d(e.offsetX,t.offsetWidth,this.RESIZE_INDICATOR_THRESHOLD)?t.style.cursor="col-resize":t.style.cursor="default";const r=this.columnRef;if(null!=r&&r.mouseDown){let t=r.oldWidth;const n=e.x-r.oldX;r.oldWidth+(e.x-r.oldX)>0&&(t=r.oldWidth+n);const o=this.getColumnIndex();if(!Number.isNaN(o)){const e={...this.derivedColumns[o]};e.width=t,this.derivedColumns[o]=e,this.setDerivedColumns([...this.derivedColumns])}}}},this.handleMouseup=()=>{this.columnRef&&(this.columnRef.mouseDown=!1,this.columnRef.style.cursor="default",this.columnRef.draggable=!1),this.isDragging=!1},this.initializeResizableColumns=(e=!1,t)=>{var r;this.tableRef=t;const n=null==(r=this.tableRef)||null==(r=r.rows)?void 0:r[0];if(n){const{cells:t}=n,r=t.length;for(let n=0;n<r;n+=1){const r=t[n];!0===e?(this.resizable=!0,r.addEventListener("mousedown",this.handleMouseDown),r.addEventListener("mousemove",this.handleMouseMove,!0)):(this.resizable=!1,r.removeEventListener("mousedown",this.handleMouseDown),r.removeEventListener("mousemove",this.handleMouseMove,!0))}}},this.initializeDragDropColumns=(e=!1,t)=>{var r;this.tableRef=t;const n=null==(r=this.tableRef)||null==(r=r.rows)?void 0:r[0];if(n){const{cells:t}=n,r=t.length;for(let n=0;n<r;n+=1){const r=t[n];!0===e?(this.reorderable=!0,r.addEventListener("mousedown",this.handleMouseDown),r.addEventListener("dragover",this.allowDrop),r.addEventListener("dragstart",this.handleColumnDragStart),r.addEventListener("drop",this.handleDragDrop)):(this.reorderable=!1,r.draggable=!1,r.removeEventListener("mousedown",this.handleMouseDown),r.removeEventListener("dragover",this.allowDrop),r.removeEventListener("dragstart",this.handleColumnDragStart),r.removeEventListener("drop",this.handleDragDrop))}}},this.setDerivedColumns=r,this.tableRef=e,this.isDragging=!1,this.RESIZE_INDICATOR_THRESHOLD=8,this.resizable=!1,this.reorderable=!1,this.derivedColumns=[...t],document.addEventListener("mouseup",this.handleMouseup)}}var h=r(46942),p=r.n(h),m=r(98250),f=r(5373),g=r(7566);const _=(0,i.I4)("div")((({theme:e,height:t})=>`\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-left: ${2*e.sizeUnit}px;\n  padding-right: ${e.sizeUnit}px;\n  border-bottom: 1px solid ${e.colorSplit};\n  transition: background 0.3s;\n  line-height: ${t}px;\n  box-sizing: border-box;\n`)),y=(0,i.I4)(a.A)((({theme:e})=>`\n    th.ant-table-cell {\n      font-weight: ${e.fontWeightStrong};\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    .ant-spin-nested-loading .ant-spin .ant-spin-dot {\n      width: ${12*e.sizeUnit}px;\n      height: unset;\n    }\n`)),v="superset/table-column";var b,E,S;!function(e){e.Disabled="disabled",e.Single="single",e.Multi="multi"}(b||(b={})),function(e){e.Paginate="paginate",e.Sort="sort",e.Filter="filter"}(E||(E={})),function(e){e.Small="small",e.Middle="middle",e.Large="large"}(S||(S={}));const T=[],A=40,C=68,w=(0,i.I4)(a.A)((({theme:e,height:t})=>`\n    color: ${e.colorText};\n    .ant-table-body {\n      overflow: auto;\n      height: ${t?`${t}px`:void 0};\n\n      /* Chrome/Safari/Edge webkit scrollbar styling */\n      &::-webkit-scrollbar {\n        width: 8px;\n        height: 8px;\n      }\n\n      &::-webkit-scrollbar-track {\n        background: ${e.colorFillQuaternary};\n      }\n\n      &::-webkit-scrollbar-thumb {\n        background: ${e.colorFillSecondary};\n        border-radius: ${e.borderRadiusSM}px;\n\n        &:hover {\n          background: ${e.colorFillTertiary};\n        }\n      }\n\n      &::-webkit-scrollbar-corner {\n        background: ${e.colorFillQuaternary};\n      }\n\n      /* Firefox scrollbar styling */\n      scrollbar-width: thin;\n      scrollbar-color: ${e.colorFillSecondary} ${e.colorFillQuaternary};\n    }\n\n    .ant-spin-nested-loading .ant-spin .ant-spin-dot {\n      width: ${e.sizeXXL}px;\n      height: unset;\n    }\n\n   td.ant-table-cell {\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    td.ant-table-cell.no-ellipsis {\n      text-overflow: unset;\n    }\n\n    .ant-table-tbody > tr > td {\n      white-space: nowrap;\n      overflow: hidden;\n    }\n\n    .ant-table.ant-table-small {\n      font-size: ${e.fontSizeSM}px;\n    }\n  `)),R=(0,i.I4)((e=>{var t;const{columns:r,pagination:a,onChange:s,height:l,scroll:c,size:d,allowHTML:u=!1}=e,[h,v]=(0,o.useState)(0),b=(0,o.useCallback)((e=>{v(e)}),[]),{ref:T}=(0,m.uZ)({onResize:b}),A=(0,i.DP)(),C=37*(null==A?void 0:A.sizeUnit)||150,w=r.filter((({width:e})=>!e)).length;let R=0;null==r||r.forEach((e=>{e.width&&(R+=e.width)}));let I=0;const O=Math.max(Math.floor((h-R)/w),50),D=null!=(t=null==r||null==r.map?void 0:r.map((e=>{const t={...e};return e.width||(t.width=O),I+=t.width,t})))?t:[];if(I<h){const e=D[D.length-1];e.width=e.width+Math.floor(h-I)}const x=(0,o.useRef)(),[N]=(0,o.useState)((()=>{const e={};return Object.defineProperty(e,"scrollLeft",{get:()=>{var e;return x.current?null==(e=x.current)||null==(e=e.state)?void 0:e.scrollLeft:0},set:e=>{x.current&&x.current.scrollTo({scrollLeft:e})}}),e})),L=()=>{var e;null==(e=x.current)||e.resetAfterIndices({columnIndex:0,shouldForceUpdate:!0})};(0,o.useEffect)((()=>L),[h,r,d]);const P={...a,onChange:(e,t)=>{var r;null==(r=x.current)||null==r.scrollTo||r.scrollTo({scrollTop:0}),null==s||s({...a,current:e,pageSize:t},{},{},{action:E.Paginate,currentDataSource:[]})}};return(0,n.Y)("div",{ref:T,children:(0,n.Y)(y,{...e,sticky:!1,className:"virtual-table",components:{body:(e,{ref:t,onScroll:r})=>{t.current=N;const o=d===S.Middle?47:39;return(0,n.Y)(f.cB,{ref:x,className:"virtual-grid",columnCount:D.length,columnWidth:e=>{const{width:t=C}=D[e];return t},height:l||c.y,rowCount:e.length,rowHeight:()=>o,width:h,onScroll:({scrollLeft:e})=>{r({scrollLeft:e})},children:({columnIndex:t,rowIndex:r,style:a})=>{var i,s;const l=null==e?void 0:e[r];let c=null==l?void 0:l[null==D||null==(i=D[t])?void 0:i.dataIndex];const d=null==(s=D[t])?void 0:s.render;return"function"==typeof d&&(c=d(c,l,r)),u&&"string"==typeof c&&(c=(0,g.nn)(c)),(0,n.Y)(_,{className:p()("virtual-table-cell",{"virtual-table-cell-last":t===D.length-1}),style:a,title:"string"==typeof c?c:void 0,theme:A,height:o,children:c})}})}},pagination:!!a&&P,scroll:c,columns:D})})}))((({theme:e})=>`\n  .virtual-table .ant-table-container:before,\n  .virtual-table .ant-table-container:after {\n    display: none;\n  }\n  .virtual-table-cell {\n    box-sizing: border-box;\n    padding: ${4*e.sizeUnit}px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n`)),I={filterTitle:(0,s.t)("Filter menu"),filterConfirm:(0,s.t)("OK"),filterReset:(0,s.t)("Reset"),filterEmptyText:(0,s.t)("No filters"),filterCheckall:(0,s.t)("Select all items"),filterSearchPlaceholder:(0,s.t)("Search in filters"),emptyText:(0,s.t)("No data"),selectAll:(0,s.t)("Select current page"),selectInvert:(0,s.t)("Invert current page"),selectNone:(0,s.t)("Clear all data"),selectionAll:(0,s.t)("Select all data"),sortTitle:(0,s.t)("Sort"),expand:(0,s.t)("Expand row"),collapse:(0,s.t)("Collapse row"),triggerDesc:(0,s.t)("Click to sort descending"),triggerAsc:(0,s.t)("Click to sort ascending"),cancelSort:(0,s.t)("Click to cancel sorting")},O={[b.Multi]:"checkbox",[b.Single]:"radio",[b.Disabled]:null},D=()=>{};function x(e){const{data:t,bordered:r,columns:a,selectedRows:s=T,handleRowSelection:d,size:h=S.Small,selectionType:p=b.Disabled,sticky:m=!0,loading:f=!1,resizable:g=!1,reorderable:_=!1,usePagination:y=!0,defaultPageSize:v=15,pageSizeOptions:E=["5","15","25","50","100"],hideData:x=!1,locale:N,height:L,virtualize:P=!1,onChange:F=D,recordCount:M,onRow:k,allowHTML:q=!1,childrenColumnName:z,...U}=e,Y=(0,o.useRef)(null),[$,B]=(0,o.useState)(a),[H,j]=(0,o.useState)(v),[Q,V]=(0,o.useState)({...I}),[G,W]=(0,o.useState)(s),K=(0,o.useRef)(null),X=O[p],J={type:O[p],selectedRowKeys:G,onChange:e=>{W(e),null==d||d(e)}};(0,o.useEffect)((()=>{!0===_&&l.A.warn('EXPERIMENTAL FEATURE ENABLED: The "reorderable" prop of Table is experimental and NOT recommended for use in production deployments.'),!0===g&&l.A.warn('EXPERIMENTAL FEATURE ENABLED: The "resizable" prop of Table is experimental and NOT recommended for use in production deployments.')}),[_,g]),(0,o.useEffect)((()=>{let e;e=N?{...I,...N}:{...I},V(e)}),[N]),(0,o.useEffect)((()=>B(a)),[a]),(0,o.useEffect)((()=>{var e,t;K.current&&(null==(t=K.current)||t.clearListeners());const r=null==(e=Y.current)?void 0:e.getElementsByTagName("table")[0];var n,o;r&&(K.current=new u(r,$,B),_&&(null==K||null==(n=K.current)||n.initializeDragDropColumns(_,r)),g&&(null==K||null==(o=K.current)||o.initializeResizableColumns(g,r)));return()=>{var e;null==K||null==(e=K.current)||null==e.clearListeners||e.clearListeners()}}),[Y,_,g,P,K]);const Z=(0,i.DP)(),ee=!!y&&{hideOnSinglePage:!0,pageSize:H,pageSizeOptions:E,onShowSizeChange:(e,t)=>j(t)};ee&&M&&(ee.total=M);let te=L;te&&(te-=C,y&&M&&M>H&&(te-=A));const re={loading:{spinning:null!=f&&f,indicator:(0,n.Y)(c.R,{})},hasData:!x&&t,columns:$,dataSource:x?void 0:t,size:h,pagination:ee,locale:Q,showSorterTooltip:!1,onChange:F,onRow:k,theme:Z,height:te,bordered:r,expandable:{childrenColumnName:z}};return(0,n.FD)("div",{ref:Y,children:[!P&&(0,n.Y)(w,{...re,rowSelection:null!==X?J:void 0,sticky:m,...U}),P&&(0,n.Y)(R,{...re,scroll:{y:300,x:"100vw"},allowHTML:q,...U})]})}const N=x},18749:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(35625),o=r(39892);class a extends n.A{constructor(){super({name:"ChartMetadata",overwritePolicy:n.m.Warn})}}const i=(0,o.A)(a)},19187:(e,t,r)=>{"use strict";r.d(t,{B:()=>s});var n=r(50290),o=r(17437),a=r(42652);const i=(0,n.I4)(a.A.Item)`
  && {
    ${({compact:e,theme:t})=>e&&o.AH`
        padding: ${t.sizeUnit/2}px ${3*t.sizeUnit}px
          ${t.sizeUnit/2}px ${t.sizeUnit}px;
      `}
    ${({theme:e})=>o.AH`
      && a {
        color: ${e.colorLink};
        &:hover {
          color: ${e.colorLinkHover};
        }
      }
    `}
  }
`;i.Meta=a.A.Item.Meta;const s=Object.assign(a.A,{Item:i})},19593:e=>{const t=[null];e.exports=t.length<=1?t[0]:t},19835:(e,t,r)=>{"use strict";r.d(t,{OM:()=>l,Od:()=>u,R4:()=>p,S9:()=>f,TH:()=>m,X6:()=>y,Xf:()=>c,Y$:()=>h,cd:()=>v,dO:()=>d,oB:()=>E,ow:()=>g,tX:()=>b,zE:()=>_});var n=r(88055),o=r.n(n),a=r(10992),i=r(35352),s=r(68617);const l="SET_NATIVE_FILTERS_CONFIG_COMPLETE",c="SET_IN_SCOPE_STATUS_OF_FILTERS",d=e=>async(t,r)=>{var n;if((e=>Object.values(e).every((e=>Array.isArray(e)&&!e.length)))(e))return;const{id:o}=r().dashboardInfo,c=null==(n=r().nativeFilters)?void 0:n.filters;t({type:"SET_NATIVE_FILTERS_CONFIG_BEGIN",filterChanges:e});const d=(0,a.A)({method:"PUT",endpoint:`/api/v1/dashboard/${o}/filters`});try{const r=await d(e);t((0,s.n7)(r.result)),t({type:l,filterChanges:r.result}),t((0,i.Gb)(e,c))}catch(r){t({type:"SET_NATIVE_FILTERS_CONFIG_FAIL",filterConfig:e})}},u=e=>async(t,r)=>{var n;const a=null==(n=r().nativeFilters)?void 0:n.filters,i=e.map((e=>({...a[e.filterId],chartsInScope:e.chartsInScope,tabsInScope:e.tabsInScope})));t({type:c,filterConfig:i});const l=o()(r().dashboardInfo.metadata),d=(l.native_filter_configuration||[]).map((e=>{const t=i.find((t=>t.id===e.id));return t?{...t,...e}:e}));l.native_filter_configuration=d,t((0,s.PD)({metadata:l}))},h="SET_FOCUSED_NATIVE_FILTER",p="UNSET_FOCUSED_NATIVE_FILTER";function m(e){return{type:h,id:e}}function f(){return{type:p}}const g="SET_HOVERED_NATIVE_FILTER",_="UNSET_HOVERED_NATIVE_FILTER";function y(e){return{type:g,id:e}}function v(){return{type:_}}const b="UPDATE_CASCADE_PARENT_IDS";function E(e,t){return{type:b,id:e,parentIds:t}}},20259:(e,t,r)=>{"use strict";function n(e){return e.map((e=>Array.isArray(e)?e:[e,e.toString()]))}function o(e,t,r=1){const n=[];for(let o=e;o<=t;o+=r)n.push([o,o.toString()]);return n}r.d(t,{i:()=>o,u:()=>n})},20668:(e,t,r)=>{"use strict";r.d(t,{Q:()=>a});var n=r(2445),o=r(20867);const a=({children:e,...t})=>(0,n.Y)(o.Ay,{...t,children:e})},22750:(e,t,r)=>{"use strict";r.d(t,{s:()=>i});var n=r(2445),o=r(51643),a=r(28392);const i=Object.assign(o.Ay,{GroupWrapper:({spaceConfig:e,options:t,...r})=>{const i=t.map((e=>(0,n.Y)(o.Ay,{value:e.value,children:e.label},e.value)));return(0,n.Y)(o.Ay.Group,{...r,children:e?(0,n.Y)(a.A,{...e,children:i}):i})},Button:o.Ay.Button})},23195:(e,t,r)=>{"use strict";r.d(t,{l:()=>a});var n=r(2445);const o=r(50290).I4.label`
  ${({required:e,theme:t})=>e&&`\n      &::after {\n        display: inline-block;\n        margin-left: ${t.sizeUnit}px;\n        color: ${t.colorError};\n        font-size: ${t.fontSize}px;\n        content: '*';\n      }\n    `}
`;function a({children:e,htmlFor:t,required:r=!1,className:a}){return(0,n.Y)(o,{htmlFor:t,className:a,required:r,children:e})}},23575:(e,t,r)=>{"use strict";r.d(t,{Y:()=>o});var n=r(74098);const o={FAST_DEBOUNCE:250,SLOW_DEBOUNCE:500,NULL_DISPLAY:(0,n.t)("N/A"),BOOL_TRUE_DISPLAY:(0,n.t)("True"),BOOL_FALSE_DISPLAY:(0,n.t)("False")}},23576:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(2445),o=r(28073);const a=e=>(0,n.Y)(o.A,{...e})},25145:(e,t,r)=>{"use strict";r.d(t,{ne:()=>v});var n=r(96548),o=r(96469),a=r(74098),i=r(88396),s=r(14125),l=r(28674),c=r(49239),d=r(47980),u=r(2445);const h=(0,n.A)(),p=(0,o.A)(),m=[["SMART_NUMBER",(0,a.t)("Adaptive formatting")],["~g",(0,a.t)("Original value")],[",d",",d (12345.432 => 12,345)"],[".1s",".1s (12345.432 => 10k)"],[".3s",".3s (12345.432 => 12.3k)"],[",.1%",",.1% (12345.432 => 1,234,543.2%)"],[".3%",".3% (12345.432 => 1234543.200%)"],[".4r",".4r (12345.432 => 12350)"],[",.3f",",.3f (12345.432 => 12,345.432)"],["+,","+, (12345.432 => +12,345.432)"],["$,.2f","$,.2f (12345.432 => $12,345.43)"],["DURATION",(0,a.t)("Duration in ms (66000 => 1m 6s)")],["DURATION_SUB",(0,a.t)("Duration in ms (100.40008 => 100ms 400µs 80ns)")]],f=((0,a.t)("Adaptive formatting"),{verbose_name:"Time",column_name:"__timestamp",description:(0,a.t)("A reference to the [Time] configuration, taking granularity into account")}),g={type:"SelectControl",multi:!0,freeForm:!0,label:(0,a.t)("Dimensions"),default:[],includeTime:!1,description:(0,a.t)("One or many columns to group by. High cardinality groupings should include a series limit to limit the number of fetched and rendered series."),optionRenderer:e=>(0,u.Y)(d.V,{column:e,showType:!0}),valueKey:"column_name",filterOption:({data:e},t)=>e.column_name&&e.column_name.toLowerCase().indexOf(t.toLowerCase())>=0||e.verbose_name&&e.verbose_name.toLowerCase().indexOf(t.toLowerCase())>=0,mapStateToProps:(e,t)=>{const r={};return e.datasource&&(r.options=e.datasource.columns.filter((e=>e.groupby)),t&&t.includeTime&&r.options.push(f)),r}},_={type:"MetricsControl",multi:!0,label:(0,a.t)("Metrics"),validators:[i.A],mapStateToProps:e=>{const{datasource:t}=e;return{columns:t?t.columns:[],savedMetrics:t?t.metrics:[],datasource:t}},description:(0,a.t)("One or many metrics to display")},y={..._,multi:!1,label:(0,a.t)("Metric"),description:(0,a.t)("Metric")},v={metrics:_,metric:y,datasource:{type:"DatasourceControl",label:(0,a.t)("Dataset"),default:null,description:null,mapStateToProps:({datasource:e})=>({datasource:e,isEditable:!!e})},viz_type:{type:"VizTypeControl",default:"table",description:(0,a.t)("The type of visualization to display")},color_picker:{label:(0,a.t)("Fixed color"),description:(0,a.t)("Use this to define a static color for all circles"),type:"ColorPickerControl",default:{r:0,g:122,b:135,a:1},renderTrigger:!0},metric_2:{...y,label:(0,a.t)("Right axis metric"),clearable:!0,description:(0,a.t)("Choose a metric for right axis")},linear_color_scheme:{type:"ColorSchemeControl",label:(0,a.t)("Linear color scheme"),choices:()=>p.values().map((e=>[e.id,e.label])),default:p.getDefaultKey(),clearable:!1,description:"",renderTrigger:!0,schemes:()=>p.getMap(),isLinear:!0},secondary_metric:{...y,label:(0,a.t)("Color metric"),default:null,validators:[],description:(0,a.t)("A metric to use for color")},groupby:g,columns:{...g,label:(0,a.t)("Columns"),description:(0,a.t)("One or many controls to pivot as columns")},granularity:{type:"SelectControl",freeForm:!0,label:c.Fp.granularity,default:"P1D",choices:[[null,(0,a.t)("all")],["PT5S",(0,a.t)("5 seconds")],["PT30S",(0,a.t)("30 seconds")],["PT1M",(0,a.t)("1 minute")],["PT5M",(0,a.t)("5 minutes")],["PT30M",(0,a.t)("30 minutes")],["PT1H",(0,a.t)("1 hour")],["PT6H",(0,a.t)("6 hour")],["P1D",(0,a.t)("1 day")],["P7D",(0,a.t)("7 days")],["P1W",(0,a.t)("week")],["week_starting_sunday",(0,a.t)("week starting Sunday")],["week_ending_saturday",(0,a.t)("week ending Saturday")],["P1M",(0,a.t)("month")],["P3M",(0,a.t)("quarter")],["P1Y",(0,a.t)("year")]],description:(0,a.t)("The time granularity for the visualization. Note that you can type and use simple natural language as in `10 seconds`,`1 day` or `56 weeks`")},granularity_sqla:{type:"SelectControl",label:c.Fp.granularity_sqla,description:(0,a.t)("The time column for the visualization. Note that you can define arbitrary expression that return a DATETIME column in the table. Also note that the filter below is applied against this column or expression"),clearable:!1,optionRenderer:e=>(0,u.Y)(d.V,{column:e,showType:!0}),valueKey:"column_name",mapStateToProps:e=>{const t={};return e.datasource&&(t.choices=e.datasource.granularity_sqla,t.default=null,e.datasource.main_dttm_col?t.default=e.datasource.main_dttm_col:t.choices&&t.choices.length>0&&(t.default=t.choices[0].column_name)),t}},time_grain_sqla:{type:"SelectControl",label:c.Fp.time_grain_sqla,default:"P1D",description:(0,a.t)("The time granularity for the visualization. This applies a date transformation to alter your time column and defines a new time granularity. The options here are defined on a per database engine basis in the Superset source code."),mapStateToProps:e=>({choices:e.datasource?e.datasource.time_grain_sqla:null})},time_range:{type:"DateFilterControl",freeForm:!0,label:c.Fp.time_range,default:(0,a.t)("No filter"),description:(0,a.t)('The time range for the visualization. All relative times, e.g. "Last month", "Last 7 days", "now", etc. are evaluated on the server using the server\'s local time (sans timezone). All tooltips and placeholder times are expressed in UTC (sans timezone). The timestamps are then evaluated by the database using the engine\'s local timezone. Note one can explicitly set the timezone per the ISO 8601 format if specifying either the start and/or end time.')},row_limit:{type:"SelectControl",freeForm:!0,label:(0,a.t)("Row limit"),validators:[s.A],default:1e4,choices:(0,l.u8)([10,50,100,250,500,1e3,5e3,1e4,5e4]),description:(0,a.t)("Limits the number of rows that get displayed.")},limit:{type:"SelectControl",freeForm:!0,label:(0,a.t)("Series limit"),validators:[s.A],choices:(0,l.u8)([5,10,25,50,100,500]),clearable:!0,description:(0,a.t)("Limits the number of series that get displayed. A joined subquery (or an extra phase where subqueries are not supported) is applied to limit the number of series that get fetched and rendered. This feature is useful when grouping by high cardinality column(s) though does increase the query complexity and cost.")},timeseries_limit_metric:{type:"MetricsControl",label:(0,a.t)("Sort by"),default:null,clearable:!0,description:(0,a.t)("Metric used to define how the top series are sorted if a series or row limit is present. If undefined reverts to the first metric (where appropriate)."),mapStateToProps:e=>({columns:e.datasource?e.datasource.columns:[],savedMetrics:e.datasource?e.datasource.metrics:[],datasource:e.datasource})},series:{...g,label:(0,a.t)("Dimensions"),multi:!1,default:null,description:(0,a.t)("Defines the grouping of entities. Each series is shown as a specific color on the chart and has a legend toggle")},entity:{...g,label:(0,a.t)("Entity"),default:null,multi:!1,validators:[i.A],description:(0,a.t)("This defines the element to be plotted on the chart")},x:{...y,label:(0,a.t)("X Axis"),description:(0,a.t)("Metric assigned to the [X] axis"),default:null},y:{...y,label:(0,a.t)("Y Axis"),default:null,description:(0,a.t)("Metric assigned to the [Y] axis")},size:{...y,label:(0,a.t)("Bubble size"),default:null},y_axis_format:{type:"SelectControl",freeForm:!0,label:(0,a.t)("Y Axis Format"),renderTrigger:!0,default:"SMART_NUMBER",choices:m,description:"D3 format syntax: https://github.com/d3/d3-format",mapStateToProps:e=>{const t=e.controls&&e.controls.comparison_type&&"percentage"===e.controls.comparison_type.value;return{warning:t?(0,a.t)('When `Calculation type` is set to "Percentage change", the Y Axis Format is forced to `.1%`'):null,disabled:t}}},adhoc_filters:{type:"AdhocFilterControl",label:(0,a.t)("Filters"),default:null,description:"",mapStateToProps:e=>({columns:e.datasource?e.datasource.columns.filter((e=>e.filterable)):[],savedMetrics:e.datasource?e.datasource.metrics:[],datasource:e.datasource})},color_scheme:{type:"ColorSchemeControl",label:(0,a.t)("Color scheme"),default:h.getDefaultKey(),renderTrigger:!0,choices:()=>h.keys().map((e=>[e,e])),description:(0,a.t)("The color scheme for rendering chart"),schemes:()=>h.getMap()}}},25451:(e,t,r)=>{"use strict";r.d(t,{A:()=>s,o:()=>i});var n=r(74098),o=r(73204),a=r(48813);const i={slices:{},isLoading:!0,errorMessage:null,lastUpdated:0};function s(e=i,t){const r={[a.n]:()=>({...t.data.sliceEntities}),[o.T1]:()=>({...e,isLoading:!0}),[o.ut]:()=>({...e,isLoading:!1,slices:{...e.slices,...t.payload.slices},lastUpdated:(new Date).getTime()}),[o.$G]:()=>({isLoading:!1,slices:{...t.payload.slices},lastUpdated:(new Date).getTime()}),[o.Lj]:()=>({...e,isLoading:!1,lastUpdated:(new Date).getTime(),errorMessage:t.payload.error||(0,n.t)("Could not fetch all saved charts")})};return t.type in r?r[t.type]():e}},25875:(e,t,r)=>{"use strict";r.r(t),r.d(t,{LOG_EVENT:()=>n,logEvent:()=>o});const n="LOG_EVENT";function o(e,t){return r=>r({type:n,payload:{eventName:e,eventData:t}})}},25936:(e,t,r)=>{"use strict";r.d(t,{S:()=>a});var n=r(2445),o=r(17308);const a=Object.assign((e=>(0,n.Y)(o.A,{...e})),{PRESENTED_IMAGE_SIMPLE:o.A.PRESENTED_IMAGE_SIMPLE,PRESENTED_IMAGE_DEFAULT:o.A.PRESENTED_IMAGE_DEFAULT})},27081:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FETCH_DASHBOARDS_FAILED:()=>g,FETCH_DASHBOARDS_SUCCEEDED:()=>m,SAVE_SLICE_FAILED:()=>b,SAVE_SLICE_SUCCESS:()=>S,SET_SAVE_CHART_MODAL_VISIBILITY:()=>y,createDashboard:()=>I,createSlice:()=>R,fetchDashboardsFailed:()=>_,fetchDashboardsSucceeded:()=>f,getSliceDashboards:()=>O,getSlicePayload:()=>A,saveSliceFailed:()=>E,saveSliceSuccess:()=>T,setSaveChartModalVisibility:()=>v,updateSlice:()=>w});var n=r(62193),o=r.n(n),a=r(58561),i=r.n(a),s=r(41479),l=r(74098),c=r(79378),d=r(91412),u=r(49239),h=r(28674);const p=/^adhoc_filters/,m="FETCH_DASHBOARDS_SUCCEEDED";function f(e){return{type:m,choices:e}}const g="FETCH_DASHBOARDS_FAILED";function _(e){return{type:g,userId:e}}const y="SET_SAVE_CHART_MODAL_VISIBILITY";function v(e){return{type:y,isVisible:e}}const b="SAVE_SLICE_FAILED";function E(){return{type:b}}const S="SAVE_SLICE_SUCCESS";function T(e){return{type:S,data:e}}const A=async(e,t={},r,n,a={})=>{const i=function(e){const t={};return Object.entries(e).forEach((([e,r])=>{p.test(e)&&Array.isArray(r)&&(t[e]=r.filter((e=>!e.isExtra)))})),t}(t);if(!o()(a)&&t.adhoc_filters&&t.adhoc_filters.length>0&&Object.keys(i).forEach((e=>{if(o()(i[e])){const t=a[e];if(Array.isArray(t)){const r=i[e]||[];t.forEach((e=>{e.operator===u.ux.TemporalRange&&r.push({...e,comparator:e.comparator||"No filter"})})),i[e]=r}}})),!(e=>((null==e?void 0:e.adhoc_filters)||[]).some((e=>e.operator===u.ux.TemporalRange)))(i)){const e=Object.keys(t).filter((e=>p.test(e)));null==e||e.forEach((e=>{var r;null==(r=t[e])||r.forEach((t=>{t.operator===u.ux.TemporalRange&&t.isExtra&&(i[e]||(i[e]=[]),i[e].push({...t,comparator:"No filter",isExtra:!1}))}))}))}const l={...t,...i,dashboards:r};let c=0,d=s.cT.Table;if(l.datasource){const[e,t]=l.datasource.split("__");c=parseInt(e,10);const r=t.charAt(0).toUpperCase()+t.slice(1);r in s.cT&&(d=s.cT[r])}return{params:JSON.stringify(l),slice_name:e,viz_type:l.viz_type,datasource_id:c,datasource_type:d,dashboards:r,owners:n,query_context:JSON.stringify(await(0,h.sx)({formData:l,force:!1,resultFormat:"json",resultType:"full",setDataMask:null,ownState:null}))}},C=(e,t,r)=>{const n=[];return e?n.push((0,d.WR)((0,l.t)("Chart [%s] has been saved",t))):n.push((0,d.WR)((0,l.t)("Chart [%s] has been overwritten",t))),r&&(r.new?n.push((0,d.WR)((0,l.t)("Dashboard [%s] just got created and chart [%s] was added to it",r.title,t))):n.push((0,d.WR)((0,l.t)("Chart [%s] was added to dashboard [%s]",t,r.title)))),n},w=(e,t,r,n)=>async(o,a)=>{var i;const{slice_id:s,owners:l,form_data:d}=e,u=null==(i=a().explore)?void 0:i.form_data;try{const e=await c.A.put({endpoint:`/api/v1/chart/${s}`,jsonPayload:await A(t,u,r,l,d)});return o(T(e.json)),C(!1,t,n).map(o),e.json}catch(e){throw o(E()),e}},R=(e,t,r)=>async(n,o)=>{var a;const i=null==(a=o().explore)?void 0:a.form_data;try{const o=await c.A.post({endpoint:"/api/v1/chart/",jsonPayload:await A(e,i,t,[],{})});return n(T(o.json)),C(!0,e,r).map(n),o.json}catch(e){throw n(E()),e}},I=e=>async t=>{try{return(await c.A.post({endpoint:"/api/v1/dashboard/",jsonPayload:{dashboard_title:e}})).json}catch(e){throw t(E()),e}},O=e=>async t=>{try{return(await c.A.get({endpoint:`/api/v1/chart/${e.slice_id}?q=${i().encode({select_columns:["dashboards.id"]})}`})).json.result.dashboards.map((({id:e})=>e))}catch(e){throw t(E()),e}}},27509:(e,t,r)=>{"use strict";r.d(t,{JU:()=>l});var n=r(2445),o=r(56914),a=r(17437),i=r(50290),s=r(54603);function l(e){const t=(0,i.DP)(),{type:r="default",monospace:l=!1,style:c,onClick:d,children:u,icon:h,id:p,...m}=e,f=(0,s.st)(t,r),g=f.active,_=f.border,y=f.bg,v=d?f.bgHover:y,b=d?f.borderHover:_,E=(0,a.AH)("transition:background-color ",t.motionDurationMid,";white-space:nowrap;cursor:",d?"pointer":"default",";overflow:hidden;text-overflow:ellipsis;background-color:",y,";border-radius:8px;border-color:",_,";padding:0.35em 0.8em;line-height:1;color:",g,";display:inline-flex;vertical-align:middle;align-items:center;max-width:100%;&:hover{background-color:",v,";border-color:",b,";opacity:1;}",l?`font-family: ${t.fontFamilyCode};`:"",";","");return(0,n.Y)(o.A,{onClick:d,role:d?"button":void 0,style:c,icon:h,css:E,...m,children:u})}},27724:(e,t,r)=>{var n={"./ballot.svg":[65665,5665],"./big_number_chart_tile.svg":[95055,5055],"./binoculars.svg":[23577,3577],"./category.svg":[61087,1087],"./certified.svg":[75794,5794],"./checkbox_half.svg":[27064,7064],"./checkbox_off.svg":[39594,9594],"./checkbox_on.svg":[51412,1412],"./circle_solid.svg":[65843,5843],"./drag.svg":[17557,7557],"./error_solid_small_red.svg":[16979,6979],"./full.svg":[42192,2192],"./layers.svg":[93425,3425],"./queued.svg":[66656,6656],"./redo.svg":[6479,6479],"./running.svg":[43232,3232],"./sort.svg":[54879,4879],"./sort_asc.svg":[84041,4041],"./sort_desc.svg":[42013,2013],"./square.svg":[59574,9574],"./triangle_down.svg":[13710,3710],"./undo.svg":[31809,1809]};function o(e){if(!r.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return r.e(t[1]).then((()=>r(o)))}o.keys=()=>Object.keys(n),o.id=27724,e.exports=o},28082:(e,t,r)=>{"use strict";r.d(t,{Rm:()=>h,eM:()=>d,ib:()=>c,wX:()=>u});var n=r(44383),o=r.n(n),a=r(37318),i=r(81237);const s=new Set(["version","remoteId","autorun","dbId","height","id","immutableId","latestQueryId","northPercent","queryLimit","schema","selectedText","southPercent","sql","templateParams","name","hideLeftBar"]);function l(e){var t;const{startDttm:r,results:n}=e;return Date.now()-r>i.Ml||((null==(t=JSON.stringify(n))?void 0:t.length)||0)*i.pO/i.wc>i.GJ}function c(e){return e.map((e=>o()(e,["id","name","dbId","schema","dataPreviewQueryId","queryEditorId"]))).filter((({queryEditorId:e})=>Boolean(e)))}function d(e){return Object.keys(e).reduce(((t,r)=>{const{results:n}=e[r],o={...e[r],results:l(e[r])?{}:n};return{...t,[r]:o}}),{})}function u(e){return e.map((e=>Object.keys(e).filter((e=>s.has(e))).reduce(((t,r)=>({...t,[r]:e[r]})),{})))}function h(e,t){t.sqlLab.tables.forEach((({name:t,catalog:r,schema:n,dbId:o,persistData:i})=>{o&&n&&t&&null!=i&&i.columns&&(e(a.z7.upsertQueryData("tableMetadata",{dbId:o,catalog:r,schema:n,table:t},i)),e(a.z7.upsertQueryData("tableExtendedMetadata",{dbId:o,catalog:r,schema:n,table:t},{})))}))}},28674:(e,t,r)=>{"use strict";r.d(t,{Cq:()=>D,Hh:()=>A,Mp:()=>w,RY:()=>O,TL:()=>I,Xe:()=>C,Ze:()=>E,eX:()=>T,kD:()=>y,sv:()=>x,sx:()=>R,u8:()=>L,zJ:()=>N});var n=r(96540),o=r(84193),a=r.n(o),i=r(18749),s=r(94122),l=r(47309),c=r(79378),d=r(90924),u=r(65803),h=r(91518),p=r(93590),m=r(5376),f=r(85923),g=r(49239),_=r(91003);function y(e){var t,r;const{slice:n,form_data:o}=e;return null!=(t=null!=(r=null==n?void 0:n.slice_id)?r:null==o?void 0:o.slice_id)?t:g.sO}let v=0;function b(e=!1){let t=0;return e&&(t=v%u.N.length,v+=1,0===t&&(t+=1,v+=1)),u.N[t]}function E(e,t){return null==e?null:a()(window.location.search).pathname((0,m.A)("/api/v1/chart/data")).search({form_data:(0,h.J)({slice_id:e}),force:t}).toString()}function S(e="base"){return["full","json","csv","query","results","samples"].includes(e)?(0,m.A)("/superset/explore_json/"):(0,m.A)("/explore/")}function T(e,t={},r=!1){const n=new(a())("/"),o=S(e),i=n.search(!0);return Object.keys(t).forEach((e=>{i[e]=t[e]})),e===f.vX.standalone.name&&(r&&(i.force="1"),i.standalone=_.hL.HideNav),n.directory(o).search(i).toString()}function A({path:e,qs:t,allowDomainSharding:r=!1}){let n=new(a())({protocol:window.location.protocol.slice(0,-1),hostname:b(r),port:window.location.port?window.location.port:"",path:(0,m.A)(e)});return t&&(n=n.search(t)),n}function C({formData:e,endpointType:t="base",force:r=!1,curUrl:n=null,requestParams:o={},allowDomainSharding:i=!1,method:s="POST"}){if(!e.datasource)return null;delete e.label_colors;let l=A({path:"/",allowDomainSharding:i});n&&(l=a()(a()(n).search()));const c=S(t),d=l.search(!0),{slice_id:u,extra_filters:p,adhoc_filters:m,viz_type:g}=e;if(u){const e={slice_id:u};"GET"===s&&(e.viz_type=g,p&&p.length&&(e.extra_filters=p),m&&m.length&&(e.adhoc_filters=m)),d.form_data=(0,h.J)(e)}r&&(d.force="true"),"csv"===t&&(d.csv="true"),t===f.vX.standalone.name&&(d.standalone="1"),"query"===t&&(d.query="true"),"results"===t&&(d.results="true"),"samples"===t&&(d.samples="true");const _=Object.keys(o);return _.length&&_.forEach((e=>{o.hasOwnProperty(e)&&(d[e]=o[e])})),l.search(d).directory(c).toString()}const w=e=>{var t,r;const n=(0,i.A)().get(e.viz_type);return[null!=(t=null==n?void 0:n.useLegacyApi)&&t,null!=(r=null==n?void 0:n.parseMethod)?r:"json-bigint"]},R=async({formData:e,force:t,resultFormat:r,resultType:n,setDataMask:o,ownState:a})=>{var i;return(null!=(i=(0,s.A)().get(e.viz_type))?i:e=>(0,l.A)(e,(e=>[{...e}])))({...e,force:t,result_format:r,result_type:n},{ownState:a,hooks:{setDataMask:o}})},I=({resultType:e,resultFormat:t})=>"csv"===t?t:e,O=async({formData:e,resultFormat:t="json",resultType:r="full",force:n=!1,ownState:o={}})=>{let a,i;const[s,l]=w(e);s?(a=C({formData:e,endpointType:I({resultFormat:t,resultType:r}),allowDomainSharding:!1}),i=e):(a=(0,m.A)("/api/v1/chart/data"),i=await R({formData:e,force:n,resultFormat:t,resultType:r,ownState:o,parseMethod:l})),c.A.postForm(a,{form_data:(0,h.J)(i)})},D=(e,t)=>{const r=C({formData:e,endpointType:"base",allowDomainSharding:!1,requestParams:t});c.A.postForm(r,{form_data:(0,h.J)(e)})},x=(e,t,r)=>{const o=(0,n.useCallback)(e,r);(0,n.useEffect)((()=>{const e=setTimeout((()=>{o()}),t);return()=>{clearTimeout(e)}}),[o,t])},N=(e,t,r)=>{var n;const o=[...g.sJ].map((e=>g.nS[e].operation)).indexOf(t)>=0,a=-1===g.Sd.map((e=>g.nS[e].operation)).indexOf(t);let i="object"==typeof e?null!=(n=null==e?void 0:e.column_name)?n:"":null!=e?e:"";if(e&&t){i+=` ${t}`;const e=o&&Array.isArray(r)?r[0]:r,n=(0,d.A)(r),s=void 0!==e&&Number.isNaN(Number(e)),l=s?"'":"",[c,u]=o?["(",")"]:["",""];n.length>0&&a&&(i+=` ${c}${n.map((e=>(0,p.ed)(e))).map((e=>`${l}${s?String(e).replace(/'/g,"''"):e}${l}`)).join(", ")}${u}`)}return i};function L(e){return e.map((e=>[e,e.toString()]))}},28827:(e,t,r)=>{"use strict";r.d(t,{ms:()=>m,LO:()=>h,R2:()=>p});var n,o=r(2445),a=r(96540),i=r(88603),s=r(50290),l=r(8558);!function(e){e.Vertical="vertical",e.Horizontal="horizontal"}(n||(n={}));const c=s.I4.div`
  width: ${({theme:e})=>.75*e.sizeUnit}px;
  height: ${({theme:e})=>.75*e.sizeUnit}px;
  border-radius: 50%;
  background-color: ${({theme:e})=>e.colorFill};

  font-weight: ${({theme:e})=>e.fontWeightNormal};
  display: inline-flex;
  position: relative;

  &:hover {
    background-color: ${({theme:e})=>e.colorPrimary};

    &::before,
    &::after {
      background-color: ${({theme:e})=>e.colorPrimary};
    }
  }

  &::before,
  &::after {
    position: absolute;
    content: ' ';
    width: ${({theme:e})=>.75*e.sizeUnit}px;
    height: ${({theme:e})=>.75*e.sizeUnit}px;
    border-radius: 50%;
    background-color: ${({theme:e})=>e.colorFill};
  }

  &::before {
    top: ${({theme:e})=>e.sizeUnit}px;
  }

  &::after {
    bottom: ${({theme:e})=>e.sizeUnit}px;
  }
`,d=s.I4.div`
  display: flex;
  align-items: center;
  padding: ${({theme:e})=>2*e.sizeUnit}px;
  padding-left: ${({theme:e})=>e.sizeUnit}px;
`,u=(e=n.Vertical)=>e===n.Horizontal?(0,o.Y)(l.F.EllipsisOutlined,{iconSize:"xl"}):(0,o.Y)(c,{}),h=({overlay:e,iconOrientation:t=n.Vertical,...r})=>(0,o.Y)(i.A,{popupRender:()=>e,...r,children:(0,o.Y)(d,{children:u(t)})}),p=e=>{const{children:t,onBlur:r,onKeyDown:n,...s}=e,l=(0,a.cloneElement)(t,{onBlur:r,onKeyDown:n});return(0,o.Y)(i.A,{autoFocus:!0,overlayStyle:e.overlayStyle,...s,children:l})},m=e=>(0,o.Y)(i.A,{autoFocus:!0,...e})},29113:(e,t,r)=>{"use strict";r.d(t,{P:()=>f});var n=r(2445),o=r(50290),a=r(17437),i=r(74098),s=r(7683),l=r(31566),c=r(40183),d=r(35668),u=r(29567),h=r(79404),p=r(82734);const m=o.I4.div`
  ${({theme:e})=>a.AH`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${6*e.sizeUnit}px;
    height: ${6*e.sizeUnit}px;
    margin-right: ${e.sizeUnit}px;

    && svg {
      margin-right: 0;
      margin-left: 0;
      width: 100%;
      height: 100%;
    }
  `};
`;function f({type:e}){let t=(0,n.Y)(l.A,{"aria-label":(0,i.t)("unknown type icon")});return""===e||"expression"===e?t=(0,n.Y)(c.A,{"aria-label":(0,i.t)("function type icon")}):e===s.s.String?t=(0,n.Y)(d.A,{"aria-label":(0,i.t)("string type icon")}):e===s.s.Numeric?t=(0,n.Y)(u.A,{"aria-label":(0,i.t)("numeric type icon")}):e===s.s.Boolean?t=(0,n.Y)(h.A,{"aria-label":(0,i.t)("boolean type icon")}):e===s.s.Temporal&&(t=(0,n.Y)(p.A,{"aria-label":(0,i.t)("temporal type icon")})),(0,n.Y)(m,{children:t})}},29624:(e,t,r)=>{"use strict";r.d(t,{$9:()=>i,Ay:()=>g,B8:()=>m,KR:()=>a,PP:()=>c,QP:()=>o,_8:()=>h,cP:()=>u,n6:()=>l,oT:()=>n,rG:()=>f,tq:()=>s,wc:()=>p,xY:()=>d});const n="CHART",o="COLUMN",a="HEADER",i="GRID",s="ROOT",l="DIVIDER",c="HEADER",d="MARKDOWN",u="NEW_COMPONENT_SOURCE",h="ROW",p="TABS",m="TAB",f="DYNAMIC",g={CHART_TYPE:n,COLUMN_TYPE:o,DASHBOARD_HEADER_TYPE:a,DASHBOARD_GRID_TYPE:i,DASHBOARD_ROOT_TYPE:s,DIVIDER_TYPE:l,HEADER_TYPE:c,MARKDOWN_TYPE:d,NEW_COMPONENT_SOURCE_TYPE:u,ROW_TYPE:h,TABS_TYPE:p,TAB_TYPE:m,DYNAMIC_TYPE:f}},29910:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CREATE_NEW_SLICE:()=>L,FETCH_DATASOURCES_STARTED:()=>p,FETCH_DATASOURCES_SUCCEEDED:()=>f,FETCH_DATASOURCE_SUCCEEDED:()=>u,FETCH_FAVE_STAR:()=>v,POST_DATASOURCE_STARTED:()=>d,SAVE_FAVE_STAR:()=>E,SET_EXPLORE_CONTROLS:()=>C,SET_FIELD_VALUE:()=>T,SET_FORCE_QUERY:()=>k,SET_FORM_DATA:()=>R,SET_SAVE_ACTION:()=>x,SET_STASH_FORM_DATA:()=>z,SLICE_UPDATED:()=>F,START_METADATA_LOADING:()=>Y,STOP_METADATA_LOADING:()=>B,SYNC_DATASOURCE_METADATA:()=>j,TOGGLE_FAVE_STAR:()=>_,UPDATE_CHART_TITLE:()=>O,UPDATE_FORM_DATA_BY_DATASOURCE:()=>l,createNewSlice:()=>P,exploreActions:()=>V,fetchDatasourceSucceeded:()=>h,fetchDatasourcesStarted:()=>m,fetchDatasourcesSucceeded:()=>g,fetchFaveStar:()=>b,saveFaveStar:()=>S,setControlValue:()=>A,setExploreControls:()=>w,setForceQuery:()=>q,setFormData:()=>I,setSaveAction:()=>N,setStashFormData:()=>U,sliceUpdated:()=>M,startMetaDataLoading:()=>$,stopMetaDataLoading:()=>H,syncDatasourceMetadata:()=>Q,toggleFaveStar:()=>y,updateChartTitle:()=>D,updateFormDataByDatasource:()=>c});var n=r(58561),o=r.n(n),a=r(79378),i=r(74098),s=r(91412);const l="UPDATE_FORM_DATA_BY_DATASOURCE";function c(e,t){return{type:l,prevDatasource:e,newDatasource:t}}const d="POST_DATASOURCE_STARTED",u="FETCH_DATASOURCE_SUCCEEDED";function h(){return{type:u}}const p="FETCH_DATASOURCES_STARTED";function m(){return{type:p}}const f="FETCH_DATASOURCES_SUCCEEDED";function g(){return{type:f}}const _="TOGGLE_FAVE_STAR";function y(e){return{type:_,isStarred:e}}const v="FETCH_FAVE_STAR";function b(e){return function(t){a.A.get({endpoint:`/api/v1/chart/favorite_status/?q=${o().encode([e])}`}).then((({json:e})=>{var r;t(y(!(null==e||null==(r=e.result)||null==(r=r[0])||!r.value)))}))}}const E="SAVE_FAVE_STAR";function S(e,t){return function(r){const n=`/api/v1/chart/${e}/favorites/`;(t?a.A.delete({endpoint:n}):a.A.post({endpoint:n})).then((()=>r(y(!t)))).catch((()=>{r((0,s.iB)((0,i.t)("An error occurred while starring this chart")))}))}}const T="SET_FIELD_VALUE";function A(e,t,r){return{type:T,controlName:e,value:t,validationErrors:r}}const C="UPDATE_EXPLORE_CONTROLS";function w(e){return{type:C,formData:e}}const R="UPDATE_FORM_DATA";function I(e){return{type:R,formData:e}}const O="UPDATE_CHART_TITLE";function D(e){return{type:O,sliceName:e}}const x="SET_SAVE_ACTION";function N(e){return{type:x,saveAction:e}}const L="CREATE_NEW_SLICE";function P(e,t,r,n,o){return{type:L,can_add:e,can_download:t,can_overwrite:r,slice:n,form_data:o}}const F="SLICE_UPDATED";function M(e){return{type:F,slice:e}}const k="SET_FORCE_QUERY";function q(e){return{type:k,force:e}}const z="SET_STASH_FORM_DATA";function U(e,t){return{type:z,isHidden:e,fieldNames:t}}const Y="START_METADATA_LOADING";function $(){return{type:Y}}const B="STOP_METADATA_LOADING";function H(){return{type:B}}const j="SYNC_DATASOURCE_METADATA";function Q(e){return{type:j,datasource:e}}const V={...s.h$,fetchDatasourcesStarted:m,fetchDatasourcesSucceeded:g,toggleFaveStar:y,fetchFaveStar:b,saveFaveStar:S,setControlValue:A,setExploreControls:w,setStashFormData:U,updateChartTitle:D,createNewSlice:P,sliceUpdated:M,setForceQuery:q,syncDatasourceMetadata:Q}},30483:(e,t,r)=>{"use strict";r.d(t,{VZ:()=>s,nC:()=>a,p3:()=>n});var n,o=r(79378);function a(e){return{type:n.SetDatasources,datasources:e}}function i(e,t){return{type:n.SetDatasource,key:t,datasource:e}}function s(e){return(t,r)=>{const{datasources:n}=r(),a=n[e];return a?t(i(a,e)):o.A.get({endpoint:`/superset/fetch_datasource_metadata?datasourceKey=${e}`}).then((({json:r})=>t(i(r,e))))}}!function(e){e.SetDatasources="SET_DATASOURCES",e.SetDatasource="SET_DATASOURCE"}(n||(n={}))},30777:(e,t,r)=>{"use strict";r.d(t,{Q1:()=>l,_v:()=>c});var n=r(2445),o=r(96540),a=r(85923),i=r(31296);const s=(0,o.createContext)({hideTitle:!1,hideTab:!1,hideNav:!1,hideChartControls:!1,emitDataMasks:!1,showRowLimitWarning:!1}),l=()=>(0,o.useContext)(s),c=({children:e})=>{const t=(0,i.P3)(a.vX.uiConfig)||0,[r]=(0,o.useState)({hideTitle:!!(1&t),hideTab:!!(2&t),hideNav:!!(4&t),hideChartControls:!!(8&t),emitDataMasks:!!(16&t),showRowLimitWarning:!!(32&t)});return(0,n.Y)(s.Provider,{value:r,children:e})}},31121:(e,t,r)=>{"use strict";r.d(t,{Hu:()=>a,R6:()=>s,md:()=>o,ry:()=>i});var n=r(74098);const o=25,a=[{id:"changed_on_delta_humanized",desc:!0}],i=(0,n.t)('The passwords for the databases below are needed in order to import them together with the datasets. Please note that the "Secure Extra" and "Certificate" sections of the database configuration are not present in export files, and should be added manually after the import if they are needed.'),s=(0,n.t)("You are importing one or more datasets that already exist. Overwriting might cause you to lose some of your work. Are you sure you want to overwrite?")},31296:(e,t,r)=>{"use strict";r.d(t,{Dl:()=>S,JE:()=>E,Kx:()=>y,P3:()=>h,oq:()=>v,ye:()=>g,zJ:()=>T});var n=r(62193),o=r.n(n),a=r(79378),i=r(74842),s=r(58561),l=r.n(s),c=r(85923),d=r(15830),u=r(57135);function h({name:e,type:t}){const r=new URLSearchParams(window.location.search).get(e);switch(t){case"number":return r?"true"===r.toLowerCase()?1:"false"===r.toLowerCase()?0:Number.isNaN(Number(r))?null:Number(r):null;case"object":return r?JSON.parse(r):null;case"boolean":return r?"false"!==r.toLowerCase()&&"0"!==r:null;case"rison":if(!r)return null;try{return l().decode(r)}catch{return r}default:return r}}function p(e){const t=new URLSearchParams;return new URLSearchParams(window.location.search).forEach(((r,n)=>{e.includes(n)||t.append(n,r)})),t}function m(e){const t=[];return e.forEach(((e,r)=>t.push([r,e]))),t}function f(e){const t=e||c.v2,r=p(t),n=(0,d.ug)();return o()(n)||t.includes(c.vX.preselectFilters.name)||r.append(c.vX.preselectFilters.name,JSON.stringify((0,u.A)((0,d.ug)()))),m(r)}function g(e=[]){const t=p([...c.Xs,...e]),r=(0,d.ug)();return o()(r)||t.append(c.vX.preselectFilters.name,JSON.stringify((0,u.A)((0,d.ug)()))),m(t)}function _(e,t){return a.A.post({endpoint:e,jsonPayload:t}).then((e=>e.json.url))}function y(e,t){return _("/api/v1/explore/permalink",{formData:e,urlParams:f(t)})}function v({dashboardId:e,dataMask:t,activeTabs:r,anchor:n}){return _(`/api/v1/dashboard/${e}/permalink`,{urlParams:g(),dataMask:t,activeTabs:r,anchor:n})}const b=/^([^:/?#]+:)?(?:(\/\/)?([^/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/;function E(e){const t=e.match(b)||[];return"string"==typeof t[1]&&t[1].length>0||"//"===t[2]||"string"==typeof t[3]&&t[3].length>0}function S(e){const t=e.match(b)||[];return!E(e)||(0,i.A)(t[1])||e.startsWith("//")?e:`//${e}`}function T(e){const t=[];return Object.keys(e).forEach((r=>{const n=e[r];null!=n&&t.push(`${encodeURIComponent(r)}=${encodeURIComponent(n)}`)})),t.length>0?`?${t.join("&")}`:""}},31463:(e,t,r)=>{"use strict";r.d(t,{DV:()=>s,E_:()=>l,KE:()=>a,Tf:()=>n,WC:()=>o,t1:()=>i,zk:()=>c});const n="__timestamp",o="No filter",a=["relative_start","relative_end","time_grain_sqla"],i=["adhoc_filters","filters","interactive_groupby","interactive_highlight","interactive_drilldown","custom_form_data"],s={granularity:"granularity",granularity_sqla:"granularity",time_column:"time_column",time_grain:"time_grain",time_range:"time_range",time_compare:"time_compare"},l=Object.keys(s),c=[...l,...a]},31780:(e,t,r)=>{"use strict";r.d(t,{Q:()=>i,w:()=>s});var n=r(2445),o=r(96540);const a=(0,o.createContext)(null);function i({children:e,themeController:t}){const[r,i]=(0,o.useState)(t.getTheme()),[s,l]=(0,o.useState)(t.getCurrentMode());(0,o.useEffect)((()=>t.onChange((e=>{i(e),l(t.getCurrentMode())}))),[t]);const c=(0,o.useCallback)((e=>t.setTheme(e)),[t]),d=(0,o.useCallback)((e=>t.setThemeMode(e)),[t]),u=(0,o.useCallback)((()=>t.resetTheme()),[t]),h=(0,o.useCallback)((e=>t.setTemporaryTheme(e)),[t]),p=(0,o.useCallback)((()=>t.clearLocalOverrides()),[t]),m=(0,o.useCallback)((()=>t.getCurrentCrudThemeId()),[t]),f=(0,o.useCallback)((()=>t.hasDevOverride()),[t]),g=(0,o.useCallback)((()=>t.canSetMode()),[t]),_=(0,o.useCallback)((()=>t.canSetTheme()),[t]),y=(0,o.useCallback)((()=>t.canDetectOSPreference()),[t]),v=(0,o.useCallback)((e=>t.createDashboardThemeProvider(e)),[t]),b=(0,o.useMemo)((()=>({theme:r,themeMode:s,setTheme:c,setThemeMode:d,resetTheme:u,setTemporaryTheme:h,clearLocalOverrides:p,getCurrentCrudThemeId:m,hasDevOverride:f,canSetMode:g,canSetTheme:_,canDetectOSPreference:y,createDashboardThemeProvider:v})),[r,s,c,d,u,h,p,m,f,g,_,y,v]);return(0,n.Y)(a.Provider,{value:b,children:(0,n.Y)(r.SupersetThemeProvider,{children:e})})}function s(){const e=(0,o.useContext)(a);if(!e)throw new Error("useThemeContext must be used within a ThemeProvider");return e}},31912:(e,t,r)=>{"use strict";r.d(t,{Eu:()=>s,S7:()=>l});var n=r(7741),o=r(42385),a=r(91156),i=r(25145);function s(e,t){var r;const i={...t},s=i.viz_type||(null==(r=e.common)?void 0:r.conf.DEFAULT_VIZ_TYPE)||n.Y.Table;!function(e){e.y_axis_zero&&(e.y_axis_bounds=[0,null])}(i);const l=(0,a.Tb)(s,e.datasource.type,e,i),c=(0,o.A)().get(s)||{};return c.onInit?c.onInit(l):l}function l(e){const t=e.datasource.split("__")[1],r=e.viz_type,n=(0,a.Tb)(r,t,null,e),o=(0,a.LK)(n),i={};return Object.keys(n).concat(Object.keys(e)).forEach((t=>{void 0===e[t]?i[t]=o[t]:i[t]=e[t]})),i}const c={...i.ne};Object.keys(i.ne).forEach((e=>{c[e].value=i.ne[e].default})),(0,a.LK)(c)},32023:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n,o,a=r(96540);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(null,arguments)}const s=({title:e,titleId:t,...r},s)=>a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:160,height:170,fill:"none",viewBox:"0 0 160 166",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,n||(n=a.createElement("path",{fill:"currentColor",fillOpacity:.25,fillRule:"evenodd",stroke:"currentColor",d:"M123.638 8a.5.5 0 0 0-.5.5V158h28.758V8.5a.5.5 0 0 0-.5-.5zM84.793 40.643a.5.5 0 0 1 .5-.5h27.759a.5.5 0 0 1 .5.5V158H84.793zM46.95 72.285a.5.5 0 0 0-.5.5V158h28.758V72.785a.5.5 0 0 0-.5-.5zM8.604 93.715a.5.5 0 0 0-.5.5V158h28.758V94.215a.5.5 0 0 0-.5-.5z",clipRule:"evenodd"})),o||(o=a.createElement("path",{fill:"currentColor",fillOpacity:.25,stroke:"currentColor",d:"M123.138 158h-.5v.5h.5zm28.758 0v.5h.5v-.5zm-38.344 0v.5h.5v-.5zm-28.759 0h-.5v.5h.5zm-38.344-.001h-.5v.5h.5zm28.758 0v.5h.5v-.5zM8.104 158h-.5v.5h.5zm28.758 0v.5h.5v-.5zM123.639 8.5v-1a1 1 0 0 0-1 1zm0 149.5V8.5h-1V158zm28.258-.5h-28.758v1h28.758zm-.5-149V158h1V8.5zm0 0h1a1 1 0 0 0-1-1zm-27.758 0h27.758v-1h-27.758zM85.293 39.643a1 1 0 0 0-1 1h1zm27.759 0H85.293v1h27.759zm1 1a1 1 0 0 0-1-1v1zm0 117.357V40.643h-1V158zm-29.259.5h28.759v-1H84.793zm-.5-117.857V158h1V40.643zM46.95 72.785v-1a1 1 0 0 0-1 1zm0 85.214V72.785h-1V158zm28.258-.5H46.45v1h28.758zm-.5-84.714V158h1V72.785zm0 0h1a1 1 0 0 0-1-1zm-27.758 0h27.758v-1H46.95zM8.604 94.215v-1a1 1 0 0 0-1 1zm0 63.785V94.215h-1V158zm28.258-.5H8.104v1h28.758zm-.5-63.285V158h1V94.215zm0 0h1a1 1 0 0 0-1-1zm-27.758 0h27.758v-1H8.604z"}))),l=(0,a.forwardRef)(s)},32374:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(93606),o=r(91003),a=r(29624);function i({id:e,components:t}){const r=t[e];if(!r)return 0;let n=0;return(r.children||[]).forEach((e=>{const r=t[e]||{};n+=(r.meta||{}).width||0})),n}function s({id:e,component:t,components:r={}}){const l={width:void 0,occupiedWidth:void 0,minimumWidth:void 0},c=t||r[e];return c?(l.width=(c.meta||{}).width,l.occupiedWidth=l.width,c.type===a._8?(l.width=s({id:(0,n.A)({childId:c.id,layout:r}),components:r}).width||o.cV,l.occupiedWidth=i({id:c.id,components:r}),l.minimumWidth=l.occupiedWidth||o.tK):c.type===a.QP?(l.minimumWidth=o.tK,l.occupiedWidth=0,(c.children||[]).forEach((e=>{r[e].type===a._8&&(l.minimumWidth=Math.max(l.minimumWidth,i({id:e,components:r})))}))):c.type!==a.rG&&c.type!==a.xY&&c.type!==a.oT||(l.minimumWidth=o.tK),l):l}},32655:(e,t,r)=>{"use strict";r.d(t,{x:()=>c});var n=r(2445),o=r(74098),a=r(42566),i=r(82086),s=r(78771);const l=(0,o.t)("Unexpected error");function c({title:e=l,error:t,subtitle:r,link:c,stackTrace:d,source:u,description:h,descriptionDetails:p,fallback:m,compact:f}){if(t){var g;const e=(0,i.U)().get(null!=(g=t.errorType)?g:t.error_type);if(e)return(0,n.Y)(e,{compact:f,error:t,source:u,subtitle:r})}if(m)return(0,n.Y)(n.FK,{children:m});const _=p||(c||d?(0,n.FD)(n.FK,{children:[c&&(0,n.Y)(a.o.Link,{href:c,target:"_blank",rel:"noopener noreferrer",children:(0,o.t)("Request Access")}),(0,n.Y)("br",{}),d&&(0,n.Y)("pre",{children:d})]}):void 0);return(0,n.Y)(s.$,{type:"error",errorType:e,message:r,description:h,descriptionDetails:_,compact:f})}},33700:(e,t,r)=>{"use strict";r.d(t,{v:()=>d});var n=r(2445),o=r(50290),a=r(71519),i=r(56914),s=r(95018),l=r(96540);const c=(0,o.I4)(i.A)`
  ${({theme:e})=>`\n  margin-top: ${e.sizeUnit}px;\n  margin-bottom: ${e.sizeUnit}px;\n  `};
`,d=Object.assign((({name:e,id:t,index:r,onDelete:o,editable:i=!1,onClick:d,toolTipTitle:u=e,children:h,...p})=>{const m=(0,l.useMemo)((()=>e?e.length>20?`${e.slice(0,20)}...`:e:null),[e]),f=d?t?"link":"button":void 0;return(0,n.Y)(n.FK,{children:i?(0,n.Y)(s.m,{title:u,children:(0,n.Y)(c,{closable:i,onClose:()=>void 0!==r?null==o?void 0:o(r):null,closeIcon:i,...p,children:h||m},t)},u):(0,n.Y)(s.m,{title:u,children:(0,n.FD)(c,{onClick:d,role:f,...p,children:[" ",t?(0,n.Y)(a.N_,{to:`/superset/all_entities/?id=${t}`,target:"_blank",rel:"noreferrer",children:h||m}):h||m]},t)},u)})}),{CheckableTag:i.A.CheckableTag})},33842:(e,t,r)=>{"use strict";r.d(t,{A7:()=>A,Eg:()=>h,H7:()=>R,HF:()=>m,I2:()=>w,R2:()=>C,X5:()=>T,XL:()=>p,Y9:()=>v,em:()=>_,fj:()=>S,gG:()=>b,ht:()=>f,jc:()=>y,xX:()=>E,z:()=>I,zz:()=>g});var n=r(2445),o=r(74098),a=r(88396),i=r(1086),s=r(35622),l=r(65471),c=r(87422),d=r(91466);function u(e,t){return t?e.filter((e=>void 0!==e.type_generic&&t.includes(e.type_generic))):e}const h={type:"DndColumnSelect",label:(0,o.t)("Dimensions"),multi:!0,freeForm:!0,clearable:!0,default:[],includeTime:!1,description:(0,o.t)("Dimensions contain qualitative values such as names, dates, or geographical data. Use dimensions to categorize, segment, and reveal the details in your data. Dimensions affect the level of detail in the view."),optionRenderer:e=>(0,n.Y)(l.K,{showType:!0,column:e}),valueRenderer:e=>(0,n.Y)(l.K,{column:e}),valueKey:"column_name",allowAll:!0,filterOption:({data:e},t)=>{var r,n;return(null==(r=e.column_name)?void 0:r.toLowerCase().includes(t.toLowerCase()))||(null==(n=e.verbose_name)?void 0:n.toLowerCase().includes(t.toLowerCase()))||!1},promptTextCreator:e=>e,mapStateToProps(e,t){var r;const n={},{datasource:o}=e;if(null!=o&&null!=(r=o.columns[0])&&r.hasOwnProperty("groupby")){const e=u(o.columns.filter((e=>e.groupby)),null==t?void 0:t.allowedDataTypes);null!=t&&t.includeTime&&e.unshift(s.CE),n.options=e,n.savedMetrics=o.metrics||[]}else{const e=u((null==o?void 0:o.columns)||[],null==t?void 0:t.allowedDataTypes);null!=t&&t.includeTime&&e.unshift(s.aO),n.options=e}return n},commaChoosesOption:!1},p={...h,label:(0,o.t)("Columns"),description:(0,o.t)("Add dataset columns here to group the pivot table columns.")},m={...h,label:(0,o.t)("Dimension"),multi:!1,default:null,description:(0,o.t)("Defines the grouping of entities. Each series is represented by a specific color in the chart.")},f={...h,label:(0,o.t)("Entity"),default:null,multi:!1,validators:[a.A],description:(0,o.t)("This defines the element to be plotted on the chart")},g={type:"DndFilterSelect",label:(0,o.t)("Filters"),default:[],description:"",mapStateToProps:({datasource:e,form_data:t})=>({columns:(0,i.TI)(e)?e.columns.filter((e=>e.filterable)):(null==e?void 0:e.columns)||[],savedMetrics:(0,c._)(e),selectedMetrics:t.metrics||(t.metric?[t.metric]:[]),datasource:e}),provideFormDataToProps:!0,...d.Ck},_={type:"DndMetricSelect",multi:!0,label:(0,o.t)("Metrics"),validators:[a.A],mapStateToProps:({datasource:e})=>({columns:(null==e?void 0:e.columns)||[],savedMetrics:(0,c._)(e),datasource:e,datasourceType:null==e?void 0:e.type}),description:(0,o.t)("Select one or many metrics to display. You can use an aggregation function on a column or write custom SQL to create a metric.")},y={..._,multi:!1,label:(0,o.t)("Metric"),description:(0,o.t)("Select a metric to display. You can use an aggregation function on a column or write custom SQL to create a metric.")},v={...p,label:(0,o.t)("Tooltip (columns)"),description:(0,o.t)("Columns to show in the tooltip.")},b={..._,label:(0,o.t)("Tooltip (metrics)"),description:(0,o.t)("Metrics to show in the tooltip."),validators:[]},E={...y,label:(0,o.t)("Right Axis Metric"),clearable:!0,description:(0,o.t)("Select a metric to display on the right axis")},S={type:"DndMetricSelect",label:(0,o.t)("Sort query by"),default:null,description:(0,o.t)("Orders the query result that generates the source data for this chart. If a series or row limit is reached, this determines what data are truncated. If undefined, defaults to the first metric (where appropriate)."),mapStateToProps:({datasource:e})=>({columns:(null==e?void 0:e.columns)||[],savedMetrics:(0,c._)(e),datasource:e,datasourceType:null==e?void 0:e.type})},T={...y,label:(0,o.t)("Bubble Size"),description:(0,o.t)("Metric used to calculate bubble size"),default:null},A={...y,label:(0,o.t)("X Axis"),description:(0,o.t)("The dataset column/metric that returns the values on your chart's x-axis."),default:null},C={...y,label:(0,o.t)("Y Axis"),description:(0,o.t)("The dataset column/metric that returns the values on your chart's y-axis."),default:null},w={...y,label:(0,o.t)("Color Metric"),default:null,validators:[],description:(0,o.t)("A metric to use for color")},R={...m,...d.eX,label:s.Fp.granularity_sqla,description:(0,o.t)("The time column for the visualization. Note that you can define arbitrary expression that return a DATETIME column in the table. Also note that the filter below is applied against this column or expression"),default:e=>e.default,clearable:!1,canDelete:!1,ghostButtonText:(0,o.t)("Drop a temporal column here or click"),optionRenderer:e=>(0,n.Y)(l.K,{showType:!0,column:e}),valueRenderer:e=>(0,n.Y)(l.K,{column:e}),valueKey:"column_name"},I={...h,...d.BT}},34142:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(1734);function o(e){return(0,n.S_)(e)?e:e.label?e.label:(0,n.IN)(e)?`${e.aggregate}(${e.column.columnName||e.column.column_name})`:e.sqlExpression}},35352:(e,t,r)=>{"use strict";r.d(t,{Ak:()=>o,Gb:()=>i,Mv:()=>s,V9:()=>l,aJ:()=>n,sB:()=>a}),r(45519);const n="CLEAR_DATA_MASK_STATE",o="UPDATE_DATA_MASK",a="SET_DATA_MASK_FOR_FILTER_CHANGES_COMPLETE";function i(e,t){return{type:a,filterChanges:e,filters:t}}function s(e,t){return{type:o,filterId:e,dataMask:t}}function l(){return{type:n}}},35622:(e,t,r)=>{"use strict";r.d(t,{CE:()=>h,FE:()=>v,Fp:()=>d,Io:()=>y,Kd:()=>f,Ow:()=>g,Uz:()=>u,Vt:()=>c,aO:()=>p,cA:()=>m,ov:()=>_,sH:()=>l});var n=r(74098),o=r(31463),a=r(7683),i=r(17658),s=r(1086);const l=1e5,c=5e5,d={time_range:(0,n.t)("Time Range"),granularity_sqla:(0,n.t)("Time Column"),time_grain_sqla:(0,n.t)("Time Grain"),granularity:(0,n.t)("Time Granularity")},u={[o.Tf]:(0,n.t)("Time")},h={verbose_name:u[o.Tf],column_name:o.Tf,type:"TIMESTAMP",type_generic:a.s.Temporal,description:(0,n.t)("A reference to the [Time] configuration, taking granularity into account")},p={column_name:o.Tf,is_dttm:!0,type:"TIMESTAMP",type_generic:a.s.Temporal},m={[i.g.Aggregate]:(0,n.t)("Aggregate"),[i.g.Raw]:(0,n.t)("Raw records")},f={sort_series_type:s.Mb.Sum,sort_series_ascending:!1},g=[[s.Mb.Name,(0,n.t)("Category name")],[s.Mb.Sum,(0,n.t)("Total value")],[s.Mb.Min,(0,n.t)("Minimum value")],[s.Mb.Max,(0,n.t)("Maximum value")],[s.Mb.Avg,(0,n.t)("Average value")]],_={sort_series_type:s.Mb.Name,sort_series_ascending:!0},y=/\d{4}-\d{2}-\d{2}/g,v="Invalid date"},35973:(e,t,r)=>{"use strict";r.d(t,{i:()=>u});var n=r(2445),o=r(23576),a=r(52167),i=r(56679),s=r(50290),l=r(17437),c=r(74098);const d=(0,s.I4)(i.A)`
  ${({theme:e})=>l.AH`
    color: ${e.colorIcon};
    font-size: ${e.fontSizeSM}px;
    & svg {
      margin-left: ${e.sizeUnit}px;
      margin-right: ${e.sizeUnit}px;
    }
  `}
`,u=e=>{const t=(0,s.DP)();return(0,n.Y)(o.A,{content:(0,n.Y)(a.YU,{value:e.sqlExpression,editorProps:{$blockScrolling:!0},setOptions:{highlightActiveLine:!1,highlightGutterLine:!1},minLines:2,maxLines:6,readOnly:!0,wrapEnabled:!0,style:{border:`1px solid ${t.colorBorder}`,maxWidth:100*t.sizeUnit}}),placement:"bottomLeft",arrow:{pointAtCenter:!0},title:(0,c.t)("SQL expression"),...e,children:(0,n.Y)(d,{})})}},36749:(e,t,r)=>{"use strict";r.d(t,{x:()=>s});var n=r(2445),o=r(96540),a=r(92998);function i({width:e,height:t,showLoadingForImport:r=!1,placeholderStyle:o}){return t&&(0,n.Y)("div",{style:{width:e,height:t,...o},children:r&&(0,n.Y)(a.R,{position:"floating"})},"async-asm-placeholder")||null}function s(e,t=i){let r,a;function s(){return r||(r=e instanceof Promise?e:e()),a||r.then((e=>{a=e.default||e})),r}const l=(0,o.forwardRef)((function(e,r){const[i,l]=(0,o.useState)(void 0!==a);(0,o.useEffect)((()=>{let e=!0;return i||s().then((()=>{e&&l(!0)})),()=>{e=!1}}));const c=a||t;return c?(0,n.Y)(c,{ref:c===a?r:null,...e}):null}));return l.preload=s,l}},37203:(e,t,r)=>{"use strict";r.d(t,{As:()=>p,CE:()=>y,OL:()=>_,ZT:()=>f,j2:()=>m,r$:()=>b,sF:()=>v,uI:()=>g});var n=r(29132),o=r.n(n),a=r(90179),i=r.n(a),s=r(42194),l=r.n(s),c=r(2404),d=r.n(c),u=r(43561),h=(r(97211),r(90924));function p(e,t,r){const n={...e[t]},o={...r};return o.id||(o.id=(0,u.Ak)()),n[o.id]=o,{...e,[t]:n}}function m(e,t,r,n){const o={...e[t]};return o[r.id]={...o[r.id],...n},{...e,[t]:o}}function f(e,t,r,n,o="id"){const a=[];return e[t].forEach((e=>{r[o]===e[o]?a.push({...e,...n}):a.push(e)})),{...e,[t]:a}}function g(e,t,r,n="id"){const o=[];return e[t].forEach((e=>{r[n]!==e[n]&&o.push(e)})),{...e,[t]:o}}function _(e,t,r="id"){let n;return e.forEach((e=>{e[r]===t&&(n=e)})),n}function y(e,t,r,n=!1){const o={...r};o.id||(o.id=(0,u.Ak)());const a={};return a[t]=n?[o,...e[t]]:[...e[t],o],{...e,...a}}function v(e,t,r,n=!1){const o=[...r];o.forEach((e=>{e.id||(e.id=(0,u.Ak)())}));const a={};return a[t]=n?[...o,...e[t]]:[...e[t],...o],{...e,...a}}function b(e,t,r={ignoreUndefined:!1,ignoreNull:!1,ignoreFields:[]}){var n;let a=e,s=t;if(r.ignoreUndefined&&(a=l()(a,(e=>void 0===e)),s=l()(s,(e=>void 0===e))),r.ignoreNull&&(a=l()(a,(e=>null===e)),s=l()(s,(e=>null===e))),null!=(n=r.ignoreFields)&&n.length){const e=(0,h.A)(r.ignoreFields);return o()(a,s,((t,r)=>d()((0,h.A)(t).map((t=>i()(t,e))),(0,h.A)(r).map((t=>i()(t,e))))))}return d()(a,s)}},37318:(e,t,r)=>{"use strict";r.d(t,{PG:()=>f,ii:()=>m,rq:()=>p,ty:()=>_,z7:()=>g});var n=r(96540),o=r(66991),a=r(31296),i=r(40115),s=r(95347);const l=i.F.injectEndpoints({endpoints:e=>({tables:e.query({providesTags:["Tables"],query:({dbId:e,catalog:t,schema:r,forceRefresh:n})=>({endpoint:`/api/v1/database/${null!=e?e:"undefined"}/tables/`,urlParams:{force:n,schema_name:r?encodeURIComponent(r):"",...t&&{catalog_name:t}},transformResponse:({json:e})=>({options:e.result,hasMore:e.count>e.result.length})}),serializeQueryArgs:({queryArgs:{dbId:e,schema:t}})=>({dbId:e,schema:t})}),tableMetadata:e.query({providesTags:e=>e?[{type:"TableMetadatas",id:e.name},{type:"TableMetadatas",id:"LIST"}]:[{type:"TableMetadatas",id:"LIST"}],query:({dbId:e,catalog:t,schema:r,table:n})=>({endpoint:`/api/v1/database/${e}/table_metadata/${(0,a.zJ)({name:n,catalog:t,schema:r})}`,transformResponse:({json:e})=>e})}),tableExtendedMetadata:e.query({query:({dbId:e,catalog:t,schema:r,table:n})=>({endpoint:`/api/v1/database/${e}/table_metadata/extra/${(0,a.zJ)({name:n,catalog:t,schema:r})}`,transformResponse:({json:e})=>e}),providesTags:(e,t,{table:r})=>[{type:"TableMetadatas",id:r}]})})}),{useLazyTablesQuery:c,useTablesQuery:d,useLazyTableMetadataQuery:u,useLazyTableExtendedMetadataQuery:h,useTableMetadataQuery:p,useTableExtendedMetadataQuery:m,endpoints:f,util:g}=l;function _(e){const{dbId:t,catalog:r,schema:a,onSuccess:i,onError:l}=e||{},u=(0,n.useRef)(!1),{currentData:h,isFetching:p}=(0,s.Ip)({dbId:t,catalog:r||void 0}),m=(0,n.useMemo)((()=>new Set(null==h?void 0:h.map((({value:e})=>e)))),[h]),f=Boolean(t&&a&&!p&&m.has(a)),g=d({dbId:t,catalog:r,schema:a,forceRefresh:!1},{skip:!f}),[_]=c(),y=(0,o.A)(((e,t)=>{null==i||i(e,t)})),v=(0,o.A)((e=>{null==l||l(e)})),b=(0,n.useCallback)((()=>{f&&_({dbId:t,catalog:r,schema:a,forceRefresh:!0}).then((({isSuccess:e,isError:t,data:r,error:n})=>{e&&r&&y(r,!0),t&&v(n)}))}),[t,r,a,f,y,v,_]);return(0,n.useEffect)((()=>{if(u.current){const{requestId:e,isSuccess:t,isError:r,isFetching:n,currentData:o,error:a,originalArgs:i}=g;null!=i&&i.forceRefresh||!e||n||(t&&o&&y(o,!1),r&&v(a))}else u.current=!0}),[g,y,v]),{...g,refetch:b}}},38134:(e,t,r)=>{"use strict";r.d(t,{p:()=>Pe});var n,o,a,i,s,l=r(2445),c=r(50290),d=r(17437),u=r(74098),h=r(96540);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(null,arguments)}const m=({title:e,titleId:t,...r},l)=>h.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 120 150",ref:l,"aria-labelledby":t},r),e?h.createElement("title",{id:t},e):null,n||(n=h.createElement("path",{fill:"currentColor",fillOpacity:.25,stroke:"currentColor",d:"M100.133 19.84h.001L119.5 40.696V149.5H.5V.5h81.781z"})),o||(o=h.createElement("path",{stroke:"currentColor",d:"M82.5 0v42H120"})),a||(a=h.createElement("rect",{width:71.778,height:9.444,x:24,y:65,fill:"currentColor",fillOpacity:.25,stroke:"currentColor",strokeWidth:2,mask:"url(#filter-results_svg__path-3-inside-1_738_30486)",rx:.5})),i||(i=h.createElement("rect",{width:41.556,height:9.444,x:39.111,y:85.778,fill:"currentColor",fillOpacity:.25,stroke:"currentColor",strokeWidth:2,mask:"url(#filter-results_svg__path-4-inside-2_738_30486)",rx:.5})),s||(s=h.createElement("rect",{width:18.889,height:9.444,x:50.444,y:106.556,fill:"currentColor",fillOpacity:.25,stroke:"currentColor",strokeWidth:2,mask:"url(#filter-results_svg__path-5-inside-3_738_30486)",rx:.5}))),f=(0,h.forwardRef)(m);var g,_,y,v=r(32023);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(null,arguments)}const E=({title:e,titleId:t,...r},n)=>h.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 75 53",ref:n,"aria-labelledby":t},r),e?h.createElement("title",{id:t},e):null,g||(g=h.createElement("rect",{width:71.778,height:9.444,x:.798,fill:"currentColor",fillOpacity:.25,stroke:"currentColor",rx:.5})),_||(_=h.createElement("rect",{width:41.556,height:9.444,x:15.909,y:20.777,fill:"currentColor",fillOpacity:.25,stroke:"currentColor",rx:.5})),y||(y=h.createElement("rect",{width:18.889,height:9.444,x:27.243,y:41.556,fill:"currentColor",fillOpacity:.25,stroke:"currentColor",rx:.5}))),S=(0,h.forwardRef)(E);var T,A,C;function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w.apply(null,arguments)}const R=({title:e,titleId:t,...r},n)=>h.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 119 78",ref:n,"aria-labelledby":t},r),e?h.createElement("title",{id:t},e):null,T||(T=h.createElement("rect",{width:86,height:62,x:16,y:1,stroke:"currentColor",strokeWidth:2,rx:3})),A||(A=h.createElement("path",{fill:"currentColor",d:"M60 32.642h20c.902 0 1.918 1.999 1.918 1.999-1.016 12.32-11.336 22-23.918 22v-24Z"})),C||(C=h.createElement("path",{fill:"currentColor",fillOpacity:.25,d:"M58 10.642c0-1.105-.899-2.01-2-1.918C43.682 9.74 34 20.06 34 32.642c0 13.255 10.745 24 24 24 12.582 0 22.902-9.682 23.918-22.001.09-1.1-.813-2-1.918-2H60a2 2 0 0 1-2-2z"}))),I=(0,h.forwardRef)(R);var O,D,x,N,L,P;function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F.apply(null,arguments)}const M=({title:e,titleId:t,...r},n)=>h.createElement("svg",F({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 119 78",ref:n,"aria-labelledby":t},r),e?h.createElement("title",{id:t},e):null,O||(O=h.createElement("rect",{width:86,height:62,x:17,y:1,stroke:"currentColor",strokeWidth:2,rx:3})),D||(D=h.createElement("rect",{width:78,height:14,x:21,y:5,stroke:"currentColor",strokeWidth:2,rx:3})),x||(x=h.createElement("rect",{width:38,height:36,x:21,y:23,stroke:"currentColor",strokeWidth:2,rx:3})),N||(N=h.createElement("rect",{width:36,height:22,x:63,y:37,stroke:"currentColor",strokeWidth:2,rx:3})),L||(L=h.createElement("rect",{width:36,height:10,x:63,y:23,stroke:"currentColor",strokeWidth:2,rx:3})),P||(P=h.createElement("path",{fill:"currentColor",fillOpacity:.25,fillRule:"evenodd",stroke:"currentColor",d:"M16 55.29C6.074 57.7 0 60.94 0 64.5 0 71.956 26.64 78 59.5 78S119 71.956 119 64.5c0-3.44-5.668-6.578-15-8.962V60a4 4 0 0 1-4 4H20a4 4 0 0 1-4-4z",clipRule:"evenodd"}))),k=(0,h.forwardRef)(M);var q;function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z.apply(null,arguments)}const U=({title:e,titleId:t,...r},n)=>h.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 119 76",ref:n,"aria-labelledby":t},r),e?h.createElement("title",{id:t},e):null,q||(q=h.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M83.195 1.366 103 24v38a4 4 0 0 1-4 4H20a4 4 0 0 1-4-4V24L35.805 1.366A4 4 0 0 1 38.815 0h41.37a4 4 0 0 1 3.01 1.366M101 26v36a2 2 0 0 1-2 2H20a2 2 0 0 1-2-2V26h17.25A4.75 4.75 0 0 1 40 30.75a6.75 6.75 0 0 0 6.75 6.75h25.5A6.75 6.75 0 0 0 79 30.75 4.75 4.75 0 0 1 83.75 26zm-.658-2L81.69 2.683A2 2 0 0 0 80.185 2h-41.37a2 2 0 0 0-1.505.683L18.657 24H35.25A6.75 6.75 0 0 1 42 30.75a4.75 4.75 0 0 0 4.75 4.75h25.5A4.75 4.75 0 0 0 77 30.75 6.75 6.75 0 0 1 83.75 24z",clipRule:"evenodd"}))),Y=(0,h.forwardRef)(U);var $,B;function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H.apply(null,arguments)}const j=({title:e,titleId:t,...r},n)=>h.createElement("svg",H({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 119 78",ref:n,"aria-labelledby":t},r),e?h.createElement("title",{id:t},e):null,$||($=h.createElement("path",{stroke:"currentColor",strokeWidth:2,d:"M59.212 1.559c.245-.745 1.33-.745 1.576 0l6.774 20.573a2.825 2.825 0 0 0 2.687 1.933h21.92a.8.8 0 0 1 .492 1.45L74.927 38.23a2.79 2.79 0 0 0-1.031 3.14l6.774 20.574c.229.696-.594 1.382-1.28.89L61.658 50.12a2.85 2.85 0 0 0-3.314 0L40.61 62.835c-.685.491-1.508-.195-1.279-.89l6.774-20.574a2.79 2.79 0 0 0-1.03-3.142L27.338 25.515a.8.8 0 0 1 .492-1.449h21.92a2.825 2.825 0 0 0 2.687-1.933z"})),B||(B=h.createElement("path",{fill:"currentColor",fillOpacity:.25,fillRule:"evenodd",stroke:"currentColor",d:"M41.678 51.616C17.524 53.334 0 58.453 0 64.5 0 71.956 26.64 78 59.5 78S119 71.956 119 64.5c0-5.961-17.03-11.02-40.653-12.809l3.272 9.94c.547 1.662-1.38 3.043-2.811 2.017L61.176 51.005a267 267 0 0 0-2.346-.004L41.192 63.648c-1.432 1.026-3.358-.355-2.811-2.016z",clipRule:"evenodd"}))),Q=(0,h.forwardRef)(j);var V;function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G.apply(null,arguments)}const W=({title:e,titleId:t,...r},n)=>h.createElement("svg",G({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 118 150",ref:n,"aria-labelledby":t},r),e?h.createElement("title",{id:t},e):null,V||(V=h.createElement("path",{fill:"currentColor",fillOpacity:.5,stroke:"CurrentColor",d:"M12.121 11.554h-.5v35.821h94.75V11.554h-94.25Zm93.75 81.357h.5V57.089h-94.75v35.822h94.25Zm0 45.535h.5v-35.821h-94.75v35.821h94.25ZM5.425.5h107.143a4.85 4.85 0 0 1 4.857 4.857v139.286a4.85 4.85 0 0 1-4.857 4.857H5.425a4.85 4.85 0 0 1-4.857-4.857V5.357A4.85 4.85 0 0 1 5.425.5ZM26.49 33.846a6.196 6.196 0 1 1 8.762-8.763 6.196 6.196 0 0 1-8.762 8.763Zm0 45.536a6.196 6.196 0 1 1 8.762-8.763 6.196 6.196 0 0 1-8.762 8.763Zm0 45.535a6.196 6.196 0 1 1 8.761-8.762 6.196 6.196 0 0 1-8.761 8.762Z"}))),K=(0,h.forwardRef)(W);var X,J;function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z.apply(null,arguments)}const ee=({title:e,titleId:t,...r},n)=>h.createElement("svg",Z({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 64 80",ref:n,"aria-labelledby":t},r),e?h.createElement("title",{id:t},e):null,X||(X=h.createElement("path",{fill:"currentColor",fillOpacity:.25,stroke:"currentColor",d:"M53.233 10.74 63.5 21.796V79.5H.5V.5h43.281z"})),J||(J=h.createElement("path",{stroke:"currentColor",d:"M44 0v22.4h20"}))),te=(0,h.forwardRef)(ee);var re;function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ne.apply(null,arguments)}const oe=({title:e,titleId:t,...r},n)=>h.createElement("svg",ne({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 152 152",ref:n,"aria-labelledby":t},r),e?h.createElement("title",{id:t},e):null,re||(re=h.createElement("path",{fill:"currentColor",fillOpacity:.25,stroke:"currentColor",d:"M44.5 1a1 1 0 0 1 1 1v43a1 1 0 0 1-1 1h-43a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM97.5 1a1 1 0 0 1 1 1v43a1 1 0 0 1-1 1h-43a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM150.5 1a1 1 0 0 1 1 1v43a1 1 0 0 1-1 1h-43a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM44.5 54a1 1 0 0 1 1 1v43a1 1 0 0 1-1 1h-43a1 1 0 0 1-1-1V55a1 1 0 0 1 1-1zM97.5 54a1 1 0 0 1 1 1v43a1 1 0 0 1-1 1h-43a1 1 0 0 1-1-1V55a1 1 0 0 1 1-1zM150.5 54a1 1 0 0 1 1 1v43a1 1 0 0 1-1 1h-43a1 1 0 0 1-1-1V55a1 1 0 0 1 1-1zM44.5 106a1 1 0 0 1 1 1v43a1 1 0 0 1-1 1h-43a1 1 0 0 1-1-1v-43a1 1 0 0 1 1-1zM97.5 106a1 1 0 0 1 1 1v43a1 1 0 0 1-1 1h-43a1 1 0 0 1-1-1v-43a1 1 0 0 1 1-1zM150.5 106a1 1 0 0 1 1 1v43a1 1 0 0 1-1 1h-43a1 1 0 0 1-1-1v-43a1 1 0 0 1 1-1z"}))),ae=(0,h.forwardRef)(oe);var ie,se;function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},le.apply(null,arguments)}const ce=({title:e,titleId:t,...r},n)=>h.createElement("svg",le({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 196 152",ref:n,"aria-labelledby":t},r),e?h.createElement("title",{id:t},e):null,ie||(ie=h.createElement("path",{fill:"currentColor",fillOpacity:.25,fillRule:"evenodd",stroke:"currentColor",d:"M193.652 1.5a.5.5 0 0 0-.5-.5H52.348v29.348h140.804a.5.5 0 0 0 .5-.5zm-152.174 0a.5.5 0 0 0-.5-.5H1.261v29.348h39.717a.5.5 0 0 0 .5-.5zm152.174 120.652a.5.5 0 0 0-.5-.5h-39.717V151h39.717a.5.5 0 0 0 .5-.5zM40.978 81.435a.5.5 0 0 1 .5.5v28.348a.5.5 0 0 1-.5.5H1.261V81.435zm75.5.5a.5.5 0 0 0-.5-.5h-63.63v29.348h63.63a.5.5 0 0 0 .5-.5zM193.761 81a.5.5 0 0 1 .5.5v29a.5.5 0 0 1-.5.5h-66.5V81zm-51.696 40.652a.5.5 0 0 1 .5.5V150.5a.5.5 0 0 1-.5.5H1.261v-29.348zm52.674-79.935a.5.5 0 0 0-.5-.5H1.261v29.348h192.978a.5.5 0 0 0 .5-.5z",clipRule:"evenodd"})),se||(se=h.createElement("path",{fill:"currentColor",fillOpacity:.25,stroke:"currentColor",d:"M193.152 1V.5zM52.348 1V.5h-.5V1zm0 29.348h-.5v.5h.5zm140.804 0v.5zM40.978 1v.5zM1.261 1V.5h-.5V1zm0 29.348h-.5v.5h.5zm39.717 0v.5zm112.457 91.304v-.5h-.5v.5zm0 29.348h-.5v.5h.5zM1.261 110.783h-.5v.5h.5zm0-29.348v-.5h-.5v.5zm51.087 0v-.5h-.5v.5zm0 29.348h-.5v.5h.5zm74.913.217h-.5v.5h.5zm0-30v-.5h-.5v.5zm14.804 40.652v.5zm0 29.348v.5zM1.261 151h-.5v.5h.5zm0-29.348v-.5h-.5v.5zm192.978-80.435v.5zm-192.978 0v-.5h-.5v.5zm0 29.348h-.5v.5h.5zm192.978 0v.5zM193.152 1.5h1a1 1 0 0 0-1-1zm-140.804 0h140.804v-1H52.348zm.5 28.848V1h-1v29.348zm140.304-.5H52.348v1h140.804zm0 0v1a1 1 0 0 0 1-1zm0-28.348v28.348h1V1.5zm-152.174 0h1a1 1 0 0 0-1-1zm-39.717 0h39.717v-1H1.261zm.5 28.848V1h-1v29.348zm39.217-.5H1.261v1h39.717zm0 0v1a1 1 0 0 0 1-1zm0-28.348v28.348h1V1.5zm152.174 120.652h1a1 1 0 0 0-1-1zm-39.717 0h39.717v-1h-39.717zm.5 28.848v-29.348h-1V151zm39.217-.5h-39.717v1h39.717zm0 0v1a1 1 0 0 0 1-1zm0-28.348V150.5h1v-28.348zM41.978 81.935a1 1 0 0 0-1-1v1zm0 28.348V81.935h-1v28.348zm-1 1a1 1 0 0 0 1-1h-1zm-39.717 0h39.717v-1H1.261zm-.5-29.848v29.348h1V81.435zm40.217-.5H1.261v1h39.717zm75 1h1a1 1 0 0 0-1-1zm-63.63 0h63.63v-1h-63.63zm.5 28.848V81.435h-1v29.348zm63.13-.5h-63.63v1h63.63zm0 0v1a1 1 0 0 0 1-1zm0-28.348v28.348h1V81.935zm78.783-.435a1 1 0 0 0-1-1v1zm0 29v-29h-1v29zm-1 1a1 1 0 0 0 1-1h-1zm-66.5 0h66.5v-1h-66.5zm-.5-30.5v30h1V81zm67-.5h-66.5v1h66.5zm-50.696 41.652a1 1 0 0 0-1-1v1zm0 28.348v-28.348h-1V150.5zm-1 1a1 1 0 0 0 1-1h-1zm-140.804 0h140.804v-1H1.261zm-.5-29.848V151h1v-29.348zm141.304-.5H1.261v1h140.804zm52.174-79.435h1a1 1 0 0 0-1-1zm-192.978 0h192.978v-1H1.261zm.5 28.848V41.217h-1v29.348zm192.478-.5H1.261v1h192.978zm0 0v1a1 1 0 0 0 1-1zm0-28.348v28.348h1V41.717z"}))),de=(0,h.forwardRef)(ce);var ue;function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},he.apply(null,arguments)}const pe=({title:e,titleId:t,...r},n)=>h.createElement("svg",he({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 300 146",ref:n,"aria-labelledby":t},r),e?h.createElement("title",{id:t},e):null,ue||(ue=h.createElement("path",{fill:"currentColor",fillOpacity:.25,stroke:"currentColor",d:"M17 21a4 4 0 0 1 4-4h104a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H21a4 4 0 0 1-4-4zM17 45a4 4 0 0 1 4-4h202a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H21a4 4 0 0 1-4-4zM21 65a4 4 0 0 0-4 4v8a4 4 0 0 0 4 4h151a4 4 0 0 0 4-4v-8a4 4 0 0 0-4-4zM17 93a4 4 0 0 1 4-4h265a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H21a4 4 0 0 1-4-4zM21 113a4 4 0 0 0-4 4v8a4 4 0 0 0 4 4h52a4 4 0 0 0 4-4v-8a4 4 0 0 0-4-4z"}))),me=(0,h.forwardRef)(pe);var fe,ge;function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_e.apply(null,arguments)}const ye=({title:e,titleId:t,...r},n)=>h.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 81 82",ref:n,"aria-labelledby":t},r),e?h.createElement("title",{id:t},e):null,fe||(fe=h.createElement("path",{fill:"currentColor",fillOpacity:.25,fillRule:"evenodd",stroke:"currentColor",d:"M76.5 1h-72a4 4 0 0 0-4 4v72a4 4 0 0 0 4 4h72a4 4 0 0 0 4-4V5a4 4 0 0 0-4-4Zm-40 72h-28V57h28zm0-24h-28V33h28zm36 24h-28V57h28zm0-24h-28V33h28zm0-24h-64V9h64z",clipRule:"evenodd"})),ge||(ge=h.createElement("path",{fill:"currentColor",fillOpacity:.25,stroke:"currentColor",d:"M36.5 73v.5h.5V73zm-28 0H8v.5h.5zm0-16v-.5H8v.5zm28 0h.5v-.5h-.5zm0-8v.5h.5V49zm-28 0H8v.5h.5zm0-16v-.5H8v.5zm28 0h.5v-.5h-.5zm36 40v.5h.5V73zm-28 0H44v.5h.5zm0-16v-.5H44v.5zm28 0h.5v-.5h-.5zm0-8v.5h.5V49zm-28 0H44v.5h.5zm0-16v-.5H44v.5zm28 0h.5v-.5h-.5zm0-8v.5h.5V25zm-64 0H8v.5h.5zm0-16v-.5H8V9zm64 0h.5v-.5h-.5zm4-8.5h-72v1h72zm-72 0A4.5 4.5 0 0 0 0 5h1a3.5 3.5 0 0 1 3.5-3.5zM0 5v72h1V5zm0 72a4.5 4.5 0 0 0 4.5 4.5v-1A3.5 3.5 0 0 1 1 77zm4.5 4.5h72v-1h-72zm72 0A4.5 4.5 0 0 0 81 77h-1a3.5 3.5 0 0 1-3.5 3.5zM81 77V5h-1v72zm0-72A4.5 4.5 0 0 0 76.5.5v1A3.5 3.5 0 0 1 80 5zM36.5 72.5h-28v1h28zM9 73V57H8v16zm-.5-15.5h28v-1h-28zM36 57v16h1V57zm.5-8.5h-28v1h28zM9 49V33H8v16zm-.5-15.5h28v-1h-28zM36 33v16h1V33zm36.5 39.5h-28v1h28zM45 73V57h-1v16zm-.5-15.5h28v-1h-28zM72 57v16h1V57zm.5-8.5h-28v1h28zM45 49V33h-1v16zm-.5-15.5h28v-1h-28zM72 33v16h1V33zm.5-8.5h-64v1h64zM9 25V9H8v16zM8.5 9.5h64v-1h-64zM72 9v16h1V9z"}))),ve=(0,h.forwardRef)(ye);var be,Ee;function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Se.apply(null,arguments)}const Te=({title:e,titleId:t,...r},n)=>h.createElement("svg",Se({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 119 76",ref:n,"aria-labelledby":t},r),e?h.createElement("title",{id:t},e):null,be||(be=h.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M83.195 1.366 103 24v38a4 4 0 0 1-4 4H20a4 4 0 0 1-4-4V24L35.805 1.366A4 4 0 0 1 38.815 0h41.37a4 4 0 0 1 3.01 1.366M101 26v36a2 2 0 0 1-2 2H20a2 2 0 0 1-2-2V26h17.25A4.75 4.75 0 0 1 40 30.75a6.75 6.75 0 0 0 6.75 6.75h25.5A6.75 6.75 0 0 0 79 30.75 4.75 4.75 0 0 1 83.75 26zm-.658-2L81.69 2.683A2 2 0 0 0 80.185 2h-41.37a2 2 0 0 0-1.505.683L18.657 24H35.25A6.75 6.75 0 0 1 42 30.75a4.75 4.75 0 0 0 4.75 4.75h25.5A4.75 4.75 0 0 0 77 30.75 6.75 6.75 0 0 1 83.75 24z",clipRule:"evenodd"})),Ee||(Ee=h.createElement("path",{fill:"currentColor",fillOpacity:.25,stroke:"currentColor",d:"M16 53.29C6.074 55.7 0 58.94 0 62.5 0 69.956 26.64 76 59.5 76S119 69.956 119 62.5c0-3.56-6.074-6.799-16-9.21V62a4 4 0 0 1-4 4H20a4 4 0 0 1-4-4z"}))),Ae=(0,h.forwardRef)(Te);var Ce=r(25936),we=r(88217);const Re={"chart.svg":(0,l.Y)(v.A,{}),"document.svg":(0,l.Y)(te,{}),"empty-charts.svg":(0,l.Y)(I,{}),"empty-dashboard.svg":(0,l.Y)(k,{}),"empty-dataset.svg":(0,l.Y)(ae,{}),"empty-query.svg":(0,l.Y)(me,{}),"empty-table.svg":(0,l.Y)(ve,{}),"empty.svg":(0,l.Y)(Ae,{}),"empty_sql_chart.svg":(0,l.Y)(de,{}),"filter-results.svg":(0,l.Y)(f,{}),"filter.svg":(0,l.Y)(S,{}),"star-circle.svg":(0,l.Y)(Q,{}),"union.svg":(0,l.Y)(Y,{}),"vector.svg":(0,l.Y)(K,{})},Ie=c.I4.div`
  ${({theme:e})=>d.AH`
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%;
    color: ${e.colorTextTertiary};
    align-items: center;
    justify-content: center;
    padding: ${4*e.sizeUnit}px;
    text-align: center;

    & .ant-empty-image svg {
      width: auto;
    }

    & a,
    & span[role='button'] {
      color: inherit;
      text-decoration: underline;
      &:hover {
        color: ${e.colorText};
      }
    }
  `}
`,Oe=c.I4.p`
  ${({theme:e,size:t})=>d.AH`
    font-size: ${"large"===t?e.fontSizeLG:e.fontSize}px;
    color: ${e.colorTextTertiary};
    margin-top: ${"large"===t?4*e.sizeUnit:2*e.sizeUnit}px;
    font-weight: ${e.fontWeightStrong};
  `}
`,De=c.I4.p`
  ${({theme:e,size:t})=>d.AH`
    font-size: ${"large"===t?e.fontSize:e.fontSizeSM}px;
    color: ${e.colorTextTertiary};
    margin-top: ${2*e.sizeUnit}px;
  `}
`,xe=e=>{switch(e){case"small":return{height:"50px"};case"medium":default:return{height:"80px"};case"large":return{height:"150px"}}},Ne=({image:e,size:t})=>{if(!e)return null;const r="string"==typeof e?Re[e]:e;return(0,l.Y)("div",{role:"img","aria-label":"empty",children:(0,l.Y)(Ce.S,{description:!1,image:r,styles:{image:xe(t)}})})},Le=e=>{e.preventDefault(),e.stopPropagation()},Pe=({title:e=(0,u.t)("No results"),description:t=(0,u.t)("There is currently no information to display."),image:r="empty.svg",buttonText:n,buttonIcon:o,buttonAction:a,size:i="medium",children:s})=>(0,l.FD)(Ie,{children:[r&&(0,l.Y)(Ne,{image:r,size:i}),(0,l.FD)("div",{css:e=>d.AH`
        max-width: ${"large"===i?150*e.sizeUnit:100*e.sizeUnit}px;
      `,children:[e&&(0,l.Y)(Oe,{size:i,children:e}),t&&(0,l.Y)(De,{size:i,className:"ant-empty-description",children:t}),n&&a&&(0,l.Y)(we.$,{icon:o,buttonStyle:"primary",onClick:a,onMouseDown:Le,css:e=>d.AH`
            margin-top: ${4*e.sizeUnit}px;
            z-index: 1;
            box-shadow: none;
          `,children:n}),s]})]})},40115:(e,t,r)=>{"use strict";r.d(t,{F:()=>l});var n=r(58561),o=r.n(n),a=r(93020),i=r(79378),s=r(59744);const l=(0,a.xP)({reducerPath:"queryApi",tagTypes:["Catalogs","Schemas","Tables","DatabaseFunctions","QueryValidations","TableMetadatas","SqlLabInitialState","EditorQueries"],endpoints:()=>({}),baseQuery:({endpoint:e,urlParams:t,transformResponse:r,method:n="GET",parseMethod:a="json",...l},c)=>i.A.request({...l,endpoint:`${e}${t?`?q=${o().encode(t)}`:""}`,method:n,parseMethod:a,signal:c.signal}).then((e=>{var t;return{data:null!=(t=null==r?void 0:r(e))?t:e}})).catch((e=>(0,s.h4)(e).then((t=>({error:{error:(null==t?void 0:t.message)||(null==t?void 0:t.error)||e.statusText,errors:(null==t?void 0:t.errors)||[],status:e.status}})))))})},41479:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>i,Cq:()=>a,cT:()=>n});var n,o=r(43561);!function(e){e.Table="table",e.Query="query",e.Dataset="dataset",e.SlTable="sl_table",e.SavedQuery="saved_query"}(n||(n={}));const a=[{metric_name:"COUNT(*)",expression:"COUNT(*)",uuid:(0,o.Ak)()}],i={}},41876:(e,t,r)=>{"use strict";r.d(t,{g:()=>s});var n=r(2445),o=r(96540),a=r(88217),i=r(97163);const s=(0,o.forwardRef)(((e,t)=>{const[r,s]=(0,o.useState)(!1),{beforeOpen:l=()=>{},onExit:c=()=>{},isButton:d=!1,resizable:u=!1,draggable:h=!1,className:p="",tooltip:m,modalFooter:f,triggerNode:g,destroyOnHidden:_=!0,modalBody:y,draggableConfig:v={},resizableConfig:b={},modalTitle:E,responsive:S,width:T,maxWidth:A}=e,C=()=>{s(!1),null==c||c()},w=e=>{e.preventDefault(),null==l||l(),s(!0)};return t&&(t.current={close:C,open:w,showModal:r}),(0,n.FD)(n.FK,{children:[d&&(0,n.Y)(a.$,{className:"modal-trigger",tooltip:m,onClick:w,children:g}),!d&&(0,n.Y)("div",{onClick:w,role:"button",children:g}),(0,n.Y)(i.aF,{className:p,show:r,onHide:C,name:E,title:E,footer:f,hideFooter:!f,width:T,maxWidth:A,responsive:S,resizable:u,resizableConfig:b,draggable:h,draggableConfig:v,destroyOnHidden:_,children:y})]})}))},42385:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(35625),o=r(39892);class a extends n.A{constructor(){super({name:"ChartControlPanel"})}}const i=(0,o.A)(a)},42566:(e,t,r)=>{"use strict";r.d(t,{o:()=>s});var n=r(50290),o=r(17437),a=r(75475);const i=(0,n.I4)(a.A.Link)`
    ${({theme:e})=>o.AH`
      && {
        color: ${e.colorLink};
        &:hover {
          color: ${e.colorLinkHover};
        }
    `}
  }
`,s=Object.assign(a.A,{Text:a.A.Text,Link:i,Title:a.A.Title,Paragraph:a.A.Paragraph})},42643:(e,t,r)=>{"use strict";r.d(t,{S:()=>n});const n=e=>{var t,r;return null!=(t=e.uid)?t:`${null!=(r=e.id)?r:"None"}__${e.type}`}},43101:(e,t,r)=>{"use strict";r.d(t,{_:()=>o});var n=r(29624);function o(e,t,r){if(e.selectedLayers&&e.selectedLayers.length>0){const o=[];e.selectedLayers.forEach((e=>{const r=e.match(/^chart-(\d+)-layer-(\d+)$/);if(r){const e=parseInt(r[1],10);t.includes(e)&&!o.includes(e)&&o.push(e)}}));const a=new Set;return e.selectedLayers.forEach((e=>{const t=e.match(/^chart-(\d+)-layer-(\d+)$/);t&&a.add(parseInt(t[1],10))})),t.filter((t=>{var o;return!e.excluded.includes(t)&&!a.has(t)&&(null==(o=r.find((e=>{var r;return(null==e?void 0:e.type)===n.oT&&(null==(r=e.meta)?void 0:r.chartId)===t})))||null==(o=o.parents)?void 0:o.some((t=>e.rootPath.includes(t))))})).forEach((e=>{o.includes(e)||o.push(e)})),o}return t.filter((t=>{var o;return!e.excluded.includes(t)&&(null==(o=r.find((e=>{var r;return(null==e?void 0:e.type)===n.oT&&(null==(r=e.meta)?void 0:r.chartId)===t})))||null==(o=o.parents)?void 0:o.some((t=>e.rootPath.includes(t))))}))}},43303:(e,t,r)=>{"use strict";r.d(t,{S:()=>i});var n=r(2445),o=r(50290),a=r(39356);const i=(0,o.I4)((e=>(0,n.Y)(a.A,{...e})))`
  ${({modalMode:e})=>e&&"\n      border-radius: 0;\n      border-left: 0;\n      border-right: 0;\n    "}
  .ant-collapse-item {
    .ant-collapse-header {
      .ant-collapse-arrow svg {
        transition: ${({animateArrows:e})=>e?"transform 0.24s":"none"};
      }

      ${({expandIconPosition:e})=>e&&"end"===e&&"\n            .anticon.anticon-right.ant-collapse-arrow > svg {\n              transform: rotate(90deg) !important;\n            }\n          "}
    }

    ${({ghost:e,bordered:t,theme:r})=>e&&t&&`\n        border-bottom: 1px solid ${r.colorBorderSecondary};\n      `}
    .ant-collapse-content {
      color: ${({theme:e})=>e.colorText};

      .ant-collapse-content-box {
        .loading.inline {
          margin: ${({theme:e})=>12*e.sizeUnit}px auto;
          display: block;
        }
      }
    }
  }

  .hidden-collapse-header .ant-collapse-header {
    display: none;
  }

  .ant-collapse-item-active {
    .ant-collapse-header {
      ${({expandIconPosition:e})=>e&&"end"===e&&"\n            .anticon.anticon-right.ant-collapse-arrow > svg {\n              transform: rotate(-90deg) !important;\n            }\n          "}
    }
  }
`;i.Panel=a.A.Panel},43875:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(91003),o=r(93606),a=r(32374),i=r(96790);function s({dropResult:e,layout:t}){const{source:r,destination:s,dragging:l}=e,c=r.id===n.k0?(0,i.A)(l.type):t[l.id]||{};if(r.id===s.id)return c.meta.width;const{width:d,minimumWidth:u}=(0,a.A)({component:c,components:t}),{width:h,occupiedWidth:p}=(0,a.A)({id:s.id,components:t});let m=Number(h-p);if(Number.isNaN(m)){const{width:e,occupiedWidth:r}=(0,a.A)({id:(0,o.A)({childId:s.id,layout:t}),components:t});m=Number(e-r)}return Number.isNaN(m)||Number.isNaN(Number(d))||m>=d?d:m>=u?m:-1}},45519:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,Z:()=>c});var n=r(2404),o=r.n(n),a=r(1932),i=r(74395),s=r(48813),l=r(35352);r(37203);function c(e,t={}){return{...void 0!==e?{id:e}:{},extraFormData:{},filterState:{},ownState:{},...t}}const d=(0,a.jM)(((e,t)=>{var r,n,a;const d={};switch(t.type){case l.aJ:return d;case l.Ak:return e[t.filterId]={...c(t.filterId),...e[t.filterId],...t.dataMask},e;case s.n:return Object.keys(null==(r=t.data.dashboardInfo)||null==(r=r.metadata)?void 0:r.chart_configuration).forEach((e=>{d[e]={...c(e)}})),u=null!=(n=null==(a=t.data.dashboardInfo)||null==(a=a.metadata)?void 0:a.native_filter_configuration)?n:[],h=d,p=e,m=t.data.dataMask,u.forEach((e=>{const t=m||{};h[e.id]={...c(e.id),...e.defaultDataMask,...t[e.id]}})),Object.values(p).forEach((e=>{String(null==e?void 0:e.id).startsWith(i._L)||(h[null==e?void 0:e.id]=e)})),d;case l.sB:return function(e,t,r,n){const a=n||{};Object.entries(a).forEach((([e,r])=>{t[e]={...r,...r.defaultDataMask}})),e.deleted.forEach((e=>{delete t[e]})),e.modified.forEach((e=>{var n,a;const i=r[e.id],s=o()(null==i?void 0:i.targets,null==e?void 0:e.targets),l=i&&s&&((null==(n=e.controlValues)?void 0:n.enableEmptyFilter)||(null==(a=e.controlValues)?void 0:a.defaultToFirstItem));t[e.id]={...c(e.id),...e.defaultDataMask,...e,...l&&{extraFormData:i.extraFormData,filterState:i.filterState}}})),Object.values(r).forEach((e=>{String(null==e?void 0:e.id).startsWith(i._L)||(t[null==e?void 0:e.id]=e)}))}(t.filterChanges,d,e,t.filters),d;default:return e}var u,h,p,m}),{})},45727:(e,t,r)=>{"use strict";r.d(t,{K:()=>n});const n=(e,t,r=(...e)=>JSON.stringify([...e]))=>(...n)=>{const o=r(...n);if(t.has(o))return t.get(o);const a=e(...n);return t.set(o,a),a}},45898:(e,t,r)=>{"use strict";r.d(t,{CM:()=>f,HR:()=>y,LQ:()=>u,PM:()=>_,Zp:()=>g,ef:()=>m,hH:()=>p,i7:()=>v,qJ:()=>d});var n=r(62193),o=r.n(n),a=r(79378),i=r(74098),s=r(58561),l=r.n(s),c=r(91412);const d="SET_REPORT";function u({userId:e,filterField:t,creationMethod:r,resourceId:n}){const o=l().encode({filters:[{col:t,opr:"eq",value:n},{col:"creation_method",opr:"eq",value:r},{col:"created_by",opr:"rel_o_m",value:e}]});return function(e){return a.A.get({endpoint:`/api/v1/report/?q=${o}`}).then((({json:o})=>{e(function(e,t,r,n){return{type:d,report:e,resourceId:t,creationMethod:r,filterField:n}}(o,n,r,t))})).catch((()=>e((0,c.iB)((0,i.t)("There was an issue fetching reports attached to this dashboard.")))))}}const h=(e,t)=>{const r=t(),{user:n,dashboardInfo:a,charts:i,explore:s}=r;if(o()(a)){var l;const[t]=Object.keys(i);e(u({userId:(null==(l=s.user)?void 0:l.userId)||(null==n?void 0:n.userId),filterField:"chart_id",creationMethod:"charts",resourceId:i[t].id}))}else e(u({userId:n.userId,filterField:"dashboard_id",creationMethod:"dashboards",resourceId:a.id}))},p="ADD_REPORT",m=e=>t=>a.A.post({endpoint:"/api/v1/report/",jsonPayload:e}).then((({json:e})=>{t({type:p,json:e}),t((0,c.WR)((0,i.t)("The report has been created")))})),f="EDIT_REPORT",g=(e,t)=>r=>a.A.put({endpoint:`/api/v1/report/${e}`,jsonPayload:t}).then((({json:e})=>{r({type:f,json:e}),r((0,c.WR)((0,i.t)("Report updated")))}));function _(e,t){return function(r){return a.A.put({endpoint:encodeURI(`/api/v1/report/${e.id}`),headers:{"Content-Type":"application/json"},body:JSON.stringify({active:t})}).catch((()=>{r((0,c.iB)((0,i.t)("We were unable to active or deactivate this report.")))})).finally((()=>{r(h)}))}}const y="DELETE_REPORT";function v(e){return function(t){return a.A.delete({endpoint:encodeURI(`/api/v1/report/${e.id}`)}).catch((()=>{t((0,c.iB)((0,i.t)("Your report could not be deleted")))})).finally((()=>{t({type:y,report:e}),t((0,c.WR)((0,i.t)("Deleted: %s",e.name)))}))}}},46772:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});const n=new Set(["standalone","edit"]);function o(e){return[...new URLSearchParams(window.location.search).entries()].reduce(((t,[r,o])=>"regular"===e&&n.has(r)||"reserved"===e&&!n.has(r)?t:Array.isArray(o)?{...t,[r]:o[0]}:{...t,[r]:o}),{})}},47263:(e,t,r)=>{"use strict";r.d(t,{D:()=>l});var n=r(2445),o=r(50290),a=r(8558),i=r(99027);const s=o.I4.span`
  white-space: nowrap;
  min-width: 100px;
`;function l({actions:e}){return(0,n.Y)(s,{className:"actions",children:e.map((({icon:e,tooltip:t,...r},o)=>{const s=a.F[e];return(0,n.Y)(i.r,{icon:(0,n.Y)(s,{}),...r},t?void 0:o)}))})}},47305:(e,t,r)=>{"use strict";r.d(t,{m9:()=>d,bD:()=>h,N6:()=>l,ZU:()=>u});var n=r(99106),o=r(11331),a=r.n(o);function i(e){return function(e){return a()(e)&&"username"in e}(e)&&"permissions"in e&&"roles"in e}var s=r(90886);const l=e=>i(e)&&Object.keys(e.roles||{}).some((e=>"admin"===e.toLowerCase())),c=(e,t)=>i(t)&&e.owners.some((e=>e.id===t.userId)),d=(e,t)=>i(t)&&(l(t)||c(e,t))&&(0,s.L)("can_write","Dashboard",null==t?void 0:t.roles);function u(e,t,r){return l(e)||i(e)&&Object.values(e.roles||{}).flat().some((e=>e[0]===r&&e[1]===t))}const h=(e,t)=>i(t)&&(0,s.L)("can_write","Dashboard",null==t?void 0:t.roles)&&(!(0,n.G7)(n.TO.DashboardRbac)||l(t)||c(e,t))},47309:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(47837),o=r(3666),a=r(78546),i=r(89297);const s=e=>[e];function l(e,t){const{queryFields:r,buildQuery:l=s}="function"==typeof t?{buildQuery:t,queryFields:{}}:t||{};let c=l((0,n.A)(e,r));return c.forEach((e=>{Array.isArray(e.post_processing)&&(e.post_processing=e.post_processing.filter(Boolean))})),(0,i.aj)(e)&&(c=c.map((t=>(0,a.j)(e,t)))),{datasource:new o.A(e.datasource).toObject(),force:e.force||!1,queries:c,form_data:e,result_format:e.result_format||"json",result_type:e.result_type||"full"}}},47837:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(1734),o=r(58180),a=r(16751);function i(e){let t=e;return e.includes("--")&&(t=`${e}\n`),`(${t})`}var s=r(91402),l=r(31463),c=r(74842);function d(e,t){var r,d;const{annotation_layers:u=[],extra_form_data:h,time_range:p,since:m,until:f,row_limit:g,row_offset:_,order_desc:y,limit:v,timeseries_limit_metric:b,granularity:E,url_params:S={},custom_params:T={},series_columns:A,series_limit:C,series_limit_metric:w,group_others_when_limit_reached:R,...I}=e,{adhoc_filters:O=[],filters:D=[],custom_form_data:x={},...N}=h||{},L=Number(g),P=Number(_),{metrics:F,columns:M,orderby:k}=(0,s.A)(I,t),q=function(e){const t={},r=[],n={},o={filters:r,extras:n,applied_time_extras:t},a={__time_range:"time_range",__time_col:"granularity_sqla",__time_grain:"time_grain_sqla",__granularity:"granularity",__time_compare:"time_compare"};return(e.extra_filters||[]).forEach((e=>{if(e.col in a){const r=e.col;o[a[r]]=e.val,t[r]=e.val}else r.push(e)})),n.time_grain_sqla=o.time_grain_sqla||e.time_grain_sqla,o.granularity=o.granularity_sqla||e.granularity||e.granularity_sqla,delete o.granularity_sqla,delete o.time_grain_sqla,o}(e),{filters:z}=q,U={filters:[...z,...D],adhoc_filters:[...e.adhoc_filters||[],...O]},Y=function(e){const{adhoc_filters:t,extras:r={},filters:n=[],where:s}=e,l=n,c=[];s&&c.push(s);const d=[];return(t||[]).forEach((e=>{const{clause:t}=e;if((0,o.md)(e)){const r=(0,a.A)(e);"WHERE"===t&&l.push(r)}else{const{sqlExpression:r}=e;"WHERE"===t?c.push(r):d.push(r)}})),r.having=d.map(i).join(" AND "),r.where=c.map(i).join(" AND "),{filters:l,extras:r}}({...e,...q,...U});let $={time_range:p||void 0,since:m||void 0,until:f||void 0,granularity:E||void 0,...q,...Y,columns:M,metrics:F,orderby:k,annotation_layers:u,row_limit:null==g||Number.isNaN(L)?void 0:L,row_offset:null==_||Number.isNaN(P)?void 0:P,series_columns:A,series_limit:null!=C?C:(0,c.A)(v)?Number(v):0,series_limit_metric:null!=(r=null!=(d=(e=>{if((0,n.Pr)(e))return e})(w))?d:b)?r:void 0,group_others_when_limit_reached:null!=R&&R,order_desc:void 0===y||y,url_params:S||void 0,custom_params:T};return $=function(e,t){const r={...e},{extras:n={}}=r;return Object.entries(l.DV).forEach((([e,n])=>{const o=t[e];void 0!==o&&(r[n]=o)})),l.KE.forEach((e=>{e in t&&(n[e]=t[e])})),Object.keys(n).length>0&&(r.extras=n),r}($,N),{...$,custom_form_data:x}}},47980:(e,t,r)=>{"use strict";r.d(t,{V:()=>c,b:()=>l});var n=r(2445),o=r(50290),a=r(72973),i=r(65471);const s=o.I4.div`
  width: 100%;
  > span {
    display: flex;
    align-items: center;
  }

  .option-label {
    display: inline-block;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    & ~ i {
      margin-left: ${({theme:e})=>e.sizeUnit}px;
    }
  }
  .type-label {
    margin-right: ${({theme:e})=>3*e.sizeUnit}px;
    width: ${({theme:e})=>7*e.sizeUnit}px;
    display: inline-block;
    text-align: center;
    font-weight: ${({theme:e})=>e.fontWeightStrong};
  }
`,l=e=>(0,n.Y)(s,{children:(0,n.Y)(a.S,{...e})}),c=e=>(0,n.Y)(s,{children:(0,n.Y)(i.K,{...e})})},48813:(e,t,r)=>{"use strict";r.d(t,{n:()=>E,M:()=>S});var n=r(64942),o=r(25451),a=r(97253),i=r(31912),s=r(15830),l=r(90886),c=r(47305),d=r(5147),u=r(91003),h=r(29624),p=r(95553),m=r(96790),f=r(85923),g=r(31296),_=r(59246),y=r(46772),v=r(16042),b=r(61412);const E="HYDRATE_DASHBOARD",S=({history:e,dashboard:t,charts:r,dataMask:S,activeTabs:T})=>(A,C)=>{const{user:w,common:R,dashboardState:I}=C(),{metadata:O,position_data:D}=t,x=(0,y.A)("regular"),N="true"===(0,y.A)("reserved").edit;r.forEach((e=>{e.slice_id=e.form_data.slice_id}));const L=D&&Object.keys(D).length>0?D:{[u.CW]:"v2",[u.wv]:{type:h.tq,id:u.wv,children:[u.mK]},[u.mK]:{type:h.$9,id:u.mK,children:[],parents:[u.wv]}},P={};Object.values(L).forEach((e=>{e.type===h.oT&&(P[e.meta.chartId]=e.id)}));const F=function(e={}){let t=e[u.wv];return t=t&&t.children.length&&e[t.children[0]].type===h.wc?e[e[t.children[0]].children[0]]:e[t.children[0]],t.id}(L),M=L[F];let k,q=0;const z={},U={},Y={},$=new Set,B=new Map;r.forEach((e=>{const t=e.slice_id,r={...e.form_data,url_params:{...e.form_data.url_params,...x}};if(z[t]={...n.b,id:t,form_data:(0,i.S7)(r)},Y[t]={slice_id:t,slice_url:e.slice_url,slice_name:e.slice_name,form_data:e.form_data,viz_type:e.form_data.viz_type,datasource:e.form_data.datasource,description:e.description,description_markeddown:e.description_markeddown,owners:e.owners,modified:e.modified,changed_on:new Date(e.changed_on).getTime()},$.add(t),!P[t]&&L[F]){var o;(0===q||q+u.nm>u.cV)&&(k=(0,m.A)(h._8,(M.parents||[]).slice()),L[k.id]=k,M.children.push(k.id),q=0);const t=(0,m.A)(h.oT,{chartId:e.slice_id},(k.parents||[]).slice()),r=(null!=(o=B.get(e.slice_id))?o:0)+1;t.id=`${h.oT}-explore-${e.slice_id}-${r}`,B.set(e.slice_id,r),L[t.id]=t,k.children.push(t.id),P[t.meta.chartId]=t.id,q+=u.nm}const a=P[t];a&&L[a]&&(L[a].meta.sliceName=e.slice_name)})),Object.values(L).some((e=>e.id!==u.wv&&!e.parents))&&(0,v.A)({currentComponent:L[u.wv],layout:L}),(0,s.kl)({dashboardFilters:U,components:L}),L[u.XY]={id:u.XY,type:h.KR,meta:{text:t.dashboard_title}};const H={past:[],present:L,future:[]},j=(0,g.P3)(f.vX.dashboardFocusedChart);let Q;if(j){const t=Object.values(H.present).find((e=>{var t;return(null==(t=e.meta)?void 0:t.chartId)===j}));Q=null==t?void 0:t.id;const r=new URLSearchParams(window.location.search);r.delete(f.vX.dashboardFocusedChart.name),e.replace({search:r.toString()})}const V=Q||(0,p.A)();let G=I.directPathToChild||[];L[V]&&(G=(L[V].parents||[]).slice(),G.push(V));const W=(0,a.C)({filterConfig:(null==O?void 0:O.native_filter_configuration)||[]}),{chartConfiguration:K,globalChartConfiguration:X}=(0,d.k)(H.present,O,z);O.chart_configuration=K,O.global_chart_configuration=X;const{roles:J}=w,Z=(0,c.m9)(t,w),ee=(0,d.b)(O.cross_filters_enabled);return A({type:E,data:{sliceEntities:{...o.o,slices:Y,isLoading:!1},charts:z,dashboardInfo:{...t,metadata:O,userId:w.userId?String(w.userId):null,dash_edit_perm:Z,dash_save_perm:(0,c.bD)(t,w),dash_share_perm:(0,l.L)("can_share_dashboard","Superset",J),superset_can_explore:(0,l.L)("can_explore","Superset",J),superset_can_share:(0,l.L)("can_share_chart","Superset",J),superset_can_csv:(0,l.L)("can_csv","Superset",J),common:{flash_messages:null==R?void 0:R.flash_messages,conf:null==R?void 0:R.conf},filterBarOrientation:O.filter_bar_orientation||b.QI.Vertical,crossFiltersEnabled:ee},dataMask:S,dashboardFilters:U,nativeFilters:W,dashboardState:{preselectNativeFilters:(0,g.P3)(f.vX.nativeFilters),sliceIds:Array.from($),directPathToChild:G,directPathLastUpdated:Date.now(),focusedFilterField:null,expandedSlices:(null==O?void 0:O.expanded_slices)||{},refreshFrequency:(null==O?void 0:O.refresh_frequency)||0,shouldPersistRefreshFrequency:!1,css:t.css||"",colorNamespace:(null==O?void 0:O.color_namespace)||null,colorScheme:(null==O?void 0:O.color_scheme)||null,editMode:Z&&N,isPublished:t.published,hasUnsavedChanges:!1,dashboardIsSaving:!1,maxUndoHistoryExceeded:!1,lastModifiedTime:t.changed_on,isRefreshing:!1,isFiltersRefreshing:!1,activeTabs:T||(null==I?void 0:I.activeTabs)||[],datasetsStatus:(null==I?void 0:I.datasetsStatus)||_.bk.Loading},dashboardLayout:H}})}},49239:(e,t,r)=>{"use strict";r.d(t,{Fp:()=>m,II:()=>f,K8:()=>a,RX:()=>l,Sd:()=>h,Vw:()=>p,Wy:()=>u,Z_:()=>g,_R:()=>_,_T:()=>c,dq:()=>o,nS:()=>s,sJ:()=>d,sO:()=>y,ux:()=>i,y3:()=>v});var n=r(74098);const o={AVG:"AVG",COUNT:"COUNT",COUNT_DISTINCT:"COUNT_DISTINCT",MAX:"MAX",MIN:"MIN",SUM:"SUM"},a=Object.values(o);var i;!function(e){e.Equals="EQUALS",e.NotEquals="NOT_EQUALS",e.LessThan="LESS_THAN",e.LessThanOrEqual="LESS_THAN_OR_EQUAL",e.GreaterThan="GREATER_THAN",e.GreaterThanOrEqual="GREATER_THAN_OR_EQUAL",e.In="IN",e.NotIn="NOT_IN",e.Like="LIKE",e.CaseInsensitiveLike="ILIKE",e.IsNotNull="IS_NOT_NULL",e.IsNull="IS_NULL",e.LatestPartition="LATEST_PARTITION",e.IsTrue="IS_TRUE",e.IsFalse="IS_FALSE",e.TemporalRange="TEMPORAL_RANGE"}(i||(i={}));const s={[i.Equals]:{display:(0,n.t)("Equal to (=)"),operation:"=="},[i.NotEquals]:{display:(0,n.t)("Not equal to (≠)"),operation:"!="},[i.LessThan]:{display:(0,n.t)("Less than (<)"),operation:"<"},[i.LessThanOrEqual]:{display:(0,n.t)("Less or equal (<=)"),operation:"<="},[i.GreaterThan]:{display:(0,n.t)("Greater than (>)"),operation:">"},[i.GreaterThanOrEqual]:{display:(0,n.t)("Greater or equal (>=)"),operation:">="},[i.In]:{display:(0,n.t)("In"),operation:"IN"},[i.NotIn]:{display:(0,n.t)("Not in"),operation:"NOT IN"},[i.Like]:{display:(0,n.t)("Like"),operation:"LIKE"},[i.CaseInsensitiveLike]:{display:(0,n.t)("Like (case insensitive)"),operation:"ILIKE"},[i.IsNotNull]:{display:(0,n.t)("Is not null"),operation:"IS NOT NULL"},[i.IsNull]:{display:(0,n.t)("Is null"),operation:"IS NULL"},[i.LatestPartition]:{display:(0,n.t)("use latest_partition template"),operation:"LATEST PARTITION"},[i.IsTrue]:{display:(0,n.t)("Is true"),operation:"IS TRUE"},[i.IsFalse]:{display:(0,n.t)("Is false"),operation:"IS FALSE"},[i.TemporalRange]:{display:(0,n.t)("TEMPORAL_RANGE"),operation:"TEMPORAL_RANGE"}},l=Object.values(i),c=(i.Like,i.CaseInsensitiveLike,[i.Equals,i.NotEquals,i.LessThan,i.LessThanOrEqual,i.GreaterThan,i.GreaterThanOrEqual]),d=new Set([i.In,i.NotIn]),u=new Set([i.LatestPartition,i.TemporalRange]),h=[i.IsNotNull,i.IsNull,i.LatestPartition,i.IsTrue,i.IsFalse],p=/^(LONG|DOUBLE|FLOAT)?(SUM|AVG|MAX|MIN|COUNT)\([A-Z0-9_."]*\)$/i,m={time_range:(0,n.t)("Time range"),granularity_sqla:(0,n.t)("Time column"),time_grain_sqla:(0,n.t)("Time grain"),granularity:(0,n.t)("Time granularity")},f={time_range:"__time_range",granularity_sqla:"__time_col",time_grain_sqla:"__time_grain",granularity:"__granularity"},g=240,_=320,y=0,v=new Set(["all_columns","groupby","metrics","percent_metrics","order_by_cols"])},49299:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ADD_QUERY_EDITOR:()=>w,CHANGE_DATA_PREVIEW_ID:()=>fe,CLEAR_DESTROYED_QUERY_EDITOR:()=>Ae,CLEAR_INACTIVE_QUERIES:()=>he,CLEAR_QUERY_RESULTS:()=>pe,CLONE_QUERY_TO_NEW_TAB:()=>O,COLLAPSE_TABLE:()=>M,COST_ESTIMATE_FAILED:()=>ye,COST_ESTIMATE_RETURNED:()=>_e,COST_ESTIMATE_STARTED:()=>ge,CREATE_DATASOURCE_FAILED:()=>Ee,CREATE_DATASOURCE_STARTED:()=>ve,CREATE_DATASOURCE_SUCCESS:()=>be,CtasEnum:()=>Oe,END_QUERY:()=>L,EXPAND_TABLE:()=>F,LOAD_QUERY_EDITOR:()=>te,MERGE_TABLE:()=>x,MIGRATE_QUERY:()=>J,MIGRATE_QUERY_EDITOR:()=>K,MIGRATE_TABLE:()=>X,QUERY_EDITOR_PERSIST_HEIGHT:()=>G,QUERY_EDITOR_SAVED:()=>I,QUERY_EDITOR_SETDB:()=>k,QUERY_EDITOR_SET_AUTORUN:()=>Y,QUERY_EDITOR_SET_CATALOG:()=>q,QUERY_EDITOR_SET_CURSOR_POSITION:()=>B,QUERY_EDITOR_SET_FUNCTION_NAMES:()=>V,QUERY_EDITOR_SET_QUERY_LIMIT:()=>H,QUERY_EDITOR_SET_SCHEMA:()=>z,QUERY_EDITOR_SET_SELECTED_TEXT:()=>Q,QUERY_EDITOR_SET_SQL:()=>$,QUERY_EDITOR_SET_TEMPLATE_PARAMS:()=>j,QUERY_EDITOR_SET_TITLE:()=>U,QUERY_EDITOR_TOGGLE_LEFT_BAR:()=>W,QUERY_FAILED:()=>ue,QUERY_SUCCESS:()=>de,REFRESH_QUERIES:()=>oe,REMOVE_DATA_PREVIEW:()=>me,REMOVE_QUERY:()=>P,REMOVE_QUERY_EDITOR:()=>D,REMOVE_TABLES:()=>N,REQUEST_QUERY_RESULTS:()=>ce,RESET_STATE:()=>C,RUN_QUERY:()=>ie,SET_ACTIVE_QUERY_EDITOR:()=>ee,SET_ACTIVE_SOUTHPANE_TAB:()=>ne,SET_DATABASES:()=>Z,SET_EDITOR_TAB_LAST_UPDATE:()=>Se,SET_LAST_UPDATED_ACTIVE_TAB:()=>Te,SET_TABLES:()=>re,SET_USER_OFFLINE:()=>ae,START_QUERY:()=>se,STOP_QUERY:()=>le,UPDATE_QUERY_EDITOR:()=>R,addDangerToast:()=>Re,addInfoToast:()=>Ce,addNewQueryEditor:()=>ot,addQueryEditor:()=>nt,addSavedQueryToTabState:()=>At,addSuccessToast:()=>we,addTable:()=>Pt,addWarningToast:()=>Ie,changeDataPreviewId:()=>kt,clearDestoryedQueryEditor:()=>mt,clearInactiveQueries:()=>Ye,clearQueryResults:()=>Ve,cloneQueryToNewTab:()=>at,collapseTable:()=>Ut,convertQueryToClient:()=>Pe,convertQueryToServer:()=>Le,createCtasDatasource:()=>er,createDatasource:()=>Zt,createDatasourceFailed:()=>Jt,createDatasourceStarted:()=>Kt,createDatasourceSuccess:()=>Xt,estimateQueryCost:()=>Ue,expandTable:()=>zt,fetchQueryEditor:()=>ut,fetchQueryResults:()=>Ke,formatQuery:()=>Ot,getUpToDateQuery:()=>Fe,loadQueryEditor:()=>ct,logFailedQuery:()=>He,mergeTable:()=>Lt,persistEditorHeight:()=>Ht,popDatasourceQuery:()=>Wt,popPermalink:()=>jt,popQuery:()=>Gt,popSavedQuery:()=>Vt,popStoredQuery:()=>Qt,postStopQuery:()=>et,queryEditorSetAndSaveSql:()=>It,queryEditorSetAutorun:()=>Et,queryEditorSetCatalog:()=>vt,queryEditorSetCursorPosition:()=>Rt,queryEditorSetDb:()=>yt,queryEditorSetQueryLimit:()=>Dt,queryEditorSetSchema:()=>bt,queryEditorSetSelectedText:()=>Nt,queryEditorSetSql:()=>wt,queryEditorSetTemplateParams:()=>xt,queryEditorSetTitle:()=>St,queryFailed:()=>je,querySuccess:()=>Be,reFetchQueryResults:()=>qt,reRunQuery:()=>Ze,refreshQueries:()=>$t,removeAllOtherQueryEditors:()=>gt,removeDataPreview:()=>Ge,removeQuery:()=>_t,removeQueryEditor:()=>ft,removeTables:()=>Yt,requestQueryResults:()=>We,resetState:()=>Me,runQuery:()=>Xe,runQueryFromSqlEditor:()=>Je,runTablePreviewQuery:()=>Ft,saveQuery:()=>Tt,scheduleQuery:()=>ze,setActiveQueryEditor:()=>st,setActiveSouthPaneTab:()=>ht,setDatabases:()=>tt,setEditorTabLastUpdate:()=>qe,setLastUpdatedActiveTab:()=>it,setTables:()=>dt,setUserOffline:()=>Bt,startQuery:()=>$e,stopQuery:()=>Qe,switchQueryEditor:()=>lt,syncQueryEditor:()=>rt,syncTable:()=>Mt,toggleLeftBar:()=>pt,updateQueryEditor:()=>ke,updateSavedQuery:()=>Ct});var n=r(79674),o=r.n(n),a=r(40866),i=r.n(a),s=r(43561),l=r(58561),c=r.n(l),d=r(74098),u=r(79378),h=r(59744),p=r(6987),m=r(99106),f=r(59674),g=r(91412),_=r(50816),y=r(32064),v=r(25875);const b=/^Untitled Query (\d+)$/,E="Untitled Query ",S=(e,t=`${E}1`)=>{const r=(0,d.t)(t);if(e.length>0){const t=e.filter((e=>{var t;return null==(t=e.name)?void 0:t.match(b)})).map((e=>+e.name.replace(E,"")));if(t.length>0){const e=Math.max(...t);return(0,d.t)("%s%s",E,e+1)}return r}return r};var T=r(90681),A=r(28082);const C="RESET_STATE",w="ADD_QUERY_EDITOR",R="UPDATE_QUERY_EDITOR",I="QUERY_EDITOR_SAVED",O="CLONE_QUERY_TO_NEW_TAB",D="REMOVE_QUERY_EDITOR",x="MERGE_TABLE",N="REMOVE_TABLES",L="END_QUERY",P="REMOVE_QUERY",F="EXPAND_TABLE",M="COLLAPSE_TABLE",k="QUERY_EDITOR_SETDB",q="QUERY_EDITOR_SET_CATALOG",z="QUERY_EDITOR_SET_SCHEMA",U="QUERY_EDITOR_SET_TITLE",Y="QUERY_EDITOR_SET_AUTORUN",$="QUERY_EDITOR_SET_SQL",B="QUERY_EDITOR_SET_CURSOR_POSITION",H="QUERY_EDITOR_SET_QUERY_LIMIT",j="QUERY_EDITOR_SET_TEMPLATE_PARAMS",Q="QUERY_EDITOR_SET_SELECTED_TEXT",V="QUERY_EDITOR_SET_FUNCTION_NAMES",G="QUERY_EDITOR_PERSIST_HEIGHT",W="QUERY_EDITOR_TOGGLE_LEFT_BAR",K="MIGRATE_QUERY_EDITOR",X="MIGRATE_TABLE",J="MIGRATE_QUERY",Z="SET_DATABASES",ee="SET_ACTIVE_QUERY_EDITOR",te="LOAD_QUERY_EDITOR",re="SET_TABLES",ne="SET_ACTIVE_SOUTHPANE_TAB",oe="REFRESH_QUERIES",ae="SET_USER_OFFLINE",ie="RUN_QUERY",se="START_QUERY",le="STOP_QUERY",ce="REQUEST_QUERY_RESULTS",de="QUERY_SUCCESS",ue="QUERY_FAILED",he="CLEAR_INACTIVE_QUERIES",pe="CLEAR_QUERY_RESULTS",me="REMOVE_DATA_PREVIEW",fe="CHANGE_DATA_PREVIEW_ID",ge="COST_ESTIMATE_STARTED",_e="COST_ESTIMATE_RETURNED",ye="COST_ESTIMATE_FAILED",ve="CREATE_DATASOURCE_STARTED",be="CREATE_DATASOURCE_SUCCESS",Ee="CREATE_DATASOURCE_FAILED",Se="SET_EDITOR_TAB_LAST_UPDATE",Te="SET_LAST_UPDATED_ACTIVE_TAB",Ae="CLEAR_DESTROYED_QUERY_EDITOR",Ce=g.Zt,we=g.WR,Re=g.iB,Ie=g.Zd,Oe={Table:"TABLE",View:"VIEW"},De=(0,d.t)("The query couldn't be loaded"),xe={id:"remoteId",db_id:"dbId",label:"name",template_parameters:"templateParams"},Ne=e=>t=>o()(t,((t,r)=>r in e?e[r]:r)),Le=Ne(i()(xe)),Pe=Ne(xe);function Fe(e,t,r){const{sqlLab:{unsavedQueryEditor:n,queryEditors:o}}=e,a=null!=r?r:t.id;return{id:a,...o.find((e=>e.id===a)),...a===n.id&&n}}function Me(e){return(t,r)=>{const{common:n}=r(),o=(0,T.A)({...(0,y.Ay)(),common:n,...e});t({type:C,sqlLabInitialState:o.sqlLab}),(0,A.Rm)(t,o)}}function ke(e){return{type:R,alterations:e}}function qe(e){return{type:Se,timestamp:e}}function ze(e){return t=>u.A.post({endpoint:"/api/v1/saved_query/",jsonPayload:e,stringify:!1}).then((()=>t(we((0,d.t)("Your query has been scheduled. To see details of your query, navigate to Saved queries"))))).catch((()=>t(Re((0,d.t)("Your query could not be scheduled")))))}function Ue(e){return(t,r)=>{const{dbId:n,catalog:o,schema:a,sql:i,selectedText:s,templateParams:l}=Fe(r(),e),c={database_id:n,catalog:o,schema:a,sql:s||i,template_params:JSON.parse(l||"{}")};return Promise.all([t({type:ge,query:e}),u.A.post({endpoint:"/api/v1/sqllab/estimate/",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((({json:r})=>t({type:_e,query:e,json:r}))).catch((r=>(0,h.h4)(r).then((r=>{const n=r.error||r.statusText||(0,d.t)("Failed at retrieving results");return t({type:ye,query:e,error:n})}))))])}}function Ye(e){return{type:he,interval:e}}function $e(e,t){return Object.assign(e,{id:e.id?e.id:(0,s.Ak)(11),progress:0,startDttm:(0,f.tB)(),state:e.runAsync?"pending":"running",cached:!1}),{type:se,query:e,runPreviewOnly:t}}function Be(e,t){return{type:de,query:e,results:t}}function He(e,t){return function(r){const n={has_err:!0,start_offset:e.startDttm,ts:(new Date).getTime()};null==t||t.forEach((({error_type:e,message:t,extra:o})=>{var a;const i=(null==o||null==(a=o.issue_codes)?void 0:a.map((({code:e})=>e)))||[-1];r((0,v.logEvent)(_.pi,{...n,error_type:e,issue_codes:i,error_details:t}))}))}}function je(e,t,r,n){return function(o){o(He(e,n)),o({type:ue,query:e,msg:t,link:r,errors:n})}}function Qe(e){return{type:le,query:e}}function Ve(e){return{type:pe,query:e}}function Ge(e){return{type:me,table:e}}function We(e){return{type:ce,query:e}}function Ke(e,t,r){return function(n,o){var a,i;const{SQLLAB_QUERY_RESULT_TIMEOUT:s}=null!=(a=null==(i=o().common)?void 0:i.conf)?a:{};n(We(e));const l=c().encode({key:e.resultsKey,rows:t||null}),p=null!=r?r:s,m=new AbortController;return u.A.get({endpoint:`/api/v1/sqllab/results/?q=${l}`,parseMethod:"json-bigint",...p&&{timeout:p,signal:m.signal}}).then((({json:t})=>n(Be(e,t)))).catch((t=>{m.abort(),(0,h.h4)(t).then((t=>{const r=t.error||t.statusText||(0,d.t)("Failed at retrieving results");return n(je(e,r,t.link,t.errors))}))}))}}function Xe(e,t){return function(r){r($e(e,t));const n={client_id:e.id,database_id:e.dbId,json:!0,runAsync:e.runAsync,catalog:e.catalog,schema:e.schema,sql:e.sql,sql_editor_id:e.sqlEditorId,tab:e.tab,tmp_table_name:e.tempTable,select_as_cta:e.ctas,ctas_method:e.ctas_method,templateParams:e.templateParams,queryLimit:e.queryLimit,expand_data:!0},o=window.location.search||"";return u.A.post({endpoint:`/api/v1/sqllab/execute/${o}`,body:JSON.stringify(n),headers:{"Content-Type":"application/json"},parseMethod:"json-bigint"}).then((({json:t})=>{e.runAsync||r(Be(e,t))})).catch((t=>(0,h.h4)(t).then((t=>{let n=t.error||t.message||t.statusText||(0,d.t)("Unknown error");n.includes("CSRF token")&&(n=(0,d.t)(p.HL.SESSION_TIMED_OUT)),r(je(e,n,t.link,t.errors))}))))}}function Je(e,t,r,n,o,a){return function(i,s){var l;const c=Fe(s(),t,t.id);i(Xe({dbId:c.dbId,sql:c.selectedText||c.sql,sqlEditorId:null!=(l=c.tabViewId)?l:c.id,immutableId:c.immutableId,tab:c.name,catalog:c.catalog,schema:c.schema,tempTable:n,templateParams:c.templateParams,queryLimit:c.queryLimit||r,runAsync:!!e&&e.allow_run_async,ctas:o,ctas_method:a,updateTabState:!c.selectedText}))}}function Ze(e){return function(t){t(Xe({...e,id:(0,s.Ak)(11)}))}}function et(e){return function(t){return u.A.post({endpoint:"/api/v1/query/stop",body:JSON.stringify({client_id:e.id}),headers:{"Content-Type":"application/json"}}).then((()=>t(Qe(e)))).then((()=>t(we((0,d.t)("Query was stopped."))))).catch((()=>t(Re((0,d.t)("Failed to stop query.")))))}}function tt(e){return{type:Z,databases:e}}function rt(e){return function(t,r){const{tables:n,queries:o}=r().sqlLab,a=n.filter((t=>t.inLocalStorage&&t.queryEditorId===e.id)),i=Object.values(o).filter((t=>t.inLocalStorage&&t.sqlEditorId===e.id));return u.A.post({endpoint:"/tabstateview/",postPayload:{queryEditor:e}}).then((({json:r})=>{const n={...e,inLocalStorage:!1,loaded:!0,tabViewId:r.id.toString()};return t({type:K,oldQueryEditor:e,newQueryEditor:n}),Promise.all([...a.map((e=>function(e,t,r){return u.A.post({endpoint:encodeURI("/tableschemaview/"),postPayload:{table:{...e,queryEditorId:t}}}).then((({json:n})=>{const o={...e,id:n.id,queryEditorId:t};return r({type:X,oldTable:e,newTable:o})})).catch((()=>r(Ie((0,d.t)("Unable to migrate table schema state to backend. Superset will retry later. Please contact your administrator if this problem persists.")))))}(e,n.tabViewId,t))),...i.map((e=>function(e,t,r){return u.A.post({endpoint:encodeURI(`/tabstateview/${t}/migrate_query`),postPayload:{queryId:e}}).then((()=>r({type:J,queryId:e,queryEditorId:t}))).catch((()=>r(Ie((0,d.t)("Unable to migrate query state to backend. Superset will retry later. Please contact your administrator if this problem persists.")))))}(e.id,n.tabViewId,t)))])})).catch((()=>t(Ie((0,d.t)("Unable to migrate query editor state to backend. Superset will retry later. Please contact your administrator if this problem persists.")))))}}function nt(e){const t={...e,id:(0,s.Ak)(11),immutableId:(0,s.Ak)(11),loaded:!0,inLocalStorage:!0};return{type:w,queryEditor:t}}function ot(){return function(e,t){const{sqlLab:{queryEditors:r,tabHistory:n,unsavedQueryEditor:o,databases:a},common:i}=t(),s=i.conf.SQLLAB_DEFAULT_DBID,l=r.find((e=>e.id===n[n.length-1])),c=Object.values(a).map((e=>e.id)),u=c.length>0?Math.min(...c):void 0,{dbId:h,catalog:p,schema:f,queryLimit:g,autorun:_}={...r[0],...l,...o.id===(null==l?void 0:l.id)&&o},y=(0,m.G7)(m.TO.SqllabBackendPersistence)?"":(0,d.t)("-- Note: Unless you save your query, these tabs will NOT persist if you clear your cookies or change browsers.\n\n"),v=S((null==r?void 0:r.map((e=>({...e,...e.id===o.id&&o}))))||[]);return e(nt({dbId:h||s||u,catalog:null!=p?p:null,schema:null!=f?f:null,autorun:null!=_&&_,sql:`${y}SELECT ...`,queryLimit:g||i.conf.DEFAULT_SQLLAB_LIMIT,name:v}))}}function at(e,t){return function(r,n){const o=n(),{queryEditors:a,unsavedQueryEditor:i,tabHistory:s}=o.sqlLab,l={...a.find((e=>e.id===s[s.length-1])),...s[s.length-1]===i.id&&i};return r(nt({name:(0,d.t)("Copy of %s",l.name),dbId:e.dbId?e.dbId:null,catalog:e.catalog?e.catalog:null,schema:e.schema?e.schema:null,autorun:t,sql:e.sql,queryLimit:l.queryLimit,maxRow:l.maxRow,templateParams:l.templateParams}))}}function it(e){return{type:Te,queryEditorId:e}}function st(e){return{type:ee,queryEditor:e}}function lt(e=!1){return function(t,r){const{sqlLab:n}=r(),{queryEditors:o,tabHistory:a}=n,i=a[a.length-1],s=o.findIndex((e=>e.id===i));t(st(o[(e?s-1+o.length:s+1)%o.length]))}}function ct(e){return{type:te,queryEditor:e}}function dt(e){const t=e.filter((e=>null!==e.description)).map((e=>{const{columns:t,selectStar:r,primaryKey:n,foreignKeys:o,indexes:a,dataPreviewQueryId:i}=e.description;return{dbId:e.database_id,queryEditorId:e.tab_state_id.toString(),catalog:e.catalog,schema:e.schema,name:e.table,expanded:e.expanded,id:e.id,dataPreviewQueryId:i,columns:t,selectStar:r,primaryKey:n,foreignKeys:o,indexes:a,isMetadataLoading:!1,isExtraMetadataLoading:!1}}));return{type:re,tables:t}}function ut(e,t){return function(r){var n;const o=null!=(n=e.tabViewId)?n:e.id;u.A.get({endpoint:encodeURI(`/tabstateview/${o}`)}).then((({json:e})=>{var n,o;const a={id:e.id.toString(),loaded:!0,name:e.label,sql:e.sql,selectedText:null,latestQueryId:null==(n=e.latest_query)?void 0:n.id,autorun:e.autorun,dbId:e.database_id,templateParams:e.template_params,catalog:e.catalog,schema:e.schema,queryLimit:e.query_limit,remoteId:null==(o=e.saved_query)?void 0:o.id,hideLeftBar:e.hide_left_bar};r(ct(a)),r(dt(e.table_schemas||[])),e.latest_query&&e.latest_query.resultsKey&&r(Ke(e.latest_query,t))})).catch((t=>404!==t.status?r(Re((0,d.t)("An error occurred while fetching tab state"))):r({type:D,queryEditor:e})))}}function ht(e){return{type:ne,tabId:e}}function pt(e){const t=!e.hideLeftBar;return{type:W,queryEditor:e,hideLeftBar:t}}function mt(e){return{type:Ae,queryEditorId:e}}function ft(e){return{type:D,queryEditor:e}}function gt(e){return function(t,r){var n;const{sqlLab:o}=r();null==(n=o.queryEditors)||n.forEach((r=>{r.id!==e.id&&t(ft(r))}))}}function _t(e){return function(t){var r;const n=null!=(r=e.sqlEditorId)?r:e.id;return((0,m.G7)(m.TO.SqllabBackendPersistence)?u.A.delete({endpoint:encodeURI(`/tabstateview/${n}/query/${e.id}`)}):Promise.resolve()).then((()=>t({type:P,query:e}))).catch((()=>t(Re((0,d.t)("An error occurred while removing query. Please contact your administrator.")))))}}function yt(e,t){return{type:k,queryEditor:e,dbId:t}}function vt(e,t){return{type:q,queryEditor:e||{},catalog:t}}function bt(e,t){return{type:z,queryEditor:e||{},schema:t}}function Et(e,t){return{type:Y,queryEditor:e,autorun:t}}function St(e,t,r){return{type:U,queryEditor:{...e,id:r},name:t}}function Tt(e,t){const{id:r,...n}=Le(e);return r=>u.A.post({endpoint:"/api/v1/saved_query/",jsonPayload:Le(n)}).then((n=>{const o=Pe({id:n.json.id,...n.json.result});return r({type:I,query:e,clientId:t,result:o}),r(St(e,e.name,t)),o})).catch((()=>r(Re((0,d.t)("Your query could not be saved")))))}const At=(e,t)=>r=>{var n;const o=null!=(n=e.tabViewId)?n:e.id;return((0,m.G7)(m.TO.SqllabBackendPersistence)?u.A.put({endpoint:`/tabstateview/${o}`,postPayload:{saved_query_id:t.remoteId}}):Promise.resolve()).catch((()=>{r(Re((0,d.t)("Your query was not properly saved")))})).then((()=>{r(we((0,d.t)("Your query was saved")))}))};function Ct(e,t){const{id:r,...n}=Le(e);return r=>u.A.put({endpoint:`/api/v1/saved_query/${e.remoteId}`,jsonPayload:Le(n)}).then((()=>{r(we((0,d.t)("Your query was updated"))),r(St(e,e.name,t))})).catch((e=>{const t=(0,d.t)("Your query could not be updated");console.error(t,e),r(Re(t))})).then((()=>r(ke(e))))}function wt(e,t,r){return{type:$,queryEditor:e,sql:t,queryId:r}}function Rt(e,t){return{type:B,queryEditor:e,position:t}}function It(e,t,r){return function(n,o){var a;const i=Fe(o(),e);n(wt(i,t,r));const s=null!=(a=i.tabViewId)?a:i.id;return(0,m.G7)(m.TO.SqllabBackendPersistence)?u.A.put({endpoint:encodeURI(`/tabstateview/${s}`),postPayload:{sql:t,latest_query_id:r}}).catch((()=>n(Re((0,d.t)('An error occurred while storing your query in the backend. To avoid losing your changes, please save your query using the "Save Query" button.'))))):Promise.resolve()}}function Ot(e){return function(t,r){const{sql:n}=Fe(r(),e);return u.A.post({endpoint:"/api/v1/sqllab/format_sql/",body:JSON.stringify({sql:n}),headers:{"Content-Type":"application/json"}}).then((({json:r})=>{t(wt(e,r.result))}))}}function Dt(e,t){return{type:H,queryEditor:e,queryLimit:t}}function xt(e,t){return{type:j,queryEditor:e,templateParams:t}}function Nt(e,t){return{type:Q,queryEditor:e,sql:t}}function Lt(e,t,r){return{type:x,table:e,query:t,prepend:r}}function Pt(e,t,r,n,o=!0){return function(a,i){var l;const{dbId:c}=Fe(i(),e,e.id);a(Lt({dbId:c,queryEditorId:null!=(l=e.tabViewId)?l:e.id,catalog:r,schema:n,name:t,id:(0,s.Ak)(11),expanded:o}))}}function Ft(e,t){return function(r,n){const{sqlLab:{databases:o}}=n(),a=o[e.dbId],{dbId:i,catalog:l,schema:c}=e;if(a&&!a.disable_data_preview){var d;const n={id:null!=(d=e.previewQueryId)?d:(0,s.Ak)(11),dbId:i,catalog:l,schema:c,sql:e.selectStar,tableName:e.name,sqlEditorId:null,tab:"",runAsync:a.allow_run_async,ctas:!1,isDataPreview:!0};return t?r(Xe(n,t)):Promise.all([r(Lt({id:e.id,dbId:e.dbId,catalog:e.catalog,schema:e.schema,name:e.name,queryEditorId:e.queryEditorId,dataPreviewQueryId:n.id},n)),r(Xe(n))])}return Promise.resolve()}}function Mt(e,t,r){return function(n){const o={...e,queryEditorId:r};return((0,m.G7)(m.TO.SqllabBackendPersistence)?u.A.post({endpoint:encodeURI("/tableschemaview/"),postPayload:{table:{...t,...o}}}):Promise.resolve({json:{id:e.id}})).then((({json:t})=>{const r={...e,id:`${t.id}`};n(Lt({...r,expanded:!0,initialized:!0}))})).catch((()=>n(Re((0,d.t)("An error occurred while fetching table metadata. Please contact your administrator.")))))}}function kt(e,t){return{type:fe,oldQueryId:e,newQuery:t}}function qt(e){return function(t){const r={id:(0,s.Ak)(),dbId:e.dbId,sql:e.sql,tableName:e.tableName,sqlEditorId:null,tab:"",runAsync:!1,ctas:!1,queryLimit:e.queryLimit,isDataPreview:e.isDataPreview};t(Xe(r)),t(kt(e.id,r))}}function zt(e){return function(t){return((0,m.G7)(m.TO.SqllabBackendPersistence)?u.A.post({endpoint:encodeURI(`/tableschemaview/${e.id}/expanded`),postPayload:{expanded:!0}}):Promise.resolve()).then((()=>t({type:F,table:e}))).catch((()=>t(Re((0,d.t)("An error occurred while expanding the table schema. Please contact your administrator.")))))}}function Ut(e){return function(t){return((0,m.G7)(m.TO.SqllabBackendPersistence)?u.A.post({endpoint:encodeURI(`/tableschemaview/${e.id}/expanded`),postPayload:{expanded:!1}}):Promise.resolve()).then((()=>t({type:M,table:e}))).catch((()=>t(Re((0,d.t)("An error occurred while collapsing the table schema. Please contact your administrator.")))))}}function Yt(e){return function(t){var r;const n=null!=(r=null==e?void 0:e.filter(Boolean))?r:[];return((0,m.G7)(m.TO.SqllabBackendPersistence)?Promise.all(n.map((e=>e.initialized?u.A.delete({endpoint:encodeURI(`/tableschemaview/${e.id}`)}):Promise.resolve()))):Promise.resolve()).then((()=>t({type:N,tables:n}))).catch((()=>t(Re((0,d.t)("An error occurred while removing the table schema. Please contact your administrator.")))))}}function $t(e){return{type:oe,alteredQueries:e}}function Bt(e){return{type:ae,offline:e}}function Ht(e,t,r){return{type:G,queryEditor:e,northPercent:t,southPercent:r}}function jt(e){return function(t){return u.A.get({endpoint:`/api/v1/sqllab/permalink/${e}`}).then((({json:e})=>t(nt({name:e.name?e.name:(0,d.t)("Shared query"),dbId:e.dbId?parseInt(e.dbId,10):null,catalog:e.catalog?e.catalog:null,schema:e.schema?e.schema:null,autorun:!!e.autorun&&e.autorun,sql:e.sql?e.sql:"SELECT ...",templateParams:e.templateParams})))).catch((()=>t(Re(De))))}}function Qt(e){return function(t){return u.A.get({endpoint:`/api/v1/sqllab/permalink/kv:${e}`}).then((({json:e})=>t(nt({name:e.name?e.name:(0,d.t)("Shared query"),dbId:e.dbId?parseInt(e.dbId,10):null,catalog:e.catalog?e.catalog:null,schema:e.schema?e.schema:null,autorun:!!e.autorun&&e.autorun,sql:e.sql?e.sql:"SELECT ...",templateParams:e.templateParams})))).catch((()=>t(Re(De))))}}function Vt(e){return function(t){return u.A.get({endpoint:`/api/v1/saved_query/${e}`}).then((({json:e})=>{const r={...Pe(e.result),loaded:!0,autorun:!1},n={name:r.name,dbId:r.database.id,catalog:r.catalog,schema:r.schema,sql:r.sql,templateParams:r.templateParams,remoteId:r.remoteId};return t(nt(n))})).catch((()=>t(Re(De))))}}function Gt(e){return function(t){return u.A.get({endpoint:`/api/v1/query/${e}`}).then((({json:e})=>{const r=e.result,n={dbId:r.database.id,catalog:r.catalog,schema:r.schema,sql:r.sql,name:(0,d.t)("Copy of %s",r.tab_name),autorun:!1};return t(nt(n))})).catch((()=>t(Re(De))))}}function Wt(e,t){return function(r){const n=(0,d.t)("Query"),o=e.split("__")[0],a=c().encode({keys:["none"],columns:["name","schema","database.id","select_star"]});return u.A.get({endpoint:`/api/v1/dataset/${o}?q=${a}`}).then((({json:e})=>r(nt({name:`${n} ${e.result.name}`,dbId:e.result.database.id,schema:e.result.schema,autorun:void 0!==t,sql:t||e.result.select_star})))).catch((()=>r(Re((0,d.t)("The datasource couldn't be loaded")))))}}function Kt(){return{type:ve}}function Xt(e){const t=`${e.id}__table`;return{type:be,datasource:t}}function Jt(e){return{type:Ee,err:e}}function Zt(e){return t=>{t(Kt());const{dbId:r,catalog:n,schema:o,datasourceName:a,sql:i,templateParams:s}=e;return u.A.post({endpoint:"/api/v1/dataset/",headers:{"Content-Type":"application/json"},body:JSON.stringify({database:r,catalog:n,schema:o,sql:i,table_name:a,is_managed_externally:!1,external_url:null,template_params:s})}).then((({json:e})=>(t(Xt(e)),Promise.resolve(e)))).catch((e=>((0,h.h4)(e).then((e=>{t(Re(e.error))})),t(Jt((0,d.t)("An error occurred while creating the data source"))),Promise.reject())))}}function er(e){return t=>(t(Kt()),u.A.post({endpoint:"/api/v1/dataset/get_or_create/",jsonPayload:e}).then((({json:e})=>(t(Xt(e.result)),e.result))).catch((()=>{const e=(0,d.t)("An error occurred while creating the data source");return t(Jt(e)),Promise.reject(new Error(e))})))}},49965:(e,t,r)=>{"use strict";r.d(t,{A:()=>T});var n=r(63375),o=r.n(n),a=r(2404),i=r.n(a),s=r(38221),l=r.n(s),c=r(2445),d=r(96540),u=r(74098),h=r(67413),p=r(90924),m=r(59744),f=r(8558),g=r(23575),_=r(28392),y=r(7466),v=r(99183),b=r(5032);const E=({error:e})=>(0,c.FD)(v._A,{children:[(0,c.Y)(f.F.ExclamationCircleOutlined,{})," ",(0,c.Y)(v.jQ,{children:e})]}),S=(e,t,r)=>`${e};${t};${r}`,T=(0,d.forwardRef)((({allowClear:e,allowNewOptions:t=!1,ariaLabel:r,autoClearSearchValue:n=!1,fetchOnlyOnSearch:a,filterOption:s=!0,header:f=null,headerPosition:T="top",helperText:A,invertSelection:C=!1,lazyLoading:w=!0,loading:R,mode:I="single",name:O,notFoundContent:D,onBlur:x,onError:N,onChange:L,onClear:P,onOpenChange:F,onDeselect:M,onSearch:k,onSelect:q,optionFilterProps:z=["label","value"],options:U,pageSize:Y=b.yQ,placeholder:$=(0,u.t)("Select ..."),showSearch:B=!0,sortComparator:H=b.Ou,tokenSeparators:j=b.hR,value:Q,getPopupContainer:V,oneLine:G,maxTagCount:W,...K},X)=>{const J="single"===I,[Z,ee]=(0,d.useState)(Q),[te,re]=(0,d.useState)(""),[ne,oe]=(0,d.useState)(R),[ae,ie]=(0,d.useState)(""),[se,le]=(0,d.useState)(!1),[ce,de]=(0,d.useState)(0),[ue,he]=(0,d.useState)(0),[pe,me]=(0,d.useState)(!w),[fe,ge]=(0,d.useState)(!1),_e=(0,d.useRef)(Z),ye=(0,d.useRef)(new Map),ve=J?void 0:"multiple",be=!a||te,[Ee,Se]=(0,d.useState)(null!=W?W:b.GB),[Te,Ae]=(0,d.useState)(0),Ce=(0,h.Z)(Te,0),we=(0,d.useCallback)((()=>Ae(Te+1)),[Te]);(0,d.useEffect)((()=>{G&&Se(se?0:1)}),[se,G]),(0,d.useEffect)((()=>{_e.current=Z}),[Z]);const Re=(0,d.useCallback)(((e,t)=>(0,y.SZ)(e,t,_e.current)),[]),Ie=(0,d.useCallback)(((e,t)=>(0,y.P9)(e,t,te,Re,H)),[te,H,Re]),Oe=(0,d.useCallback)(((e,t)=>(0,y.N3)(e,t,Re,H)),[H,Re]),[De,xe]=(0,d.useState)(b.X_),Ne=(0,d.useMemo)((()=>{const e=(0,p.A)(Z).filter((e=>!(0,y.Kz)((0,y._W)(e),De))).map((e=>(0,y.pK)(e)?{value:e.value,label:e.label}:{value:e,label:String(e)}));return e.length>0?e.concat(De):De}),[De,Z]),Le=(0,d.useCallback)((e=>(0,m.h4)(e).then((e=>{const{error:t}=e;ie(t),N&&N(t)}))),[N]),Pe=(0,d.useCallback)((e=>{let t=[];if(e&&Array.isArray(e)&&e.length){const r=new Set(e.map((e=>e.value)));xe((n=>(t=n.filter((e=>!r.has(e.value))).concat(e).sort(Oe),t)))}return t}),[Oe]),Fe=(0,d.useMemo)((()=>(e,t)=>{if(de(t),fe)return void oe(!1);const r=S(e,t,Y),n=ye.current.get(r);if(void 0!==n)return he(n),void oe(!1);oe(!0),U(e,t,Y).then((({data:t,totalCount:n})=>{const o=Pe(t);ye.current.set(r,n),he(n),!a&&""===e&&o.length>=n&&ge(!0)})).catch(Le).finally((()=>{oe(!1)}))}),[fe,a,Pe,Le,U,Y]),Me=(0,d.useMemo)((()=>l()(Fe,g.Y.SLOW_DEBOUNCE)),[Fe]),ke=l()((e=>{const r=e.trim();if(t){const e=r&&!(0,y.Kz)(r,Ne,!0)&&{label:r,value:r,isNewOption:!0},t=Ne.filter((e=>!e.isNewOption||(0,y.Kz)(e.value,Z))),n=e?[e,...t]:t;xe(n)}fe||!pe||ye.current.has(S(r,0,Y))||oe(!(a&&!r)),re(e),null==k||k(r)}),g.Y.FAST_DEBOUNCE);(0,d.useEffect)((()=>()=>ke.cancel()),[ke]),(0,d.useEffect)((()=>{if(Te!==Ce){const e=(0,p.A)(Z),t=new Set(e.map(y._W)),r=(0,y.tS)(Ne.filter((e=>t.has(e.value))));J?null==L||L(Z,r[0]):null==L||L(e,r)}}),[Ne,J,L,Te,Ce,Z]),(0,d.useEffect)((()=>{ye.current.clear(),ge(!1),xe(b.X_)}),[U]),(0,d.useEffect)((()=>{ee(Q)}),[Q]),(0,d.useEffect)((()=>()=>{Me.cancel()}),[Me]),(0,d.useEffect)((()=>{pe&&be&&(te?Me(te,0):Fe("",0))}),[pe,Fe,be,te,Me]),(0,d.useEffect)((()=>{void 0!==R&&R!==ne&&oe(R)}),[ne,R]);const qe=()=>ye.current.clear();(0,d.useImperativeHandle)(X,(()=>({...X.current,clearCache:qe})),[X]);const ze=(0,d.useCallback)((async e=>{let r=(0,y.om)(e,Ne,!0);if(!r&&!fe){const t=U;r=await t(e,0,Y).then((({data:t})=>t.find((t=>t.label===e))))}if(!r&&!t)return;const n={label:e,value:e};return r&&(n.label=(0,y.Gv)(r)?r.label:r,n.value=(0,y.Gv)(r)?r.value:r),n}),[fe,t,Ne,U,Y]);return(0,c.FD)(v.rf,{headerPosition:T,children:[f&&(0,c.Y)(v.h9,{headerPosition:T,children:f}),(0,c.Y)(v.Iu,{allowClear:!ne&&e,"aria-label":J&&(0,y.pK)(Z)&&"string"==typeof Z.label?`${r||O}: ${Z.label}`:r||O,autoClearSearchValue:n,popupRender:e=>(0,y.gd)(e,se,ne,Ne.length,A,ae?(0,c.Y)(E,{error:ae}):void 0),filterOption:(e,t)=>(0,y.qY)(e,t,z,s),filterSort:Ie,getPopupContainer:V||(e=>e.parentNode),headerPosition:T,labelInValue:!0,maxTagCount:Ee,mode:ve,notFoundContent:ne?(0,u.t)("Loading..."):D,onBlur:e=>{re(""),null==x||x(e)},onDeselect:(e,t)=>{Array.isArray(Z)&&((0,y.pK)(e)?ee(Z.filter((t=>t.value!==e.value))):ee(Z.filter((t=>t!==e))),t.isNewOption&&xe(Ne.filter((t=>(0,y._W)(t.value)!==(0,y._W)(e))))),we(),null==M||M(e,t)},onOpenChange:e=>{if(le(e),pe!==e&&me(e),!e&&ne&&setTimeout((()=>{oe(!1)}),250),e&&!te&&De.length>1){const e=De.slice().sort(Oe);i()(e,De)||xe(e)}F&&F(e)},onPaste:async e=>{const t=e.clipboardData.getData("text");if(J){const e=await ze(t);e&&ee(e)}else{const e=j.find((e=>t.includes(e))),r=e?o()(t.split(e)):[t],n=(await Promise.all(r.map((e=>ze(e))))).filter((e=>void 0!==e));ee((e=>[...e||[],...n.filter((t=>!(0,y.Kz)(t.value,e)))]))}we()},onPopupScroll:e=>{const t=e.currentTarget,r=t.scrollTop>.7*(t.scrollHeight-t.offsetHeight);!ne&&ce*Y+Y<ue&&r&&Fe(te,ce+1)},onSearch:B?ke:void 0,onSelect:(e,t)=>{if(J){const t=!(0,y.n4)(e,Z,"value");ee(e),t&&we()}else ee((t=>{const r=(0,p.A)(t),n=(0,y._W)(e);if(!(0,y.Kz)(n,r)){const t=[...r,e];return(0,y.pK)(e),t}return t})),we();null==q||q(e,t)},onClear:()=>{ee(void 0),P&&P(),we()},options:Ne,optionRender:e=>(0,c.Y)(_.A,{children:e.label||e.value}),placeholder:$,showSearch:!!t||B,tokenSeparators:j,value:Z,suffixIcon:(0,y.Jp)(ne,B,se),menuItemSelectedIcon:C?(0,c.Y)(v.UX,{iconSize:"m","aria-label":"stop"}):(0,c.Y)(v.EL,{iconSize:"m","aria-label":"check"}),oneLine:G,...K,ref:X})]})}))},50290:(e,t,r)=>{"use strict";r.d(t,{jf:()=>o.C,Sx:()=>g,lJ:()=>m.lJ,lG:()=>m.lG,NP:()=>o.a,An:()=>u.A,AH:()=>h.AH,fK:()=>_,st:()=>y.st,ny:()=>y.ny,Mw:()=>y.Mw,Y:()=>h.Y,i7:()=>h.i7,I4:()=>b,TT:()=>T,w4:()=>S,vP:()=>E,DP:()=>v,eP:()=>y.eP,SL:()=>o.b});var n=r(71479),o=r(98837),a=r(63950),i=r.n(a),s=r(2445),l=r(96540),c=r(5131),d=r(20867),u=r(51893),h=r(17437);const p=()=>{const e=(0,o.u)();return(0,s.Y)(h.mL,{styles:(0,h.AH)("html,body,#app{height:100%;}body{background-color:",e.colorBgBase,";color:",e.colorText,";-webkit-font-smoothing:antialiased;margin:0;font-family:",e.fontFamily,";}a{color:",e.colorLink,";}h1,h2,h3,h4,h5,h6,strong,th{font-weight:",e.fontWeightStrong,";}.echarts-tooltip[style*='visibility: hidden']{display:none!important;}.no-wrap{white-space:nowrap;}.column-config-popover{& .ant-input-number{width:100%;}&& .btn-group svg{line-height:0;top:0;}& .btn-group>.btn{padding:5px 10px 6px;}}#app{flex:1 1 auto;position:relative;display:flex;flex-direction:column;height:100%;}[role='button']{cursor:pointer;}","")},`global-${e.colorLink}`)};var m=r(53118),f=r(12930);class g{constructor({config:e}){this.theme=void 0,this.antdConfig=void 0,this.SupersetThemeProvider=this.SupersetThemeProvider.bind(this);const t=e?{...e}:{};t.token={...g.defaultTokens,...(null==e?void 0:e.token)||{}},this.setConfig(t)}static fromConfig(e){return new g({config:e})}static getFilteredAntdTheme(e){const t=g.getAntdTokens(e);return Object.fromEntries(m.CV.map((e=>[e,t[e]])))}static getAntdTokens(e){return c.A.getDesignToken(e)}setConfig(e){const t=(0,f.Zn)(e);t.token={...g.defaultTokens,...t.token||{}};const r=g.getFilteredAntdTheme(t);this.antdConfig=t,this.theme={...g.defaultTokens,...t.token,...r},this.updateProviders(this.theme,this.antdConfig,(0,u.A)({key:"superset"}))}toSerializedConfig(){return(0,f.gN)(this.antdConfig)}toggleDarkMode(e){const t={...this.antdConfig},r=e?c.A.darkAlgorithm:c.A.defaultAlgorithm;if(Array.isArray(t.algorithm)){const e=t.algorithm.filter((e=>e!==c.A.darkAlgorithm&&e!==c.A.defaultAlgorithm));t.algorithm=[r,...e]}else t.algorithm=r;this.setConfig(t)}json(){return JSON.stringify((0,f.gN)(this.antdConfig),null,2)}updateProviders(e,t,r){i()(e,t,r)}SupersetThemeProvider({children:e}){if(!this.theme||!this.antdConfig)throw new Error("Theme is not initialized.");const[t,r]=l.useState({theme:this.theme,antdConfig:this.antdConfig,emotionCache:(0,u.A)({key:"superset"})});return this.updateProviders=(e,t,n)=>{r({theme:e,antdConfig:t,emotionCache:n})},(0,s.Y)(o.C,{value:t.emotionCache,children:(0,s.FD)(o.a,{theme:t.theme,children:[(0,s.Y)(p,{}),(0,s.Y)(d.Ay,{theme:t.antdConfig,children:e})]})})}}g.defaultTokens={brandLogoAlt:"Apache Superset",brandLogoUrl:"/static/assets/images/superset-logo-horiz.png",brandLogoMargin:"18px",brandLogoHref:"/",brandLogoHeight:"24px",colorPrimary:"#2893B3",colorLink:"#2893B3",colorError:"#e04355",colorWarning:"#fcc700",colorSuccess:"#5ac189",colorInfo:"#66bcfe",fontFamily:"'Inter', Helvetica, Arial",fontFamilyCode:"'Fira Code', 'Courier New', monospace",transitionTiming:.3,brandIconMaxWidth:37,fontSizeXS:"8",fontSizeXXL:"28",fontWeightNormal:"400",fontWeightLight:"300",fontWeightStrong:500};const _={superset:{token:{colorBgElevated:"#fafafa"}},supersetDark:{token:{},algorithm:m.lJ.DARK},supersetCompact:{token:{},algorithm:m.lJ.COMPACT},funky:{token:{colorPrimary:"#f759ab",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#40a9ff",borderRadius:12,fontFamily:"Comic Sans MS, cursive"},algorithm:m.lJ.DEFAULT},funkyDark:{token:{colorPrimary:"#f759ab",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#40a9ff",borderRadius:12,fontFamily:"Comic Sans MS, cursive"},algorithm:m.lJ.DARK}};var y=r(54603);function v(){const e=(0,o.u)();if(0===Object.keys(e).length&&e.constructor===Object)throw new Error("useTheme() could not find a ThemeContext. The <ThemeProvider/> component is likely missing from the app.");return e}const b=n.A,E=g.fromConfig({algorithm:m.lJ.DEFAULT}),{theme:S}=E,T=S},50659:(e,t,r)=>{"use strict";r.d(t,{Q:()=>_,V:()=>p});var n=r(2404),o=r.n(n),a=r(2445),i=r(96540),s=r(50290),l=r(32885),c=r(25936),d=r(60227),u=r(18009);const h=()=>{};var p;!function(e){e.Default="Default",e.Small="Small"}(p||(p={}));const m=s.I4.div`
  margin: ${({theme:e})=>40*e.sizeUnit}px 0;
`,f=s.I4.div`
  ${({scrollTable:e,theme:t})=>e&&`\n    flex: 1 1 auto;\n    margin-bottom: ${4*t.sizeUnit}px;\n    overflow: auto;\n  `}
  color: ${({theme:e})=>e.colorText};

  .table-row {
    ${({theme:e,small:t})=>!t&&`height: ${11*e.sizeUnit-1}px;`}

    .table-cell {
      ${({theme:e,small:t})=>t&&`\n        padding-top: ${e.sizeUnit+1}px;\n        padding-bottom: ${e.sizeUnit+1}px;\n        line-height: 1.45;\n      `}
    }
  }

  th[role='columnheader'] {
    z-index: 1;
    border-bottom: ${({theme:e})=>`${e.sizeUnit-2}px solid ${e.colorSplit}`};
    ${({small:e})=>e&&"padding-bottom: 0;"}
  }
`,g=({columns:e,data:t,pageSize:r,totalCount:n=t.length,initialPageIndex:s,initialSortBy:g=[],loading:_=!1,withPagination:y=!0,emptyWrapperType:v=p.Default,noDataText:b,showRowCount:E=!0,serverPagination:S=!1,columnsForWrapText:T,onServerPagination:A=h,scrollTopOnPagination:C=!0,size:w=u.QS.Middle,...R})=>{const I=(0,i.useRef)(null),O=(0,i.useMemo)((()=>({pageSize:null!=r?r:10,pageIndex:null!=s?s:0,sortBy:g})),[r,s,g]),{getTableProps:D,getTableBodyProps:x,headerGroups:N,page:L,rows:P,prepareRow:F,gotoPage:M,setSortBy:k,state:{pageIndex:q,sortBy:z}}=(0,l.useTable)({columns:e,data:t,initialState:O,manualPagination:S,manualSortBy:S,pageCount:S?Math.ceil(n/O.pageSize):void 0,autoResetSortBy:!1},l.useFilters,l.useSortBy,...y?[l.usePagination]:[]),U=(0,i.useMemo)((()=>{switch(v){case p.Small:return({children:e})=>(0,a.Y)(a.FK,{children:e});case p.Default:default:return({children:e})=>(0,a.Y)(m,{children:e})}}),[v]),Y=(0,i.useMemo)((()=>y?L:P),[y,L,P]),$=(0,i.useMemo)((()=>!_&&0===Y.length),[_,Y.length]),B=(0,i.useCallback)((()=>{C&&(null!=I&&I.current&&("function"==typeof I.current.scrollTo?I.current.scrollTo({top:0,behavior:"smooth"}):"function"==typeof I.current.scroll&&I.current.scroll(0,0)),"undefined"!=typeof window&&window.scrollTo&&window.scrollTo({top:0,behavior:"smooth"}))}),[C]),H=(0,i.useCallback)((e=>{C&&B(),M(e)}),[C,B,M]),j=(0,i.useMemo)((()=>y?S?{pageIndex:q,pageSize:null!=r?r:10,totalCount:n,onPageChange:H}:{pageIndex:q,pageSize:null!=r?r:10,totalCount:t.length,onPageChange:H}:{pageIndex:0,pageSize:t.length,totalCount:0,onPageChange:void 0}),[y,S,q,r,n,t.length,H]);return(0,i.useEffect)((()=>{S&&q!==O.pageIndex&&A({pageIndex:q})}),[O.pageIndex,A,q,S]),(0,i.useEffect)((()=>{S&&!o()(z,O.sortBy)&&A({pageIndex:0,sortBy:z})}),[O.sortBy,A,S,z]),(0,a.FD)(f,{...R,ref:I,children:[(0,a.Y)(d.A,{getTableProps:D,getTableBodyProps:x,prepareRow:F,headerGroups:N,rows:Y,columns:e,loading:_,setSortBy:k,size:w,columnsForWrapText:T,isPaginationSticky:R.isPaginationSticky,showRowCount:E,...j}),$&&(0,a.Y)(U,{children:b?(0,a.Y)(c.S,{image:c.S.PRESENTED_IMAGE_SIMPLE,description:b}):(0,a.Y)(c.S,{image:c.S.PRESENTED_IMAGE_SIMPLE})})]})},_=(0,i.memo)(g)},50669:(e,t,r)=>{"use strict";r.d(t,{lQ:()=>d});var n=r(2445),o=r(96540),a=r(66875),i=r(80346),s=r(50290),l=r(54603),c={name:"eq7tha",styles:"width:100%;height:100%;.ag-cell{-webkit-font-smoothing:antialiased;}"};const d=(0,o.forwardRef)((function({themeOverrides:e,...t},r){const d=(0,s.DP)(),u=(0,l.eP)(),h=(0,o.useMemo)((()=>{const t=null==d?void 0:d.colorFillQuaternary,r=u?i.zl0.withPart(i.T8J):i.zl0.withPart(i.vXQ),n={backgroundColor:"transparent",foregroundColor:d.colorText,browserColorScheme:u?"dark":"light",headerBackgroundColor:d.colorFillTertiary,headerTextColor:d.colorTextHeading,oddRowBackgroundColor:t,rowHoverColor:d.colorFillSecondary,selectedRowBackgroundColor:d.colorPrimaryBg,cellTextColor:d.colorText,borderColor:d.colorSplit,columnBorderColor:d.colorSplit,accentColor:d.colorPrimary,rangeSelectionBorderColor:d.colorPrimary,rangeSelectionBackgroundColor:d.colorPrimaryBg,inputBackgroundColor:d.colorBgContainer,inputBorderColor:d.colorSplit,inputTextColor:d.colorText,inputPlaceholderTextColor:d.colorTextPlaceholder,fontFamily:d.fontFamily,fontSize:d.fontSizeSM,spacing:d.sizeUnit};if(!d||!d.colorBgBase)return r;const o=e?{...n,...e}:n;return r.withParams(o)}),[d,u,e]);return(0,n.Y)("div",{css:c,"data-themed-ag-grid":"true",children:(0,n.Y)(a.W6,{ref:r,theme:h,...t})})}))},50816:(e,t,r)=>{"use strict";r.d(t,{AI:()=>G,AP:()=>H,A_:()=>q,C7:()=>R,CY:()=>K,Ek:()=>z,FA:()=>l,FO:()=>d,GM:()=>j,HH:()=>A,HK:()=>s,Lb:()=>B,Mr:()=>Y,Ob:()=>Q,PN:()=>w,PV:()=>W,R2:()=>E,Ro:()=>M,U7:()=>u,Vy:()=>J,XC:()=>U,Xj:()=>a,YC:()=>X,ar:()=>b,bD:()=>P,c1:()=>_,ci:()=>y,cm:()=>C,es:()=>i,fL:()=>$,ft:()=>V,g$:()=>k,gi:()=>F,hK:()=>N,hl:()=>p,k8:()=>D,ky:()=>c,oA:()=>S,oW:()=>h,pi:()=>L,q0:()=>v,r2:()=>f,tE:()=>o,tO:()=>n,tw:()=>m,v2:()=>x,v6:()=>T,vp:()=>O,wc:()=>g,xb:()=>I});const n="load_chart",o="render_chart",a="hide_browser_tab",i="mount_dashboard",s="mount_explorer",l="select_dashboard_tab",c="force_refresh_chart",d="change_explore_controls",u="toggle_edit_dashboard",h="force_refresh_dashboard",p="periodic_render_dashboard",m="explore_dashboard_chart",f="export_csv_dashboard_chart",g="export_xlsx_dashboard_chart",_="change_dashboard_filter",y="dataset_creation_empty_cancellation",v="dataset_creation_database_cancellation",b="dataset_creation_schema_cancellation",E="dataset_creation_table_cancellation",S="dataset_creation_success",T="spa_navigation",A="confirm_overwrite_dashboard_metadata",C="dashboard_download_as_image",w="dashboard_download_as_pdf",R="chart_download_as_image",I="chart_download_as_csv",O="chart_download_as_csv_pivoted",D="chart_download_as_xls",x="chart_download_as_json",N="sqllab_warn_local_storage_usage",L="sqllab_fetch_failed_query",P="drill_by_modal_opened",F="further_drill_by",M="drill_by_edit_chart",k="drill_by_breadcrumb_clicked",q="sqllab_monitor_local_storage_usage",z="sqllab_create_table_as",U="sqllab_create_view_as",Y="sqllab_run_query",$="sqllab_stop_query",B="sqllab_estimate_query_cost",H="sqllab_save_query",j="sqllab_copy_link",Q="sqllab_format_sql",V="sqllab_download_csv",G="sqllab_copy_result_to_clipboard",W="sqllab_create_chart",K="sqllab_load_tab_state",X=new Set([n,o,a,L,K]),J=(new Set([i,l,m,c,f,_,d,u,h,p,s,A,C,w,R]),{timeOriginOffset:0,markTimeOrigin(){this.timeOriginOffset=window.performance.now()},getTimestamp(){return Math.round(window.performance.now()-this.timeOriginOffset)}})},50982:(e,t,r)=>{"use strict";r.d(t,{B:()=>y,W:()=>_});var n,o=r(28674),a=r(31912),i=r(7741),s=r(31463),l=r(65432),c=r(90924),d=r(96548),u=r(96469),h=r(91156),p=r(42643),m=r(31296),f=r(85923),g=r(90886);!function(e){e.CATEGORICAL="CATEGORICAL",e.SEQUENTIAL="SEQUENTIAL"}(n||(n={}));const _="HYDRATE_EXPLORE",y=({form_data:e,slice:t,dataset:r,metadata:y,saveAction:v=null})=>(b,E)=>{var S,T,A;const{user:C,datasources:w,charts:R,sliceEntities:I,common:O,explore:D}=E(),x=(0,m.P3)(f.vX.sliceId),N=(0,m.P3)(f.vX.dashboardId),L=x?null==I||null==(S=I.slices)?void 0:S[x]:null,P=null!=t?t:L,F=null!=e?e:null==P?void 0:P.form_data;if(!F.viz_type){const e=(null==O?void 0:O.conf.DEFAULT_VIZ_TYPE)||i.Y.Table;F.viz_type=(0,m.P3)(f.vX.vizType)||e}var M;F.time_range||(F.time_range=(null==O||null==(M=O.conf)?void 0:M.DEFAULT_TIME_FILTER)||s.WC),!F.include_time||!F.granularity_sqla||null!=(T=F.groupby)&&T.some((e=>(0,l.A)(e)===(0,l.A)(F.granularity_sqla)))||(F.groupby=[F.granularity_sqla,...(0,c.A)(F.groupby)],F.granularity_sqla=void 0),N&&(F.dashboardId=N);const k=r;k.currency_formats=Object.fromEntries((null!=(A=k.metrics)?A:[]).filter((e=>!!e.currency)).map((e=>[e.metric_name,e.currency])));const q={form_data:F,slice:P,datasource:k},z=(0,a.Eu)(q,F),U=z.color_scheme&&"color_scheme",Y=z.linear_color_scheme&&"linear_color_scheme",$=e=>{const t="CATEGORICAL"===e?(0,d.A)():(0,u.A)(),r="CATEGORICAL"===e?U:Y,n=t.defaultKey,o="CATEGORICAL"===e?"supersetColors":"superset_seq_1",a=F[r],i=!!t.get(a,!0);a&&!i&&(z[r].value=n||o)};U&&$(n.CATEGORICAL),Y&&$(n.SEQUENTIAL);const B={can_add:(0,g.L)("can_write","Chart",null==C?void 0:C.roles),can_download:(0,g.L)("can_csv","Superset",null==C?void 0:C.roles),can_overwrite:(0,c.A)(null==t?void 0:t.owners).includes(null==C?void 0:C.userId),isDatasourceMetaLoading:!1,isStarred:!1,triggerRender:!1,datasource:k,controls:z,form_data:F,slice:P,controlsTransferred:D.controlsTransferred,standalone:(0,m.P3)(f.vX.standalone),force:(0,m.P3)(f.vX.force),metadata:y,saveAction:v,common:O};Object.entries(B.controls).forEach((([e,t])=>{B.controls[e]=(0,h.jX)(t,B)}));const H=P?(0,h.LK)(z):null,j=(0,o.kD)(q),Q={id:j,chartAlert:null,chartStatus:null,chartStackTrace:null,chartUpdateEndTime:null,chartUpdateStartTime:0,latestQueryFormData:(0,h.LK)(B.controls),sliceFormData:H,queryController:null,queriesResponse:null,triggerQuery:!1,lastRendered:0};return b({type:_,data:{charts:{...R,[j]:Q},datasources:{...w,[(0,p.S)(k)]:k},saveModal:{dashboards:[],saveModalAlert:null,isVisible:!1},explore:B}})}},51692:(e,t,r)=>{"use strict";r.d(t,{r:()=>c});var n=r(2445),o=r(96540),a=r(50290),i=r(17437),s=r(8558),l=r(42566);const c=({isEditMode:e,title:t,icon:r,level:c=5,...d})=>{const u=(0,a.DP)(),h=i.AH`
    margin: auto ${2*u.sizeUnit}px auto 0;
  `,p=i.AH`
    && {
      margin: 0;
      margin-bottom: 0;
    }
  `,m=(0,o.isValidElement)(r)?(0,o.cloneElement)(r,{iconSize:"l",css:h}):!0===e?(0,n.Y)(s.F.EditOutlined,{iconSize:"l",css:h}):!1===e?(0,n.Y)(s.F.PlusOutlined,{iconSize:"l",css:h}):null;return(0,n.FD)(l.o.Title,{level:c,css:p,...d,children:[m,t]})}},52167:(e,t,r)=>{"use strict";r.d(t,{S9:()=>p,YU:()=>d,_p:()=>g,iN:()=>f,nt:()=>h,pw:()=>u,rN:()=>m});var n=r(2445),o=r(96540),a=r(36749),i=r(50290),s=r(17437);const l={"mode/sql":()=>r.e(2514).then(r.t.bind(r,32514,23)),"mode/markdown":()=>Promise.all([r.e(7472),r.e(9620),r.e(9846),r.e(7613)]).then(r.t.bind(r,7613,23)),"mode/css":()=>Promise.all([r.e(9620),r.e(9994)]).then(r.t.bind(r,29994,23)),"mode/json":()=>r.e(9118).then(r.t.bind(r,59118,23)),"mode/yaml":()=>r.e(7215).then(r.t.bind(r,97215,23)),"mode/html":()=>Promise.all([r.e(7472),r.e(9620),r.e(9846),r.e(6861)]).then(r.t.bind(r,56861,23)),"mode/javascript":()=>Promise.all([r.e(7472),r.e(8263)]).then(r.t.bind(r,8263,23)),"theme/textmate":()=>r.e(2694).then(r.t.bind(r,52694,23)),"theme/github":()=>r.e(3139).then(r.t.bind(r,83139,23)),"ext/language_tools":()=>r.e(6464).then(r.t.bind(r,6464,23)),"ext/searchbox":()=>r.e(8949).then(r.t.bind(r,88949,23))};function c(e,{defaultMode:t,defaultTheme:c,defaultTabSize:d=2,fontFamily:u="Menlo, Consolas, Courier New, Ubuntu Mono, source-code-pro, Lucida Console, monospace",placeholder:h}={}){return(0,a.x)((async()=>{var a,h;const p=Promise.all([r.e(8096),r.e(952),r.e(1541)]).then(r.bind(r,70470)),m=r.e(952).then(r.t.bind(r,80952,23)),f=r.e(61).then(r.t.bind(r,70061,17)),g=r.e(4987).then(r.t.bind(r,34987,23)),[{default:_},{config:y},{default:v},{require:b}]=await Promise.all([p,m,f,g]);y.setModuleUrl("ace/mode/css_worker",v),await Promise.all(e.map((e=>l[e]())));const E=t||(null==(a=e.find((e=>e.startsWith("mode/"))))?void 0:a.replace("mode/","")),S=c||(null==(h=e.find((e=>e.startsWith("theme/"))))?void 0:h.replace("theme/",""));return(0,o.forwardRef)((function({keywords:e,mode:t=E,theme:r=S,tabSize:a=d,defaultValue:l="",...c},h){const p=(0,i.DP)(),m=b("ace/ext/language_tools"),f=(0,o.useCallback)((e=>{const r={getCompletions:(r,n,o,a,i)=>{Number.isNaN(parseInt(a,10))&&n.getMode().$id===`ace/mode/${t}`&&i(null,e)}};m.setCompleters([r])}),[m,t]);return(0,o.useEffect)((()=>{e&&f(e)}),[e,f]),(0,o.useEffect)((()=>{var e;const t=null==h||null==(e=h.current)?void 0:e.editor;if(!t)return;const r=t.container;if(!r)return;let n=null,o=null;const a=e=>{var t;const a=null==e||null==(t=e.command)?void 0:t.name;var i,s;"insertstring"!==a&&"startAutocomplete"!==a||(n&&document.body.contains(n)||(n=null!=(i=r.querySelector(".ace_autocomplete"))?i:document.querySelector(".ace_autocomplete")),o&&document.body.contains(o)||(o=null!=(s=r.closest("#ace-editor"))?s:r.parentElement),n&&o&&o!==document.body&&(o.appendChild(n),n.dataset.aceAutocomplete="true"))},{commands:i}=t;return i.on("afterExec",a),()=>{i.off("afterExec",a),n=null,o=null}}),[h]),(0,n.FD)(n.FK,{children:[(0,n.Y)(s.mL,{styles:s.AH`
                .ace_editor {
                  border: 1px solid ${p.colorBorder} !important;
                  background-color: ${p.colorBgContainer} !important;
                }

                /* Basic editor styles with dark mode support */
                .ace_editor.ace-github,
                .ace_editor.ace-tm {
                  background-color: ${p.colorBgContainer} !important;
                  color: ${p.colorText} !important;
                }

                /* Adjust gutter colors */
                .ace_editor .ace_gutter {
                  background-color: ${p.colorBgElevated} !important;
                  color: ${p.colorTextSecondary} !important;
                }
                .ace_editor.ace_editor .ace_gutter .ace_gutter-active-line {
                  background-color: ${p.colorBorderSecondary};
                }
                /* Adjust selection color */
                .ace_editor .ace_selection {
                  background-color: ${p.colorPrimaryBgHover} !important;
                }

                /* Improve active line highlighting */
                .ace_editor .ace_active-line {
                  background-color: ${p.colorPrimaryBg} !important;
                }

                /* Fix indent guides and print margin (80 chars line) */
                .ace_editor .ace_indent-guide,
                .ace_editor .ace_print-margin {
                  background-color: ${p.colorSplit} !important;
                  opacity: 0.5;
                }

                /* Adjust cursor color */
                .ace_editor .ace_cursor {
                  color: ${p.colorPrimaryText} !important;
                }

                /* Syntax highlighting using semantic color tokens */
                .ace_editor .ace_keyword {
                  color: ${p.colorPrimaryText} !important;
                }

                .ace_editor .ace_string {
                  color: ${p.colorSuccessText} !important;
                }

                .ace_editor .ace_constant {
                  color: ${p.colorWarningActive} !important;
                }

                .ace_editor .ace_function {
                  color: ${p.colorInfoText} !important;
                }

                .ace_editor .ace_comment {
                  color: ${p.colorTextTertiary} !important;
                }

                .ace_editor .ace_variable {
                  color: ${p.colorTextSecondary} !important;
                }

                /* Adjust tooltip styles */
                .ace_tooltip {
                  margin-left: ${p.margin}px;
                  padding: ${2*p.sizeUnit}px;
                  background-color: ${p.colorBgElevated} !important;
                  color: ${p.colorText} !important;
                  border: 1px solid ${p.colorBorderSecondary};
                  box-shadow: ${p.boxShadow};
                  border-radius: ${p.borderRadius}px;
                  padding: ${p.paddingXS}px ${p.paddingXS}px;
                }

                .ace_tooltip.ace_doc-tooltip {
                  display: flex !important;
                }

                &&& .tooltip-detail {
                  display: flex;
                  justify-content: center;
                  flex-direction: row;
                  gap: ${p.paddingXXS}px;
                  align-items: center;
                  background-color: ${p.colorBgContainer};
                  white-space: pre-wrap;
                  word-break: break-all;
                  max-width: ${10*p.sizeXXL}px;
                  font-size: ${p.fontSize}px;

                  & .tooltip-detail-head {
                    background-color: ${p.colorBgElevated};
                    color: ${p.colorText};
                    display: flex;
                    column-gap: ${p.padding}px;
                    align-items: baseline;
                    justify-content: space-between;
                  }

                  & .tooltip-detail-title {
                    display: flex;
                    column-gap: ${p.padding}px;
                  }

                  & .tooltip-detail-body {
                    word-break: break-word;
                    color: ${p.colorTextSecondary};
                  }

                  & .tooltip-detail-head,
                  & .tooltip-detail-body {
                    background-color: ${p.colorBgLayout};
                    padding: 0px ${p.paddingXXS}px;
                    border: 1px ${p.colorSplit} solid;
                  }

                  & .tooltip-detail-footer {
                    border-top: 1px ${p.colorSplit} solid;
                    padding: 0 ${p.paddingLG}px;
                    color: ${p.colorTextTertiary};
                    font-size: ${p.fontSizeSM}px;
                  }

                  & .tooltip-detail-meta {
                    & > .ant-tag {
                      margin-right: 0px;
                    }
                  }
                }

                /* Adjust the searchbox to match theme */
                .ace_search {
                  background-color: ${p.colorBgContainer} !important;
                  color: ${p.colorText} !important;
                  border: 1px solid ${p.colorBorder} !important;
                }

                .ace_search_field {
                  background-color: ${p.colorBgContainer} !important;
                  color: ${p.colorText} !important;
                  border: 1px solid ${p.colorBorder} !important;
                }

                .ace_button {
                  background-color: ${p.colorBgElevated} !important;
                  color: ${p.colorText} !important;
                  border: 1px solid ${p.colorBorder} !important;
                }

                .ace_button:hover {
                  background-color: ${p.colorPrimaryBg} !important;
                }
              `},"ace-tooltip-global"),(0,n.Y)(_,{ref:h,mode:t,theme:r,tabSize:a,defaultValue:l,setOptions:{fontFamily:u},...c})]})}))}),h)}const d=c(["mode/sql","theme/github","ext/language_tools","ext/searchbox"]),u=c(["mode/sql","theme/github","ext/language_tools","ext/searchbox"],{placeholder:()=>(0,n.FD)("div",{style:{height:"100%"},children:[(0,n.Y)("div",{style:{width:41,height:"100%",background:"#e8e8e8"}}),(0,n.Y)("div",{className:"ace_content"})]})}),h=c(["mode/markdown","theme/github"]),p=c(["mode/markdown","mode/sql","mode/json","mode/html","mode/javascript","theme/textmate"]),m=c(["mode/css","theme/github"]),f=c(["mode/json","theme/github"]),g=c(["mode/json","mode/yaml","theme/github"])},53118:(e,t,r)=>{"use strict";var n,o;r.d(t,{CV:()=>a,lG:()=>o,lJ:()=>n}),function(e){e.DEFAULT="default",e.DARK="dark",e.COMPACT="compact"}(n||(n={})),function(e){e.DEFAULT="default",e.DARK="dark",e.SYSTEM="system"}(o||(o={}));const a=["borderRadius","borderRadiusLG","borderRadiusOuter","borderRadiusSM","borderRadiusXS","boxShadow","boxShadowDrawerLeft","boxShadowDrawerRight","boxShadowDrawerUp","boxShadowPopoverArrow","boxShadowSecondary","boxShadowTabsOverflowBottom","boxShadowTabsOverflowLeft","boxShadowTabsOverflowRight","boxShadowTabsOverflowTop","boxShadowTertiary","colorError","colorErrorActive","colorErrorBg","colorErrorBgActive","colorErrorBgHover","colorErrorBorder","colorErrorBorderHover","colorErrorHover","colorErrorOutline","colorErrorText","colorErrorTextActive","colorErrorTextHover","colorPrimary","colorPrimaryActive","colorPrimaryBg","colorPrimaryBgHover","colorPrimaryBorder","colorPrimaryBorderHover","colorPrimaryHover","colorPrimaryText","colorPrimaryTextActive","colorPrimaryTextHover","colorSuccess","colorSuccessActive","colorSuccessBg","colorSuccessBgHover","colorSuccessBorder","colorSuccessBorderHover","colorSuccessHover","colorSuccessText","colorSuccessTextActive","colorSuccessTextHover","colorBgBase","colorBgBlur","colorBgContainer","colorBgContainerDisabled","colorBgElevated","colorBgLayout","colorBgMask","colorBgSpotlight","colorBgTextActive","colorBgTextHover","colorBorder","colorBorderBg","colorBorderSecondary","colorFill","colorFillAlter","colorFillContent","colorFillContentHover","colorFillQuaternary","colorFillSecondary","colorFillTertiary","colorHighlight","colorIcon","colorIconHover","colorInfo","colorInfoActive","colorInfoBg","colorInfoBgHover","colorInfoBorder","colorInfoBorderHover","colorInfoHover","colorInfoText","colorInfoTextActive","colorInfoTextHover","colorLink","colorLinkActive","colorLinkHover","colorSplit","colorText","colorTextBase","colorTextDescription","colorTextDisabled","colorTextHeading","colorTextLabel","colorTextLightSolid","colorTextPlaceholder","colorTextQuaternary","colorTextSecondary","colorTextTertiary","colorWarning","colorWarningActive","colorWarningBg","colorWarningBgHover","colorWarningBorder","colorWarningBorderHover","colorWarningHover","colorWarningOutline","colorWarningText","colorWarningTextActive","colorWarningTextHover","colorWhite","controlHeight","controlHeightLG","controlHeightSM","controlHeightXS","controlInteractiveSize","controlItemBgActive","controlItemBgActiveDisabled","controlItemBgActiveHover","controlItemBgHover","controlOutline","controlOutlineWidth","controlPaddingHorizontal","controlPaddingHorizontalSM","controlTmpOutline","fontFamily","fontFamilyCode","fontWeightStrong","fontHeight","fontHeightLG","fontHeightSM","fontSize","fontSizeHeading1","fontSizeHeading2","fontSizeHeading3","fontSizeHeading4","fontSizeHeading5","fontSizeIcon","fontSizeLG","fontSizeSM","fontSizeXL","lineHeight","lineHeightHeading1","lineHeightHeading2","lineHeightHeading3","lineHeightHeading4","lineHeightHeading5","lineHeightLG","lineHeightSM","lineType","lineWidth","lineWidthBold","lineWidthFocus","linkDecoration","linkFocusDecoration","linkHoverDecoration","margin","marginLG","marginMD","marginSM","marginXL","marginXS","marginXXL","marginXXS","motion","motionBase","motionDurationFast","motionDurationMid","motionDurationSlow","motionEaseInBack","motionEaseInOut","motionEaseInOutCirc","motionEaseInQuint","motionEaseOut","motionEaseOutBack","motionEaseOutCirc","motionEaseOutQuint","motionUnit","opacityImage","opacityLoading","padding","paddingContentHorizontal","paddingContentHorizontalLG","paddingContentHorizontalSM","paddingContentVertical","paddingContentVerticalLG","paddingContentVerticalSM","paddingLG","paddingMD","paddingSM","paddingXL","paddingXS","paddingXXS","screenLG","screenLGMax","screenLGMin","screenMD","screenMDMax","screenMDMin","screenSM","screenSMMax","screenSMMin","screenXL","screenXLMax","screenXLMin","screenXS","screenXSMax","screenXSMin","screenXXL","screenXXLMin","size","sizeLG","sizeMD","sizeMS","sizePopupArrow","sizeSM","sizeStep","sizeUnit","sizeXL","sizeXS","sizeXXL","sizeXXS","wireframe","zIndexBase","zIndexPopupBase"]},54264:(e,t,r)=>{"use strict";r.d(t,{R:()=>A});var n=r(2445),o=r(96540),a=r(50290),i=r(79378),s=r(74098),l=r(58561),c=r.n(l),d=r(9992),u=r(64457),h=r(98244),p=r(27509),m=r(49965),f=r(23195),g=r(2801),_=r(89232),y=r(75116);const v=a.I4.div`
  ${({theme:e})=>`\n    .refresh {\n      display: flex;\n      align-items: center;\n      width: 30px;\n      margin-left: ${e.sizeUnit}px;\n    }\n\n    .section {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n    }\n\n    .select {\n      width: calc(100% - 30px - ${e.sizeUnit}px);\n      flex: 1;\n    }\n\n    & > div {\n      margin-bottom: ${4*e.sizeUnit}px;\n    }\n  `}
`,b=a.I4.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-left: ${({theme:e})=>e.sizeUnit-2}px;

  .backend {
    overflow: visible;
  }

  .name {
    overflow: hidden;
    text-overflow: ellipsis;
  }
`,E=({backend:e,databaseName:t})=>(0,n.FD)(b,{children:[(0,n.Y)(p.JU,{className:"backend",children:e||""}),(0,n.Y)("span",{className:"name",title:t,children:t})]}),S=[],T=[];function A({db:e,formMode:t=!1,emptyState:r,getDbList:a,handleError:l,isDatabaseSelectEnabled:p=!0,onDbChange:b,onEmptyResults:A,onCatalogChange:C,catalog:w,onSchemaChange:R,schema:I,readOnly:O=!1,sqlLabMode:D=!1}){const x=!(null==e||!e.allow_multi_catalog),[N,L]=(0,o.useState)(),[P,F]=(0,o.useState)(),[M,k]=(0,o.useState)(w?{label:w,value:w,title:w}:void 0),q=(0,o.useRef)(w);q.current=w;const[z,U]=(0,o.useState)(I?{label:I,value:I,title:I}:void 0),Y=(0,o.useRef)(I);Y.current=I;const{addSuccessToast:$}=(0,u.Yf)(),B=(0,o.useCallback)(((e,t)=>e.order-t.order),[]),H=(0,o.useMemo)((()=>async(e,r,o)=>{const s=`/api/v1/database/?q=${c().encode({order_column:"database_name",order_direction:"asc",page:r,page_size:o,...t||!D?{filters:[{col:"database_name",opr:"ct",value:e}]}:{filters:[{col:"database_name",opr:"ct",value:e},{col:"expose_in_sqllab",opr:"eq",value:!0}]}})}`;return i.A.get({endpoint:s}).then((({json:t})=>{const{result:r,count:o}=t;a&&a(r),0===r.length&&A&&A(e);const i=r.map(((e,t)=>({label:(0,n.Y)(E,{backend:e.backend,databaseName:e.database_name}),value:e.id,id:`${e.backend}-${e.database_name}-${e.id}`,database_name:e.database_name,backend:e.backend,allow_multi_catalog:e.allow_multi_catalog,order:t})));return{data:i,totalCount:null!=o?o:i.length}}))}),[t,a,D,A]);function j(e){U(e),R&&(null==e?void 0:e.value)!==Y.current&&R(null==e?void 0:e.value)}(0,o.useEffect)((()=>{L((t=>(null==t?void 0:t.id)!==(null==e?void 0:e.id)?e?{label:(0,n.Y)(E,{backend:e.backend,databaseName:e.database_name}),value:e.id,...e}:void 0:t))}),[e]);const{currentData:Q,isFetching:V,refetch:G}=(0,h.Ip)({dbId:null==N?void 0:N.value,catalog:null==M?void 0:M.value,onSuccess:(e,t)=>{F(null),1===e.length?j(e[0]):e.find((e=>Y.current===e.value))||j(void 0),t&&$("List refreshed")},onError:e=>{var t;null!=e&&e.errors?F(null==e||null==(t=e.errors)?void 0:t[0]):l((0,s.t)("There was an error loading the schemas"))}}),W=Q||T;function K(e){k(e),U(void 0),C&&(null==e?void 0:e.value)!==q.current&&C(null==e?void 0:e.value)}const{data:X,isFetching:J,refetch:Z}=(0,h.oh)({dbId:x?null==N?void 0:N.value:void 0,onSuccess:(e,t)=>{F(null),x?1===e.length?K(e[0]):e.find((e=>q.current===e.value))||K(void 0):K(null),x&&t&&$("List refreshed")},onError:e=>{var t;x&&(null!=e&&e.errors?F(null==e||null==(t=e.errors)?void 0:t[0]):l((0,s.t)("There was an error loading the catalogs")))}}),ee=X||S;function te(e,t){return(0,n.FD)("div",{className:"section",children:[(0,n.Y)("span",{className:"select",children:e}),(0,n.Y)("span",{className:"refresh",children:t})]})}return(0,n.FD)(v,{children:[te((0,n.Y)(m.A,{ariaLabel:(0,s.t)("Select database or type to search databases"),optionFilterProps:["database_name","value"],header:(0,n.Y)(f.l,{children:(0,s.t)("Database")}),lazyLoading:!1,notFoundContent:r,onChange:function(e,t){const r={...t,id:t.value};L(r),k(void 0),U(void 0),b&&b(r),C&&C(void 0),R&&R(void 0)},value:N,placeholder:(0,s.t)("Select database or type to search databases"),disabled:!p||O,options:H,sortComparator:B}),null),P?(0,n.Y)(_.x6,{error:P,source:"crud"}):null,x&&function(){const e=!O&&(0,n.Y)(d.A,{onClick:Z,tooltipContent:(0,s.t)("Force refresh catalog list")});return(0,n.FD)(n.FK,{children:[(0,n.Y)(y.q,{children:(0,s.t)("Catalog")}),te((0,n.Y)(g.A,{ariaLabel:(0,s.t)("Select catalog or type to search catalogs"),disabled:!N||O,labelInValue:!0,loading:J,name:"select-catalog",notFoundContent:(0,s.t)("No compatible catalog found"),placeholder:(0,s.t)("Select catalog or type to search catalogs"),onChange:e=>K(e),options:ee,showSearch:!0,value:M||void 0,allowClear:!0}),e)]})}(),function(){const e=!O&&(0,n.Y)(d.A,{onClick:G,tooltipContent:(0,s.t)("Force refresh schema list")});return(0,n.FD)(n.FK,{children:[(0,n.Y)(y.q,{children:(0,s.t)("Schema")}),te((0,n.Y)(g.A,{ariaLabel:(0,s.t)("Select schema or type to search schemas"),disabled:!N||O,labelInValue:!0,loading:V,name:"select-schema",notFoundContent:(0,s.t)("No compatible schema found"),placeholder:(0,s.t)("Select schema or type to search schemas"),onChange:e=>j(e),options:W,showSearch:!0,value:z,allowClear:!0}),e)]})}()]})}},54603:(e,t,r)=>{"use strict";r.d(t,{Mw:()=>l,eP:()=>c,ny:()=>i,st:()=>s});var n=r(84140),o=r(98837);const a={xs:"fontSizeXS",s:"fontSizeSM",m:"fontSize",l:"fontSizeLG",xl:"fontSizeXL",xxl:"fontSizeXXL"};function i(e,t){const r=a[t||"m"];return String(e[r]||e.fontSize)}function s(e,t){const r=t.charAt(0).toUpperCase()+t.slice(1);if("default"===t||"grayscale"===t){const t=l(e),r=e=>{if(!t)return e;const{r,g:o,b:a}=(0,n.A)(e).toRgb();return(0,n.A)({r:255-r,g:255-o,b:255-a}).toHexString()};return{active:r("#222"),textActive:r("#444"),text:r("#555"),textHover:r("#666"),hover:r("#888"),borderHover:r("#AAA"),border:r("#CCC"),bgHover:r("#DDD"),bg:r("#F4F4F4")}}return{active:e[`color${r}Active`],textActive:e[`color${r}TextActive`],text:e[`color${r}Text`],textHover:e[`color${r}TextHover`],hover:e[`color${r}Hover`],borderHover:e[`color${r}BorderHover`],border:e[`color${r}Border`],bgHover:e[`color${r}BgHover`],bg:e[`color${r}Bg`]}}function l(e){return(0,n.A)(e.colorBgContainer).isDark()}function c(){return l((0,o.u)())}},56879:(e,t,r)=>{"use strict";r.d(t,{V:()=>o,d:()=>a});var n=r(5376);const o=(e,t)=>{null!=t&&t.newWindow?window.open((0,n.A)(e),"_blank","noopener noreferrer"):null!=t&&t.assign?window.location.assign((0,n.A)(e)):window.location.href=(0,n.A)(e)},a=(e,t,r)=>{null!=r&&r.replace?window.history.replaceState(t,"",(0,n.A)(e)):window.history.pushState(t,"",(0,n.A)(e))}},57135:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(65091);function o(e){return Object.entries(e).reduce(((e,t)=>{const[r,{values:o}]=t,{chartId:a,column:i}=(0,n.w)(r),s={...e[a],[i]:o};return{...e,[a]:s}}),{})}},57771:(e,t,r)=>{"use strict";r.d(t,{m:()=>h});var n=r(79378),o=r(74098),a=r(59744),i=r(58561),s=r.n(i),l=r(45727);const c=new Map,d=(0,l.K)(n.A.get,c,(({endpoint:e})=>e||"")),u=e=>({value:e.id,label:e.name,key:e.id}),h=async(e,t,r)=>{const n="name",i=s().encode({filters:[{col:n,opr:"ct",value:e},{col:"type",opr:"custom_tag",value:!0}],page:t,page_size:r,order_column:n,order_direction:"asc"});return d({endpoint:`/api/v1/tag/?q=${i}`}).then((e=>({data:e.json.result.map(u),totalCount:e.json.count}))).catch((async e=>{const t=(({error:e,message:t})=>{let r=t||e||(0,o.t)("An error has occurred");return"Forbidden"===t&&(r=(0,o.t)("You do not have permission to read tags")),r})(await(0,a.h4)(e));throw new Error(t)}))}},58180:(e,t,r)=>{"use strict";r.d(t,{M6:()=>l,TI:()=>i,bo:()=>s,md:()=>o,wF:()=>a});var n=r(86138);function o(e){return"SIMPLE"===e.expressionType}function a(e){return"SQL"===e.expressionType}function i(e){return(0,n.Gq)(e.operator)}function s(e){return(0,n.UH)(e.operator)}function l(e){return(0,n.jy)(e.operator)}},58233:(e,t,r)=>{"use strict";r.d(t,{A:()=>W});var n=r(62193),o=r.n(n),a=r(96548),i=r(96469),s=r(74098),l=r(74842),c=r(31463),d=r(14125),u=r(84023),h=r(99578),p=r(90924),m=r(65432),f=r(1020),g=r(90881),_=r(20259),y=r(71403),v=r(35622),b=r(33842);const E=(0,a.A)(),S=(0,i.A)(),T=[5,10,25,50,100,500],A=document.getElementById("app"),{user:C}=JSON.parse((null==A?void 0:A.getAttribute("data-bootstrap"))||"{}"),w={type:"DatasourceControl",label:(0,s.t)("Datasource"),default:null,description:null,mapStateToProps:({datasource:e,form_data:t})=>({datasource:e,form_data:t,user:C})},R={type:"VizTypeControl",label:(0,s.t)("Visualization Type"),default:"table",description:(0,s.t)("The type of visualization to display")},I={type:"ColorPickerControl",label:(0,s.t)("Fixed Color"),description:(0,s.t)("Use this to define a static color for all circles"),default:{r:0,g:122,b:135,a:1},renderTrigger:!0},O={type:"ColorSchemeControl",label:(0,s.t)("Linear Color Scheme"),choices:()=>S.values().map((e=>[e.id,e.label])),default:S.getDefaultKey(),clearable:!1,description:"",renderTrigger:!0,schemes:()=>S.getMap(),isLinear:!0,mapStateToProps:e=>(0,f.c)(e)},D={type:"SelectControl",freeForm:!0,label:v.Fp.granularity,default:"one day",choices:[[null,(0,s.t)("all")],["PT5S",(0,s.t)("5 seconds")],["PT30S",(0,s.t)("30 seconds")],["PT1M",(0,s.t)("1 minute")],["PT5M",(0,s.t)("5 minutes")],["PT30M",(0,s.t)("30 minutes")],["PT1H",(0,s.t)("1 hour")],["PT6H",(0,s.t)("6 hour")],["P1D",(0,s.t)("1 day")],["P7D",(0,s.t)("7 days")],["P1W",(0,s.t)("week")],["week_starting_sunday",(0,s.t)("week starting Sunday")],["week_ending_saturday",(0,s.t)("week ending Saturday")],["P1M",(0,s.t)("month")],["P3M",(0,s.t)("quarter")],["P1Y",(0,s.t)("year")]],description:(0,s.t)("The time granularity for the visualization. Note that you can type and use simple natural language as in `10 seconds`, `1 day` or `56 weeks`"),sortComparator:()=>0},x={type:"SelectControl",label:v.Fp.time_grain_sqla,placeholder:(0,s.t)("None"),initialValue:(e,t)=>{var r,n;return(0,l.A)(t)?null!=t&&t.metadata||"time_grain_sqla"in(null!=(r=null==t?void 0:t.form_data)?r:{})?null==t||null==(n=t.form_data)?void 0:n.time_grain_sqla:"P1D":e.value},description:(0,s.t)("Select a time grain for the visualization. The grain is the time interval represented by a single point on the chart."),mapStateToProps:({datasource:e})=>({choices:(null==e?void 0:e.time_grain_sqla)||[]}),visibility:g.z,sortComparator:()=>0},N={type:"DateFilterControl",freeForm:!0,label:v.Fp.time_range,default:c.WC,description:(0,s.t)('This control filters the whole chart based on the selected time range. All relative times, e.g. "Last month", "Last 7 days", "now", etc. are evaluated on the server using the server\'s local time (sans timezone). All tooltips and placeholder times are expressed in UTC (sans timezone). The timestamps are then evaluated by the database using the engine\'s local timezone. Note one can explicitly set the timezone per the ISO 8601 format if specifying either the start and/or end time.')},L={type:"SelectControl",freeForm:!0,label:(0,s.t)("Row limit"),clearable:!1,mapStateToProps:e=>{var t;return{maxValue:null==e||null==(t=e.common)||null==(t=t.conf)?void 0:t.SQL_MAX_ROW}},validators:[d.A,(e,t)=>(0,u.A)(e,(null==t?void 0:t.maxValue)||v.sH)],default:1e4,choices:(0,_.u)([10,50,100,250,500,1e3,5e3,1e4,5e4]),description:(0,s.t)("Limits the number of the rows that are computed in the query that is the source of the data used for this chart.")},P={type:"CheckboxControl",label:(0,s.t)("Sort Descending"),default:!0,description:(0,s.t)("If enabled, this control sorts the results/values descending, otherwise it sorts the results ascending."),visibility:({controls:e})=>Boolean((null==e?void 0:e.timeseries_limit_metric.value)&&!o()(null==e?void 0:e.timeseries_limit_metric.value))},F={type:"SelectControl",freeForm:!0,label:(0,s.t)("Series limit"),placeholder:(0,s.t)("None"),validators:[d.A],choices:(0,_.u)(T),clearable:!0,description:(0,s.t)("Limits the number of series that get displayed. A joined subquery (or an extra phase where subqueries are not supported) is applied to limit the number of series that get fetched and rendered. This feature is useful when grouping by high cardinality column(s) though does increase the query complexity and cost.")},M={type:"SelectControl",freeForm:!0,label:(0,s.t)("Series limit"),placeholder:(0,s.t)("None"),validators:[d.A],choices:(0,_.u)(T),description:(0,s.t)("Limits the number of series that get displayed. A joined subquery (or an extra phase where subqueries are not supported) is applied to limit the number of series that get fetched and rendered. This feature is useful when grouping by high cardinality column(s) though does increase the query complexity and cost.")},k={type:"CheckboxControl",label:(0,s.t)('Group remaining as "Others"'),default:!1,description:(0,s.t)('Groups remaining series into an "Others" category when series limit is reached. This prevents incomplete time series data from being displayed.'),visibility:({form_data:e})=>Boolean((null==e?void 0:e.limit)||(null==e?void 0:e.series_limit))},q={type:"SelectControl",freeForm:!0,label:(0,s.t)("Y Axis Format"),renderTrigger:!0,default:y.KY,choices:y.Bb,description:y.YH,tokenSeparators:["\n","\t",";"],filterOption:({data:e},t)=>e.label.includes(t)||e.value.includes(t),mapStateToProps:e=>{var t;return{choices:(null==(t=e.controls)||null==(t=t.comparison_type)?void 0:t.value)===h.g1.Percentage?y.Bb.filter((e=>e[0].includes("%"))):y.Bb}}},z={type:"CurrencyControl",label:(0,s.t)("Currency format"),renderTrigger:!0},U={type:"SelectControl",freeForm:!0,label:(0,s.t)("Time format"),renderTrigger:!0,default:y.EN,choices:y.lR,description:y.gb,filterOption:({data:e},t)=>e.label.includes(t)||e.value.includes(t)},Y={type:"ColorSchemeControl",label:(0,s.t)("Color Scheme"),default:E.getDefaultKey(),renderTrigger:!0,choices:()=>E.keys().map((e=>[e,e])),description:(0,s.t)("The color scheme for rendering chart"),schemes:()=>E.getMap(),mapStateToProps:e=>(0,f.c)(e)},$={type:"CheckboxControl",label:(0,s.t)("Match time shift color with original series"),default:!0,renderTrigger:!0,description:(0,s.t)("When unchecked, colors from the selected color scheme will be used for time shifted series"),visibility:({controls:e})=>{var t,r;return Boolean((null==e||null==(t=e.time_compare)?void 0:t.value)&&!o()(null==e||null==(r=e.time_compare)?void 0:r.value))}},B={type:"CheckboxControl",label:(0,s.t)("Truncate Metric"),default:!0,description:(0,s.t)("Whether to truncate metrics")},H={type:"CheckboxControl",label:(0,s.t)("Show empty columns"),default:!0,description:(0,s.t)("Show empty columns")},j={type:"HiddenControl",initialValue:(e,t)=>{var r;return Object.fromEntries((0,p.A)(null==t||null==(r=t.datasource)?void 0:r.columns).filter((e=>e.is_dttm)).map((e=>{var t;return[null!=(t=e.column_name)?t:e.name,e.is_dttm]})))}},Q={type:"CheckboxControl",label:(0,s.t)("Data Zoom"),default:!1,renderTrigger:!0,description:(0,s.t)("Enable data zooming controls")},V={type:"CheckboxControl",label:(0,s.t)("Sort by metric"),description:(0,s.t)("Whether to sort results by the selected metric in descending order.")},G={type:"SelectControl",label:(0,s.t)("Ordering"),description:(0,s.t)("Order results by selected columns"),multi:!0,default:[],shouldMapStateToProps:()=>!0,mapStateToProps:({datasource:e})=>({choices:((null==e?void 0:e.columns)||[]).map((e=>[!0,!1].map((t=>[JSON.stringify([e.column_name,t]),`${(0,m.A)(e.column_name)} [${t?"asc":"desc"}]`])))).flat()}),resetOnHide:!1},W={metrics:b.em,metric:b.jc,datasource:w,viz_type:R,color_picker:I,metric_2:b.xX,linear_color_scheme:O,secondary_metric:b.I2,groupby:b.Eg,columns:b.XL,tooltip_columns:b.Y9,tooltip_metrics:b.gG,granularity:D,granularity_sqla:b.H7,time_grain_sqla:x,time_range:N,row_limit:L,limit:F,timeseries_limit_metric:b.fj,orderby:b.fj,order_desc:P,series:b.HF,entity:b.ht,x:b.A7,y:b.R2,size:b.X5,y_axis_format:q,x_axis_time_format:U,adhoc_filters:b.zz,color_scheme:Y,time_shift_color:$,series_columns:b.XL,series_limit:M,group_others_when_limit_reached:k,series_limit_metric:b.fj,legacy_order_by:b.fj,truncate_metric:B,x_axis:b.z,zoomable:Q,show_empty_columns:H,temporal_columns_lookup:j,currency_format:z,sort_by_metric:V,order_by_cols:G}},58486:(e,t,r)=>{"use strict";function n(e){return e?e.full_name||`${e.first_name} ${e.last_name}`:""}r.d(t,{A:()=>n})},59246:(e,t,r)=>{"use strict";r.d(t,{b5:()=>c,bk:()=>n,vL:()=>s});var n,o=r(10992),a=r(96540);!function(e){e.Loading="loading",e.Complete="complete",e.Error="error"}(n||(n={}));const i={status:n.Loading,result:null,error:null};function s(e,t){return(0,a.useMemo)((()=>{if(e.status!==n.Complete)return e;try{return{...e,result:t(e.result)}}catch(e){return{status:n.Error,result:null,error:e}}}),[e,t])}const l=e=>e.result;function c(e){return s(function(e){const[t,r]=(0,a.useState)(i),s=(0,a.useRef)((()=>{}));return(0,a.useEffect)((()=>{r(i),s.current();let t=!1;return s.current=()=>{t=!0},(0,o.A)({method:"GET",endpoint:e})({}).then((e=>{t||r({status:n.Complete,result:e,error:null})})).catch((e=>{t||r({status:n.Error,result:null,error:e})})),()=>{t=!0}}),[e]),t}(e),l)}},59674:(e,t,r)=>{"use strict";r.d(t,{RW:()=>A,XV:()=>T,_q:()=>w,tB:()=>C});var n=r(74353),o=r.n(n),a=r(83826),i=r.n(a),s=r(88569),l=r.n(s),c=r(98720),d=r.n(c),u=r(6279),h=r.n(u),p=r(90445),m=r.n(p),f=r(43522),g=r.n(f),_=r(53581),y=r.n(_),v=r(15750),b=r.n(v),E=r(8906),S=r.n(E);o().extend(i()),o().extend(l()),o().extend(d()),o().extend(h()),o().extend(m()),o().extend(g()),o().extend(y()),o().extend(b()),o().extend(S()),o().updateLocale("en",{invalidDate:"Invalid date"});const T=o(),A=function(e,t,r="HH:mm:ss.SSS"){const n=t-e;return o()(new Date(n)).utc().format(r)},C=function(){return o()().utc().valueOf()},w=function(e,t){const r=o().tz("2021-01-01",t).utcOffset();return e.tz(t).utcOffset()!==r}},59744:(e,t,r)=>{"use strict";r.d(t,{A8:()=>c,ER:()=>m,bY:()=>l,ei:()=>u,h4:()=>p,hi:()=>f,io:()=>h,q2:()=>d});var n=r(7566),o=r(74098),a=r(6987),i=r(88808);const s={400:"Bad request",401:"Unauthorized",402:"Payment required",403:"Forbidden",404:"Not found",405:"Method not allowed",406:"Not acceptable",407:"Proxy authentication required",408:"Request timeout",409:"Conflict",410:"Gone",411:"Length required",412:"Precondition failed",413:"Payload too large",414:"URI too long",415:"Unsupported media type",416:"Range not satisfiable",417:"Expectation failed",418:"I'm a teapot",500:"Server error",501:"Not implemented",502:"Bad gateway",503:"Service unavailable",504:"Gateway timeout",505:"HTTP version not supported",506:"Variant also negotiates",507:"Insufficient storage",508:"Loop detected",510:"Not extended",511:"Network authentication required",599:"Network error"};function l(e){return!(0,n.Eo)(e)&&(0,n.fE)(e)}function c(e){if(l(e)){for(const[t,r]of Object.entries(s))if(new RegExp(`${t}|${r}`,"i").test(e))return(0,o.t)(r);return(0,o.t)("Unknown error")}return e}function d(e){return s[e]||null}function u(e,t){return("status"in t?d(t.status):null)||c(e)}function h(e){let t={...e};var r,n;(t.errors&&t.errors.length>0&&(t.error=t.description=t.errors[0].message,t.link=null==(r=t.errors[0])||null==(r=r.extra)?void 0:r.link),!t.error&&t.message)&&("object"==typeof t.message&&(t.error=(null==(n=Object.values(t.message)[0])?void 0:n[0])||(0,o.t)("Invalid input")),"string"==typeof t.message&&(l(t.message)?t.error=u(t.message,t):t.error=t.message));return t.stack?t={...t,error:(0,o.t)("Unexpected error: ")+(t.description||(0,o.t)("(no description, click to see stack trace)")),stacktrace:t.stack}:t.responseText&&t.responseText.indexOf("CSRF")>=0&&(t={...t,error:(0,o.t)(a.HL.SESSION_TIMED_OUT)}),{...t,error:t.error}}function p(e){return new Promise((t=>{if("string"==typeof e)return void t({error:c(e)});if(e instanceof TypeError&&"Failed to fetch"===e.message)return void t({error:(0,o.t)("Network error")});if("timeout"in e&&"statusText"in e&&"timeout"===e.statusText)return void t({...e,error:(0,o.t)("Request timed out"),errors:[{error_type:i.eK.FRONTEND_TIMEOUT_ERROR,extra:{timeout:e.timeout/1e3,issue_codes:[{code:1e3,message:(0,o.t)("Issue 1000 - The dataset is too large to query.")},{code:1001,message:(0,o.t)("Issue 1001 - The database is under an unusual load.")}]},level:"error",message:"Request timed out"}]});const r=e instanceof Response?e:e.response;if(r&&!r.bodyUsed)return void r.clone().json().then((e=>{const{url:n,status:o,statusText:a,redirected:i,type:s}=r,l={...e,url:n,status:o,statusText:a,redirected:i,type:s};t(h(l))})).catch((()=>{r.text().then((e=>{t({...r,error:u(e,r)})}))}));let n=e.statusText||e.message;n||(console.error("non-standard error:",e),n=(0,o.t)("An error occurred")),t({...r,error:c(n)})}))}async function m(e,t){const{error:r,message:n}=await p(e);let a=(0,o.t)("Sorry, an unknown error occurred.");return r&&(a=(0,o.t)("Sorry, there was an error saving this %s: %s",t,r)),"string"==typeof n&&"Forbidden"===n&&(a=(0,o.t)("You do not have permission to edit this %s",t)),a}function f(e,t){let r=e;const n=(null==t?void 0:t.message)||(null==t?void 0:t.error);return n&&(r=`${r}:\n${n}`),r}},60227:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(2445),o=r(96540),a=r(50290),i=r(18009);const s={xs:25,sm:50,md:75,lg:100,xl:150,xxl:200},l=(0,a.I4)(i.XI)`
  ${({theme:e,isPaginationSticky:t,showRowCount:r})=>`\n    th.ant-column-cell {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .actions {\n      opacity: 0;\n      font-size: ${e.fontSizeXL}px;\n      display: flex;\n      white-space: nowrap;\n      min-width: 100px;\n      .action-button {\n        margin-right: ${2*e.sizeUnit}px;\n        cursor: pointer;\n        &:hover {\n          path {\n            fill: ${e.colorPrimary};\n          }\n        }\n      }\n    }\n\n    .ant-table-column-title {\n      line-height: initial;\n    }\n\n    .ant-table-row:hover {\n      .actions {\n        opacity: 1;\n        transition: opacity ease-in ${e.motionDurationMid};\n      }\n    }\n\n    .ant-table-row.table-row-highlighted > td.ant-table-cell,\n    .ant-table-row.table-row-highlighted > td.ant-table-cell.ant-table-cell-row-hover {\n      background-color: ${e.colorPrimaryBg};\n    }\n\n    .ant-table-cell {\n      max-width: 320px;\n      font-feature-settings: 'tnum' 1;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      line-height: 1;\n      vertical-align: middle;\n      padding-left: ${4*e.sizeUnit}px;\n      white-space: nowrap;\n    }\n\n    .ant-table-tbody > tr > td {\n      height: ${12*e.sizeUnit}px;\n    }\n\n    .ant-table-tbody > tr > td.ant-table-cell:has(.ant-avatar-group) {\n      padding-top: ${e.sizeUnit}px;\n      padding-bottom: ${e.sizeUnit}px;\n    }\n\n    .ant-table-placeholder .ant-table-cell {\n      border-bottom: 0;\n    }\n\n    &.ant-table-wrapper .ant-table-pagination.ant-pagination {\n      display: flex;\n      justify-content: center;\n      margin: ${r?4*e.sizeUnit:0}px 0 ${r?14*e.sizeUnit:0}px 0;\n      position: relative;\n\n      .ant-pagination-total-text {\n        color: ${e.colorTextBase};\n        margin-inline-end: 0;\n        position: absolute;\n        top: ${12*e.sizeUnit}px;\n      }\n\n      ${t&&`\n        position: sticky;\n        bottom: 0;\n        left: 0;\n        z-index: 1;\n        background-color: ${e.colorBgElevated};\n        padding: ${2*e.sizeUnit}px 0;\n      `}\n    }\n\n    // Hotfix - antd doesn't apply background color to overflowing cells\n    & table {\n      background-color: ${e.colorBgContainer};\n    }\n  `}
`;function c({columns:e,rows:t,loading:r,highlightRowId:a,setSortBy:c,headerGroups:d,columnsForWrapText:u,bulkSelectEnabled:h=!1,selectedFlatRows:p=[],toggleRowSelected:m,toggleAllRowsSelected:f,prepareRow:g,sticky:_,size:y=i.QS.Middle,pageIndex:v=0,pageSize:b=25,totalCount:E=0,onPageChange:S,isPaginationSticky:T=!1,showRowCount:A=!0}){const C=(0,o.useMemo)((()=>function(e,t,r){return e.map((e=>{var n;const{isSorted:o,isSortedDesc:a}=function(e,t){for(const o of e){const e=o.headers.find((e=>e.id===t));var r,n;if(e)return{isSorted:null!=(r=e.isSorted)&&r,isSortedDesc:null!=(n=e.isSortedDesc)&&n}}return{isSorted:!1,isSortedDesc:!1}}(t,e.id);return{title:e.Header,dataIndex:null!=(n=e.id)&&n.includes(".")?e.id.split("."):e.id,hidden:e.hidden,key:e.id,width:e.size?s[e.size]:void 0,ellipsis:!(null!=r&&r.includes(e.id)),defaultSortOrder:o?a?"descend":"ascend":void 0,sorter:!e.disableSortBy,render:(t,r)=>e.Cell?(0,e.Cell)({value:t,row:{original:r,id:r.rowId},column:e}):t,className:e.className}}))}(e,d,u)),[e,d,u]),w=(0,o.useMemo)((()=>function(e,t){return e.map((e=>(t(e),{rowId:e.id,...e.original,...e.getRowProps()})))}(t,g)),[t,g]),R=(0,o.useMemo)((()=>(null==p?void 0:p.map((e=>e.id)))||[]),[p]),I=(0,o.useMemo)((()=>{if(h)return{selectedRowKeys:R,onSelect:(e,t)=>{null==m||m(e.rowId,t)},onSelectAll:e=>{null==f||f(e)}}}),[h,R,m,f]),O=(0,o.useCallback)(((e,t)=>{const r=Math.max(0,(e||1)-1);null==S||S(r,t||b)}),[b,S]),D=(0,o.useCallback)(((e,t)=>`${t[0]}-${t[1]} of ${e}`),[]),x=(0,o.useCallback)(((e,t,r)=>{if(r&&r.field){const e=Array.isArray(r.field)?r.field.join("."):r.field;null==c||c([{id:e,desc:"descend"===r.order}])}}),[c]),N=(0,o.useMemo)((()=>{if(0===E)return!1;const e={pageSize:b,size:"default",showSizeChanger:!1,showQuickJumper:!1,align:"center",showTotal:A?D:void 0};return S?(e.current=v+1,e.total=E,e.onChange=O):(v>0&&(e.defaultCurrent=v+1),e.total=E),e}),[b,E,A,D,v,O,S]),L=(0,o.useCallback)((e=>(null==e?void 0:e.id)===a?"table-row-highlighted":""),[a]);return(0,n.Y)(l,{loading:r,sticky:null!=_&&_,columns:C,data:w,size:y,pagination:N,scroll:{x:"max-content"},tableLayout:"auto",rowKey:"rowId",rowSelection:I,locale:{emptyText:null},sortDirections:["ascend","descend","ascend"],isPaginationSticky:T,showRowCount:A,rowClassName:L,components:{header:{cell:e=>(0,n.Y)("th",{...e,role:"columnheader"})},body:{row:e=>(0,n.Y)("tr",{...e}),cell:e=>(0,n.Y)("td",{...e})}},onChange:x})}const d=(0,o.memo)(c)},60511:(e,t,r)=>{"use strict";var n,o;r.d(t,{$:()=>o,N:()=>n}),function(e){e.Charts="CHARTS",e.Dashboards="DASHBOARDS",e.Recents="RECENTS",e.SavedQueries="SAVED_QUERIES"}(n||(n={})),function(e){e.GoogleSheets="gsheets",e.DbConnection="dbconnection",e.DatasetCreation="datasetCreation",e.CSVUpload="csvUpload",e.ExcelUpload="excelUpload",e.ColumnarUpload="columnarUpload"}(o||(o={}))},61103:(e,t,r)=>{"use strict";r.d(t,{fv:()=>v});var n=r(79378),o=r(59744),a=r(90924),i=r(75574),s=r(10992),l=r(99106),c=r(32064);const d="polling",u="last_async_event_id";let h,p,m,f,g,_,y;const v=async e=>new Promise(((t,r)=>{const s=e.job_id;var l;l=async e=>{switch(e.status){case"done":{let{data:i,status:s}=await(async e=>{let t,r="success";try{const{json:r}=await n.A.get({endpoint:String(e.result_url)});t="result"in r?r.result:r}catch(e){r="error",t=await(0,o.h4)(e)}return{status:r,data:t}})(e);i=(0,a.A)(i),"success"===s?t(i):r(i);break}case"error":{const t=(0,o.io)(e);r(t);break}default:i.A.warn("received event with status",e.status)}var l;g[l=s]&&delete g[l]},g[s]=l})),b=(0,s.A)({method:"GET",endpoint:"/api/v1/async_event/"}),E=async e=>{e.forEach((e=>{const t=e.job_id,r=g[t];r?(r(e),delete _[t]):(_[t]||(_[t]=0),_[t]+=1,_[t]<=6?setTimeout((()=>{E([e])}),100*_[t]):(delete _[t],i.A.warn("listener not found for job_id",e.job_id))),(e=>{y=e.id;try{localStorage.setItem(u,y)}catch(e){i.A.warn("Error saving event Id to localStorage",e)}})(e)}))},S=async()=>{const e=y?{last_id:y}:{};if(Object.keys(g).length)try{const{result:t}=await b(e);null!=t&&t.length&&await E(t)}catch(e){i.A.warn(e)}p===d&&(f=window.setTimeout(S,m))};let T,A,C=0;const w=()=>{let e=h.GLOBAL_ASYNC_QUERIES_WEBSOCKET_URL;y&&(e+=`?last_id=${y}`),A=new WebSocket(e),A.addEventListener("open",(()=>{i.A.log("WebSocket connected"),clearTimeout(T),C=0})),A.addEventListener("close",(()=>{T=setTimeout((()=>{C+=1,C<=6?w():(i.A.warn("WebSocket not available, falling back to async polling"),S())}),2500)})),A.addEventListener("error",(()=>{A.readyState<2&&A.close()})),A.addEventListener("message",(async e=>{let t=[];try{t=[JSON.parse(e.data)],await E(t)}catch(e){i.A.warn(e)}}))};(()=>{if((0,l.G7)(l.TO.GlobalAsyncQueries)){f&&clearTimeout(f),g={},_={},y=null,h=(0,c.Ay)().common.conf,p=h.GLOBAL_ASYNC_QUERIES_TRANSPORT||d,m=h.GLOBAL_ASYNC_QUERIES_POLLING_DELAY||500;try{y=localStorage.getItem(u)}catch(e){i.A.warn("Failed to fetch last event Id from localStorage")}p===d&&S(),"ws"===p&&w()}})()},61412:(e,t,r)=>{"use strict";var n;r.d(t,{IG:()=>i,QI:()=>n,TY:()=>o,YD:()=>a}),function(e){e.Vertical="VERTICAL",e.Horizontal="HORIZONTAL"}(n||(n={}));const o="global",a=e=>e===o;var i;!function(e){e.DownloadAsImage="download_as_image",e.ExploreChart="explore_chart",e.ExportCsv="export_csv",e.ExportPivotCsv="export_pivot_csv",e.ExportFullCsv="export_full_csv",e.ExportXlsx="export_xlsx",e.ExportFullXlsx="export_full_xlsx",e.ForceRefresh="force_refresh",e.Fullscreen="fullscreen",e.ToggleChartDescription="toggle_chart_description",e.ViewQuery="view_query",e.ViewResults="view_results",e.DrillToDetail="drill_to_detail",e.CrossFilterScoping="cross_filter_scoping",e.Share="share",e.ShareByEmail="share_by_email",e.CopyLink="copy_link",e.Download="download",e.SaveModal="save_modal",e.RefreshDashboard="refresh_dashboard",e.AutorefreshModal="autorefresh_modal",e.SetFilterMapping="set_filter_mapping",e.EditProperties="edit_properties",e.EditCss="edit_css",e.ToggleFullscreen="toggle_fullscreen",e.ManageEmbedded="manage_embedded",e.ManageEmailReports="manage_email_reports",e.ExportPivotXlsx="export_pivot_xlsx"}(i||(i={}))},61419:(e,t,r)=>{"use strict";r.d(t,{EL:()=>h,Gw:()=>p,I4:()=>m,MQ:()=>u});var n=r(2445),o=r(50290),a=r(17437),i=r(74098);const s=o.I4.div`
  ${({theme:e})=>a.AH`
    display: -webkit-box;
    -webkit-line-clamp: 40;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;

    font-size: ${e.fontSizeSM}px;
    line-height: 1.2;

    &:not(:last-of-type) {
      margin-bottom: ${2*e.sizeUnit}px;
    }
  `}
`,l=o.I4.span`
  ${({theme:e})=>a.AH`
    font-weight: ${e.fontWeightStrong};
  `}
`,c=({label:e,text:t})=>(0,n.FD)(s,{children:[(0,n.Y)(l,{children:e}),": ",(0,n.Y)("span",{children:t})]}),d=e=>{var t,r;return!!((null==e||null==(t=e.current)?void 0:t.scrollWidth)>(null==e||null==(r=e.current)?void 0:r.clientWidth))},u=e=>e.verbose_name||e.column_name,h=e=>e.type?(0,n.Y)(c,{label:(0,i.t)("Column type"),text:e.type}):null,p=(e,t)=>e.column_name&&e.verbose_name||e.description||d(t)?(0,n.FD)(n.FK,{children:[e.column_name&&(0,n.Y)(c,{label:(0,i.t)("Column name"),text:e.column_name}),e.verbose_name&&(0,n.Y)(c,{label:(0,i.t)("Label"),text:e.verbose_name}),e.description&&(0,n.Y)(c,{label:(0,i.t)("Description"),text:e.description})]}):null,m=(e,t)=>e.verbose_name||e.description||e.label||d(t)?(0,n.FD)(n.FK,{children:[(0,n.Y)(c,{label:(0,i.t)("Metric name"),text:e.metric_name}),(e.label||e.verbose_name)&&(0,n.Y)(c,{label:(0,i.t)("Label"),text:e.label||e.verbose_name}),e.description&&(0,n.Y)(c,{label:(0,i.t)("Description"),text:e.description})]}):null},64457:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>l,Yf:()=>c});var n=r(96540),o=r(82960),a=r(61225),i=r(91412);const s={addInfoToast:i.Zt,addSuccessToast:i.WR,addWarningToast:i.Zd,addDangerToast:i.iB};function l(e){return(0,a.Ng)(null,(e=>(0,o.zH)(s,e)))(e)}function c(){const e=(0,a.wA)();return(0,n.useMemo)((()=>(0,o.zH)(s,e)),[e])}},64514:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(50970),o=r(14735),a=r(99467),i=r(14240),s=r(73308),l=r(99106);class c extends o.A{constructor(e,t={},r){super(((e,t)=>this.getColor(e,t,r))),this.originColors=void 0,this.colors=void 0,this.scale=void 0,this.forcedColors=void 0,this.labelsColorMapInstance=void 0,this.chartLabelsColorMap=void 0,this.multiple=void 0,this.originColors=e,this.colors=e,this.chartLabelsColorMap=new Map,this.labelsColorMapInstance=(0,i.Ay)(),this.multiple=0,this.scale=(0,n.A)(),this.scale.range(e),Object.entries(t).forEach((([r,n])=>{"number"==typeof n&&(t[r]=e[n%e.length])})),this.forcedColors=t}incrementColorRange(){const e=Math.floor(this.domain().length/this.originColors.length);if(e>this.multiple){this.multiple=e;const t=(0,s.yG)(this.originColors,e),r=this.originColors.concat(t);this.range(r),this.colors=r}}getColor(e,t,r){var n;const o=(0,a.A)(e),s=null==(n=this.forcedColors)?void 0:n[o],{source:c}=this.labelsColorMapInstance,d=c===i.iw.Dashboard?this.labelsColorMapInstance.getColorMap():this.chartLabelsColorMap,u=d.has(o);let h=s||(u?d.get(o):this.scale(o));return s||u||((0,l.G7)(l.TO.UseAnalogousColors)&&this.incrementColorRange(),(0,l.G7)(l.TO.AvoidColorsCollision)&&this.isColorUsed(h)&&(h=this.getNextAvailableColor(o,h))),this.chartLabelsColorMap.set(o,h),t&&this.labelsColorMapInstance.addSlice(o,h,t,r),h}isColorUsed(e){return this.getColorUsageCount(e)>0}getColorUsageCount(e){return Array.from(this.chartLabelsColorMap.values()).filter((t=>t===e)).length}getNextAvailableColor(e,t){const r=new Map(this.colors.map((e=>[e,this.getColorUsageCount(e)]))),n=Array.from(this.chartLabelsColorMap.keys()),o=n.indexOf(e),a=(()=>{const e=o>0?n[o-1]:null,t=o<n.length-1?n[o+1]:null;return[e?this.chartLabelsColorMap.get(e):null,t?this.chartLabelsColorMap.get(t):null].filter((e=>e))})(),i=e=>(r.get(e)||0)+(a.includes(e)?100:0),s=this.colors.find((e=>0===(r.get(e)||0)));return s||this.colors.filter((e=>e!==t)).reduce(((e,t)=>{const r=i(e);return i(t)<r?t:e}),t)}setColor(e,t){return this.forcedColors[(0,a.A)(e)]=t,this}getColorMap(){const e={};return this.scale.domain().forEach((t=>{e[t.toString()]=this.scale(t)})),{...e,...this.forcedColors}}copy(){const e=new c(this.scale.range(),this.forcedColors);return e.forcedColors={...this.forcedColors},e.domain(this.domain()),e.unknown(this.unknown()),e}domain(e){return void 0===e?this.scale.domain():(this.scale.domain(e),this)}range(e){return void 0===e?this.scale.range():(this.colors=e,this.scale.range(e),this)}unknown(e){return void 0===e?this.scale.unknown():(this.scale.unknown(e),this)}}const d=c},64535:(e,t,r)=>{"use strict";r.d(t,{c:()=>s,l:()=>i});var n=r(2445),o=r(78751),a=r(17437);const i=e=>(0,n.Y)(o.A,{css:a.AH`
      width: 100%;
    `,...e}),s=o.A.RangePicker},64942:(e,t,r)=>{"use strict";r.d(t,{A:()=>p,b:()=>h});var n=r(90179),o=r.n(n),a=r(74098),i=r(48813),s=r(30483),l=r(91156),c=r(50982),d=r(59674),u=r(92083);const h={id:0,chartAlert:null,chartStatus:"loading",chartStackTrace:null,chartUpdateEndTime:null,chartUpdateStartTime:0,latestQueryFormData:{},sliceFormData:null,queryController:null,queriesResponse:null,triggerQuery:!0,lastRendered:0};function p(e={},t){const r={[u.ADD_CHART]:()=>({...h,...t.chart}),[u.CHART_UPDATE_SUCCEEDED]:e=>({...e,chartStatus:"success",chartAlert:null,queriesResponse:t.queriesResponse,chartUpdateEndTime:(0,d.tB)()}),[u.CHART_UPDATE_STARTED]:e=>({...e,chartStatus:"loading",chartStackTrace:null,chartAlert:null,chartUpdateEndTime:null,chartUpdateStartTime:(0,d.tB)(),queryController:t.queryController}),[u.CHART_UPDATE_STOPPED]:e=>({...e,chartStatus:"stopped",chartAlert:(0,a.t)("Updating chart was stopped"),chartUpdateEndTime:(0,d.tB)()}),[u.CHART_RENDERING_SUCCEEDED]:e=>({...e,chartStatus:"rendered",chartUpdateEndTime:(0,d.tB)()}),[u.CHART_RENDERING_FAILED]:e=>({...e,chartStatus:"failed",chartStackTrace:t.stackTrace,chartAlert:(0,a.t)("An error occurred while rendering the visualization: %s",t.error)}),[u.CHART_UPDATE_FAILED](e){var r,n;return{...e,chartStatus:"failed",chartAlert:t.queriesResponse?null==(r=t.queriesResponse)||null==(r=r[0])?void 0:r.error:(0,a.t)("Network error."),chartUpdateEndTime:(0,d.tB)(),queriesResponse:t.queriesResponse,chartStackTrace:t.queriesResponse?null==(n=t.queriesResponse)||null==(n=n[0])?void 0:n.stacktrace:null}},[u.DYNAMIC_PLUGIN_CONTROLS_READY]:e=>({...e,sliceFormData:(0,l.LK)(t.controlsState)}),[u.TRIGGER_QUERY]:e=>({...e,triggerQuery:t.value,chartStatus:"loading"}),[u.RENDER_TRIGGERED]:e=>({...e,lastRendered:t.value}),[u.UPDATE_QUERY_FORM_DATA]:e=>({...e,latestQueryFormData:t.value}),[u.ANNOTATION_QUERY_STARTED](e){var r;null!=(r=e.annotationQuery)&&r[t.annotation.name]&&e.annotationQuery[t.annotation.name].abort();const n={...e.annotationQuery,[t.annotation.name]:t.queryController};return{...e,annotationQuery:n}},[u.ANNOTATION_QUERY_SUCCESS](e){const r={...e.annotationData,[t.annotation.name]:t.queryResponse.data},n={...e.annotationError};delete n[t.annotation.name];const o={...e.annotationQuery};return delete o[t.annotation.name],{...e,annotationData:r,annotationError:n,annotationQuery:o}},[u.ANNOTATION_QUERY_FAILED](e){const r={...e.annotationData};delete r[t.annotation.name];const n={...e.annotationError,[t.annotation.name]:t.queryResponse?t.queryResponse.error:(0,a.t)("Network error.")},o={...e.annotationQuery};return delete o[t.annotation.name],{...e,annotationData:r,annotationError:n,annotationQuery:o}}};if(t.type===u.REMOVE_CHART)return o()(e,[t.key]);if(t.type===u.UPDATE_CHART_ID){const{newId:r,key:n}=t;return e[r]={...e[n],id:r},delete e[n],e}return t.type===i.n||t.type===c.W?{...t.data.charts}:t.type===s.p3.SetDatasources?Object.fromEntries(Object.entries(e).map((([e,t])=>[e,"failed"===t.chartStatus&&t.chartStackTrace?{...t,chartStatus:"",chartStackTrace:null,chartAlert:null}:t]))):t.type in r?{...e,[t.key]:r[t.type](e[t.key])}:e}},65091:(e,t,r)=>{"use strict";function n({chartId:e,column:t}){return`${e}_${t}`}r.d(t,{s:()=>n,w:()=>a});const o=/^([0-9]+)_(.*)$/;function a(e){const t=o.exec(e);if(!t)throw new Error("Cannot parse invalid filter key");return{chartId:parseInt(t[1],10),column:t[2]}}},65432:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(91920);function o(e){return(0,n.eh)(e)?e:null!=e&&e.label?e.label:null==e?void 0:e.sqlExpression}},65471:(e,t,r)=>{"use strict";r.d(t,{K:()=>f});var n=r(2445),o=r(96540),a=r(50290),i=r(17437),s=r(95018),l=r(5250),c=r(7437),d=r(29113),u=r(68999),h=r(61419),p=r(35973);const m=a.I4.span`
  display: flex;
  align-items: center;
  svg {
    margin-right: ${({theme:e})=>e.sizeUnit}px;
  }
`;function f({column:e,labelRef:t,showType:r=!1}){const{expression:a,column_name:f,type_generic:g}=e,_=a&&a!==f,y=e.warning_markdown||e.warning_text||e.error_text,v=_?"expression":g,[b,E]=(0,o.useState)(e.column_name),[S,T]=(0,o.useState)(e.type);return(0,o.useLayoutEffect)((()=>{E((0,h.Gw)(e,t)),T((0,h.EL)(e))}),[t,e]),(0,n.FD)(m,{children:[r&&void 0!==v&&(0,n.Y)(s.m,{id:"metric-type-tooltip",title:S,placement:"bottomRight",align:{offset:[8,-2]},children:(0,n.Y)("span",{children:(0,n.Y)(d.P,{type:v})})}),(0,n.Y)(s.m,{id:"metric-name-tooltip",title:b,children:(0,n.Y)("span",{className:"option-label column-option-label",css:e=>i.AH`
            margin-right: ${e.sizeUnit}px;
          `,ref:t,children:(0,h.MQ)(e)})}),_&&(0,n.Y)(p.i,{sqlExpression:a}),e.is_certified&&(0,n.Y)(u.A,{metricName:e.metric_name,certifiedBy:e.certified_by,details:e.certification_details}),y&&(0,n.Y)(l.I,{type:"warning",tooltip:(0,n.Y)(c.z,{source:y}),label:`warn-${e.column_name}`,iconStyle:{marginLeft:0},...e.error_text&&{type:"error"}})]})}},65803:(e,t,r)=>{"use strict";r.d(t,{N:()=>a,m:()=>i});var n=r(99106),o=r(32064);const a=function(){var e;if(!document.getElementById("app"))return[];const t=new Set([window.location.hostname]);if("1"===new URLSearchParams(window.location.search).get("disableDomainSharding"))return Array.from(t);const r=(0,o.Ay)();return(0,n.Aq)(r.common.feature_flags),null!=r&&null!=(e=r.common)&&null!=(e=e.conf)&&e.SUPERSET_WEBSERVER_DOMAINS&&r.common.conf.SUPERSET_WEBSERVER_DOMAINS.forEach((e=>{t.add(e)})),Array.from(t)}(),i=a.length>1},66124:(e,t,r)=>{"use strict";r.d(t,{f8:()=>p,gS:()=>m,mj:()=>_,uZ:()=>u,vr:()=>h});var n=r(2404),o=r.n(n),a=r(96540),i=r(32885),s=r(33231),l=r(58561),c=r.n(l);const d={encode:e=>{if(null==e)return;const t=JSON.parse(JSON.stringify(e,((e,t)=>void 0===t?null:t)));return c().encode(t).replace(/%/g,"%25").replace(/&/g,"%26").replace(/\+/g,"%2B").replace(/#/g,"%23")},decode:e=>void 0===e||Array.isArray(e)?void 0:c().decode(e)},u=176,h=300,p="300px";class m extends Error{constructor(...e){super(...e),this.name="ListViewError"}}function f(e,t){return e.map((({id:e,urlDisplay:r,operator:n})=>({id:e,urlDisplay:r,operator:n,value:t[r||e]})))}function g(e,t){const r=[],n={};return Object.keys(e).forEach((t=>{const o={id:t,value:e[t]};n[t]=o,r.push(o)})),t.forEach((e=>{const t=e.urlDisplay||e.id,r=n[t];r&&(r.operator=e.operator,r.id=e.id)})),r}function _({fetchData:e,columns:t,data:r,count:n,initialPageSize:l,initialFilters:c=[],initialSort:u=[],bulkSelectMode:h=!1,bulkSelectColumnConfig:p,renderCard:m=!1,defaultViewMode:_="card"}){const[y,v]=(0,s.sq)({filters:d,pageIndex:s.hc,sortColumn:s.fr,sortOrder:s.fr,viewMode:s.fr}),b=(0,a.useMemo)((()=>y.sortColumn&&y.sortOrder?[{id:y.sortColumn,desc:"desc"===y.sortOrder}]:u),[u,y.sortColumn,y.sortOrder]),E={filters:y.filters?g(y.filters,c):[],pageIndex:y.pageIndex||0,pageSize:l,sortBy:b},[S,T]=(0,a.useState)(y.viewMode||(m?_:"table")),A=(0,a.useMemo)((()=>{const e=t.map((e=>({...e,filter:"exact"})));return h?[p,...e]:e}),[h,t]),{getTableProps:C,getTableBodyProps:w,headerGroups:R,rows:I,prepareRow:O,canPreviousPage:D,canNextPage:x,pageCount:N,gotoPage:L,setAllFilters:P,setSortBy:F,selectedFlatRows:M,toggleAllRowsSelected:k,state:{pageIndex:q,pageSize:z,sortBy:U,filters:Y}}=(0,i.useTable)({columns:A,count:n,data:r,disableFilters:!0,disableSortRemove:!0,initialState:E,manualFilters:!0,manualPagination:!0,manualSortBy:!0,autoResetFilters:!1,pageCount:Math.ceil(n/l)},i.useFilters,i.useSortBy,i.usePagination,i.useRowState,i.useRowSelect),[$,B]=(0,a.useState)(y.filters&&c.length?f(c,y.filters):[]);return(0,a.useEffect)((()=>{c.length&&B(f(c,y.filters?y.filters:{}))}),[c]),(0,a.useEffect)((()=>{var t;const r={};$.forEach((e=>{if(void 0!==e.value&&("string"!=typeof e.value||e.value.length>0)){const t=e.urlDisplay||e.id;r[t]=e.value}}));const n={filters:Object.keys(r).length?r:void 0,pageIndex:q};void 0!==(null==U||null==(t=U[0])?void 0:t.id)&&null!==U[0].id&&(n.sortColumn=U[0].id,n.sortOrder=U[0].desc?"desc":"asc"),m&&(n.viewMode=S);const o=void 0!==y.pageIndex&&n.pageIndex!==y.pageIndex?"push":"replace";v(n,o),e({pageIndex:q,pageSize:z,sortBy:U,filters:Y})}),[e,q,z,U,Y]),(0,a.useEffect)((()=>{o()(E.pageIndex,q)||L(E.pageIndex)}),[y]),{canNextPage:x,canPreviousPage:D,getTableBodyProps:w,getTableProps:C,gotoPage:L,headerGroups:R,pageCount:N,prepareRow:O,rows:I,selectedFlatRows:M,setAllFilters:P,setSortBy:F,state:{pageIndex:q,pageSize:z,sortBy:U,filters:Y,internalFilters:$,viewMode:S},toggleAllRowsSelected:k,applyFilterValue:(e,t)=>{B((r=>{if(r[e].value===t)return r;const n={...r[e],value:t},o=function(e,t,r){const n=e.find(((e,r)=>t===r));return[...e.slice(0,t),{...n,...r},...e.slice(t+1)]}(r,e,n);return P(o.filter((e=>!(void 0===e.value||Array.isArray(e.value)&&!e.value.length))).map((({value:e,operator:t,id:r})=>"between"===t&&Array.isArray(e)?[{value:e[0],operator:"gt",id:r},{value:e[1],operator:"lt",id:r}]:{value:e,operator:t,id:r})).flat()),L(0),o}))},setViewMode:T,query:y}}},66991:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(14811);function o(e){return(0,n.A)(e)}},67413:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(96540);function o(e,t){const r=(0,n.useRef)(t);return(0,n.useEffect)((()=>{r.current=e}),[e]),r.current}},68617:(e,t,r)=>{"use strict";r.d(t,{Ff:()=>c,Iw:()=>p,KP:()=>f,PD:()=>d,Qs:()=>g,VC:()=>y,_M:()=>l,iI:()=>h,ll:()=>v,n7:()=>u,rP:()=>m,tS:()=>b});var n=r(10992),o=r(74098),a=r(59744),i=r(91412),s=r(91448);const l="DASHBOARD_INFO_UPDATED",c="DASHBOARD_INFO_FILTERS_CHANGED";function d(e){return{type:l,newInfo:e}}function u(e){return{type:c,newInfo:e}}const h="SAVE_CHART_CONFIG_COMPLETE",p=({chartConfiguration:e,globalChartConfiguration:t})=>async(r,a)=>{r({type:"SAVE_CHART_CONFIG_BEGIN",chartConfiguration:e,globalChartConfiguration:t});const{id:s,metadata:l}=a().dashboardInfo,c=(0,n.A)({method:"PUT",endpoint:`/api/v1/dashboard/${s}`});try{const n=await c({json_metadata:JSON.stringify({...l,chart_configuration:null!=e?e:l.chart_configuration,global_chart_configuration:null!=t?t:l.global_chart_configuration})});r(d({metadata:JSON.parse(n.result.json_metadata)})),r({type:h,chartConfiguration:e,globalChartConfiguration:t})}catch(n){r({type:"SAVE_CHART_CONFIG_FAIL",chartConfiguration:e,globalChartConfiguration:t}),r((0,i.iB)((0,o.t)("Failed to save cross-filter scoping")))}},m="SET_FILTER_BAR_ORIENTATION",f="SET_CROSS_FILTERS_ENABLED",g="SET_DASHBOARD_THEME";function _(e){return{type:g,theme:e}}function y(e){return async(t,r)=>{const{id:o}=r().dashboardInfo,l=(0,n.A)({method:"PUT",endpoint:`/api/v1/dashboard/${o}`});try{const r=await l({theme_id:e});null===e?t(_(null)):r.result.theme?t(_(r.result.theme)):t(_({id:e,name:`Theme ${e}`}));const n=r.last_modified_time;n&&t((0,s.t_)(n))}catch(e){const r=await(0,a.ER)(e,"dashboard");throw t((0,i.iB)(r)),e}}}function v(e){return async(t,r)=>{const{id:o,metadata:l}=r().dashboardInfo,c=(0,n.A)({method:"PUT",endpoint:`/api/v1/dashboard/${o}`});try{const r=await c({json_metadata:JSON.stringify({...l,filter_bar_orientation:e})}),n=r.result,o=r.last_modified_time;if(n.json_metadata){const e=JSON.parse(n.json_metadata);e.filter_bar_orientation&&t((d=e.filter_bar_orientation,{type:m,filterBarOrientation:d}))}o&&t((0,s.t_)(o))}catch(e){const r=await(0,a.ER)(e,"dashboard");throw t((0,i.iB)(r)),e}var d}}function b(e){return async(t,r)=>{const{id:o,metadata:l}=r().dashboardInfo,c=(0,n.A)({method:"PUT",endpoint:`/api/v1/dashboard/${o}`});try{const r=await c({json_metadata:JSON.stringify({...l,cross_filters_enabled:e})}),n=r.result,o=r.last_modified_time;n.json_metadata&&t(function(e){return{type:f,crossFiltersEnabled:e}}(JSON.parse(n.json_metadata).cross_filters_enabled)),o&&t((0,s.t_)(o))}catch(e){const r=await(0,a.ER)(e,"dashboard");throw t((0,i.iB)(r)),e}}}},68999:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(20249),o=r.n(n),a=r(2445),i=r(50290),s=r(74098),l=r(95018);const c=i.I4.div`
  margin-bottom: ${({theme:e})=>2*e.sizeUnit}px;
`,d=function({certifiedBy:e,details:t,metricName:r}){const n=(0,i.DP)();return(0,a.Y)(l.m,{id:`${o()(r)}-tooltip`,title:(0,a.FD)("div",{children:[e&&(0,a.Y)(c,{children:(0,s.t)("Certified by %s",e)}),(0,a.Y)("div",{children:t})]}),children:(0,a.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"14",viewBox:"0 0 24 24",width:"14",children:(0,a.Y)("g",{children:(0,a.Y)("path",{fill:n.colorPrimary,d:"M23,12l-2.44-2.79l0.34-3.69l-3.61-0.82L15.4,1.5L12,2.96L8.6,1.5L6.71,4.69L3.1,5.5L3.44,9.2L1,12l2.44,2.79l-0.34,3.7 l3.61,0.82L8.6,22.5l3.4-1.47l3.4,1.46l1.89-3.19l3.61-0.82l-0.34-3.69L23,12z M9.38,16.01L7,13.61c-0.39-0.39-0.39-1.02,0-1.41 l0.07-0.07c0.39-0.39,1.03-0.39,1.42,0l1.61,1.62l5.15-5.16c0.39-0.39,1.03-0.39,1.42,0l0.07,0.07c0.39,0.39,0.39,1.02,0,1.41 l-5.92,5.94C10.41,16.4,9.78,16.4,9.38,16.01z"})})})})}},70532:(e,t,r)=>{"use strict";r.d(t,{Q:()=>a});var n=r(96540),o=r(23575);function a(e,t=o.Y.FAST_DEBOUNCE){const[r,a]=(0,n.useState)(e);return(0,n.useEffect)((()=>{const r=setTimeout((()=>{a(e)}),t);return()=>{clearTimeout(r)}}),[e,t]),r}},71020:(e,t,r)=>{"use strict";r.d(t,{sm:()=>Ne,vq:()=>Fe,M_:()=>Me});var n=r(60258),o=r(1265),a=r(40115),i=r(91412),s=r(64942),l=r(45519),c=r(90179),d=r.n(c),u=r(45898),h=r(68617),p=r(48813),m=r(91448),f=r(1367),g=r(97253),_=r(38970),y=r.n(_),v=r(30483),b=r(25451),E=r(84700),S=r(91003),T=r(2341),A=r(29624);function C(e){return[A.QP,A.oT,A.xY,A.rG].indexOf(e.type)>-1}var w=r(93606),R=r(43875),I=r(16042),O=r(96790);const D={[A.$9]:{[A.oT]:!0,[A.QP]:!0,[A.xY]:!0},[A.B8]:{[A.oT]:!0,[A.QP]:!0,[A.xY]:!0}};function x({parentType:e,childType:t}){if(!e||!t)return!1;const r=D[e];return!!r&&Boolean(r[t])}function N({dropResult:e,layout:t}){const{dragging:r,destination:n}=e,o=r.type,a=t[n.id],i=a.type;let s=(0,O.A)(o,r.meta);s.parents=(a.parents||[]).concat(a.id),C(r)&&(s.meta.width=(0,R.A)({dropResult:e,layout:t})||void 0);const l=x({parentType:i,childType:o}),c={[s.id]:s};if(l){const e=(0,O.A)(A._8);e.children=[s.id],e.parents=(a.parents||[]).concat(a.id),c[e.id]=e,s.parents=e.parents.concat(e.id),s=e}else if(o===A.wc){const e=(0,O.A)(A.B8);e.parents=(a.parents||[]).concat(a.id),s.children=[e.id],c[e.id]=e}const d=[...a.children];return d.splice(n.index,0,s.id),c[n.id]={...a,children:d},c}var L=r(97206);function P(e,t,r){const n=null==r?void 0:r[e];if(n){delete r[e];const{children:o=[]}=n;null==o||null==o.forEach||o.forEach((t=>{P(t,e,r)}));const a=null==r?void 0:r[t];if(Array.isArray(null==a?void 0:a.children)){const n=a.children.indexOf(e);if(n>-1){const e=[...a.children];e.splice(n,1),r[t]={...a,children:e}}}}}const F={[p.n]:(e,t)=>({...t.data.dashboardLayout.present}),[T.NW](e,t){const{payload:{nextComponents:r}}=t;return{...e,...r}},[T.Cl](e,t){var r;const{payload:{id:n,parentId:o}}=t;if(!(o&&n&&e[n]&&e[o]))return e;const a={...e};P(n,o,a);const i=a[o];return(null==i?void 0:i.type)===A._8&&0===(null==i||null==(r=i.children)?void 0:r.length)&&P(o,(0,w.A)({childId:o,layout:a}),a),a},[T.PX](e,t){const{payload:{dropResult:r}}=t,n=N({dropResult:r,layout:e});return{...e,...n}},[T.Yd](e,t){const{payload:{dropResult:r}}=t,{source:n,destination:o,dragging:a,position:i}=r;if(!n||!o||!a)return e;const s=function({entitiesMap:e,source:t,destination:r,position:n}){const o=[...e[t.id].children],a=[...e[r.id].children],i=o[t.index],s=t.id===r.id,l=t.type&&r.type===A.wc;let c=r.index;if(s){if(l){n===L.S4?c=Math.max(c,0):n===L.Db&&(c+=1);const o=n===L.Db&&t.index===r.index+1,a=n===L.S4&&t.index===r.index-1;if(o||a)return e;c>t.index&&(c-=1)}const a=function(e,t,r){const n=[...e],[o]=n.splice(t,1);return n.splice(r,0,o),n}(o,t.index,c);return{...e,[t.id]:{...e[t.id],children:a}}}return l&&(n===L.S4?c=Math.max(c,0):n===L.Db&&(c=Math.min(c+1,o.length-1))),o.splice(t.index,1),a.splice(c,0,i),{...e,[t.id]:{...e[t.id],children:o},[r.id]:{...e[r.id],children:a}}}({entitiesMap:e,source:n,destination:o,position:i});if(C(s[a.id])){const t=(0,R.A)({dropResult:r,layout:e})||void 0;(s[a.id].meta||{}).width!==t&&(s[a.id]={...s[a.id],meta:{...s[a.id].meta,width:t}})}if(x({parentType:o.type,childType:a.type})){const e=s[o.id],t=e.children,r=(0,O.A)(A._8);r.children=[t[o.index]],r.parents=(e.parents||[]).concat(o.id),t[o.index]=r.id,s[r.id]=r}return{...e,...s}},[T.Rc](e,t){const{payload:{dropResult:r}}=t,{source:n,dragging:o}=r,a=e[S.wv],i=a.children[0],s=e[i];if(n.id!==S.k0){const t=e[o.id].children[0],r=e[t],n=[...s.children].filter((e=>e!==o.id));return{...e,[S.wv]:{...a,children:[o.id]},[i]:{...s,children:[]},[t]:{...r,children:[...r.children,...n]}}}const l=N({dropResult:r,layout:e}),c=Object.values(l),d=c.find((e=>e.type===A.B8)),u=c.find((e=>e.type===A.wc));return d.children=[...s.children],l[i]={...s,children:[]},l[S.wv]={...a,children:[u.id]},{...e,...l}},[T.cL](e){const t=e[S.wv],r=t.children[0],n=e[r];if(n.type!==A.wc)return e;let o=[];const a={...e};return n.children.forEach((t=>{const r=e[t];o=[...o,...r.children],delete a[t]})),delete a[r],a[S.wv]={...t,children:[S.mK]},a[S.mK]={...e[S.mK],children:o},a},[T.YX](e){const t={...e};return(0,I.A)({currentComponent:t[S.wv],layout:t}),{...t}},[T.D3]:(e,t)=>({...e,[S.XY]:{...e[S.XY],meta:{...e[S.XY].meta,text:t.text}}})},M=[p.n,T.NW,T.Cl,T.PX,T.Rc,T.cL,T.jd,T.Yd,T.fD],k=(0,E.Ay)(((e,t)=>M.includes(t.type)?function(e={},t){return t.type in F?(0,F[t.type])(e,t):e}(e,t):e),{limit:S.nc+2,ignoreInitialState:!0});var q=r(43561),z=r(79378),U=r(91518),Y=r(25875),$=r(50816),B=r(38221),H=r.n(B);var j=r(5376);const Q=new class{constructor({callback:e=()=>{},sizeThreshold:t=1e3,delayThreshold:r=1e3}){this.queue=[],this.sizeThreshold=t,this.delayThreshold=r,this.trigger=H()(this.trigger.bind(this),this.delayThreshold),this.callback=e}append(e){this.queue.push(e),this.trigger()}trigger(){if(this.queue.length>0){const e=this.queue.splice(0,this.sizeThreshold);this.callback.call(null,e),this.queue.length>0&&this.trigger()}}}({callback:e=>{if(e.length<=0)return;let t="/superset/log/?explode=events";const{source:r,source_id:n}=e[0];if("dashboard"===r?t+=`&dashboard_id=${n}`:"slice"===r&&(t+=`&slice_id=${n}`),navigator.sendBeacon){const r=new FormData;r.append("events",(0,U.J)(e)),z.A.getGuestToken()&&r.append("guest_token",z.A.getGuestToken()),navigator.sendBeacon((0,j.A)(t),r)}else z.A.post({endpoint:t,postPayload:{events:e},parseMethod:null})},sizeThreshold:1024,delayThreshold:1e3});let V=0;const G=e=>t=>{let r;return n=>{var o,a;if(n.type!==Y.LOG_EVENT)return t(n);const{dashboardInfo:i,explore:s,impressionId:l,dashboardLayout:c,sqlLab:d}=e.getState();let u={impression_id:l,version:"v2"};const{eventName:h}=n.payload;let{eventData:p={}}=n.payload;h===$.v6&&(r=p.path);const m=r||(null==(o=window)||null==(o=o.location)?void 0:o.href);if(null!=i&&i.id&&null!=m&&m.includes("/dashboard/"))u={source:"dashboard",source_id:i.id,dashboard_id:i.id,...u};else if(null!=s&&s.slice)u={source:"explore",source_id:s.slice?s.slice.slice_id:0,...s.slice.slice_id&&{slice_id:s.slice.slice_id},...u};else if(null!=m&&m.includes("/sqllab/")){const e=d.queryEditors.find((({id:e})=>e===d.tabHistory.slice(-1)[0]));u={source:"sqlLab",source_id:null==e?void 0:e.id,db_id:null==e?void 0:e.dbId,schema:null==e?void 0:e.schema}}if(p={...u,ts:(new Date).getTime(),event_name:h,...p},$.YC.has(h)?p={...p,event_type:"timing",trigger_event:V}:(V=(0,q.Ak)(),p={...p,event_type:"user",event_id:V,visibility:document.visibilityState}),p.target_id&&null!=c&&null!=(a=c.present)&&a[p.target_id]){const{meta:e}=c.present[p.target_id];p.target_name=e.chartId?e.sliceName:e.text}return Q.append(p),p}};var W=r(27081),K=r(50982),X=r(44383),J=r.n(X),Z=r(90924),ee=r(92083),te=r(31912),re=r(91156),ne=r(29910),oe=r(42643),ae=r(96905),ie=r(71086),se=r.n(ie),le=r(97211),ce=r.n(le),de=r(99106),ue=r(13235),he=r(28082),pe=r(81237);const me={tables:he.ib,queries:he.eM,queryEditors:he.wX,unsavedQueryEditor:e=>(0,he.wX)([e])[0]},fe={paths:["sqlLab"],config:{slicer:e=>t=>{const r={};e.forEach((e=>{if((0,de.G7)(de.TO.SqllabBackendPersistence)){const{queryEditors:e,editorTabLastUpdatedAt:n,unsavedQueryEditor:o,tables:a,queries:i,tabHistory:s,lastUpdatedActiveTab:l,destroyedQueryEditors:c}=t.sqlLab,d=(0,ue.qM)(e,o,n),u=s.slice(-1)[0]!==l,h=Object.keys(c).length>0;if(d.length>0||u||h){const e=d.every((({inLocalStorage:e})=>!e));r.sqlLab={queryEditors:d,...!e&&{tabHistory:s,tables:a.filter((e=>e.inLocalStorage)),queries:se()(i,(e=>e.inLocalStorage&&!e.isDataPreview))},...u&&{tabHistory:s},destroyedQueryEditors:c}}}else delete t[e].common,"sqlLab"===e&&(r[e]=Object.fromEntries(Object.entries(t[e]).map((([e,t])=>{var r,n;return[e,null!=(r=null==(n=me[e])?void 0:n.call(me,t))?r:t]}))))}));const n=JSON.stringify(r),o=Math.round(n.length*pe.pO/pe.wc*100)/100;return t.localStorageUsageInKilobytes!==o&&(t.localStorageUsageInKilobytes=o),r},merge:(e,t={})=>({...e,...t,sqlLab:{...(null==t?void 0:t.sqlLab)||{},...e.sqlLab}})}},ge=ce()(fe.paths,fe.config);var _e=r(2404),ye=r.n(_e),ve=r(74098),be=r(88808),Ee=r(89874),Se=r(61225),Te=r(59674),Ae=r(49299),Ce=r(37203);function we(e,t,r,n=!1){if(e.tabHistory[e.tabHistory.length-1]!==r){const{queryEditors:n}=(0,Ce.ZT)(e,"queryEditors",{id:r},t);return{queryEditors:n}}return{unsavedQueryEditor:{...e.unsavedQueryEditor.id===r&&e.unsavedQueryEditor,...r?{id:r,...t}:e.unsavedQueryEditor,...!n&&{updatedAt:(new Date).getTime()}}}}var Re=r(90681),Ie=r(32064);const Oe={isLoading:null,sql:null,queryResult:null,error:null},De=e=>(t=e)=>t,xe=(0,Ie.Ay)(),Ne="USER_LOADED",Le=e=>[o.A,G,a.F.middleware],Pe={sqlLab:function e(t={},r){const n={[Ae.ADD_QUERY_EDITOR](){const e={...(0,Ce.ZT)(t,"queryEditors",t.unsavedQueryEditor,{...t.unsavedQueryEditor}),tabHistory:[...t.tabHistory,r.queryEditor.id]};return(0,Ce.CE)(e,"queryEditors",{...r.queryEditor,updatedAt:(new Date).getTime()})},[Ae.QUERY_EDITOR_SAVED](){const{query:e,result:n,clientId:o}=r,a=t.queryEditors.find((e=>e.id===o));return(0,Ce.ZT)(t,"queryEditors",a,{remoteId:n.remoteId,name:e.name},"id")},[Ae.UPDATE_QUERY_EDITOR](){const e=r.alterations.remoteId,n=t.queryEditors.find((t=>t.remoteId===e));return null==n?t:(0,Ce.ZT)(t,"queryEditors",n,r.alterations,"remoteId")},[Ae.CLONE_QUERY_TO_NEW_TAB](){const n=t.queryEditors.find((e=>e.id===t.tabHistory[t.tabHistory.length-1])),o={...n,...t.unsavedQueryEditor.id===n.id&&t.unsavedQueryEditor},a={remoteId:o.remoteId,name:(0,ve.t)("Copy of %s",o.name),dbId:r.query.dbId?r.query.dbId:null,catalog:r.query.catalog?r.query.catalog:null,schema:r.query.schema?r.query.schema:null,autorun:!0,sql:r.query.sql,queryLimit:r.query.queryLimit,maxRow:r.query.maxRow};return e({...t,unsavedQueryEditor:{}},Ae.addQueryEditor(a))},[Ae.REMOVE_QUERY_EDITOR](){var e;const n={...r.queryEditor,...r.queryEditor.id===t.unsavedQueryEditor.id&&t.unsavedQueryEditor};let o=(0,Ce.uI)(t,"queryEditors",n);const a=o.queryEditors.map((e=>{var t;return null!=(t=e.tabViewId)?t:e.id})),i={};Object.keys(t.queries).forEach((e=>{const r=t.queries[e];a.indexOf(r.sqlEditorId)>-1&&(i[e]=r)}));let s=t.tabHistory.slice();s=s.filter((e=>a.indexOf(e)>-1));const l=t.tables.filter((e=>{var t;return e.queryEditorId!==(null!=(t=n.tabViewId)?t:n.id)}));return o={...o,tabHistory:0===s.length&&o.queryEditors.length>0?o.queryEditors.slice(-1).map((e=>e.id)):s,tables:l,queries:i,unsavedQueryEditor:{...r.queryEditor.id!==t.unsavedQueryEditor.id&&t.unsavedQueryEditor},destroyedQueryEditors:{...o.destroyedQueryEditors,...!n.inLocalStorage&&{[null!=(e=n.tabViewId)?e:n.id]:Date.now()}}},o},[Ae.CLEAR_DESTROYED_QUERY_EDITOR](){const e={...t.destroyedQueryEditors};return delete e[r.queryEditorId],{...t,destroyedQueryEditors:e}},[Ae.REMOVE_QUERY](){const e={...t.queries};return delete e[r.query.id],{...t,queries:e}},[Ae.RESET_STATE]:()=>({...r.sqlLabInitialState}),[Ae.MERGE_TABLE](){const e={...r.table},n=t.tables.findIndex((t=>t.dbId===e.dbId&&t.queryEditorId===e.queryEditorId&&t.catalog===e.catalog&&t.schema===e.schema&&t.name===e.name));if(n>=0)return r.query&&(e.dataPreviewQueryId=r.query.id),{...t,tables:[...t.tables.slice(0,n),{...t.tables[n],...e,...t.tables[n].initialized&&{id:t.tables[n].id}},...t.tables.slice(n+1)],...e.expanded&&{activeSouthPaneTab:e.id}};e.dataPreviewQueryId=null;let o={...(0,Ce.CE)(t,"tables",e,Boolean(r.prepend)),...e.expanded&&{activeSouthPaneTab:e.id}};return r.query&&(o=(0,Ce.ZT)(o,"tables",e,{dataPreviewQueryId:r.query.id})),o},[Ae.EXPAND_TABLE]:()=>(0,Ce.ZT)(t,"tables",r.table,{expanded:!0}),[Ae.REMOVE_DATA_PREVIEW](){const e={...t.queries};return delete e[r.table.dataPreviewQueryId],{...(0,Ce.ZT)(t,"tables",r.table,{dataPreviewQueryId:null}),queries:e}},[Ae.CHANGE_DATA_PREVIEW_ID](){const e={...t.queries};delete e[r.oldQueryId];const n=[];return t.tables.forEach((e=>{e.dataPreviewQueryId===r.oldQueryId?n.push({...e,dataPreviewQueryId:r.newQuery.id}):n.push(e)})),{...t,queries:e,tables:n}},[Ae.COLLAPSE_TABLE]:()=>(0,Ce.ZT)(t,"tables",r.table,{expanded:!1}),[Ae.REMOVE_TABLES](){var e,n;const o=r.tables.map((e=>e.id)),a=t.tables.filter((e=>!o.includes(e.id)));return{...t,tables:a,...o.includes(t.activeSouthPaneTab)&&{activeSouthPaneTab:null!=(e=null==(n=a.find((({queryEditorId:e})=>e===r.tables[0].queryEditorId)))?void 0:n.id)?e:"Results"}}},[Ae.COST_ESTIMATE_STARTED]:()=>({...t,queryCostEstimates:{...t.queryCostEstimates,[r.query.id]:{completed:!1,cost:null,error:null}}}),[Ae.COST_ESTIMATE_RETURNED]:()=>({...t,queryCostEstimates:{...t.queryCostEstimates,[r.query.id]:{completed:!0,cost:r.json.result,error:null}}}),[Ae.COST_ESTIMATE_FAILED]:()=>({...t,queryCostEstimates:{...t.queryCostEstimates,[r.query.id]:{completed:!1,cost:null,error:r.error}}}),[Ae.START_QUERY](){let e,n={...t};if(r.query.sqlEditorId){var o;const a=(0,Ce.OL)(t.queryEditors,r.query.sqlEditorId,"tabViewId");e=null!=(o=null==a?void 0:a.id)?o:r.query.sqlEditorId;const i={...(0,Ce.OL)(t.queryEditors,e),...e===t.unsavedQueryEditor.id&&t.unsavedQueryEditor};if(i.latestQueryId&&t.queries[i.latestQueryId]){const e={...t.queries[i.latestQueryId].results,data:[],query:null},r={...t.queries[i.latestQueryId],results:e},o={...t.queries,[r.id]:r};n={...t,queries:o}}}return n=(0,Ce.As)(n,"queries",r.query),{...n,...we(t,{latestQueryId:r.query.id},e,r.query.isDataPreview)}},[Ae.STOP_QUERY]:()=>(0,Ce.j2)(t,"queries",r.query,{state:be.kZ.Stopped,results:[]}),[Ae.CLEAR_QUERY_RESULTS](){const e={...r.query.results};return e.data=[],(0,Ce.j2)(t,"queries",r.query,{results:e,cached:!0})},[Ae.REQUEST_QUERY_RESULTS]:()=>(0,Ce.j2)(t,"queries",r.query,{state:be.kZ.Fetching}),[Ae.QUERY_SUCCESS](){var e,n,o,a,i,s;if(r.query.state===be.kZ.STOPPED||r.results.status!==be.kZ.Success)return t;const l={endDttm:(0,Te.tB)(),progress:100,results:r.results,rows:(null==r||null==(e=r.results)||null==(e=e.query)?void 0:e.rows)||0,state:be.kZ.Success,executedSql:null==r||null==(n=r.results)||null==(n=n.query)?void 0:n.executedSql,limitingFactor:null==r||null==(o=r.results)||null==(o=o.query)?void 0:o.limitingFactor,tempSchema:null==r||null==(a=r.results)||null==(a=a.query)?void 0:a.tempSchema,tempTable:null==r||null==(i=r.results)||null==(i=i.query)?void 0:i.tempTable,errorMessage:null,cached:!1},c=null==r||null==(s=r.results)||null==(s=s.query)?void 0:s.resultsKey;return c&&(l.resultsKey=c),(0,Ce.j2)(t,"queries",r.query,l)},[Ae.QUERY_FAILED](){if(r.query.state===be.kZ.Stopped)return t;const e={state:be.kZ.Failed,errors:r.errors,errorMessage:r.msg,endDttm:(0,Te.tB)(),link:r.link};return(0,Ce.j2)(t,"queries",r.query,e)},[Ae.SET_ACTIVE_QUERY_EDITOR](){var e;if(t.queryEditors.map((e=>e.id)).indexOf(null==(e=r.queryEditor)?void 0:e.id)>-1&&t.tabHistory[t.tabHistory.length-1]!==r.queryEditor.id){const e={...(0,Ce.ZT)(t,"queryEditors",t.unsavedQueryEditor,{...t.unsavedQueryEditor}),unsavedQueryEditor:{}};return{...r.queryEditor.id===t.unsavedQueryEditor.id?(0,Ce.ZT)(e,"queryEditors",r.queryEditor,{...r.queryEditor,...t.unsavedQueryEditor}):e,tabHistory:[...t.tabHistory,r.queryEditor.id]}}return t},[Ae.LOAD_QUERY_EDITOR](){const e=(0,Ce.ZT)(t,"queryEditors",t.unsavedQueryEditor,{...t.unsavedQueryEditor});return(0,Ce.ZT)(e,"queryEditors",r.queryEditor,{...r.queryEditor})},[Ae.SET_TABLES]:()=>(0,Ce.sF)(t,"tables",r.tables),[Ae.SET_ACTIVE_SOUTHPANE_TAB]:()=>({...t,activeSouthPaneTab:r.tabId}),[Ae.MIGRATE_QUERY_EDITOR](){try{const{sqlLab:e}=JSON.parse(localStorage.getItem("redux"));e.queryEditors=e.queryEditors.filter((e=>e.id!==r.oldQueryEditor.id)),localStorage.setItem("redux",JSON.stringify({sqlLab:e}))}catch(e){}return(0,Ce.ZT)(t,"queryEditors",r.oldQueryEditor,r.newQueryEditor)},[Ae.MIGRATE_TABLE](){try{const{sqlLab:e}=JSON.parse(localStorage.getItem("redux"));e.tables=e.tables.filter((e=>e.id!==r.oldTable.id)),localStorage.setItem("redux",JSON.stringify({sqlLab:e}))}catch(e){}return(0,Ce.CE)((0,Ce.uI)(t,"tables",r.oldTable),"tables",r.newTable)},[Ae.MIGRATE_QUERY](){const e={...t.queries[r.queryId],sqlEditorId:r.queryEditorId},n={...t.queries,[e.id]:e};return{...t,queries:n}},[Ae.QUERY_EDITOR_SETDB]:()=>({...t,...we(t,{dbId:r.dbId},r.queryEditor.id)}),[Ae.QUERY_EDITOR_SET_CATALOG]:()=>({...t,...we(t,{catalog:r.catalog},r.queryEditor.id)}),[Ae.QUERY_EDITOR_SET_SCHEMA]:()=>({...t,...we(t,{schema:r.schema},r.queryEditor.id)}),[Ae.QUERY_EDITOR_SET_TITLE]:()=>({...t,...we(t,{name:r.name},r.queryEditor.id)}),[Ae.QUERY_EDITOR_SET_SQL](){const{unsavedQueryEditor:e}=t;return(null==e?void 0:e.id)===r.queryEditor.id&&e.sql===r.sql?t:{...t,...we(t,{sql:r.sql,...r.queryId&&{latestQueryId:r.queryId}},r.queryEditor.id)}},[Ae.QUERY_EDITOR_SET_CURSOR_POSITION]:()=>({...t,...we(t,{cursorPosition:r.position},r.queryEditor.id)}),[Ae.QUERY_EDITOR_SET_QUERY_LIMIT]:()=>({...t,...we(t,{queryLimit:r.queryLimit},r.queryEditor.id)}),[Ae.QUERY_EDITOR_SET_TEMPLATE_PARAMS]:()=>({...t,...we(t,{templateParams:r.templateParams},r.queryEditor.id)}),[Ae.QUERY_EDITOR_SET_SELECTED_TEXT]:()=>({...t,...we(t,{selectedText:r.sql},r.queryEditor.id,!0)}),[Ae.QUERY_EDITOR_SET_AUTORUN]:()=>({...t,...we(t,{autorun:r.autorun},r.queryEditor.id)}),[Ae.QUERY_EDITOR_PERSIST_HEIGHT]:()=>({...t,...we(t,{northPercent:r.northPercent,southPercent:r.southPercent},r.queryEditor.id)}),[Ae.QUERY_EDITOR_TOGGLE_LEFT_BAR]:()=>({...t,...we(t,{hideLeftBar:r.hideLeftBar},r.queryEditor.id)}),[Ae.SET_DATABASES](){const e={};return r.databases.forEach((t=>{e[t.id]={...t,extra_json:JSON.parse(t.extra||"")}})),{...t,databases:e}},[Ae.REFRESH_QUERIES](){let e={...t.queries},n=!1,{queriesLastUpdate:o}=t;return Object.entries(r.alteredQueries).forEach((([r,a])=>{if(!t.queries.hasOwnProperty(r)||t.queries[r].state!==be.kZ.Stopped&&t.queries[r].state!==be.kZ.Failed){var i;const s=(0,Ee.A)(a.changed_on),l=Date.parse(s);l>o&&(o=l);const c=null==(i=t.queries[r])?void 0:i.state,u=a.state;e[r]={...t.queries[r],...a,...a.startDttm&&{startDttm:Number(a.startDttm)},...a.endDttm&&{endDttm:Number(a.endDttm)},state:u===be.kZ.Success&&[be.kZ.Fetching,be.kZ.Success,be.kZ.Running].includes(c)?c:u},(0,Se.bN)(d()(e[r],["extra"]),d()(t.queries[r],["extra"]))&&ye()(e[r].extra,t.queries[r].extra)?e[r]=t.queries[r]:n=!0}})),n||(e=t.queries),{...t,queries:e,queriesLastUpdate:o}},[Ae.CLEAR_INACTIVE_QUERIES](){const{queries:e}=t,n=Object.fromEntries(Object.entries(e).filter((([,e])=>!(["running","pending"].includes(e.state)&&Date.now()-e.startDttm>r.interval&&0===e.progress))).map((([e,t])=>{var r;return[e,{...t,state:t.resultsKey&&null!=(r=t.results)&&r.status?t.results.status:t.state}]})));return{...t,queries:n}},[Ae.SET_USER_OFFLINE]:()=>({...t,offline:r.offline}),[Ae.CREATE_DATASOURCE_STARTED]:()=>({...t,isDatasourceLoading:!0,errorMessage:null}),[Ae.CREATE_DATASOURCE_SUCCESS]:()=>({...t,isDatasourceLoading:!1,errorMessage:null,datasource:r.datasource}),[Ae.CREATE_DATASOURCE_FAILED]:()=>({...t,isDatasourceLoading:!1,errorMessage:r.err}),[Ae.SET_EDITOR_TAB_LAST_UPDATE]:()=>({...t,editorTabLastUpdatedAt:r.timestamp}),[Ae.SET_LAST_UPDATED_ACTIVE_TAB]:()=>({...t,lastUpdatedActiveTab:r.queryEditorId})};return r.type in n?n[r.type]():t},localStorageUsageInKilobytes:De(0),messageToasts:function(e=[],t){switch(t.type){case i.Q$:{const{payload:r}=t,n=e.slice();return r.noDuplicate&&n.find((e=>e.text===r.text))?e:[r,...e]}case i.l4:{const{payload:{id:r}}=t;return[...e].filter((e=>e.id!==r))}default:return e}},common:De(xe.common),user:(e=xe.user||{},t)=>t.type===Ne?t.user:e,impressionId:De((0,q.Ak)()),charts:s.A,datasources:(e,t)=>t.type===v.p3.SetDatasources?function(e,t){return t.type===v.p3.SetDatasources?{...e,...y()(t.datasources,"uid")}:t.type===v.p3.SetDatasource?{...e,[t.key]:t.datasource}:e||{}}(e,t):function(e,t){return t.type===ae.ZS?{...e,[(0,oe.S)(t.datasource)]:t.datasource}:t.type===K.W?{...t.data.datasources}:e||{}}(e,t),dashboardInfo:function(e={},t){switch(t.type){case h._M:return{...e,...t.newInfo,last_modified_time:Math.round((new Date).getTime()/1e3)};case h.Ff:return{...e,metadata:{...e.metadata,native_filter_configuration:t.newInfo},last_modified_time:Math.round((new Date).getTime()/1e3)};case p.n:return{...e,...t.data.dashboardInfo};case h.rP:return{...e,filterBarOrientation:t.filterBarOrientation};case h.KP:return{...e,crossFiltersEnabled:t.crossFiltersEnabled};case h.Qs:return{...e,theme:t.theme,last_modified_time:Math.round((new Date).getTime()/1e3)};default:return e}},dashboardFilters:f.Ay,dataMask:l.A,nativeFilters:g.A,dashboardState:function(e={},t){const r={[p.n](){const r={...e,...t.data.dashboardState};if(r.activeTabs&&r.activeTabs.length>0){const e=Date.now();r.tabActivationTimes=r.tabActivationTimes||{},r.activeTabs.forEach((t=>{r.tabActivationTimes[t]=e}))}return r},[m.eK]:()=>({...e,css:t.css}),[m.r9](){const r=new Set(e.sliceIds);return r.add(t.slice.slice_id),{...e,sliceIds:Array.from(r)}},[m.m4](){const{sliceId:r}=t,n=new Set(e.sliceIds);return n.delete(r),{...e,sliceIds:Array.from(n)}},[m.hL]:()=>({...e,isStarred:t.isStarred}),[m.gH]:()=>({...e,isPublished:t.isPublished}),[m.kw]:()=>({...e,editMode:t.editMode}),[m.eZ](){const{maxUndoHistoryExceeded:r=!0}=t.payload;return{...e,maxUndoHistoryExceeded:r}},[m.zU]:()=>({...e}),[m.n2]:()=>({...e,colorScheme:t.colorScheme,updatedColorScheme:!0}),[m.ww]:()=>({...e,labelsColorMapMustSync:!0}),[m.fs]:()=>({...e,labelsColorMapMustSync:!1}),[m.tz]:()=>({...e,sharedLabelsColorsMustSync:!0}),[m.G7]:()=>({...e,sharedLabelsColorsMustSync:!1}),[m.bY](){const r={...e.expandedSlices},{sliceId:n}=t;return r[n]?delete r[n]:r[n]=!0,{...e,expandedSlices:r}},[m.pO]:()=>({...e,hasUnsavedChanges:!0}),[m.ff]:()=>({...e,dashboardIsSaving:!0}),[m.Mm]:()=>({...e,dashboardIsSaving:!1}),[m.sn]:()=>({...e,hasUnsavedChanges:!1,maxUndoHistoryExceeded:!1,editMode:!1,updatedColorScheme:!1,lastModifiedTime:t.lastModifiedTime}),[m.Cw](){const{hasUnsavedChanges:r}=t.payload;return{...e,hasUnsavedChanges:r}},[m.EI]:()=>({...e,refreshFrequency:t.refreshFrequency,shouldPersistRefreshFrequency:t.isPersistent,hasUnsavedChanges:t.isPersistent}),[m._q]:()=>({...e,isRefreshing:!0,lastRefreshTime:Date.now()}),[m.im]:()=>({...e,isFiltersRefreshing:!0}),[m.mk]:()=>({...e,isFiltersRefreshing:!1}),[m.u4]:()=>({...e,isRefreshing:!1}),[m.TF]:()=>({...e,directPathToChild:t.path,directPathLastUpdated:Date.now()}),[m.aj](){const r=new Set(e.activeTabs).difference(new Set(t.inactiveTabs.concat(t.prevTabId))),n=new Set(e.inactiveTabs).difference(new Set(t.activeTabs)).union(new Set(t.inactiveTabs)),o={...e.tabActivationTimes};return t.activeTabs.forEach((e=>{o[e]=Date.now()})),{...e,inactiveTabs:Array.from(n),activeTabs:Array.from(r.union(new Set(t.activeTabs))),tabActivationTimes:o}},[m.Nl]:()=>({...e,activeTabs:t.activeTabs}),[m.dv]:()=>({...e,overwriteConfirmMetadata:t.overwriteConfirmMetadata}),[m.Zh]:()=>({...e,focusedFilterField:{chartId:t.chartId,column:t.column}}),[m.Yx]:()=>e.focusedFilterField&&t.chartId===e.focusedFilterField.chartId&&t.column===e.focusedFilterField.column?{...e,focusedFilterField:null}:e,[m.S4]:()=>({...e,fullSizeChartId:t.chartId}),[m.qO]:()=>({...e,datasetsStatus:t.status}),[m.Hk]:()=>({...e,nativeFiltersBarOpen:t.isOpen})};return t.type in r?r[t.type]():e},dashboardLayout:k,sliceEntities:b.A,reports:function(e={},t){const r={[u.qJ](){var r,n;const{report:o,resourceId:a,creationMethod:i,filterField:s}=t,l=null==(r=o.result)?void 0:r.find((e=>e[s]===a));if(l)return{...e,[i]:{...e[i],[a]:l}};if(null!=e&&null!=(n=e[i])&&n[a]){const t={...e};return delete t[i][a],t}return{...e}},[u.hH](){const{result:r,id:n}=t.json,o={...r,id:n},a=o.dashboard||o.chart;return{...e,[o.creation_method]:{...e[o.creation_method],[a]:o}}},[u.CM](){const r={...t.json.result,id:t.json.id},n=r.dashboard||r.chart;return{...e,[r.creation_method]:{...e[r.creation_method],[n]:r}}},[u.HR](){const{report:r}=t,n=r.dashboard||r.chart;return{...e,[r.creation_method]:{...d()(e[r.creation_method],n)}}}};return t.type in r?r[t.type]():e},saveModal:function(e={},t){const r={[W.SET_SAVE_CHART_MODAL_VISIBILITY]:()=>({...e,isVisible:t.isVisible}),[W.FETCH_DASHBOARDS_SUCCEEDED]:()=>({...e,dashboards:t.choices}),[W.FETCH_DASHBOARDS_FAILED]:()=>({...e,saveModalAlert:`fetching dashboards failed for ${t.userId}`}),[W.SAVE_SLICE_FAILED]:()=>({...e,saveModalAlert:"Failed to save slice"}),[W.SAVE_SLICE_SUCCESS]:t=>({...e,data:t}),[K.W]:()=>({...t.data.saveModal})};return t.type in r?r[t.type]():e},explore:function(e={},t){const r={[ee.DYNAMIC_PLUGIN_CONTROLS_READY]:()=>({...e,controls:t.controlsState}),[ne.TOGGLE_FAVE_STAR]:()=>({...e,isStarred:t.isStarred}),[ne.POST_DATASOURCE_STARTED]:()=>({...e,isDatasourceMetaLoading:!0}),[ne.START_METADATA_LOADING]:()=>({...e,isDatasourceMetaLoading:!0}),[ne.STOP_METADATA_LOADING]:()=>({...e,isDatasourceMetaLoading:!1}),[ne.SYNC_DATASOURCE_METADATA]:()=>({...e,datasource:t.datasource}),[ne.UPDATE_FORM_DATA_BY_DATASOURCE](){const r={...e.form_data},{prevDatasource:n,newDatasource:o}=t,a={...e.controls},i=[];n.id===o.id&&n.type===o.type||(r.datasource=o.uid),Object.entries(a).forEach((([e,t])=>{("column_name"===t.valueKey||"savedMetrics"in t||"columns"in t||"options"in t&&!Array.isArray(t.options))&&(r[e]=(0,re.dI)(o,t,t.value),(0,Z.A)(r[e]).length>0&&r[e]!==a[e].default&&i.push(e))}));const s={...e,controls:a,datasource:t.newDatasource};return{...s,form_data:r,controls:(0,te.Eu)(s,r),controlsTransferred:i}},[ne.FETCH_DATASOURCES_STARTED]:()=>({...e,isDatasourcesLoading:!0}),[ne.SET_FIELD_VALUE](){const{controlName:r,value:n,validationErrors:o}=t;let a={...e.form_data,[r]:n};const i=e.form_data.metrics,s=e.form_data.column_config,l=a.viz_type;"metrics"===r&&i&&s&&(n.forEach(((e,t)=>{var r,n;!i.some((t=>(null==t?void 0:t.label)===(null==e?void 0:e.label)))&&(null==e?void 0:e.label)!==(null==(r=i[t])?void 0:r.label)&&s[null==(n=i[t])?void 0:n.label]&&(s[e.label]=s[i[t].label],delete s[i[t].label])})),a.column_config=s);const c=e.controls[t.controlName]||(0,re.QC)(t.controlName,l)||null,d={...(0,re.GW)(c,e,t.value)},u={...e.controls.column_config,...s&&{value:s}},h={...e,controls:{...e.controls,...c&&{[r]:d},..."metrics"===r&&{column_config:u}}},p={};Array.isArray(d.rerender)&&d.rerender.forEach((e=>{p[e]={...(0,re.GW)(h.controls[e],h,h.controls[e].value)}}));const m=d.validationErrors||[];(o||[]).forEach((e=>{m.includes(e)||m.push(e)}));const f=m&&m.length>0,g="viz_type"===t.controlName&&t.value!==e.controls.viz_type.value;let _=e.controls;if(g){const r=new re.a6(e.form_data).transform(t.value,e);a=r.formData,_=r.controlsState}const y=Object.entries(e.controls).filter((([,e])=>Array.isArray(null==e?void 0:e.validationDependancies)&&e.validationDependancies.includes(r))).map((([e,t])=>({controlState:t,dependantControlName:e})));let v={};return y.length>0&&(v=y.map((({controlState:n,dependantControlName:o})=>{const a={...e,form_data:{...e.form_data,[r]:t.value}};return{controlState:(0,re.GW)(n,a,null==n?void 0:n.value),dependantControlName:o}})).reduce(((e,{controlState:t,dependantControlName:r})=>(e[r]={...t},e)),{})),{...e,form_data:a,triggerRender:d.renderTrigger&&!f,controls:{..._,...c&&{[t.controlName]:{...d,validationErrors:m}},...p,...v}}},[ne.SET_EXPLORE_CONTROLS]:()=>({...e,controls:(0,te.Eu)(e,t.formData)}),[ne.SET_FORM_DATA]:()=>({...e,form_data:t.formData}),[ne.UPDATE_CHART_TITLE]:()=>({...e,sliceName:t.sliceName}),[ne.SET_SAVE_ACTION]:()=>({...e,saveAction:t.saveAction}),[ne.CREATE_NEW_SLICE]:()=>({...e,slice:t.slice,controls:(0,te.Eu)(e,t.form_data),can_add:t.can_add,can_download:t.can_download,can_overwrite:t.can_overwrite}),[ne.SET_STASH_FORM_DATA](){const{form_data:r,hiddenFormData:n}=e,{fieldNames:o,isHidden:a}=t;if(a)return{...e,hiddenFormData:{...n,...J()(r,o)},form_data:d()(r,o)};const i=J()(n,o);return 0===Object.keys(i).length?e:{...e,form_data:{...r,...i},hiddenFormData:d()(n,o)}},[ne.SLICE_UPDATED](){var r;return{...e,slice:{...e.slice,...t.slice,owners:t.slice.owners?t.slice.owners.map((e=>e.value)):null},sliceName:null!=(r=t.slice.slice_name)?r:e.sliceName,metadata:{...e.metadata,owners:t.slice.owners?t.slice.owners.map((e=>e.label)):null}}},[ne.SET_FORCE_QUERY]:()=>({...e,force:t.force}),[K.W]:()=>({...t.data.explore})};return t.type in r?r[t.type]():e},database:function(e=Oe,t){var r,n;switch(t.type){case"SET_QUERY":return{...e,sql:null!=(r=t.payload)?r:"",queryResult:null,error:null};case"SET_QUERY_IS_LOADING":return{...e,isLoading:t.payload};case"SET_QUERY_RESULT":return{...e,sql:null!=(n=t.payload.query.sql)?n:"",queryResult:t.payload,error:null};case"SET_QUERY_ERROR":return{...Oe,error:t.payload};case"RESET_DATABASE_STATE":return Oe;default:return e}}};function Fe({disableDebugger:e=!1,initialState:t=(0,Re.A)(xe),rootReducers:r=Pe,...o}={}){return(0,n.U1)({preloadedState:t,reducer:{[a.F.reducerPath]:a.F.reducer,...r},middleware:Le,devTools:!1,enhancers:[ge],...o})}const Me=Fe()},71065:(e,t,r)=>{"use strict";r.d(t,{cL:()=>s,mg:()=>i,zW:()=>a});const n={},o=e=>`__superset__/${e}`;async function a(e,t){const r=o(e);if(!window[r]&&!n[e]){const o=t();n[e]=o,window[r]=await o}return n[e]}async function i(e){return Promise.all(Object.entries(e).map((([e,t])=>a(e,t))))}function s(){Object.keys(n).forEach((e=>{delete window[o(e)],delete n[e]}))}},71323:(e,t,r)=>{"use strict";r.d(t,{$C:()=>C,Af:()=>D,En:()=>_,GP:()=>R,I7:()=>$,J7:()=>T,JF:()=>w,ND:()=>V,Q_:()=>N,Um:()=>U,VY:()=>L,Xh:()=>B,c8:()=>Q,dl:()=>Y,ec:()=>H,lH:()=>S,md:()=>v,mq:()=>x,oE:()=>E,s4:()=>O,u1:()=>A,uN:()=>z,yT:()=>I});var n=r(5287),o=r.n(n),a=r(50290),i=r(79378),s=r(74098),l=r(87470),c=r(59744),d=r(75574),u=r(58561),h=r.n(u),p=r(7840),m=r(90886),f=r(60511),g=r(79605);(()=>{const e=h(),t=[];for(let e=0;e<16;e+=1)for(let r=0;r<16;r+=1){if(e+r===0)continue;const n=String.fromCharCode(16*e+r);/\w|[-_./~]/.test(n)||t.push(`\\u00${e.toString(16)}${r.toString(16)}`)}e.not_idchar=t.join(""),e.not_idstart="-0123456789";const r=`[^${e.not_idstart}${e.not_idchar}][^${e.not_idchar}]*`;e.id_ok=new RegExp(`^${r}$`),e.next_id=new RegExp(r,"g")})();const _=a.I4.div`
  color: ${({theme:e})=>e.colorText};
`,y=e=>(t,r,n,o)=>async(n="",a,s)=>{var l;const c=`/api/v1/${t}/${e}/${r}`,d=h().encode_uri({filter:n,page:a,page_size:s}),{json:u={}}=await i.A.get({endpoint:`${c}?q=${d}`});let p=!1;const m=o?{label:`${o.firstName} ${o.lastName}`,value:o.userId}:void 0,f=[];return null==u||null==(l=u.result)||l.filter((({text:e})=>e.trim().length>0)).forEach((({text:e,value:t})=>{m&&t===m.value&&e===m.label?p=!0:f.push({label:e,value:t})})),!m||n&&!p||f.unshift(m),{data:f,totalCount:null==u?void 0:u.count}},v=5,b=(e,t)=>{const r={order_column:"changed_on_delta_humanized",order_direction:"desc",page:0,page_size:v,filters:e,select_columns:t};return e||delete r.filters,t||delete r.select_columns,h().encode(r)},E=e=>{const t={edited:[{col:"changed_by",opr:"rel_o_m",value:`${e}`}]},r=[i.A.get({endpoint:`/api/v1/dashboard/?q=${b(t.edited)}`}),i.A.get({endpoint:`/api/v1/chart/?q=${b(t.edited)}`})];return Promise.all(r).then((([e,t])=>{var r,n;return{editedDash:null==(r=t.json)?void 0:r.result.slice(0,3),editedChart:null==(n=e.json)?void 0:n.result.slice(0,3)}})).catch((e=>e))},S=(e,t,r=[{col:"owners",opr:"rel_m_m",value:`${e}`}],n)=>i.A.get({endpoint:`/api/v1/${t}/?q=${b(r,n)}`}).then((e=>{var t;return null==(t=e.json)?void 0:t.result})),T=(e,t,r,n)=>i.A.get({endpoint:t}).then((e=>{const t={},o=(0,l.E)(6);return e.json.result.reverse().forEach((e=>{o.set(e.item_url,e)})),((e,t)=>{const r=[i.A.get({endpoint:`/api/v1/chart/?q=${b(t,void 0)}`}),i.A.get({endpoint:`/api/v1/dashboard/?q=${b(t,void 0)}`})];return Promise.all(r).then((([e,t])=>({other:[...e.json.result,...t.json.result]}))).catch((t=>(e((0,s.t)("There was an error fetching the filtered charts and dashboards:"),t),{other:[]})))})(r,n).then((({other:e})=>(t.other=e,t.viewed=o.values().reverse(),t)))})),A=y("related"),C=y("distinct");function w(e){return async t=>{const r=await(0,c.h4)(t),n=null==r?void 0:r.errors,o=await p.A;null!=n&&n.length&&null!=o&&o.ERRORS&&n[0].error_type in o.ERRORS&&(r.message=o.ERRORS[n[0].error_type]),d.A.error(t),e(r.message||r.error)}}function R({id:e,slice_name:t},r,n,o,a,l){const c={pageIndex:0,pageSize:v,sortBy:[{id:"changed_on_delta_humanized",desc:!0}],filters:[{id:"created_by",operator:"rel_o_m",value:`${l}`}]};i.A.delete({endpoint:`/api/v1/chart/${e}`}).then((()=>{"Mine"===a?o(c):o(),r((0,s.t)("Deleted: %s",t))}),(()=>{n((0,s.t)("There was an issue deleting: %s",t))}))}function I({id:e,dashboard_title:t},r,n,o,a,l){return i.A.delete({endpoint:`/api/v1/dashboard/${e}`}).then((()=>{"Mine"===a?r({pageIndex:0,pageSize:v,sortBy:[{id:"changed_on_delta_humanized",desc:!0}],filters:[{id:"owners",operator:"rel_m_m",value:`${l}`}]}):r(),n((0,s.t)("Deleted: %s",t))}),w((e=>o((0,s.t)("There was an issue deleting %s: %s",t,e)))))}function O(e,t){let r=e.split("\n");return r.length>=t&&(r=r.slice(0,t),r.push("...")),r.join("\n")}const D=5,x=[576,768,992,1200].map((e=>`@media (max-width: ${e}px)`)),N=a.I4.div`
  ${({showThumbnails:e,theme:t})=>`\n    overflow: hidden;\n    display: grid;\n    justify-content: start;\n    grid-gap: ${12*t.sizeUnit}px ${4*t.sizeUnit}px;\n    grid-template-columns: repeat(auto-fit, 300px);\n    max-height: ${e?"314":"148"}px;\n    margin-top: ${-6*t.sizeUnit}px;\n    padding: ${e?`${8*t.sizeUnit+3}px ${20*t.sizeUnit}px`:`${8*t.sizeUnit+1}px ${20*t.sizeUnit}px`};\n  `}
`,L=a.I4.div`
  cursor: pointer;
  a {
    text-decoration: none;
  }
  .ant-card-cover > div {
    /* Height is calculated based on 300px width, to keep the same aspect ratio as the 800*450 thumbnails */
    height: 168px;
  }
`,P=e=>{var t;return"object"==typeof e&&Array.isArray(e._schema)&&!(null==(t=e._schema)||!t.find((e=>"Must provide a password for the database"===e)))},F=e=>{var t;return"object"==typeof e&&Array.isArray(e._schema)&&!(null==(t=e._schema)||!t.find((e=>"Must provide a password for the ssh tunnel"===e)))},M=e=>{var t;return"object"==typeof e&&Array.isArray(e._schema)&&!(null==(t=e._schema)||!t.find((e=>"Must provide a private key for the ssh tunnel"===e)))},k=e=>{var t;return"object"==typeof e&&Array.isArray(e._schema)&&!(null==(t=e._schema)||!t.find((e=>"Must provide a private key password for the ssh tunnel"===e)))},q=e=>"string"==typeof e&&e.includes("already exists and `overwrite=true` was not passed"),z=e=>e.map((e=>Object.entries(e.extra).filter((([,e])=>P(e))).map((([e])=>e)))).flat(),U=e=>e.map((e=>Object.entries(e.extra).filter((([,e])=>F(e))).map((([e])=>e)))).flat(),Y=e=>e.map((e=>Object.entries(e.extra).filter((([,e])=>M(e))).map((([e])=>e)))).flat(),$=e=>e.map((e=>Object.entries(e.extra).filter((([,e])=>k(e))).map((([e])=>e)))).flat(),B=e=>e.map((e=>Object.entries(e.extra).filter((([,e])=>q(e))).map((([e])=>e)))).flat(),H=e=>e.some((e=>{const t=Object.entries(e.extra).filter((([e])=>"issue_codes"!==e));return 0===t.length||!t.every((([,e])=>P(e)||q(e)||F(e)||M(e)||k(e)))})),j=(e,t)=>void 0!==e&&o()(e,t).length>0,Q=(e,t,r,n,o)=>{const a=(0,m.L)("can_upload","Database",e)&&j(t,o),i=j(r,o)&&(0,m.L)("can_upload","Database",e),s=j(n,o)&&(0,m.L)("can_upload","Database",e);return{canUploadCSV:a,canUploadColumnar:i,canUploadExcel:s,canUploadData:a||i||s}};function V(e,t,r,n){return e===g.G.Created||t===f.N.SavedQueries&&e===g.G.Mine?[{id:"created_by",operator:"rel_o_m",value:`${null==r?void 0:r.userId}`}]:t===f.N.SavedQueries&&e===g.G.Favorite?[{id:"id",operator:"saved_query_is_fav",value:!0}]:e===g.G.Mine&&r?[{id:"owners",operator:"rel_m_m",value:`${r.userId}`}]:e===g.G.Favorite&&[f.N.Dashboards,f.N.Charts].includes(t)?[{id:"id",operator:t===f.N.Dashboards?"dashboard_is_favorite":"chart_is_favorite",value:!0}]:e===g.G.Other?(n||[]).map((e=>({id:e.col,operator:e.opr,value:e.value}))):[]}},71403:(e,t,r)=>{"use strict";r.d(t,{Bb:()=>u,EN:()=>f,KY:()=>m,Q_:()=>c,YH:()=>s,gb:()=>h,lR:()=>p,s1:()=>l});var n=r(74098),o=r(29898),a=r(52966),i=r(29508);const s=(0,n.t)("D3 format syntax: https://github.com/d3/d3-format"),l=(0,n.t)('Only applies when "Label Type" is set to show values.'),c=(0,n.t)('Only applies when "Label Type" is not set to a percentage.'),d=[",d",".1s",".3s",",.1%",".2%",".3%",".4r",",.1f",",.2f",",.3f","+,","$,.2f"].map((e=>[e,`${e} (${(0,o.gV)(e).preview()})`])),u=[[a.A.SMART_NUMBER,(0,n.t)("Adaptive formatting")],["~g",(0,n.t)("Original value")],...d,["DURATION",(0,n.t)("Duration in ms (66000 => 1m 6s)")],["DURATION_SUB",(0,n.t)("Duration in ms (1.40008 => 1ms 400µs 80ns)")],["DURATION_COL",(0,n.t)("Duration in ms (10500 => 0:10.5)")],["MEMORY_DECIMAL",(0,n.t)("Memory in bytes - decimal (1024B => 1.024kB)")],["MEMORY_BINARY",(0,n.t)("Memory in bytes - binary (1024B => 1KiB)")],["MEMORY_TRANSFER_RATE_DECIMAL",(0,n.t)("Memory transfer rate in bytes - decimal (1024B => 1.024kB/s)")],["MEMORY_TRANSFER_RATE_BINARY",(0,n.t)("Memory transfer rate in bytes - binary (1024B => 1KiB/s)")]],h=(0,n.t)("D3 time format syntax: https://github.com/d3/d3-time-format"),p=[[i.f,(0,n.t)("Adaptive formatting")],["%d/%m/%Y","%d/%m/%Y | 14/01/2019"],["%m/%d/%Y","%m/%d/%Y | 01/14/2019"],["%d.%m.%Y","%d.%m.%Y | 14.01.2019"],["%Y-%m-%d","%Y-%m-%d | 2019-01-14"],["%Y-%m-%d %H:%M:%S","%Y-%m-%d %H:%M:%S | 2019-01-14 01:32:10"],["%d-%m-%Y %H:%M:%S","%d-%m-%Y %H:%M:%S | 14-01-2019 01:32:10"],["%H:%M:%S","%H:%M:%S | 01:32:10"]],m=u[0][0],f=p[0][0]},72973:(e,t,r)=>{"use strict";r.d(t,{S:()=>g});var n=r(2445),o=r(96540),a=r(50290),i=r(17437),s=r(42566),l=r(37977),c=r(5250),d=r(7437),u=r(29113),h=r(68999),p=r(61419),m=r(35973);const f=a.I4.div`
  align-items: center;
  display: flex;

  > svg {
    margin-right: ${({theme:e})=>e.sizeUnit}px;
  }
`;function g({metric:e,labelRef:t,openInNewWindow:r=!1,showFormula:a=!0,showType:g=!1,shouldShowTooltip:_=!0,url:y=""}){const v=e.verbose_name||e.metric_name||e.label,b=(0,n.Y)("span",{className:"option-label metric-option-label",css:e=>i.AH`
        margin-right: ${e.sizeUnit}px;
      `,ref:t,children:y?(0,n.Y)(s.o.Link,{href:y,target:r?"_blank":"",rel:"noreferrer",children:v}):v}),E=e.warning_markdown||e.warning_text||e.error_text,[S,T]=(0,o.useState)(e.metric_name);return(0,o.useLayoutEffect)((()=>{T((0,p.I4)(e,t))}),[t,e]),(0,n.FD)(f,{className:"metric-option",children:[g&&(0,n.Y)(u.P,{type:"expression"}),_?(0,n.Y)(l.A,{id:"metric-name-tooltip",title:S,children:b}):b,a&&e.expression&&(0,n.Y)(m.i,{sqlExpression:e.expression}),e.is_certified&&(0,n.Y)(h.A,{metricName:e.metric_name,certifiedBy:e.certified_by,details:e.certification_details}),E&&(0,n.Y)(c.I,{type:"warning",tooltip:(0,n.Y)(d.z,{source:E}),label:`warn-${e.metric_name}`,iconStyle:{marginLeft:0},...e.error_text&&{type:"error"}})]})}},73204:(e,t,r)=>{"use strict";r.d(t,{$G:()=>u,Lj:()=>p,Nv:()=>f,T1:()=>h,sH:()=>g,ut:()=>d});var n=r(58561),o=r.n(n),a=r(79378),i=r(59744),s=r(74098),l=r(91412);const c=200,d="ADD_SLICES",u="SET_SLICES",h="FETCH_ALL_SLICES_STARTED",p="FETCH_ALL_SLICES_FAILED",m=e=>e.reduce(((e,t)=>{let r=JSON.parse(t.params);var n,o;return r={...r,datasource:(n=t.datasource_id,o=t.datasource_type,`${n}__${o}`||r.datasource)},{...e,[t.id]:{slice_id:t.id,slice_url:t.url,slice_name:t.slice_name,form_data:r,datasource_name:t.datasource_name_text,datasource_url:t.datasource_url,datasource_id:t.datasource_id,datasource_type:t.datasource_type,changed_on:new Date(t.changed_on_utc).getTime(),description:t.description,description_markdown:t.description_markeddown,viz_type:t.viz_type,modified:t.changed_on_delta_humanized,changed_on_humanized:t.changed_on_delta_humanized,thumbnail_url:t.thumbnail_url,owners:t.owners,created_by:t.created_by}}}),{});function f(e){return t=>{t(function(e){return{type:u,payload:{slices:e}}}(e))}}function g(e,t,r="changed_on"){return n=>{n({type:h});const u=t?[{col:"slice_name",opr:"chart_all_text",value:t}]:[];return e&&u.push({col:"owners",opr:"rel_m_m",value:e}),a.A.get({endpoint:`/api/v1/chart/?q=${o().encode({columns:["changed_on_delta_humanized","changed_on_utc","datasource_id","datasource_type","datasource_url","datasource_name_text","description_markeddown","description","id","params","slice_name","thumbnail_url","url","viz_type","owners.id","created_by.id"],filters:u,page_size:c,order_column:"changed_on"===r?"changed_on_delta_humanized":r,order_direction:"changed_on"===r?"desc":"asc"})}`}).then((({json:e})=>{const{result:t}=e,r=m(t);return n(function(e){return{type:d,payload:{slices:e}}}(r))})).catch((e=>(0,i.h4)(e).then((({error:e})=>{n(function(e){return{type:p,payload:{error:e}}}(e||(0,s.t)("Could not fetch all saved charts"))),n((0,l.iB)((0,s.t)("Sorry there was an error fetching saved charts: ")+e))}))))}}},73308:(e,t,r)=>{"use strict";r.d(t,{E2:()=>l,OB:()=>a,Ob:()=>c,o3:()=>s,yG:()=>i});var n=r(84140);const o=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/;function a(e,t=186){let r=0,n=0,a=0;if(e.length>7){const t=o.exec(e);if(!t)throw new Error(`Invalid color: ${e}`);r=parseInt(t[1],10),n=parseInt(t[2],10),a=parseInt(t[3],10)}else{let t=e;if(t.startsWith("#")&&(t=t.substring(1)),3===t.length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]].join("")),6!==t.length)throw new Error(`Invalid color: ${e}`);r=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),a=parseInt(t.slice(4,6),16)}return.299*r+.587*n+.114*a>t?"#000":"#FFF"}function i(e,t){const r=[],o=e.map((e=>(0,n.A)(e).analogous(t+3).slice(3)));for(;null!=(a=o[o.length-1])&&a.length;){var a;o.forEach((e=>{const t=e.shift();r.push(t.toHexString())}))}return r}function s(e,t){if(t>1||t<0)throw new Error(`The opacity should between 0 and 1, but got: ${t}`);return`${e}${`0${Math.round(255*t).toString(16).toUpperCase()}`.slice(-2)}`}function l(e){let t="0",r="0",n="0";return 4===e.length?(t=`0x${e[1]}${e[1]}`,r=`0x${e[2]}${e[2]}`,n=`0x${e[3]}${e[3]}`):7===e.length&&(t=`0x${e[1]}${e[2]}`,r=`0x${e[3]}${e[4]}`,n=`0x${e[5]}${e[6]}`),`rgb(${+t}, ${+r}, ${+n})`}function c(e,t,r){let n=e.toString(16),o=t.toString(16),a=r.toString(16);return 1===n.length&&(n=`0${n}`),1===o.length&&(o=`0${o}`),1===a.length&&(a=`0${a}`),`#${n}${o}${a}`}},74395:(e,t,r)=>{"use strict";r.d(t,{E9:()=>p,K1:()=>d,Vp:()=>l,Z4:()=>m,_L:()=>h,_k:()=>u,fN:()=>f,l:()=>c});var n=r(43561),o=r(45519),a=r(75574),i=r(10900),s=r(91003);const l=(e,t,r=[])=>{if(r.includes(t))return!0;const n=e.get(t);return!!n&&n.some((n=>l(e,n,[...r,t])))},c=async(e,t,r)=>{try{let t;try{t=await e.validateFields()}catch(e){var n;if(null!=e&&null!=(n=e.errorFields)&&n.length||null==e||!e.outOfDate)throw e;t=e.values}return t}catch(e){var o;if(a.A.warn("Filter configuration failed:",e),null==(o=e.errorFields)||!o.length)return null;const n=e.errorFields;if(!n.some((e=>e.name[1]===t))){const e=n.find((e=>"filters"===e.name[0]));e&&r(e.name[1])}return null}},d=(e,t,r,n)=>async()=>{const a=t.modified.map((e=>{var t,a,l,c;const d=(null==(t=r.filters)?void 0:t[e])||n[e];if(!d)return;if(d.type===i.EH.Divider)return{id:e,type:i.EH.Divider,scope:{rootPath:[s.wv],excluded:[]},title:d.title,description:d.description};const u={};return d.dataset&&(u.datasetId=d.dataset.value),d.dataset&&d.column&&(u.column={name:d.column}),{id:e,adhoc_filters:d.adhoc_filters,time_range:d.time_range,controlValues:null!=(a=d.controlValues)?a:{},granularity_sqla:d.granularity_sqla,requiredFirst:Object.values(null!=(l=d.requiredFirst)?l:{}).find((e=>e)),name:d.name,filterType:d.filterType,targets:[u],defaultDataMask:null!=(c=d.defaultDataMask)?c:(0,o.Z)(),cascadeParentIds:d.dependencies||[],scope:d.scope,sortMetric:d.sortMetric,type:d.type,description:(d.description||"").trim()}})).filter(Boolean),l={...t,modified:a};await e(l)},u=(e,t,r,n)=>o=>{const a=window.setTimeout((()=>{(r=>{e((e=>({...e,[r]:{isPending:!1}}))),t((e=>e.filter((e=>e!==r))))})(o)}),5e3);e((e=>({...e,[o]:{isPending:!0,timerId:a}}))),n(o),r(!1)},h="NATIVE_FILTER-",p="NATIVE_FILTER_DIVIDER-",m=e=>`${e===i.EH.NativeFilter?h:p}${(0,n.Ak)()}`,f=e=>e.map((e=>e.id))},74842:(e,t,r)=>{"use strict";function n(e){return null!=e}r.d(t,{A:()=>n})},75116:(e,t,r)=>{"use strict";r.d(t,{q:()=>a});var n=r(50290),o=r(23195);const a=(0,n.I4)(o.l)`
  display: block;
  font-size: ${({theme:e})=>e.fontSizeSM}px;
  margin-bottom: ${({theme:e})=>e.sizeUnit}px;
`},76576:(e,t,r)=>{"use strict";r.d(t,{s:()=>a});var n=r(2445),o=r(86336);function a(e){return(0,n.Y)(o.A,{...e})}},76892:(e,t,r)=>{"use strict";r.d(t,{a:()=>a});var n=r(39892),o=r(1086);const a=(0,n.A)(class{constructor(){this.controls=void 0,this.controls={metrics:[],columns:[]}}setStandardizedControls(e){if((0,o.Wk)(e)){const{controls:t}=e.standardizedFormData;this.controls={metrics:t.metrics,columns:t.columns}}}shiftMetric(){return this.controls.metrics.shift()}shiftColumn(){return this.controls.columns.shift()}popAllMetrics(){return this.controls.metrics.splice(0,this.controls.metrics.length)}popAllColumns(){return this.controls.columns.splice(0,this.controls.columns.length)}clear(){this.controls={metrics:[],columns:[]}}})},77627:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(93590);const o=e=>(async e=>{if((0,n.nr)())try{const t=new ClipboardItem({"text/plain":e()});await navigator.clipboard.write([t])}catch{const t=await e();await navigator.clipboard.writeText(t)}else{const t=await e();await navigator.clipboard.writeText(t)}})(e).catch((()=>e().then((e=>new Promise(((t,r)=>{const n=document.getSelection();if(n){n.removeAllRanges();const t=document.createRange(),o=document.createElement("span");o.textContent=e,o.style.position="fixed",o.style.top="0",o.style.clip="rect(0, 0, 0, 0)",o.style.whiteSpace="pre",document.body.appendChild(o),t.selectNode(o),n.addRange(t);try{document.execCommand("copy")||r()}catch(e){r()}document.body.removeChild(o),n.removeRange?n.removeRange(t):n.removeAllRanges()}t()}))))))},78166:(e,t,r)=>{"use strict";r.d(t,{$:()=>i,s:()=>s});var n=r(96540),o=r(85767),a=r(58233);function i(e){return"string"==typeof e&&e in o.A?o.A[e]:e}function s(e,t={}){if("string"==typeof e&&e in a.A){const r=e;return{name:r,config:{...a.A[r],...t[r]}}}if(!e||"string"==typeof e||(0,n.isValidElement)(e))return e;if("name"in e&&"config"in e)return{...e,config:{...e.config,type:i(e.config.type)}};if("override"in e&&e.name in a.A){const{name:t,override:r}=e;return{name:t,config:{...a.A[t],...r}}}return null}},78546:(e,t,r)=>{"use strict";r.d(t,{j:()=>s});var n=r(90179),o=r.n(n),a=r(91920),i=r(89297);function s(e,t){if(!(0,i.aj)(e))return t;const{columns:r,extras:n}=t,s=[...r||[]],l=null==r?void 0:r.findIndex((t=>(0,a.eh)(t)&&(0,a.eh)(e.x_axis)&&t===e.x_axis||(0,a.q0)(t)&&(0,a.q0)(e.x_axis)&&t.sqlExpression===e.x_axis.sqlExpression));if(void 0!==l&&l>-1&&e.x_axis&&Array.isArray(r)){(0,a.q0)(r[l])?s[l]={timeGrain:null==n?void 0:n.time_grain_sqla,columnType:"BASE_AXIS",...r[l]}:s[l]={timeGrain:null==n?void 0:n.time_grain_sqla,columnType:"BASE_AXIS",sqlExpression:e.x_axis,label:e.x_axis,expressionType:"SQL",isColumnReference:!0};const i=o()(t,["is_timeseries"]);return i.columns=s,i}return t}},78752:(e,t,r)=>{"use strict";r.d(t,{D2:()=>T,Hq:()=>v,Ky:()=>S,Z6:()=>f,bp:()=>b,ik:()=>g,pb:()=>E,t7:()=>_,xV:()=>y});var n=r(44383),o=r.n(n),a=r(90179),i=r.n(a),s=r(5287),l=r.n(s),c=r(14240),d=r(90924),u=r(96548),h=r(14503),p=r(37203);const m=[],f=e=>e||void 0,g=e=>Array.isArray(e)?e:m,_=(e=[])=>{const{chartsLabelsMap:t}=(0,c.Ay)(),r=Array.from(t.values()).flatMap((({labels:e})=>e)),n=Array.from(r.reduce(((e,t)=>e.set(t,(e.get(t)||0)+1)),new Map)).filter((([,e])=>e>1)).map((([e])=>e));return Array.from(new Set([...(0,d.A)(e),...n]))},y=(e={})=>{const t=(0,c.Ay)(),r=Object.fromEntries(t.getColorMap());return Object.keys(e).forEach((e=>{delete r[e]})),r},v=(e,t={})=>i()(e,Object.keys(t)),b=e=>{var t;return(null==(t=(0,u.A)().get(e))?void 0:t.colors)||[]},E=(e,t,r)=>{if(!Object.keys(t).length)return!0;const n=l()(Object.keys(e),Object.keys(t)),a=o()(e,n),i=o()(t,n);return(0,p.r$)(a,i,{ignoreFields:Object.keys(r)})},S=e=>{const t=(0,c.Ay)();h.getNamespace(f(e)).resetColors(),t.reset()},T=(e,t=!1,r=!1,n=!1)=>{const o=f(null==e?void 0:e.color_namespace),a=h.getNamespace(o),i=null==e?void 0:e.color_scheme,s=(null==e?void 0:e.map_label_colors)||{},l=g(null==e?void 0:e.shared_label_colors),d=(null==e?void 0:e.label_colors)||{},u=((e,t)=>Object.fromEntries(Object.entries(e).filter((([e])=>t.includes(e)))))(s,l);t&&!Array.isArray(t)&&a.resetColors(),t&&Array.isArray(t)&&a.resetColorsForLabels(t),(t||r)&&((e,t,r=!1)=>{const n=f(e),o=h.getNamespace(n);(0,c.Ay)().updateColorMap(o,t,r)})(null==e?void 0:e.color_namespace,i,r);let p=s;t&&(p={...y(d)}),r&&(p={...s,...y(d)}),n&&(p=u),p={...p,...d},p&&Object.keys(p).forEach((e=>{a.setColor(e,p[e])}))}},78771:(e,t,r)=>{"use strict";r.d(t,{$:()=>h});var n=r(2445),o=r(96540),a=r(74098),i=r(50290),s=r(8558),l=r(42566),c=r(94185),d=r(95018),u=r(97163);const h=({errorType:e=(0,a.t)("Error"),message:t,type:r="error",description:h,descriptionDetails:p,descriptionDetailsCollapsed:m=!0,descriptionPre:f=!0,compact:g=!1,children:_,closable:y=!0,showIcon:v=!0,className:b})=>{const[E,S]=(0,o.useState)(!m),[T,A]=(0,o.useState)(!1),C=()=>{S(!E)},w=(0,i.DP)(),R={whiteSpace:"pre-wrap",fontFamily:w.fontFamilyCode,margin:`${w.sizeUnit}px 0`},I=o=>(0,n.Y)(c.F,{message:e,description:(0,n.FD)("div",{children:[t&&(0,n.Y)("div",{children:t}),h&&(0,n.Y)(l.o.Paragraph,{style:f?R:{},"data-testid":"description",children:h}),p&&(0,n.FD)("div",{children:[E&&(0,n.Y)(l.o.Paragraph,{style:f?R:{},children:p}),(0,n.Y)("span",{role:"button",tabIndex:0,onClick:C,style:{textDecoration:"underline",cursor:"pointer"},children:E?(0,a.t)("See less"):(0,a.t)("See more")})]})]}),type:r,showIcon:v,closable:o,className:b});return g?(0,n.FD)(n.FK,{children:[(0,n.Y)(d.m,{title:`${e}: ${t}`,children:(0,n.Y)("span",{role:"button",onClick:()=>A(!0),tabIndex:0,children:(()=>{const t="warning"===r?(0,n.Y)(s.F.WarningOutlined,{}):(0,n.Y)(s.F.ExclamationCircleOutlined,{}),o="warning"===r?w.colorWarningText:w.colorErrorText;return(0,n.FD)("div",{className:b,style:{cursor:"pointer"},children:[(0,n.FD)("span",{style:{color:o},children:[t," "]}),e]})})()})}),(0,n.FD)(u.aF,{name:e,title:e,show:T,onHide:()=>A(!1),footer:null,children:[I(!1),_]})]}):I(y)}},79104:(e,t,r)=>{"use strict";r.d(t,{As:()=>a,Xy:()=>u,Zd:()=>h,_3:()=>i,_s:()=>c,e2:()=>m,jO:()=>d,l6:()=>l,p_:()=>s,qe:()=>p});var n=r(41479),o=r(91003);const a={id:0,type:n.cT.Table,uid:"_placeholder_",datasource_name:"",table_name:"",columns:[],column_types:[],metrics:[],column_formats:{},verbose_map:{},main_dttm_col:"",description:""},i=53,s=32,l=260,c=550,d=80,u=374,h=["css","json_metadata.filter_scopes"],p=10,m={rootPath:[o.wv],excluded:[]}},79605:(e,t,r)=>{"use strict";var n,o;r.d(t,{G:()=>n,H:()=>o}),function(e){e.Favorite="Favorite",e.Mine="Mine",e.Other="Other",e.Viewed="Viewed",e.Created="Created",e.Edited="Edited"}(n||(n={})),function(e){e.Id="id",e.ChangedOn="changed_on",e.ChangedBy="changed_by",e.Database="database",e.DatabaseName="database.database_name",e.Schema="schema",e.Sql="sql",e.ExecutedSql="executed_sql",e.SqlTables="sql_tables",e.Status="status",e.TabName="tab_name",e.User="user",e.UserFirstName="user.first_name",e.StartTime="start_time",e.StartRunningTime="start_running_time",e.EndTime="end_time",e.Rows="rows",e.TmpTableName="tmp_table_name",e.TrackingUrl="tracking_url"}(o||(o={}))},81115:(e,t,r)=>{"use strict";var n,o,a;r.d(t,{$s:()=>o,Ay:()=>c,Gw:()=>l,HE:()=>i,jW:()=>a,l7:()=>s,nS:()=>n}),function(e){e.InteractiveChart="INTERACTIVE_CHART",e.NativeFilter="NATIVE_FILTER",e.DrillToDetail="DRILL_TO_DETAIL",e.DrillBy="DRILL_BY"}(n||(n={})),function(e){e.Explore="EXPLORE",e.Dashboard="DASHBOARD",e.FilterBar="FILTER_BAR",e.FilterConfigModal="FILTER_CONFIG_MODAL",e.Embedded="EMBEDDED"}(o||(o={})),function(e){e.Deprecated="DEPRECATED",e.Featured="FEATURED"}(a||(a={}));const i={[a.Deprecated]:"This chart uses features or modules which are no longer actively maintained. It will eventually be replaced or removed.",[a.Featured]:"This chart was tested and verified, so the overall experience should be stable."},s={[a.Deprecated]:{weight:-.1},[a.Featured]:{weight:.1}};var l;!function(e){e.Category="category",e.Value="value",e.Time="time",e.Log="log"}(l||(l={}));const c={}},81237:(e,t,r)=>{"use strict";r.d(t,{$V:()=>g,B8:()=>l,Cq:()=>T,GJ:()=>E,K8:()=>a,Ml:()=>v,QJ:()=>b,T_:()=>C,W8:()=>s,b:()=>h,cD:()=>f,d$:()=>d,de:()=>R,du:()=>p,e3:()=>w,fq:()=>u,lI:()=>A,oL:()=>c,pO:()=>y,sA:()=>o,sC:()=>S,tR:()=>m,v9:()=>I,wc:()=>_,yZ:()=>i});var n=r(74098);const o={offline:"error",failed:"error",pending:"info",fetching:"info",running:"warning",stopped:"error",success:"success"},a={offline:(0,n.t)("offline"),failed:(0,n.t)("failed"),pending:(0,n.t)("pending"),fetching:(0,n.t)("fetching"),running:(0,n.t)("running"),stopped:(0,n.t)("stopped"),success:(0,n.t)("success")},i={success:"success",failed:"failed",running:"running",offline:"offline",pending:"pending"},s={success:(0,n.t)("success"),failed:(0,n.t)("failed"),running:(0,n.t)("running"),offline:(0,n.t)("offline"),pending:(0,n.t)("pending")},l=5,c=3,d=51,u=400,h=10,p=30,m=70,f=2e3,g=600,_=1024,y=2,v=864e5,b=5120,E=1024,S=.9,T=8e3,A=100,C=90,w=60,R=55,I=50},81500:(e,t,r)=>{"use strict";r.d(t,{D:()=>s,W:()=>i});var n=r(90924),o=r(74842),a=r(1086);function i(e){const t={temporalColumns:[],defaultTemporalColumn:void 0};var r,i,s;return(0,a.TI)(e)&&(t.temporalColumns=(0,n.A)(e.columns).filter((e=>e.is_dttm))),(0,a.kj)(e)&&(t.temporalColumns=(0,n.A)(e.columns).filter((e=>e.is_dttm))),(0,a.TI)(e)&&(t.defaultTemporalColumn=e.main_dttm_col),(0,o.A)(t.defaultTemporalColumn)||(t.defaultTemporalColumn=null!=(r=null==(i=t.temporalColumns[0])?void 0:i.column_name)?r:null==(s=t.temporalColumns[0])?void 0:s.name),t}function s(e,t){const r=i(t).temporalColumns;for(let t=0;t<r.length;t+=1)if(r[t].column_name===e)return!0;return!1}},81670:(e,t,r)=>{"use strict";var n;r.d(t,{C:()=>n}),function(e){e.Info="INFO_TOAST",e.Success="SUCCESS_TOAST",e.Warning="WARNING_TOAST",e.Danger="DANGER_TOAST"}(n||(n={}))},82086:(e,t,r)=>{"use strict";r.d(t,{U:()=>i});var n=r(35625),o=r(39892);class a extends n.A{constructor(){super({name:"ErrorMessageComponent",overwritePolicy:n.m.Allow})}}const i=(0,o.A)(a)},82689:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=function(e,t){if(t){const r=new Set;return e.filter((e=>{const n=t(e);return!r.has(n)&&(r.add(n),!0)}))}return[...new Set(e)]}},84023:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(74098);function o(e,t){return Number(e)>+t&&(0,n.t)("Value cannot exceed %s",t)}},85179:(e,t,r)=>{"use strict";function n(e,t){return e().dashboardState.sliceIds.includes(t)}r.d(t,{$u:()=>a,B8:()=>u,C1:()=>c,GK:()=>l,GS:()=>d,J2:()=>i,Zg:()=>s,mg:()=>o});const o="CHANGE_FILTER";function a(e,t,r){return(a,i)=>{if(n(i,e)){const n=i().dashboardLayout.present;return a({type:o,chartId:e,newSelectedValues:t,merge:r,components:n})}return i().dashboardFilters}}const i="UPDATE_DIRECT_PATH_TO_FILTER";function s(e,t){return(r,o)=>n(o,e)?r({type:i,chartId:e,path:t}):o().dashboardFilters}const l="UPDATE_LAYOUT_COMPONENTS";function c(e){return t=>{t({type:l,components:e})}}const d="UPDATE_DASHBOARD_FILTERS_SCOPE";function u(e){return t=>{t({type:d,scopes:e})}}},85600:(e,t,r)=>{"use strict";r.d(t,{NG:()=>h,W1:()=>u});var n,o=r(50290),a=r(17437),i=r(87206);!function(e){e.MenuItem="menu-item",e.SubMenu="submenu",e.SubMenuItem="submenu-item"}(n||(n={}));const s=(0,o.I4)(i.A.Item)`
  ${({theme:e})=>a.AH`
    a {
      text-decoration: none;
    }
    &.ant-menu-item {
      div {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      a {
        transition: background-color ${e.motionDurationMid};
        &:after {
          content: '';
          position: absolute;
          bottom: -2px;
          left: 50%;
          width: 0;
          height: 3px;
          opacity: 0;
          transform: translateX(-50%);
          transition: translate ${e.motionDurationMid};
        }
        &:focus {
          @media (max-width: 767px) {
            background-color: ${e.colorPrimaryBgHover};
          }
        }
      }
    }
  `}
`,l=(0,o.I4)(i.A)`
  &.ant-menu-horizontal {
    background-color: inherit;
    border-bottom: 1px solid transparent;
  }
`,c=(0,o.I4)(i.A)`
  ${({theme:e})=>a.AH`
    display: flex;
    align-items: center;
    height: 100%;
    gap: 0;
    border-bottom: 0;
    line-height: ${e.lineHeight};
    &.ant-menu-horizontal > .ant-menu-item {
      height: 100%;
      display: flex;
      align-items: center;
      margin: 0;
      padding: ${2*e.sizeUnit}px ${4*e.sizeUnit}px;
      ::after {
        content: '';
        position: absolute;
        width: 98%;
        height: 2px;
        background-color: ${e.colorPrimaryBorderHover};
        bottom: ${e.sizeUnit/4}px;
        left: 0;
        transform: scale(0);
        transition: 0.2s all ease-out;
      }
      :hover::after {
        transform: scale(1);
      }
    }
    &.ant-menu-horizontal > .ant-menu-item-selected::after {
      transform: scale(1);
    }
  `}
`,d=(0,o.I4)(i.A.SubMenu)`
  ${({theme:e})=>a.AH`
    .ant-menu-submenu-open,
    .ant-menu-submenu-active {
      .ant-menu-submenu-title {
        &:after {
          opacity: 1;
          width: calc(100% - 1);
        }
      }
    }
    .ant-menu-submenu-title {
      display: flex;
      flex-direction: row-reverse;
      &:after {
        content: '';
        position: absolute;
        bottom: -3px;
        left: 50%;
        width: 0;
        height: 3px;
        opacity: 0;
        transform: translateX(-50%);
        transition: all ${e.motionDurationMid};
      }
    }
  `}
`,u=Object.assign(l,{Item:s,SubMenu:d,Divider:i.A.Divider,ItemGroup:i.A.ItemGroup}),h=Object.assign(c,{Item:s,SubMenu:d,Divider:i.A.Divider,ItemGroup:i.A.ItemGroup})},85767:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(2445),o=r(74098),a=r(22750),i=r(7308);const s={RadioButtonControl:function({value:e,options:t,onChange:r,...s}){var l;const c=e||t[0][0];return(0,n.FD)("div",{children:[(0,n.FD)("div",{role:"tablist","aria-label":"string"==typeof s.label?s.label:void 0,children:[(0,n.Y)(i.V,{...s}),(0,n.Y)(a.s.Group,{value:c,onChange:e=>r(e.target.value),children:t.map((([e,t])=>(0,n.Y)(a.s.Button,{value:e,"aria-label":"string"==typeof t?t:void 0,id:`tab-${e}`,type:"button","aria-selected":e===c,className:"btn btn-default "+(e===c?"active":""),onClick:t=>{var n;null==(n=t.currentTarget)||n.focus(),r(e)},children:t},JSON.stringify(e))))})]}),(0,n.Y)("div",{"aria-live":"polite",style:{position:"absolute",left:"-9999px",height:"1px",width:"1px",overflow:"hidden"},children:(0,o.t)("%s tab selected",null==(l=t.find((([e])=>e===c)))?void 0:l[1])})]})}}},86138:(e,t,r)=>{"use strict";r.d(t,{Gq:()=>o,UH:()=>i,jy:()=>l});const n=new Set(["IS NOT NULL","IS NULL"]);function o(e){return n.has(e)}const a=new Set(["==","!=",">","<",">=","<=","ILIKE","LIKE","NOT LIKE","REGEX","TEMPORAL_RANGE"]);function i(e){return a.has(e)}const s=new Set(["IN","NOT IN"]);function l(e){return s.has(e)}},86784:(e,t,r)=>{"use strict";r.d(t,{Fp:()=>T,RU:()=>f,Y8:()=>I,bN:()=>_,bR:()=>b,d5:()=>w,fn:()=>g,g9:()=>S,oG:()=>v,oi:()=>O,q4:()=>E,xK:()=>A,ym:()=>C});var n=r(58561),o=r.n(n),a=r(96540),i=r(79378),s=r(74098),l=r(59744),c=r(10992),d=r(71323),u=r(77627),h=r(5376),p=r(7840);const m=e=>"string"==typeof e?e:Object.entries(e).map((([e,t])=>Array.isArray(t)?`(${e}) ${t.join(", ")}`:`(${e}) ${t}`)).join("\n");function f(e,t,r,n=!0,l=[],c,u=!0,h){const[p,m]=(0,a.useState)({count:0,collection:l,loading:u,lastFetchDataConfig:null,permissions:[],bulkSelectEnabled:!1});function f(e){m((t=>({...t,...e})))}(0,a.useEffect)((()=>{n&&i.A.get({endpoint:`/api/v1/${e}/_info?q=${o().encode({keys:["permissions"]})}`}).then((({json:e={}})=>{f({permissions:e.permissions})}),(0,d.JF)((e=>r((0,s.t)("An error occurred while fetching %s info: %s",t,e)))))}),[]);const g=(0,a.useCallback)((({pageIndex:n,pageSize:a,sortBy:l,filters:u})=>{f({lastFetchDataConfig:{filters:u,pageIndex:n,pageSize:a,sortBy:l},loading:!0});const p=(c||[]).concat(u).filter((({value:e})=>""!==e&&null!=e)).map((({id:e,operator:t,value:r})=>({col:e,opr:t,value:r&&"object"==typeof r&&"value"in r?r.value:r}))),m=o().encode_uri({order_column:l[0].id,order_direction:l[0].desc?"desc":"asc",page:n,page_size:a,...p.length?{filters:p}:{},...null!=h&&h.length?{select_columns:h}:{}});return i.A.get({endpoint:`/api/v1/${e}/?q=${m}`}).then((({json:e={}})=>{f({collection:e.result,count:e.count,lastFetched:(new Date).toISOString()})}),(0,d.JF)((e=>r((0,s.t)("An error occurred while fetching %ss: %s",t,e))))).finally((()=>{f({loading:!1})}))}),[c]);return{state:{loading:p.loading,resourceCount:p.count,resourceCollection:p.collection,bulkSelectEnabled:p.bulkSelectEnabled,lastFetched:p.lastFetched},setResourceCollection:e=>f({collection:e}),hasPerm:function(e){return!!p.permissions.length&&Boolean(p.permissions.find((t=>t===e)))},fetchData:g,toggleBulkSelect:function(){f({bulkSelectEnabled:!p.bulkSelectEnabled})},refreshData:e=>p.lastFetchDataConfig?g(p.lastFetchDataConfig):e?g(e):null}}function g(e,t,r,n=""){const[o,l]=(0,a.useState)({loading:!1,resource:null,error:null});function c(e){l((t=>({...t,...e})))}return{state:o,setResource:e=>c({resource:e}),fetchResource:(0,a.useCallback)((o=>{c({loading:!0});const a=`/api/v1/${e}/${o}`,l=""!==n?`${a}/${n}`:a;return i.A.get({endpoint:l}).then((({json:e={}})=>(c({resource:e.result,error:null}),e.result)),(0,d.JF)((e=>{r((0,s.t)("An error occurred while fetching %ss: %s",t,m(e))),c({error:e})}))).finally((()=>{c({loading:!1})}))}),[r,e,t]),createResource:(0,a.useCallback)(((n,o=!1)=>(c({loading:!0}),i.A.post({endpoint:`/api/v1/${e}/`,body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((({json:e={}})=>(c({resource:{id:e.id,...e.result},error:null}),e.id)),(0,d.JF)((e=>{o||r((0,s.t)("An error occurred while creating %ss: %s",t,m(e))),c({error:e})}))).finally((()=>{c({loading:!1})})))),[r,e,t]),updateResource:(0,a.useCallback)(((n,o,a=!1,l=!0)=>(l&&c({loading:!0}),i.A.put({endpoint:`/api/v1/${e}/${n}`,body:JSON.stringify(o),headers:{"Content-Type":"application/json"}}).then((({json:e={}})=>(c({resource:{...e.result,id:e.id},error:null}),e.result)),(0,d.JF)((e=>(a||r((0,s.t)("An error occurred while fetching %ss: %s",t,JSON.stringify(e))),c({error:e}),e)))).finally((()=>{l&&c({loading:!1})})))),[r,e,t]),clearError:()=>c({error:null})}}function _(e,t,r){const[n,o]=(0,a.useState)({loading:!1,passwordsNeeded:[],alreadyExists:[],sshPasswordNeeded:[],sshPrivateKeyNeeded:[],sshPrivateKeyPasswordNeeded:[],failed:!1});function c(e){o((t=>({...t,...e})))}return{state:n,importResource:(0,a.useCallback)(((n,o={},a={},u={},h={},p=!1)=>{c({loading:!0,failed:!1});const m=new FormData;m.append("formData",n);const f=(0,s.t)("Please re-export your file and try importing again");return o&&m.append("passwords",JSON.stringify(o)),p&&m.append("overwrite","true"),a&&m.append("ssh_tunnel_passwords",JSON.stringify(a)),u&&m.append("ssh_tunnel_private_keys",JSON.stringify(u)),h&&m.append("ssh_tunnel_private_key_passwords",JSON.stringify(h)),i.A.post({endpoint:`/api/v1/${e}/import/`,body:m,headers:{Accept:"application/json"}}).then((()=>(c({passwordsNeeded:[],alreadyExists:[],sshPasswordNeeded:[],sshPrivateKeyNeeded:[],sshPrivateKeyPasswordNeeded:[],failed:!1}),!0))).catch((e=>(0,l.h4)(e).then((e=>(c({failed:!0}),e.errors?((0,d.ec)(e.errors)?r((0,s.t)("An error occurred while importing %s: %s",t,[...e.errors.map((e=>e.message)),f].join(".\n"))):c({passwordsNeeded:(0,d.uN)(e.errors),sshPasswordNeeded:(0,d.Um)(e.errors),sshPrivateKeyNeeded:(0,d.dl)(e.errors),sshPrivateKeyPasswordNeeded:(0,d.I7)(e.errors),alreadyExists:(0,d.Xh)(e.errors)}),!1):(r((0,s.t)("An error occurred while importing %s: %s",t,e.message||e.error)),!1)))))).finally((()=>{c({loading:!1})}))}),[])}}const y={chart:(0,c.A)({requestType:"rison",method:"GET",endpoint:"/api/v1/chart/favorite_status/"}),dashboard:(0,c.A)({requestType:"rison",method:"GET",endpoint:"/api/v1/dashboard/favorite_status/"}),tag:(0,c.A)({requestType:"rison",method:"GET",endpoint:"/api/v1/tag/favorite_status/"})};function v(e,t,r){const[n,o]=(0,a.useState)({}),l=e=>o((t=>({...t,...e})));return(0,a.useEffect)((()=>{t.length&&y[e](t).then((({result:e})=>{const t=e.reduce(((e,t)=>(e[t.id]=t.value,e)),{});l(t)}),(0,d.JF)((e=>r((0,s.t)("There was an error fetching the favorite status: %s",e)))))}),[t,e,r]),[(0,a.useCallback)(((t,n)=>{const o=`/api/v1/${e}/${t}/favorites/`;(n?i.A.delete({endpoint:o}):i.A.post({endpoint:o})).then((()=>{l({[t]:!n})}),(0,d.JF)((e=>r((0,s.t)("There was an error saving the favorite status: %s",e)))))}),[e]),n]}const b=(e,t)=>{const[r,n]=(0,a.useState)(null);return{sliceCurrentlyEditing:r,handleChartUpdated:function(r){const n=t.map((e=>e.id===r.id?{...e,...r}:e));e(n)},openChartEditModal:function(e){n({slice_id:e.id,slice_name:e.slice_name,description:e.description,cache_timeout:e.cache_timeout,certified_by:e.certified_by,certification_details:e.certification_details,is_managed_externally:e.is_managed_externally})},closeChartEditModal:function(){n(null)}}},E=(e,t,r)=>{(0,u.A)((()=>Promise.resolve(`${window.location.origin}${(0,h.A)(`/sqllab?savedQueryId=${e}`)}`))).then((()=>{r((0,s.t)("Link Copied!"))})).catch((()=>{t((0,s.t)("Sorry, your browser does not support copying."))}))},S=()=>p.A.DB_IMAGES,T=()=>p.A.DB_CONNECTION_ALERTS,A=()=>p.A.DB_CONNECTION_DOC_LINKS,C=(e,t,r)=>{i.A.post({endpoint:"api/v1/database/test_connection/",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((()=>{r((0,s.t)("Connection looks good!"))}),(0,d.JF)((e=>{t((0,s.t)("ERROR: %s",m(e)))})))};function w(){const[e,t]=(0,a.useState)(null);return[e,(0,a.useCallback)((()=>{i.A.get({endpoint:"/api/v1/database/available/"}).then((({json:e})=>{t(e)}))}),[t])]}const R=e=>e&&Array.isArray(null==e?void 0:e.catalog)?{...e,catalog:Object.assign({},...e.catalog.map((e=>({[e.name]:e.value}))))}:e;function I(){const[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(!1),[o,s]=(0,a.useState)(!1);return[e,(0,a.useCallback)((async(e,r=!1)=>{var o;if(null!=e&&null!=(o=e.parameters)&&o.ssh)return t(null),n(!1),s(!0),Promise.resolve([]);n(!0);try{return await i.A.post({endpoint:"/api/v1/database/validate_parameters/",body:JSON.stringify(R(e)),headers:{"Content-Type":"application/json"}}),t(null),n(!1),s(!0),[]}catch(e){return"function"==typeof e.json?e.json().then((({errors:e=[]})=>{const o=e.filter((e=>["CONNECTION_MISSING_PARAMETERS_ERROR","CONNECTION_ACCESS_DENIED_ERROR","INVALID_PAYLOAD_SCHEMA_ERROR"].includes(e.error_type)||r)).reduce(((e,t)=>{var r;const{message:n,extra:o}=t;if(null!=o&&o.catalog){const{idx:t}=o.catalog;return e[t]={...e[t],...o.catalog.name?{name:n}:{},...o.catalog.url?{url:n}:{}},e}var a;return null!=o&&o.invalid&&o.invalid.forEach((t=>{e[t]=n})),null!=o&&o.missing&&o.missing.forEach((t=>{e[t]="This is a required field"})),null!=o&&null!=(r=o.issue_codes)&&r.length&&(e.description=n||(null==(a=o.issue_codes[0])?void 0:a.message)),e}),{});return t(o),n(!1),s(!0),o})):(console.error("Unexpected error during validation:",e),n(!1),s(!0),{})}}),[t]),t,r,o,s]}const O=(e,t,r)=>{var n;return r?null==(n=e.reports[t])?void 0:n[r]:null}},87422:(e,t,r)=>{"use strict";r.d(t,{_:()=>o});var n=r(41479);const o=e=>null!=e&&e.hasOwnProperty("metrics")?(null==e?void 0:e.metrics)||[]:n.Cq},87470:(e,t,r)=>{"use strict";r.d(t,{E:()=>o});class n{constructor(e){if(this.cache=void 0,this.capacity=void 0,e<1)throw new Error("The capacity in LRU must be greater than 0.");this.capacity=e,this.cache=new Map}has(e){return this.cache.has(e)}get(e){if("string"!=typeof e)throw new TypeError("The LRUCache key must be string.");if(this.cache.has(e)){const t=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,t),t}}set(e,t){if("string"!=typeof e)throw new TypeError("The LRUCache key must be string.");this.cache.size>=this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(e,t)}clear(){this.cache.clear()}get size(){return this.cache.size}values(){return[...this.cache.values()]}}function o(e=100){return new n(e)}},87849:(e,t,r)=>{"use strict";var n=r(32064);r.p=`${(0,n.KX)()}${r.p}`},87875:(e,t,r)=>{"use strict";function n(e,t){return new Promise((r=>{setTimeout((()=>{r(e())}),t)}))}r.d(t,{A:()=>n})},88217:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var n=r(2445),o=r(96540),a=r(46942),i=r.n(a),s=r(79249),l=r(50290),c=r(95018);function d(e){const{tooltip:t,placement:r,disabled:a=!1,buttonSize:d,buttonStyle:u,className:h,cta:p,children:m,href:f,showMarginRight:g=!0,icon:_,...y}=e,v=(0,l.DP)(),{fontSizeSM:b,fontWeightStrong:E}=v;let S=32,T=18;"xsmall"===d?(S=22,T=5):"small"===d&&(S=30,T=10),"link"===u&&(T=4);let A="default",C="solid",w="primary";u&&"primary"!==u?"secondary"===u?(C="filled",w="primary"):"tertiary"===u?(C="outlined",w="default"):"dashed"===u?(C="dashed",A="dashed"):"danger"===u?w="danger":"link"===u&&(C="link"):(C="solid",A="primary");const R=m;let I=[];I=R&&R.type===o.Fragment?o.Children.toArray(R.props.children):o.Children.toArray(m);const O=g&&I.length>1?2*v.sizeUnit:0,D=null!=u?u:"primary",x=(0,n.Y)(s.Ay,{href:a?void 0:f,disabled:a,type:A,variant:C,danger:"danger"===D,color:w,className:i()(h,"superset-button",`superset-button-${u}`,{cta:!!p}),css:{display:"inline-flex",alignItems:"center",justifyContent:"center",lineHeight:1,fontSize:b,fontWeight:E,height:S,padding:`0px ${T}px`,minWidth:p?36*v.sizeUnit:void 0,minHeight:p?8*v.sizeUnit:void 0,marginLeft:0,"& + .superset-button":{marginLeft:2*v.sizeUnit},"& > span > :first-of-type":{marginRight:O},":not(:hover)":"secondary"===D&&!a&&{color:`${v.colorPrimaryTextHover} !important`}},icon:_,...y,children:m});return t?(0,n.Y)(c.m,{placement:r,title:t,children:a?(0,n.Y)("span",{css:{cursor:"not-allowed","& > .superset-button":{marginLeft:2*v.sizeUnit}},children:x}):x}):x}},88396:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(74098);function o(e){return!!(null==e||""===e||Array.isArray(e)&&0===e.length)&&(0,n.t)("cannot be empty")}},88808:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>m,Hk:()=>i,P7:()=>l,PA:()=>p,X:()=>u,aW:()=>h,eK:()=>a,hd:()=>d,kZ:()=>s,tG:()=>c});var n=r(41479),o=r(7683);const a={FRONTEND_CSRF_ERROR:"FRONTEND_CSRF_ERROR",FRONTEND_NETWORK_ERROR:"FRONTEND_NETWORK_ERROR",FRONTEND_TIMEOUT_ERROR:"FRONTEND_TIMEOUT_ERROR",GENERIC_DB_ENGINE_ERROR:"GENERIC_DB_ENGINE_ERROR",COLUMN_DOES_NOT_EXIST_ERROR:"COLUMN_DOES_NOT_EXIST_ERROR",TABLE_DOES_NOT_EXIST_ERROR:"TABLE_DOES_NOT_EXIST_ERROR",SCHEMA_DOES_NOT_EXIST_ERROR:"SCHEMA_DOES_NOT_EXIST_ERROR",CONNECTION_INVALID_USERNAME_ERROR:"CONNECTION_INVALID_USERNAME_ERROR",CONNECTION_INVALID_PASSWORD_ERROR:"CONNECTION_INVALID_PASSWORD_ERROR",CONNECTION_INVALID_HOSTNAME_ERROR:"CONNECTION_INVALID_HOSTNAME_ERROR",CONNECTION_PORT_CLOSED_ERROR:"CONNECTION_PORT_CLOSED_ERROR",CONNECTION_INVALID_PORT_ERROR:"CONNECTION_INVALID_PORT_ERROR",CONNECTION_HOST_DOWN_ERROR:"CONNECTION_HOST_DOWN_ERROR",CONNECTION_ACCESS_DENIED_ERROR:"CONNECTION_ACCESS_DENIED_ERROR",CONNECTION_UNKNOWN_DATABASE_ERROR:"CONNECTION_UNKNOWN_DATABASE_ERROR",CONNECTION_DATABASE_PERMISSIONS_ERROR:"CONNECTION_DATABASE_PERMISSIONS_ERROR",CONNECTION_MISSING_PARAMETERS_ERROR:"CONNECTION_MISSING_PARAMETERS_ERROR",OBJECT_DOES_NOT_EXIST_ERROR:"OBJECT_DOES_NOT_EXIST_ERROR",SYNTAX_ERROR:"SYNTAX_ERROR",CONNECTION_DATABASE_TIMEOUT:"CONNECTION_DATABASE_TIMEOUT",VIZ_GET_DF_ERROR:"VIZ_GET_DF_ERROR",UNKNOWN_DATASOURCE_TYPE_ERROR:"UNKNOWN_DATASOURCE_TYPE_ERROR",FAILED_FETCHING_DATASOURCE_INFO_ERROR:"FAILED_FETCHING_DATASOURCE_INFO_ERROR",TABLE_SECURITY_ACCESS_ERROR:"TABLE_SECURITY_ACCESS_ERROR",DATASOURCE_SECURITY_ACCESS_ERROR:"DATASOURCE_SECURITY_ACCESS_ERROR",DATABASE_SECURITY_ACCESS_ERROR:"DATABASE_SECURITY_ACCESS_ERROR",QUERY_SECURITY_ACCESS_ERROR:"QUERY_SECURITY_ACCESS_ERROR",MISSING_OWNERSHIP_ERROR:"MISSING_OWNERSHIP_ERROR",USER_ACTIVITY_SECURITY_ACCESS_ERROR:"USER_ACTIVITY_SECURITY_ACCESS_ERROR",DASHBOARD_SECURITY_ACCESS_ERROR:"DASHBOARD_SECURITY_ACCESS_ERROR",CHART_SECURITY_ACCESS_ERROR:"CHART_SECURITY_ACCESS_ERROR",OAUTH2_REDIRECT:"OAUTH2_REDIRECT",OAUTH2_REDIRECT_ERROR:"OAUTH2_REDIRECT_ERROR",BACKEND_TIMEOUT_ERROR:"BACKEND_TIMEOUT_ERROR",DATABASE_NOT_FOUND_ERROR:"DATABASE_NOT_FOUND_ERROR",MISSING_TEMPLATE_PARAMS_ERROR:"MISSING_TEMPLATE_PARAMS_ERROR",INVALID_TEMPLATE_PARAMS_ERROR:"INVALID_TEMPLATE_PARAMS_ERROR",RESULTS_BACKEND_NOT_CONFIGURED_ERROR:"RESULTS_BACKEND_NOT_CONFIGURED_ERROR",DML_NOT_ALLOWED_ERROR:"DML_NOT_ALLOWED_ERROR",INVALID_CTAS_QUERY_ERROR:"INVALID_CTAS_QUERY_ERROR",INVALID_CVAS_QUERY_ERROR:"INVALID_CVAS_QUERY_ERROR",SQLLAB_TIMEOUT_ERROR:"SQLLAB_TIMEOUT_ERROR",RESULTS_BACKEND_ERROR:"RESULTS_BACKEND_ERROR",ASYNC_WORKERS_ERROR:"ASYNC_WORKERS_ERROR",ADHOC_SUBQUERY_NOT_ALLOWED_ERROR:"ADHOC_SUBQUERY_NOT_ALLOWED_ERROR",INVALID_SQL_ERROR:"INVALID_SQL_ERROR",RESULT_TOO_LARGE_ERROR:"RESULT_TOO_LARGE_ERROR",GENERIC_COMMAND_ERROR:"GENERIC_COMMAND_ERROR",GENERIC_BACKEND_ERROR:"GENERIC_BACKEND_ERROR",INVALID_PAYLOAD_FORMAT_ERROR:"INVALID_PAYLOAD_FORMAT_ERROR",INVALID_PAYLOAD_SCHEMA_ERROR:"INVALID_PAYLOAD_SCHEMA_ERROR",MARSHMALLOW_ERROR:"MARSHMALLOW_ERROR",REPORT_NOTIFICATION_ERROR:"REPORT_NOTIFICATION_ERROR"},i={TABLE:"TABLE",VIEW:"VIEW"};var s;!function(e){e.Started="started",e.Stopped="stopped",e.Failed="failed",e.Pending="pending",e.Running="running",e.Scheduled="scheduled",e.Success="success",e.Fetching="fetching",e.TimedOut="timed_out"}(s||(s={}));const l=[s.Running,s.Started,s.Pending,s.Fetching,s.Scheduled],c=[s.Stopped,s.Failed,s.Success,s.TimedOut],d={id:"clientId2353",dbId:1,sql:"SELECT * FROM something",sqlEditorId:"dfsadfs",tab:"unimportant",tempTable:"",ctas:!1,cached:!1,errorMessage:null,extra:{progress:null},isDataPreview:!1,progress:0,resultsKey:null,state:s.Success,tempSchema:null,trackingUrl:null,templateParams:null,rows:42,queryLimit:100,limitingFactor:"",endDttm:1476910579693,duration:"",startDttm:1476910566092.96,time:{},user:{},userId:1,db:{},started:"",querylink:{},queryId:1,executedSql:"",output:"",actions:{},type:n.cT.Query,columns:[{column_name:"Column 1",type:"STRING",is_dttm:!1,type_generic:o.s.String},{column_name:"Column 3",type:"STRING",is_dttm:!1,type_generic:o.s.String},{column_name:"Column 2",type:"TIMESTAMP",is_dttm:!0,type_generic:o.s.Temporal}]},u={results:{displayLimitReached:!1,columns:[{column_name:"Column 1",type:"STRING",type_generic:o.s.String,is_dttm:!1},{column_name:"Column 3",type:"STRING",type_generic:o.s.String,is_dttm:!1},{column_name:"Column 2",type:"TIMESTAMP",type_generic:o.s.Temporal,is_dttm:!0}],data:[{"Column 1":"a","Column 2":"b","Column 3":"2014-11-11T00:00:00"}],expanded_columns:[],selected_columns:[{column_name:"Column 1",type:"STRING",type_generic:o.s.String,is_dttm:!1},{column_name:"Column 3",type:"STRING",type_generic:o.s.String,is_dttm:!1},{column_name:"Column 2",type:"TIMESTAMP",type_generic:o.s.Temporal,is_dttm:!0}],query:{limit:6}}},h={...d,...u};var p;!function(e){e.Row="row",e.Column="column"}(p||(p={}));const m={}},89105:(e,t,r)=>{"use strict";var n;r.d(t,{AU:()=>n,N0:()=>o,V0:()=>i,lr:()=>a}),function(e){e[e.V1=1]="V1"}(n||(n={}));const o=n.V1;var a;!function(e){e[e.SaveNew=1]="SaveNew",e[e.OverwriteDataset=2]="OverwriteDataset"}(a||(a={}));const i={metrics:[],groupby:[],time_range:"No filter",row_limit:1e3}},89232:(e,t,r)=>{"use strict";r.d(t,{Mx:()=>ne,vB:()=>Ne,DD:()=>Ee,$r:()=>h,oq:()=>oe.oq,hy:()=>Fe,RA:()=>ae.R,bb:()=>Me,XR:()=>Ie,_A:()=>Mt,$p:()=>Pe.$,tH:()=>ct,x6:()=>ke.x,WM:()=>jt,TR:()=>j,SE:()=>ft,kz:()=>ze,Kt:()=>ht,zb:()=>lt,B0:()=>Ue,uO:()=>oe.uO,kv:()=>oe.kv,c0:()=>oe.c0,nB:()=>je,UW:()=>bt,tI:()=>We,zz:()=>Ze,bf:()=>Dt,vw:()=>gt.v,Sk:()=>yt,$l:()=>et,UQ:()=>qe.U,Q:()=>xt});var n=r(2445),o=r(96540),a=r(74098),i=r(17437),s=r(77627),l=r(95018),c=r(64457);const d={copyNode:(0,n.Y)("span",{children:(0,a.t)("Copy")}),onCopyEnd:()=>{},shouldShowText:!0,wrapped:!0,tooltipText:(0,a.t)("Copy to clipboard"),hideTooltip:!1};class u extends o.Component{constructor(e){super(e),this.copyToClipboard=this.copyToClipboard.bind(this),this.onClick=this.onClick.bind(this)}onClick(){this.props.getText?this.props.getText((e=>{this.copyToClipboard(Promise.resolve(e))})):this.copyToClipboard(Promise.resolve(this.props.text||""))}getDecoratedCopyNode(){return(0,o.cloneElement)(this.props.copyNode,{style:{cursor:"pointer"},onClick:this.onClick})}copyToClipboard(e){(0,s.A)((()=>e)).then((()=>{this.props.addSuccessToast((0,a.t)("Copied to clipboard!"))})).catch((()=>{this.props.addDangerToast((0,a.t)("Sorry, your browser does not support copying. Use Ctrl / Cmd + C!"))})).finally((()=>{this.props.onCopyEnd&&this.props.onCopyEnd()}))}renderTooltip(e){return(0,n.Y)(n.FK,{children:this.props.hideTooltip?this.getDecoratedCopyNode():(0,n.Y)(l.m,{id:"copy-to-clipboard-tooltip",placement:"topRight",style:{cursor:e},title:this.props.tooltipText||"",trigger:["hover"],arrow:{pointAtCenter:!0},children:this.getDecoratedCopyNode()})})}renderNotWrapped(){return this.renderTooltip("pointer")}renderLink(){return(0,n.FD)("span",{css:{display:"inline-flex",alignItems:"center"},children:[this.props.shouldShowText&&this.props.text&&(0,n.Y)("span",{css:e=>i.AH`
              margin-right: ${e.sizeUnit}px;
            `,children:this.props.text}),this.renderTooltip("pointer")]})}render(){const{wrapped:e}=this.props;return e?this.renderLink():this.renderNotWrapped()}}u.defaultProps=d;const h=(0,c.Ay)(u),p="-1";var m;!function(e){e.Small="small",e.Middle="middle"}(m||(m={}));var f=r(50290),g=r(50669),_=r(8558),y=r(85600),v=r(28827);const b=f.I4.span`
  width: 14px;
`,E=({colId:e,api:t,pinnedLeft:r,pinnedRight:i,invisibleColumns:l,isMain:c,onVisibleChange:d})=>{var u;const h=(0,o.useCallback)((r=>{t.setColumnsPinned([e],r)}),[t,e]),m={label:(0,a.t)("Unhide"),key:"unHideSubMenu",icon:(0,n.Y)(_.F.EyeInvisibleOutlined,{iconSize:"m"}),children:[l.length>1&&{key:"allHidden",label:(0,n.Y)("b",{children:(0,a.t)("All %s hidden columns",l.length)}),onClick:()=>{t.setColumnsVisible(l,!0)}},...l.map((e=>({key:e.getColId(),label:e.getColDef().headerName,onClick:()=>{t.setColumnsVisible([e.getColId()],!0)}})))].filter(Boolean)},f=[{key:"copyData",label:(0,a.t)("Copy the current data"),icon:(0,n.Y)(_.F.CopyOutlined,{iconSize:"m"}),onClick:()=>{(0,s.A)((()=>new Promise(((r,n)=>{const o=t.getDataAsCsv({columnKeys:t.getAllDisplayedColumns().map((e=>e.getColId())).filter((t=>t!==e)),suppressQuotes:!0,columnSeparator:"\t"});o?r(o):n()}))))}},{key:"downloadCsv",label:(0,a.t)("Download to CSV"),icon:(0,n.Y)(_.F.DownloadOutlined,{iconSize:"m"}),onClick:()=>{t.exportDataAsCsv({columnKeys:t.getAllDisplayedColumns().map((e=>e.getColId())).filter((t=>t!==e))})}},{type:"divider"},{key:"autoSizeAllColumns",label:(0,a.t)("Autosize all columns"),icon:(0,n.Y)(_.F.ColumnWidthOutlined,{iconSize:"m"}),onClick:()=>{t.autoSizeAllColumns()}}];f.push(m),f.push({type:"divider"},{key:"resetColumns",label:(0,a.t)("Reset columns"),icon:(0,n.Y)(b,{className:"anticon"}),onClick:()=>{t.setColumnsVisible(l,!0);const e=t.getColumns();if(e){const r=e.filter((e=>e.getColId()!==p&&e.isPinned()));t.setColumnsPinned(r,null),t.moveColumns(e,0);const n=e.find((e=>e.getColId()!==p));n&&t.ensureColumnVisible(n,"start")}}});const g=[{key:"copy",label:(0,a.t)("Copy"),icon:(0,n.Y)(_.F.CopyOutlined,{iconSize:"m"}),onClick:()=>{(0,s.A)((()=>new Promise(((r,n)=>{const o=t.getDataAsCsv({columnKeys:[e],suppressQuotes:!0});o?r(o):n()}))))}}];return(r||i)&&g.push({key:"unpin",label:(0,a.t)("Unpin"),icon:(0,n.Y)(_.F.UnlockOutlined,{iconSize:"m"}),onClick:()=>h(null)}),r||g.push({key:"pinLeft",label:(0,a.t)("Pin Left"),icon:(0,n.Y)(_.F.VerticalRightOutlined,{iconSize:"m"}),onClick:()=>h("left")}),i||g.push({key:"pinRight",label:(0,a.t)("Pin Right"),icon:(0,n.Y)(_.F.VerticalLeftOutlined,{iconSize:"m"}),onClick:()=>h("right")}),g.push({type:"divider"},{key:"autosize",label:(0,a.t)("Autosize Column"),icon:(0,n.Y)(_.F.ColumnWidthOutlined,{iconSize:"m"}),onClick:()=>{t.autoSizeColumns([e])}},{key:"hide",label:(0,a.t)("Hide Column"),icon:(0,n.Y)(_.F.EyeInvisibleOutlined,{iconSize:"m"}),onClick:()=>{t.setColumnsVisible([e],!1)},disabled:(null==(u=t.getColumns())?void 0:u.length)===l.length+1}),l.length>0&&g.push(m),(0,n.Y)(v.LO,{placement:"bottomRight",trigger:["click"],onOpenChange:d,overlay:(0,n.Y)(y.W1,{style:{width:c?250:180},mode:"vertical",items:c?f:g})})},S=[null,"asc","desc"],T=f.I4.div`
  display: flex;
  flex: 1;
  &[role='button'] {
    cursor: pointer;
  }
`,A=f.I4.div`
  position: relative;
  display: inline-flex;
  align-items: center;
`,C=f.I4.span`
  position: absolute;
  right: 0;
`,w=f.I4.div`
  display: none;
  position: absolute;
  right: 0;
  &.main {
    flex-direction: row;
    justify-content: center;
    width: 100%;
  }
  & .ant-dropdown-trigger {
    cursor: context-menu;
    padding: ${({theme:e})=>2*e.sizeUnit}px;
    background-color: var(--ag-background-color);
    box-shadow: 0 0 2px var(--ag-chip-border-color);
    border-radius: 50%;
    &:hover {
      box-shadow: 0 0 4px ${({theme:e})=>e.colorBorderSecondary};
    }
  }
`,R=f.I4.div`
  position: absolute;
  top: 0;
`,I={agColumnHeader:({enableFilterButton:e,enableSorting:t,displayName:r,setSort:i,column:s,api:l})=>{const c=(0,f.DP)(),d=s.getColId(),u=s.isPinnedLeft(),h=s.isPinnedRight(),m=(0,o.useRef)(0),[g,y]=(0,o.useState)([]),[v,b]=(0,o.useState)(null),[I,O]=(0,o.useState)(),D=(0,o.useCallback)((e=>{m.current=(m.current+1)%S.length;const t=S[m.current];i(t,e.shiftKey),b(t)}),[i]),x=(0,o.useCallback)((e=>{var t;e&&y((null==(t=l.getColumns())?void 0:t.filter((e=>!e.isVisible())))||[])}),[l]),N=(0,o.useCallback)((()=>{var e,t;const r=-1!==l.getAllDisplayedColumns().findIndex((e=>e.getSortIndex())),n=s.getSortIndex();m.current=S.indexOf(null!=(e=s.getSort())?e:null),b(null!=(t=s.getSort())?t:null),O(r?n:null)}),[l,s]);return(0,o.useEffect)((()=>(l.addEventListener("sortChanged",N),()=>{l.isDestroyed()||l.removeEventListener("sortChanged",N)})),[l,N]),(0,n.FD)(n.FK,{children:[d!==p&&(0,n.FD)(T,{tabIndex:0,className:"ag-header-cell-label",...t&&{role:"button",onClick:D,title:(0,a.t)("To enable multiple column sorting, hold down the ⇧ Shift key while clicking the column header.")},children:[(0,n.Y)("div",{className:"ag-header-cell-text",children:r}),t&&(0,n.FD)(A,{children:[(0,n.Y)(_.F.Sort,{iconSize:"xxl"}),(0,n.FD)(R,{children:["asc"===v&&(0,n.Y)(_.F.SortAsc,{iconSize:"xxl",iconColor:c.colorPrimary}),"desc"===v&&(0,n.Y)(_.F.SortDesc,{iconSize:"xxl",iconColor:c.colorPrimary})]}),"number"==typeof I&&(0,n.Y)(C,{children:I+1})]})]}),e&&d&&l&&(0,n.Y)(w,{className:"customHeaderAction"+(d===p?" main":""),children:d&&(0,n.Y)(E,{colId:d,api:l,pinnedLeft:u,pinnedRight:h,invisibleColumns:g,isMain:d===p,onVisibleChange:x})})]})}},O=({api:e})=>e.refreshCells();function D({data:e,columns:t,sortable:r=!0,columnReorderable:a,height:l,externalFilter:c,showRowNumber:d,enableActions:u,size:h=m.Middle,striped:_}){const y=(0,f.DP)(),v=(0,o.useCallback)((()=>Boolean(c)),[c]),b=`${e.length}}`.length,E=(0,o.useCallback)((({event:e,column:t,data:r,value:n,api:o})=>{var a;if((null==document.getSelection||null==(a=document.getSelection())||null==a.toString||!a.toString())&&e&&"c"===e.key&&(e.ctrlKey||e.metaKey)){const e=t.getColId()===p?o.getAllDisplayedColumns().filter((e=>e.getColId()!==p)):[t],a=t.getColId()===p?[e.map((e=>e.getColId())).join("\t"),e.map((e=>null==r?void 0:r[e.getColId()])).join("\t")].join("\n"):String(n);(0,s.A)((()=>Promise.resolve(a)))}}),[]),S=(0,o.useMemo)((()=>[{field:p,valueGetter:"node.rowIndex+1",cellClass:"row-number-col",cellStyle:{backgroundColor:y.colorFillTertiary,padding:"0",textAlign:"center",fontSize:"0.9em",color:y.colorTextTertiary},width:30+6*b,suppressNavigable:!0,resizable:!1,pinned:"left",sortable:!1,...a&&{suppressMovable:!0}},...t.map((({label:e,headerName:n,width:o,render:a,comparator:i},s)=>({field:e,headerName:n,cellRenderer:a,sortable:r,comparator:i,...s===t.length-1&&{flex:1,width:o,minWidth:150}})))].slice(d?0:1)),[b,a,t,d,r,y]),T=(0,o.useMemo)((()=>({...!a&&{suppressMovable:!0},resizable:!0,sortable:r,filter:Boolean(u)})),[a,u,r]),A=y.sizeUnit*(h===m.Middle?9:7),C=(0,o.useMemo)((()=>({enableCellTextSelection:!0,ensureDomOrder:!0,suppressFieldDotNotation:!0,headerHeight:A,rowSelection:"multiple",rowHeight:A})),[A]);return(0,n.Y)("div",{css:i.AH`
        width: 100%;
        height: ${l}px;

        /* Handle hover state for row number column */
        .ag-row-hover .row-number-col {
          background: ${y.colorFillSecondary};
        }

        .ag-header-cell {
          overflow: hidden;
        }

        & [role='columnheader']:hover .customHeaderAction {
          display: flex;
        }
      `,children:(0,n.Y)(g.lQ,{rowData:e,columnDefs:S,defaultColDef:T,onSortChanged:O,isExternalFilterPresent:v,doesExternalFilterPass:c,components:I,gridOptions:C,onCellKeyDown:E})})}const x="NULL";var N=r(7566),L=r(7010);const P=()=>{const e=(0,f.DP)();return{base00:e.colorBgContainer,base01:e.colorBgLayout,base02:e.colorBorder,base03:e.colorBorder,base04:e.colorText,base05:e.colorText,base06:e.colorText,base07:e.colorText,base08:e.colorError,base09:e.colorErrorHover,base0A:e.colorErrorText,base0B:e.colorSuccess,base0C:e.colorPrimaryBgHover,base0D:e.colorPrimary,base0E:e.colorPrimaryActive,base0F:e.colorErrorText}};var F=r(41876),M=r(88217),k=r(21013),q=r.n(k);function z(e){return"string"==typeof e&&/^"-?\d+"$/.test(e)?e.substring(1,e.length-1):e}function U(e){return(0,n.Y)(n.FK,{children:z(e)})}const Y=({modalTitle:e,jsonObject:t,jsonValue:r})=>{const a=P(),i=(0,o.useMemo)((()=>"object"==typeof r?JSON.stringify(r):r),[r]);return(0,n.Y)(F.g,{modalBody:(0,n.Y)(L.d,{data:t,theme:a,valueRenderer:U}),modalFooter:(0,n.Y)(M.$,{children:(0,n.Y)(h,{shouldShowText:!1,text:i})}),modalTitle:e,triggerNode:(0,n.Y)(n.FK,{children:i})})},$=/^(NaN|-?((\d*\.\d+|\d+)([Ee][+-]?\d+)?|Infinity))$/,B=e=>"string"==typeof e&&$.test(e)?parseFloat(e):e,H=(e,t)=>{const r=B(e),n=B(t);return r===n?0:null===r?1:null===n||r<n?-1:1},j=({orderedColumnKeys:e,data:t,height:r,filterText:i="",expandedColumns:s=[],allowHTML:l=!0,striped:c})=>{const d=function({columnKeys:e,expandedColumns:t}){const r=(0,o.useMemo)((()=>e.reduce(((e,r)=>({...e,[r]:null==t?void 0:t.some((e=>e.startsWith(`${r}.`)))})),{})),[t,e]);return(0,o.useCallback)((({cellData:e,columnKey:t})=>{if(null===e)return x;const n=String(e),o=n.substring(0,1);let a;return a="["===o?"[…]":"{"===o?"{…}":"",r[t]?a:n}),[r])}({columnKeys:e,expandedColumns:s}),u=(0,o.useMemo)((()=>e.map((e=>({key:e,label:e,fieldName:e,headerName:e,comparator:H,render:({value:e,colDef:t})=>(({cellData:e,getCellContent:t,columnKey:r,allowHTML:o=!0})=>{var i;const s=null!=(i=null==t?void 0:t({cellData:e,columnKey:r}))?i:String(e);if(null===e)return(0,n.Y)("i",{className:"text-muted",children:x});const l=function(e){if("object"==typeof e)return e;if("string"!=typeof e||-1===["{","["].indexOf(e.substring(0,1)))return null;try{const t=q()({storeAsString:!0}).parse(e);return t&&"object"==typeof t?t:null}catch(e){return null}}(e);return l?(0,n.Y)(Y,{modalTitle:(0,a.t)("Cell content"),jsonObject:l,jsonValue:e}):o&&"string"==typeof e?(0,N.nn)(s):s})({cellData:e,columnKey:t.field,allowHTML:l,getCellContent:d})})))),[e,l,d]),h=(0,o.useRef)(i);h.current=i;const p=(0,o.useCallback)((e=>!h.current||!e.data||((e,t)=>{const r=[];Object.keys(t).forEach((e=>{if(t.hasOwnProperty(e)){const n=t[e];"string"==typeof n?r.push(n.toLowerCase()):null!==n&&"function"==typeof n.toString&&r.push(n.toString())}}));const n=e.toLowerCase();return r.some((e=>e.includes(n)))})(h.current,e.data)),[]);return(0,n.Y)("div",{className:"filterable-table-container",children:(0,n.Y)(D,{size:m.Small,height:r,columns:u,data:t,externalFilter:p,showRowNumber:!0,striped:c,enableActions:!0,columnReorderable:!0})})};var Q=r(62193),V=r.n(Q),G=r(41811),W=r(1086),K=r(42385),X=r(25145);const J=(0,G.A)(((e,t)=>{const r={};return((null==t?void 0:t.controlPanelSections)||[]).filter(W.lW).forEach((e=>{e.controlSetRows.forEach((e=>{e.forEach((e=>{e&&("string"==typeof e?r[e]=X.ne[e]:e.name&&e.config&&(r[e.name]=e.config))}))}))})),r}));var Z=r(50659),ee=r(27509),te=r(91518);const re=(e,t="",r)=>{var n,o,a,i;if(void 0===e)return"N/A";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("AdhocFilterControl"===(null==(n=r[t])?void 0:n.type)&&Array.isArray(e))return e.length?e.map((e=>{const t=e.comparator&&e.comparator.constructor===Array?`[${e.comparator.join(", ")}]`:e.comparator;return`${e.subject} ${e.operator} ${t}`})).join(", "):"[]";if("BoundsControl"===(null==(o=r[t])?void 0:o.type)&&Array.isArray(e))return`Min: ${e[0]}, Max: ${e[1]}`;if("CollectionControl"===(null==(a=r[t])?void 0:a.type)&&Array.isArray(e))return e.map((e=>(0,te.J)(e))).join(", ");if("MetricsControl"===(null==(i=r[t])?void 0:i.type)&&e.constructor===Array){const t=e.map((e=>{var t;return null!=(t=null==e?void 0:e.label)?t:e}));return t.length?t.join(", "):"[]"}if(Array.isArray(e)){const t=e.map((e=>"object"==typeof e&&null!==e&&"label"in e&&"string"==typeof e.label?e.label:String(e)));return t.length?t.join(", "):"[]"}return"string"==typeof e||"number"==typeof e?e:(0,te.J)(e)},ne=e=>{var t;const[r,i]=(0,o.useState)([]),[s,c]=(0,o.useState)(!1);(0,o.useEffect)((()=>{var t;const r=(e=>{const t=(0,K.A)().get(e);return J(e,t)})(null==(t=e.origFormData)?void 0:t.viz_type);i(((e,t)=>Object.entries(e).map((([e,r])=>{var n;return{control:(null==(n=t[e])?void 0:n.label)||e,before:re(r.before,e,t),after:re(r.after,e,t)}})))(e.diffs,r)),c(!V()(e.diffs))}),[e.diffs,null==(t=e.origFormData)?void 0:t.viz_type]);const d=(0,o.useMemo)((()=>{const e=[{accessor:"control",Header:(0,a.t)("Control"),id:"control"},{accessor:"before",Header:(0,a.t)("Before"),id:"before"},{accessor:"after",Header:(0,a.t)("After"),id:"after"}];return(0,n.Y)(Z.Q,{columns:e,data:r,pageSize:50,className:"table-condensed",columnsForWrapText:["control","before","after"]})}),[r]),u=(0,o.useMemo)((()=>(0,n.Y)(l.m,{id:"difference-tooltip",title:(0,a.t)("Click to see difference"),children:(0,n.Y)(ee.JU,{icon:(0,n.Y)(_.F.ExclamationCircleOutlined,{iconSize:"m"}),className:"label",type:"warning",onClick:()=>{},children:(0,a.t)("Altered")})})),[]);return s?(0,n.Y)(F.g,{triggerNode:u,modalTitle:(0,a.t)("Chart changes"),modalBody:d,responsive:!0}):null};var oe=r(9485),ae=r(54264),ie=r(79378),se=r(59744),le=r(97163),ce=r(23575),de=r(94185),ue=r(17355),he=r(92998),pe=r(86784),me=r(28674),fe=r(31121);const ge=(0,a.t)("Warning! Changing the dataset may break the chart if the metadata does not exist."),_e=(0,a.t)("Changing the dataset may break the chart if the chart relies on columns or metadata that does not exist in the target dataset"),ye=(0,f.I4)(le.aF)`
  .ant-modal-body {
    display: flex;
    flex-direction: column;
  }
`,ve=f.I4.div`
  .btn-container {
    display: flex;
    justify-content: flex-end;
    padding: 0px 15px;
    margin: 10px 0 0 0;
  }

  .confirm-modal-container {
    margin: 9px;
  }
`,be=f.I4.span`
  cursor: pointer;
  color: ${({theme:e})=>e.colorPrimaryText};
  &: hover {
    color: ${({theme:e})=>e.colorPrimaryTextActive};
  }
`,Ee=(0,c.Ay)((({addDangerToast:e,addSuccessToast:t,onChange:r,onDatasourceSave:i,onHide:s,show:l})=>{const[c,d]=(0,o.useState)(void 0),[u,h]=(0,o.useState)(0),[p,m]=(0,o.useState)(fe.Hu),[f,g]=(0,o.useState)(!1),[_,y]=(0,o.useState)(),v=(0,o.useRef)(null),{state:{loading:b,resourceCollection:E,resourceCount:S},fetchData:T}=(0,pe.RU)("dataset",(0,a.t)("dataset"),e),A=(0,o.useCallback)((e=>{g(!0),y(e)}),[]),C={pageIndex:u,pageSize:fe.md,filters:[],sortBy:p};(0,me.sv)((()=>{T({...C,...c&&{filters:[{id:"table_name",operator:"ct",value:c}]}})}),ce.Y.SLOW_DEBOUNCE,[c,u,p]),(0,o.useEffect)((()=>{l&&(async()=>{setTimeout((()=>{var e;return null==v||null==(e=v.current)?void 0:e.focus()}),200)})()}),[e,T,r,i,s,A,l]);const w=[{Cell:({row:{original:e}})=>(0,n.Y)(be,{role:"button",tabIndex:0,onClick:()=>A({type:"table",...e}),children:null==e?void 0:e.table_name}),Header:(0,a.t)("Name"),accessor:"table_name",id:"table_name"},{Header:(0,a.t)("Type"),accessor:"kind",disableSortBy:!0,id:"kind"},{Header:(0,a.t)("Schema"),accessor:"schema",id:"schema"},{Header:(0,a.t)("Connection"),accessor:"database.database_name",disableSortBy:!0,id:"database.database_name"},{Cell:({row:{original:{owners:e=[]}}})=>(0,n.Y)(jt,{users:e}),Header:(0,a.t)("Owners"),id:"owners",disableSortBy:!0}];return(0,n.Y)(ye,{show:l,onHide:s,responsive:!0,name:"Swap dataset",title:(0,a.t)("Swap dataset"),width:f?"432px":"",height:f?"auto":"540px",hideFooter:!f,footer:(0,n.Y)(n.FK,{children:f&&(0,n.Y)(ve,{children:(0,n.FD)("div",{className:"btn-container",children:[(0,n.Y)(M.$,{onClick:()=>{g(!1)},children:(0,a.t)("Cancel")}),(0,n.Y)(M.$,{className:"proceed-btn",buttonStyle:"primary",onClick:()=>{ie.A.get({endpoint:`/api/v1/dataset/${null==_?void 0:_.id}`}).then((({json:e})=>{e.result.type="table",i(e.result),r(`${null==_?void 0:_.id}__table`)})).catch((t=>{(0,se.h4)(t).then((({error:t,message:r})=>{const n=t?t.error||t.statusText||t:r;e(n)}))})),s(),t((0,a.t)("Successfully changed dataset!"))},children:(0,a.t)("Proceed")})]})})}),children:(0,n.FD)(n.FK,{children:[!f&&(0,n.FD)(n.FK,{children:[(0,n.Y)(de.F,{roomBelow:!0,type:"warning",css:e=>({marginBottom:4*e.sizeUnit}),message:(0,n.FD)(n.FK,{children:[(0,n.Y)("strong",{children:(0,a.t)("Warning!")})," ",_e]})}),(0,n.Y)(ue.A,{ref:v,type:"text",value:c,placeholder:(0,a.t)("Search / Filter"),onChange:e=>{var t;const r=null!=(t=e.target.value)?t:"";d(r),h(0)}}),b&&(0,n.Y)(he.R,{}),!b&&(0,n.Y)(Z.Q,{columns:w,data:E,pageSize:fe.md,initialPageIndex:u,initialSortBy:p,totalCount:S,onServerPagination:e=>{h(e.pageIndex),e.sortBy&&m(e.sortBy.length>0?e.sortBy:fe.Hu)},className:"table-condensed",emptyWrapperType:Z.V.Small,serverPagination:!0,isPaginationSticky:!0,scrollTable:!0})]}),f&&(0,n.Y)(n.FK,{children:ge})]})})}));var Se=r(61225),Te=r(36749),Ae=r(91196);const Ce=(0,Te.x)((()=>Promise.all([r.e(8096),r.e(7970),r.e(6411),r.e(3472),r.e(9167)]).then(r.bind(r,28611)))),we=(0,f.I4)(le.aF)`
  .modal-content {
    height: 900px;
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }

  .modal-header {
    flex: 0 1 auto;
  }
  .modal-body {
    flex: 1 1 auto;
    overflow: auto;
  }

  .modal-footer {
    flex: 0 1 auto;
  }

  .ant-tabs-top {
    margin-top: -${({theme:e})=>4*e.sizeUnit}px;
  }
`;function Re(e){const t=null!=e&&e.certified_by||null!=e&&e.certification_details?{certified_by:null==e?void 0:e.certified_by,details:null==e?void 0:e.certification_details}:void 0;return JSON.stringify({certification:t,warning_markdown:null==e?void 0:e.warning_markdown})}const Ie=(0,c.Ay)((({addSuccessToast:e,datasource:t,onDatasourceSave:r,onHide:s,show:l})=>{const c=(0,f.DP)(),[d,u]=(0,o.useState)(t),[h,p]=(0,o.useState)(!1),m=(0,Se.d4)((e=>{var t;return null==(t=e.common)?void 0:t.currencies})),[g,y]=(0,o.useState)([]),[v,b]=(0,o.useState)(!1),[E,S]=(0,o.useState)(!1),[T,A]=le.aF.useModal(),C=e=>{var t,r,n,o,a,i;const s={table_name:e.table_name,database_id:null==(t=e.database)?void 0:t.id,sql:e.sql,filter_select_enabled:e.filter_select_enabled,fetch_values_predicate:e.fetch_values_predicate,schema:(null==(r=e.tableSelector)?void 0:r.schema)||(null==(n=e.databaseSelector)?void 0:n.schema)||e.schema,description:e.description,main_dttm_col:e.main_dttm_col,normalize_columns:e.normalize_columns,always_filter_main_dttm:e.always_filter_main_dttm,offset:e.offset,default_endpoint:e.default_endpoint,cache_timeout:""===e.cache_timeout?null:e.cache_timeout,is_sqllab_view:e.is_sqllab_view,template_params:e.template_params,extra:e.extra,is_managed_externally:e.is_managed_externally,external_url:e.external_url,metrics:null==e||null==(o=e.metrics)?void 0:o.map((e=>{const t={expression:e.expression,description:e.description,metric_name:e.metric_name,metric_type:e.metric_type,d3format:e.d3format||null,currency:e.currency,verbose_name:e.verbose_name,warning_text:e.warning_text,uuid:e.uuid,extra:Re(e)};return Number.isNaN(Number(e.id))||(t.id=e.id),t})),columns:null==e||null==(a=e.columns)?void 0:a.map((e=>({id:"number"==typeof e.id?e.id:void 0,column_name:e.column_name,type:e.type,advanced_data_type:e.advanced_data_type,verbose_name:e.verbose_name,description:e.description,expression:e.expression,filterable:e.filterable,groupby:e.groupby,is_active:e.is_active,is_dttm:e.is_dttm,python_date_format:e.python_date_format||null,uuid:e.uuid,extra:Re(e)}))),owners:e.owners.map((e=>e.value||e.id))};return null!=(i=e.database)&&i.allow_multi_catalog&&(s.catalog=e.catalog),s},w=async()=>{b(!0);try{await ie.A.put({endpoint:`/api/v1/dataset/${d.id}?override_columns=${h}`,jsonPayload:C(d)});const{json:t}=await ie.A.get({endpoint:`/api/v1/dataset/${null==d?void 0:d.id}`});e((0,a.t)("The dataset has been saved")),t.result.type="table",r({...t.result,owners:d.owners}),s()}catch(e){var t;b(!1);const r=await(0,se.h4)(e);let o,i;null!=r&&null!=(t=r.errors)&&t.length?o=r.errors[0]:"string"==typeof r.error&&(i=r.error),T.error({title:(0,a.t)("Error saving dataset"),okButtonProps:{danger:!0,className:"btn-danger"},content:(0,n.Y)(ke.x,{error:o,source:"crud",fallback:i})})}},R=(0,o.useCallback)((()=>(0,n.FD)("div",{children:[(0,n.Y)(de.F,{css:e=>({marginTop:e.marginMD,marginBottom:e.marginSM}),type:"warning",showIcon:!1,message:(0,a.t)("The dataset configuration exposed here\n                affects all the charts using this dataset.\n                Be mindful that changing settings\n                here may affect other charts\n                in undesirable ways.")}),t.sql!==d.sql&&(0,n.FD)("div",{css:e=>({marginBottom:e.marginMD}),children:[(0,n.Y)(de.F,{css:e=>({marginBottom:e.marginSM}),type:"info",showIcon:!1,message:(0,a.t)("The dataset columns will be automatically synced\n              based on the changes in your SQL query. If your changes don't\n              impact the column definitions, you might want to skip this step.")}),(0,n.Y)(Ae.A,{checked:h,onChange:()=>{p(!h)}}),(0,n.Y)("span",{css:e=>({marginLeft:e.marginXS}),children:(0,a.t)("Automatically sync columns")})]}),(0,a.t)("Are you sure you want to save and apply changes?")]})),[d.sql,t.sql,h]);return(0,o.useEffect)((()=>{t.sql!==d.sql&&p(!0)}),[t.sql,d.sql]),(0,n.FD)(we,{show:l,onHide:s,title:(0,n.FD)("span",{children:[(0,n.Y)(_.F.EditOutlined,{iconSize:"l",css:i.AH`
              margin: auto ${2*c.sizeUnit}px auto 0;
            `}),(0,a.t)("Edit Dataset "),(0,n.Y)("strong",{children:d.table_name})]}),maskClosable:!E,footer:(0,n.FD)(n.FK,{children:[(0,n.Y)(M.$,{buttonSize:"small",buttonStyle:"secondary",onClick:s,children:(0,a.t)("Cancel")}),(0,n.Y)(M.$,{buttonSize:"small",buttonStyle:"primary",onClick:()=>{T.confirm({title:(0,a.t)("Confirm save"),content:R(),onOk:w,icon:null,okText:(0,a.t)("OK"),cancelText:(0,a.t)("Cancel")})},disabled:v||g.length>0||d.is_managed_externally,tooltip:d.is_managed_externally?(0,a.t)("This dataset is managed externally, and can't be edited in Superset"):"",children:(0,a.t)("Save")})]}),responsive:!0,children:[(0,n.Y)(Ce,{showLoadingForImport:!0,height:500,datasource:d,onChange:(e,t)=>{u({...e,metrics:null==e?void 0:e.metrics.map((e=>({...e,is_certified:(null==e?void 0:e.certified_by)||(null==e?void 0:e.certification_details)})))}),y(t)},setIsEditing:S,currencies:m}),A]})}));var Oe=r(54603);const De=f.I4.div`
  display: flex;
  flex-direction: column;
  margin-left: ${({theme:e})=>2*e.sizeUnit}px;
  overflow: hidden;
`,xe=f.I4.span`
  font-weight: ${({theme:e})=>e.fontWeightStrong};
`;function Ne({body:e,level:t="error",title:r}){const o=(0,f.DP)(),a=(0,Oe.st)(o,t),i={backgroundColor:a.bg,borderColor:a.border,color:a.text,display:"flex",flexDirection:"row",borderRadius:`${o.borderRadius}px`,padding:2*o.sizeUnit+"px",marginBottom:`${o.sizeUnit}px`,width:"100%"};return(0,n.FD)("div",{style:i,role:"alert",children:[(0,n.Y)(_.F.ExclamationCircleFilled,{iconColor:a.text}),(0,n.FD)(De,{children:[(0,n.Y)(xe,{children:r}),(0,n.Y)("p",{children:e})]})]})}function Le({code:e,message:t}){const r=(0,f.DP)();return(0,n.FD)(n.FK,{children:[t," ",(0,n.Y)("a",{href:`https://superset.apache.org/docs/using-superset/issue-codes#issue-${e}`,rel:"noopener noreferrer",target:"_blank","aria-label":"Superset docs link",children:(0,n.Y)(_.F.Full,{iconSize:"m",iconColor:r.colorPrimary})})]})}var Pe=r(78771);function Fe({error:e,source:t}){var r;const{extra:o,level:s,message:l}=e,c=["dashboard","explore"].includes(t||""),[d,...u]=l.split("\n"),h=d,p=u.length>0?u.join("\n"):null,m=o&&(0,n.FD)(n.FK,{children:[(0,n.FD)("p",{children:[(0,a.t)("This may be triggered by:"),(0,n.Y)("br",{}),null==(r=o.issue_codes)?void 0:r.map((e=>(0,i.n)(Le,{...e,key:e.code}))).reduce(((e,t)=>[e,(0,n.Y)("br",{}),t]))]}),c&&o.owners&&(0,n.FD)(n.FK,{children:[(0,n.Y)("br",{}),(0,n.Y)("p",{children:(0,a.tn)("Please reach out to the Chart Owner for assistance.","Please reach out to the Chart Owners for assistance.",o.owners.length)}),(0,n.Y)("p",{children:(0,a.tn)("Chart Owner: %s","Chart Owners: %s",o.owners.length,o.owners.join(", "))})]})]});return(0,n.Y)(Pe.$,{errorType:(0,a.t)("%s Error",(null==o?void 0:o.engine_name)||(0,a.t)("DB engine")),message:h,description:p,type:s,descriptionDetails:m})}function Me({error:e,subtitle:t}){const{level:r,message:o}=e;return(0,n.Y)(Pe.$,{errorType:(0,a.t)("Missing dataset"),message:t,description:o,type:r})}var ke=r(32655),qe=r(82086);function ze({error:e,subtitle:t,compact:r}){const{level:o,message:i}=e;return(0,n.Y)(Pe.$,{compact:r,errorType:(0,a.t)("Network Error"),message:i,type:o})}function Ue({error:e,subtitle:t}){const{extra:r,level:o,message:i}=e,{sql:s,line:l,column:c}=r,d=null==s?void 0:s.split("\n");let u;null!==l&&Number.isInteger(l)?u=d[l-1]:(null==d?void 0:d.length)>0&&(u=d[0]);const h=u?(0,n.FD)(n.FK,{children:[(0,n.Y)("pre",{children:u}),null!==c&&(0,n.FD)("pre",{children:[" ".repeat(c-1),"^"]})]}):i;return(0,n.Y)(Pe.$,{errorType:(0,a.t)("Unable to parse SQL"),message:t,type:o,description:h})}var Ye=r(19187),$e=r(42566),Be=r(43303);const He=(e,t)=>{const r=[],n=(e,t)=>{Object.keys(e).forEach((o=>{const a=t[o],i=e[o];Array.isArray(i)?i.forEach((e=>{r.push(`${e}: ${a}`)})):n(i,a)}))};return n(e,t),r};function je({error:e,source:t="crud",subtitle:r}){const o=P(),{extra:i,message:s}=e;return(0,n.FD)("div",{children:[r&&(0,n.Y)("h4",{children:r}),s,(0,n.Y)(Ye.B,{size:"small",dataSource:He(i.messages,i.payload),renderItem:(e,t)=>(0,n.Y)(Ye.B.Item,{children:(0,n.Y)($e.o.Text,{children:e})},t)}),(0,n.Y)(Be.S,{ghost:!0,items:[{label:(0,a.t)("Details"),key:"details",children:(0,n.Y)(L.d,{data:i.messages,shouldExpandNodeInitially:()=>!0,hideRoot:!0,theme:o})}]})]})}var Qe=r(49299),Ve=r(92083),Ge=r(91448);function We({error:e,source:t}){const r=(0,o.useRef)(null),{extra:i,level:s}=e,l=(0,Se.d4)((e=>e.sqlLab.queries)),c=(0,Se.d4)((e=>e.sqlLab.queryEditors)),d=(0,Se.d4)((e=>e.sqlLab.tabHistory)),u=c.find((e=>e.id===d[d.length-1])),h=null!=u&&u.latestQueryId?l[u.latestQueryId]:null,p=(0,Se.d4)((e=>{var t;return null==(t=e.explore)||null==(t=t.slice)?void 0:t.slice_id})),m=(0,Se.d4)((e=>Object.keys(e.charts))),f=(0,Se.d4)((e=>{var t;return null==(t=e.dashboardInfo)?void 0:t.id})),g=(0,Se.wA)();(0,o.useEffect)((()=>{const e=new URL(i.redirect_uri),n=n=>{n.origin===e.origin&&n.data.tabId===i.tab_id&&n.source===r.current&&("sqllab"===t&&h?g((0,Qe.reRunQuery)(h)):"explore"===t&&p?g((0,Ve.triggerQuery)(!0,p)):"dashboard"===t&&g((0,Ge.d1)(m,!0,0,f)))};return window.addEventListener("message",n),()=>{window.removeEventListener("message",n)}}),[t,i.redirect_uri,i.tab_id,g,h,p,m,f]);const _=(0,n.Y)("p",{children:"This database uses OAuth2 for authentication. Please click the link above to grant Apache Superset permission to access the data. Your personal access token will be stored encrypted and used only for queries run by you."}),y=(0,n.FD)(n.FK,{children:["You need to"," ",(0,n.Y)("a",{href:i.url,onClick:e=>{e.preventDefault(),r.current=window.open(i.url,"_blank")},target:"_blank",rel:"noreferrer",children:"provide authorization"})," ","in order to run this operation."]});return(0,n.Y)(Pe.$,{errorType:(0,a.t)("Authorization needed"),message:y,type:s,description:_})}var Ke=r(24668),Xe=r.n(Ke);const Je=(e,t)=>{const r={};return e.forEach((e=>{t.forEach((t=>{Xe()(e,t)<=2&&(r[e]||(r[e]=[]),r[e].push(`"${t}"`))}))})),r};function Ze({error:e,subtitle:t}){const{extra:r={issue_codes:[]},level:o,message:i}=e,s=(0,a.tn)("This was triggered by:","This may be triggered by:",r.issue_codes.length),l=Je(r.undefined_parameters||[],Object.keys(r.template_parameters||{})),c=(0,n.Y)(n.FK,{children:(0,n.FD)("p",{children:[Object.keys(l).length>0&&(0,n.FD)(n.FK,{children:[(0,n.Y)("p",{children:(0,a.t)("Did you mean:")}),(0,n.Y)(Ye.B,{split:!1,size:"small",dataSource:Object.entries(l),renderItem:([e,t])=>(0,n.Y)(Ye.B.Item,{compact:!0,children:(0,n.Y)(Ye.B.Item.Meta,{avatar:(0,n.Y)("span",{children:"•"}),title:(0,a.tn)('%(suggestion)s instead of "%(undefinedParameter)s?"','%(firstSuggestions)s or %(lastSuggestion)s instead of "%(undefinedParameter)s"?',t.length,{suggestion:t.join(", "),firstSuggestions:t.slice(0,-1).join(", "),lastSuggestion:t[t.length-1],undefinedParameter:e})})})}),(0,n.Y)("br",{})]}),s,(0,n.Y)("br",{}),r.issue_codes.length>0&&r.issue_codes.map((e=>(0,n.Y)(Le,{...e}))).reduce(((e,t)=>[e,(0,n.Y)("br",{}),t]))]})});return(0,n.Y)(Pe.$,{errorType:(0,a.t)("Parameter error"),type:o,message:i,description:t,descriptionDetails:c})}function et({error:e,source:t}){const{extra:r,level:o}=e,i=["dashboard","explore"].includes(t),s=i?(0,a.tn)("We’re having trouble loading this visualization. Queries are set to timeout after %s second.","We’re having trouble loading this visualization. Queries are set to timeout after %s seconds.",r.timeout,r.timeout):(0,a.tn)("We’re having trouble loading these results. Queries are set to timeout after %s second.","We’re having trouble loading these results. Queries are set to timeout after %s seconds.",r.timeout,r.timeout),l=(0,n.FD)(n.FK,{children:[(0,n.FD)("p",{children:[(0,a.t)("This may be triggered by:"),(0,n.Y)("br",{}),r.issue_codes.map((e=>(0,n.Y)(Le,{...e}))).reduce(((e,t)=>[e,(0,n.Y)("br",{}),t]))]}),i&&r.owners&&(0,n.FD)(n.FK,{children:[(0,n.Y)("br",{}),(0,n.Y)("p",{children:(0,a.tn)("Please reach out to the Chart Owner for assistance.","Please reach out to the Chart Owners for assistance.",r.owners.length)}),(0,n.Y)("p",{children:(0,a.tn)("Chart Owner: %s","Chart Owners: %s",r.owners.length,r.owners.join(", "))})]})]});return(0,n.Y)(Pe.$,{errorType:(0,a.t)("Timeout error"),message:s,type:o,descriptionDetails:l})}var tt=r(77829),rt=r(51692);const nt=(0,pe.xK)(),ot=nt?nt.support:"https://superset.apache.org/docs/databases/installing-database-drivers",at=({errorMessage:e,showDbInstallInstructions:t})=>(0,n.Y)(Pe.$,{type:"error",errorType:(0,a.t)("Import Error"),message:e,description:t?(0,n.FD)(n.FK,{children:[(0,n.Y)("br",{}),(0,a.t)("Database driver for importing maybe not installed. Visit the Superset documentation page for installation instructions: "),(0,n.Y)("a",{href:ot,target:"_blank",rel:"noopener noreferrer",className:"additional-fields-alert-description",children:(0,a.t)("here")}),"."]}):""}),it=f.I4.div`
  display: block;
  color: ${({theme:e})=>e.colorTextSecondary};
  font-size: ${({theme:e})=>e.fontSizeSM}px;
`,st=f.I4.div`
  ${({theme:e})=>i.AH`
    padding-top: ${2*e.sizeUnit}px;
    padding-bottom: ${2*e.sizeUnit}px;

    & > div {
      margin: ${e.sizeUnit}px 0;
    }

    .confirm-overwrite {
      margin-bottom: ${2*e.sizeUnit}px;
    }
    input[type='text'],
    input[type='number'] {
      &[name='name'] {
        flex: 0 1 auto;
        width: 40%;
      }

      &[name='sqlalchemy_uri'] {
        margin-right: ${3*e.sizeUnit}px;
      }
    }
  `}
`,lt=({resourceName:e,resourceLabel:t,passwordsNeededMessage:r,confirmOverwriteMessage:i,onModelImport:s,show:l,onHide:c,passwordFields:d=[],setPasswordFields:u=()=>{},sshTunnelPasswordFields:h=[],setSSHTunnelPasswordFields:p=()=>{},sshTunnelPrivateKeyFields:m=[],setSSHTunnelPrivateKeyFields:f=()=>{},sshTunnelPrivateKeyPasswordFields:g=[],setSSHTunnelPrivateKeyPasswordFields:_=()=>{}})=>{const[y,v]=(0,o.useState)(!0),[b,E]=(0,o.useState)({}),[S,T]=(0,o.useState)(!1),[A,C]=(0,o.useState)(!1),[w,R]=(0,o.useState)([]),[I,O]=(0,o.useState)(!1),[D,x]=(0,o.useState)(),[N,L]=(0,o.useState)({}),[P,F]=(0,o.useState)({}),[k,q]=(0,o.useState)({}),z=()=>{R([]),u([]),E({}),T(!1),C(!1),O(!1),x(""),p([]),f([]),_([]),L({}),F({}),q({})},{state:{alreadyExists:U,passwordsNeeded:Y,sshPasswordNeeded:$,sshPrivateKeyNeeded:B,sshPrivateKeyPasswordNeeded:H},importResource:j}=(0,pe.bN)(e,t,(e=>{x(e)}));(0,o.useEffect)((()=>{u(Y),Y.length>0&&O(!1)}),[Y,u]),(0,o.useEffect)((()=>{T(U.length>0),U.length>0&&O(!1)}),[U,T]),(0,o.useEffect)((()=>{p($),$.length>0&&O(!1)}),[$,p]),(0,o.useEffect)((()=>{f(B),B.length>0&&O(!1)}),[B,f]),(0,o.useEffect)((()=>{_(H),H.length>0&&O(!1)}),[H,_]);return y&&l&&v(!1),(0,n.FD)(le.aF,{name:"model",className:"import-model-modal",disablePrimaryButton:0===w.length||S&&!A||I,onHandledPrimaryAction:()=>{var e;(null==(e=w[0])?void 0:e.originFileObj)instanceof File&&(O(!0),j(w[0].originFileObj,b,N,P,k,A).then((e=>{e&&(z(),s())})))},onHide:()=>{v(!0),c(),z()},primaryButtonName:S?(0,a.t)("Overwrite"):(0,a.t)("Import"),primaryButtonStyle:S?"danger":"primary",width:"750px",show:l,title:(0,n.Y)(rt.r,{title:(0,a.t)("Import %s",t)}),children:[(0,n.Y)(st,{children:(0,n.Y)(tt.A,{name:"modelFile",id:"modelFile",accept:".yaml,.json,.yml,.zip",fileList:w,onChange:e=>{R([{...e.file,status:"done"}])},onRemove:e=>(R(w.filter((t=>t.uid!==e.uid))),!1),customRequest:()=>{},disabled:I,children:(0,n.Y)(M.$,{loading:I,children:(0,a.t)("Select file")})})}),D&&(0,n.Y)(at,{errorMessage:D,showDbInstallInstructions:d.length>0||h.length>0||m.length>0||g.length>0}),(()=>{if(0===d.length&&0===h.length&&0===m.length&&0===g.length)return null;const e=[...new Set([...d,...h,...m,...g])];return(0,n.FD)(n.FK,{children:[(0,n.Y)("h5",{children:(0,a.t)("Database passwords")}),(0,n.Y)(it,{children:r}),e.map((e=>(0,n.FD)(n.FK,{children:[(null==d?void 0:d.indexOf(e))>=0&&(0,n.FD)(st,{children:[(0,n.FD)("div",{className:"control-label",children:[(0,a.t)("%s PASSWORD",e.slice(10)),(0,n.Y)("span",{className:"required",children:"*"})]}),(0,n.Y)(ue.A,{name:`password-${e}`,autoComplete:`password-${e}`,type:"password",value:b[e],onChange:t=>E({...b,[e]:t.target.value})})]},`password-for-${e}`),(null==h?void 0:h.indexOf(e))>=0&&(0,n.FD)(st,{children:[(0,n.FD)("div",{className:"control-label",children:[(0,a.t)("%s SSH TUNNEL PASSWORD",e.slice(10)),(0,n.Y)("span",{className:"required",children:"*"})]}),(0,n.Y)(ue.A,{name:`ssh_tunnel_password-${e}`,autoComplete:`ssh_tunnel_password-${e}`,type:"password",value:N[e],onChange:t=>L({...N,[e]:t.target.value})})]},`ssh_tunnel_password-for-${e}`),(null==m?void 0:m.indexOf(e))>=0&&(0,n.FD)(st,{children:[(0,n.FD)("div",{className:"control-label",children:[(0,a.t)("%s SSH TUNNEL PRIVATE KEY",e.slice(10)),(0,n.Y)("span",{className:"required",children:"*"})]}),(0,n.Y)(ue.A.TextArea,{name:`ssh_tunnel_private_key-${e}`,autoComplete:`ssh_tunnel_private_key-${e}`,value:P[e],onChange:t=>F({...P,[e]:t.target.value})})]},`ssh_tunnel_private_key-for-${e}`),(null==g?void 0:g.indexOf(e))>=0&&(0,n.FD)(st,{children:[(0,n.FD)("div",{className:"control-label",children:[(0,a.t)("%s SSH TUNNEL PRIVATE KEY PASSWORD",e.slice(10)),(0,n.Y)("span",{className:"required",children:"*"})]}),(0,n.Y)(ue.A,{name:`ssh_tunnel_private_key_password-${e}`,autoComplete:`ssh_tunnel_private_key_password-${e}`,type:"password",value:k[e],onChange:t=>q({...k,[e]:t.target.value})})]},`ssh_tunnel_private_key_password-for-${e}`)]})))]})})(),S?(0,n.Y)(n.FK,{children:(0,n.FD)(st,{children:[(0,n.Y)("div",{className:"confirm-overwrite",children:i}),(0,n.Y)("div",{className:"control-label",children:(0,a.t)('Type "%s" to confirm',(0,a.t)("OVERWRITE"))}),(0,n.Y)(ue.A,{id:"overwrite",type:"text",onChange:e=>{var t,r;const n=null!=(t=null==(r=e.currentTarget)?void 0:r.value)?t:"";C(n.toUpperCase()===(0,a.t)("OVERWRITE"))}})]})}):null]})};class ct extends o.Component{constructor(e){super(e),this.state={error:null,info:null}}componentDidCatch(e,t){var r,n;null==(r=(n=this.props).onError)||r.call(n,e,t),this.setState({error:e,info:t})}render(){const{error:e,info:t}=this.state,{showMessage:r,className:o}=this.props;if(e){const i=e.toString().split("\n")[0];return r?(0,n.Y)(Pe.$,{errorType:(0,a.t)("Unexpected error"),message:i,descriptionDetails:null==t?void 0:t.componentStack,className:o}):null}return this.props.children}}ct.defaultProps={showMessage:!0};var dt=r(71519),ut=r(31296);const ht=({to:e,component:t,replace:r,innerRef:o,children:a,...i})=>"string"==typeof e&&(0,ut.JE)(e)?(0,n.Y)("a",{href:(0,ut.Dl)(e),...i,children:a}):(0,n.Y)(dt.N_,{to:e,component:t,replace:r,innerRef:o,...i,children:a});var pt=r(1071);const mt={info:"addInfoToast",alert:"addDangerToast",danger:"addDangerToast",warning:"addWarningToast",success:"addSuccessToast"};function ft({children:e,messages:t}){const r=(0,c.Yf)();return(0,pt.B)((()=>{t.forEach((e=>{const[t,n]=e,o=mt[t],a=r[o];a&&a(n)}))})),e}var gt=r(33700);const _t=f.I4.div`
  max-width: 100%;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
`,yt=({tags:e,editable:t=!1,onDelete:r,maxTags:a})=>{const i=(0,o.useMemo)((()=>e.toSorted(((e,t)=>{var r,n;const o=null!=(r=e.name)?r:"",a=null!=(n=t.name)?n:"";return o.localeCompare(a)}))),[e]),[s,l]=(0,o.useState)(a),c=e=>{null==r||r(e)},d=(0,o.useMemo)((()=>s?i.length>s:null),[i.length,s]),u=(0,o.useMemo)((()=>"number"==typeof s?i.length-s+1:null),[d,i.length,s]);return(0,n.Y)(_t,{className:"tag-list",children:d&&"number"==typeof s?(0,n.FD)(n.FK,{children:[i.slice(0,s-1).map(((e,r)=>(0,n.Y)(gt.v,{id:e.id,name:e.name,index:r,onDelete:c,editable:t},e.id))),i.length>s?(0,n.Y)(gt.v,{name:`+${u}...`,onClick:()=>l(void 0),toolTipTitle:i.map((e=>e.name)).join(", ")}):null]}):(0,n.FD)(n.FK,{children:[i.map(((e,r)=>(0,n.Y)(gt.v,{id:e.id,name:e.name,index:r,onDelete:c,editable:t},e.id))),a&&i.length>a?(0,n.Y)(gt.v,{name:"...",onClick:()=>l(a)}):null]})})};var vt=r(58486);const bt=({user:e,date:t})=>{const r=(0,n.Y)("span",{className:"no-wrap",children:t});if(e){const t=(0,vt.A)(e),o=(0,a.t)("Modified by: %s",t);return(0,n.Y)(l.m,{title:o,placement:"bottom",children:r})}return r};var Et=r(42194),St=r.n(Et),Tt=r(18749),At=r(10992),Ct=r(99106),wt=r(71065),Rt=r(75574);const It=(0,Tt.A)(),Ot={loading:!0,dynamicPlugins:{},keys:[],mountedPluginMetadata:{},fetchAll:()=>{}},Dt=(0,o.createContext)(Ot),xt=()=>(0,o.useContext)(Dt);function Nt(){return{keys:It.keys(),mountedPluginMetadata:St()(It.getMap(),(e=>void 0===e))}}function Lt(e,t){switch(t.type){case"begin":{const r={...e.dynamicPlugins};return t.keys.forEach((e=>{r[e]={key:e,error:null,mounting:!0}})),{...e,loading:t.keys.length>0,dynamicPlugins:r}}case"complete":return{...e,loading:Object.values(e.dynamicPlugins).some((e=>e.mounting&&e.key!==t.key)),dynamicPlugins:{...e.dynamicPlugins,[t.key]:{key:t.key,mounting:!1,error:t.error}}};case"changed keys":return{...e,...Nt()};default:return e}}const Pt=(0,At.A)({method:"GET",endpoint:"/dynamic-plugins/api/read"}),Ft={react:()=>Promise.resolve().then(r.t.bind(r,96540,19)),lodash:()=>r.e(8096).then(r.t.bind(r,2543,23)),"react-dom":()=>Promise.resolve().then(r.t.bind(r,28290,19)),"@superset-ui/chart-controls":()=>r.e(7193).then(r.bind(r,77193)),"@superset-ui/core":()=>Promise.all([r.e(8096),r.e(683),r.e(7391),r.e(1859),r.e(3912),r.e(6555),r.e(2097)]).then(r.bind(r,13274))},Mt=({children:e})=>{const[t,r]=(0,o.useReducer)(Lt,Ot,(e=>({...e,...Nt(),fetchAll:a,loading:(0,Ct.G7)(Ct.TO.DynamicPlugins)})));async function a(){try{await(0,wt.mg)(Ft);const{result:e}=await Pt({});r({type:"begin",keys:e.map((e=>e.key))}),await Promise.all(e.map((async e=>{let t=null;try{await import(e.bundle_url)}catch(r){Rt.A.error(`Failed to load plugin ${e.key} with the following error:`,r.stack),t=r}r({type:"complete",key:e.key,error:t})})))}catch(e){Rt.A.error("Failed to load dynamic plugins",e.stack||e)}}return(0,o.useEffect)((()=>{(0,Ct.G7)(Ct.TO.DynamicPlugins)&&a();const e=()=>{r({type:"changed keys"})};return It.addListener(e),()=>{It.removeListener(e)}}),[]),(0,n.Y)(Dt.Provider,{value:t,children:e})};var kt=r(96548),qt=r(81427);function zt(e){return(0,n.Y)(qt.A,{...e})}function Ut(e){return(0,n.Y)(qt.A.Group,{...e})}var Yt,$t,Bt=r(5376);const Ht=null!=(Yt=null==($t=(0,kt.A)().get())?void 0:$t.colors)?Yt:[];function jt({users:e,maxCount:t=4}){return(0,n.Y)(Ut,{max:{count:t},children:e.map((e=>{var t,r;const{first_name:o,last_name:a,id:i}=e,s=(0,vt.A)(e),c=function(e,t){return e?t[function(e,t){const r=[...e].map((e=>e.charCodeAt(0))),n=r.length,o=n%(t-1)+1,a=r.reduce(((e,t)=>e+t))%t;let i=r[0]%t;return[...new Array(n)].forEach((()=>{i=(o*i+a)%t})),i}(e,t.length)]:"transparent"}(`${i}-${o}-${a}`,Ht),d=(0,Ct.G7)(Ct.TO.SlackEnableAvatars)?(0,Bt.A)(`/api/v1/user/${i}/avatar.png`):void 0;return(0,n.Y)(l.m,{title:s,placement:"top",children:(0,n.FD)(zt,{style:{backgroundColor:c,borderColor:c},src:d,children:[null==o||null==(t=o[0])?void 0:t.toLocaleUpperCase(),null==a||null==(r=a[0])?void 0:r.toLocaleUpperCase()]},s)},s)}))})}},89297:(e,t,r)=>{"use strict";r.d(t,{Od:()=>s,aj:()=>i,yj:()=>l});var n=r(91920),o=r(31463),a=r(65432);const i=e=>(0,n.x$)(e.x_axis),s=e=>{if(e.granularity_sqla||e.x_axis)return i(e)?e.x_axis:o.Tf},l=e=>{const t=s(e);if(t)return(0,a.A)(t)}},89874:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,W:()=>n});const n=/(\d{4}-\d{2}-\d{2})[\sT](\d{2}:\d{2}:\d{2}\.?\d*).*/;function o(e){const t=e.match(n);return t?`${t[1]}T${t[2]}Z`:e}},90681:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(74098),o=r(43561),a=r(89105);function i(e){return e.reduce(((e,t)=>e.slice(-1)[0]===t?e:e.concat(t)),[])}function s({common:e,active_tab:t,tab_state_ids:r=[],databases:s,queries:l,...c}){let d={};const u={version:a.N0,immutableId:(0,o.Ak)(11),loaded:!0,name:(0,n.t)("Untitled query"),sql:"",latestQueryId:null,autorun:!1,dbId:e.conf.SQLLAB_DEFAULT_DBID,queryLimit:e.conf.DEFAULT_SQLLAB_LIMIT,hideLeftBar:!1,remoteId:null,cursorPosition:{row:0,column:0}};let h={};r.forEach((({id:e,label:r})=>{let n;var i,s,l,c,h,p;n=t&&t.id===e?{version:null!=(i=null==(s=t.extra_json)?void 0:s.version)?i:a.AU.V1,id:e.toString(),immutableId:null!=(l=null==(c=t.extra_json)?void 0:c.immutableId)?l:(0,o.Ak)(11),loaded:!0,name:t.label,sql:t.sql||"",selectedText:void 0,latestQueryId:t.latest_query?t.latest_query.id:null,remoteId:(null==(h=t.saved_query)?void 0:h.id)||null,autorun:Boolean(t.autorun),templateParams:t.template_params||void 0,dbId:t.database_id,catalog:t.catalog,schema:t.schema,queryLimit:t.query_limit,hideLeftBar:t.hide_left_bar,updatedAt:null==(p=t.extra_json)?void 0:p.updatedAt}:{...u,id:e.toString(),immutableId:(0,o.Ak)(11),loaded:!1,name:r,dbId:void 0},d={...d,[n.id]:n}}));const p=t?[t.id.toString()]:[];let m=t?t.id.toString():"",f={},g=Date.now();var _;t&&(g=(null==(_=t.extra_json)?void 0:_.updatedAt)||g,t.table_schemas.filter((e=>null!==e.description)).forEach((e=>{var t;const{dataPreviewQueryId:r,...n}=e.description,o={dbId:null!=(t=e.database_id)?t:0,queryEditorId:e.tab_state_id.toString(),catalog:e.catalog,schema:e.schema,name:e.table,expanded:Boolean(e.expanded),id:e.id,dataPreviewQueryId:r,persistData:n,initialized:!0};f={...f,[o.id]:o}})));const y={...l,...(null==t?void 0:t.latest_query)&&{[t.latest_query.id]:t.latest_query}},v={};try{const e=localStorage.getItem("redux"),t=e?JSON.parse(e):void 0;if(e&&null!=t&&t.sqlLab){var b;const{sqlLab:e}=t;if(0===e.queryEditors.length&&0===Object.keys(null!=(b=e.destroyedQueryEditors)?b:{}).length)localStorage.removeItem("redux");else{h=e.unsavedQueryEditor||h,e.queryEditors.forEach((e=>{var t,r,n;const o=null!=(t=e.tabViewId)?t:e.id,a=Boolean(d[o]),i=null==(r=d[o])?void 0:r.updatedAt,s=e.updatedAt&&(!i||e.updatedAt>i),l=!a||s?e:{};d={...d,[o]:{...d[o],...l,name:l.title||l.name||(null==(n=d[o])?void 0:n.name),...l.id&&h.id===e.id&&h,inLocalStorage:!a,loaded:!0}}}));const t=new Set;e.tables&&(f=e.tables.reduce(((e,r)=>{const n=!t.has(r.queryEditorId);return n&&t.add(r.queryEditorId),{...e,[r.id]:{...f[r.id],...r,expanded:n,inLocalStorage:!0}}}),f)),e.queries&&Object.values(e.queries).forEach((e=>{y[e.id]={...e,inLocalStorage:!0}})),e.tabHistory&&p.push(...e.tabHistory.filter((t=>{var r;return!(null!=(r=e.destroyedQueryEditors)&&r[t])}))),e.destroyedQueryEditors&&Object.entries(e.destroyedQueryEditors).forEach((([e,t])=>{v[e]=t,d[e]&&delete d[e]})),m=p.slice(p.length-1)[0]||""}}}catch(e){}return{sqlLab:{activeSouthPaneTab:"Results",alerts:[],databases:s,offline:!1,queries:Object.fromEntries(Object.entries(y).map((([e,t])=>[e,{...t,...t.startDttm&&{startDttm:Number(t.startDttm)},...t.endDttm&&{endDttm:Number(t.endDttm)}}]))),queryEditors:Object.values(d),tabHistory:i(p),tables:Object.values(f),queriesLastUpdate:Date.now(),editorTabLastUpdatedAt:g,queryCostEstimates:{},unsavedQueryEditor:h,lastUpdatedActiveTab:m,destroyedQueryEditors:v},localStorageUsageInKilobytes:0,common:e,...c}}},90881:(e,t,r)=>{"use strict";r.d(t,{z:()=>o});var n=r(91920);function o({controls:e}){if(null==e||!e.x_axis)return!0;const t=null==e?void 0:e.x_axis,r=null==t?void 0:t.value;return!!(0,n.q0)(r)||!!(0,n.eh)(r)&&!(null==(o=(null!=(a=null==t?void 0:t.options)?a:[]).find((e=>(null==e?void 0:e.column_name)===r)))||!o.is_dttm);var o,a}},90886:(e,t,r)=>{"use strict";r.d(t,{L:()=>n});const n=(0,r(41811).A)(((e,t,r)=>!!r&&Object.values(r).some((r=>r.some((([r,n])=>r===e&&n===t))))))},90924:(e,t,r)=>{"use strict";function n(e){return null==e?[]:Array.isArray(e)?e:[e]}r.d(t,{A:()=>n})},91003:(e,t,r)=>{"use strict";r.d(t,{BD:()=>v,B_:()=>S,CW:()=>i,Fq:()=>x,GY:()=>w,Gc:()=>L,IS:()=>f,Ie:()=>l,It:()=>A,KD:()=>p,LA:()=>D,LH:()=>u,RY:()=>h,W3:()=>_,W9:()=>C,X0:()=>R,XY:()=>o,cV:()=>b,fB:()=>d,gb:()=>N,hL:()=>M,iF:()=>y,k0:()=>s,kn:()=>I,mK:()=>n,nO:()=>m,nS:()=>g,nc:()=>O,nm:()=>T,pX:()=>P,tK:()=>E,wN:()=>c,wv:()=>a,zf:()=>F});const n="GRID_ID",o="HEADER_ID",a="ROOT_ID",i="DASHBOARD_VERSION_KEY",s="NEW_COMPONENTS_SOURCE_ID",l="NEW_CHART_ID",c="NEW_COLUMN_ID",d="NEW_DIVIDER_ID",u="NEW_HEADER_ID",h="NEW_MARKDOWN_ID",p="NEW_ROW_ID",m="NEW_TAB_ID",f="NEW_TABS_ID",g="NEW_DYNAMIC_COMPONENT",_=0,y=8,v=2*y,b=12,E=1,S=5,T=4,A="SMALL_HEADER",C="MEDIUM_HEADER",w="LARGE_HEADER",R="BACKGROUND_WHITE",I="BACKGROUND_TRANSPARENT",O=50,D="overwrite",x="overwriteConfirmed",N="newDashboard",L=65535,P=["LABEL"],F="ALL_FILTERS_ROOT";var M;!function(e){e[e.None=0]="None",e[e.HideNav=1]="HideNav",e[e.HideNavAndTitle=2]="HideNavAndTitle",e[e.Report=3]="Report"}(M||(M={}))},91156:(e,t,r)=>{"use strict";r.d(t,{a6:()=>z,jX:()=>S,Tb:()=>A,QC:()=>b,GW:()=>T,dI:()=>x,LK:()=>C,QQ:()=>y});var n={};r.r(n),r.d(n,{NVD3TimeSeries:()=>g,annotations:()=>f,colorScheme:()=>p,datasourceAndVizType:()=>h,sqlaTimeSeries:()=>m});var o=r(41811),a=r(41479),i=r(42385),s=r(1086),l=r(78166),c=r(2445),d=r(74098),u=r(8387);const h={controlSetRows:[["datasource"],["viz_type"],[{name:"slice_id",config:{type:"HiddenControl",label:(0,d.t)("Chart ID"),hidden:!0,description:(0,d.t)("The id of the active chart")}},{name:"cache_timeout",config:{type:"HiddenControl",label:(0,d.t)("Cache Timeout (seconds)"),hidden:!0,description:(0,d.t)("The number of seconds before expiring the cache")}},{name:"url_params",config:{type:"HiddenControl",label:(0,d.t)("URL parameters"),hidden:!0,description:(0,d.t)("Extra parameters for use in jinja templated queries")}}]]},p={label:(0,d.t)("Color scheme"),controlSetRows:[["color_scheme"]]},m={label:(0,d.t)("Time"),description:(0,d.t)("Time related form attributes"),expanded:!0,controlSetRows:[["granularity_sqla"],["time_range"]]},f={label:(0,d.t)("Annotations and layers"),tabOverride:"data",expanded:!0,controlSetRows:[[{name:"annotation_layers",config:{type:"AnnotationLayerControl",label:"",default:[],description:(0,d.t)("Annotation layers"),renderTrigger:!0,tabOverride:"data"}}]]},g=[{label:(0,d.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit","group_others_when_limit_reached"],["timeseries_limit_metric"],["order_desc"],[{name:"contribution",config:{type:"CheckboxControl",label:(0,d.t)("Contribution"),default:!1,description:(0,d.t)("Compute the contribution to the total")}}],["row_limit",null]]},{label:(0,d.t)("Advanced analytics"),tabOverride:"data",description:(0,d.t)("This section contains options that allow for advanced analytical post processing of query results"),controlSetRows:[[(0,c.Y)(u.y,{children:(0,d.t)("Rolling window")})],[{name:"rolling_type",config:{type:"SelectControl",label:(0,d.t)("Rolling function"),default:"None",choices:[["None",(0,d.t)("None")],["mean",(0,d.t)("mean")],["sum",(0,d.t)("sum")],["std",(0,d.t)("std")],["cumsum",(0,d.t)("cumsum")]],description:(0,d.t)("Defines a rolling window function to apply, works along with the [Periods] text box")}},{name:"rolling_periods",config:{type:"TextControl",label:(0,d.t)("Periods"),isInt:!0,description:(0,d.t)("Defines the size of the rolling window function, relative to the time granularity selected")}},{name:"min_periods",config:{type:"TextControl",label:(0,d.t)("Min periods"),isInt:!0,description:(0,d.t)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods')}}],[(0,c.Y)(u.y,{children:(0,d.t)("Time comparison")})],[{name:"time_compare",config:{type:"SelectControl",multi:!0,freeForm:!0,label:(0,d.t)("Time shift"),choices:[["1 day",(0,d.t)("1 day")],["1 week",(0,d.t)("1 week")],["28 days",(0,d.t)("28 days")],["30 days",(0,d.t)("30 days")],["52 weeks",(0,d.t)("52 weeks")],["1 year",(0,d.t)("1 year")],["104 weeks",(0,d.t)("104 weeks")],["2 years",(0,d.t)("2 years")],["156 weeks",(0,d.t)("156 weeks")],["3 years",(0,d.t)("3 years")]],description:(0,d.t)("Overlay one or more timeseries from a relative time period. Expects relative time deltas in natural language (example: 24 hours, 7 days, 52 weeks, 365 days). Free text is supported.")}},{name:"comparison_type",config:{type:"SelectControl",label:(0,d.t)("Calculation type"),default:"values",choices:[["values",(0,d.t)("Actual values")],["absolute",(0,d.t)("Difference")],["percentage",(0,d.t)("Percentage change")],["ratio",(0,d.t)("Ratio")]],description:(0,d.t)("How to display time shifts: as individual lines; as the difference between the main time series and each time shift; as the percentage change; or as the ratio between series and time shifts.")}}],[(0,c.Y)(u.y,{children:(0,d.t)("Resample")})],[{name:"resample_rule",config:{type:"SelectControl",freeForm:!0,label:(0,d.t)("Rule"),default:null,choices:[["1T",(0,d.t)("1T")],["1H",(0,d.t)("1H")],["1D",(0,d.t)("1D")],["7D",(0,d.t)("7D")],["1M",(0,d.t)("1M")],["1AS",(0,d.t)("1AS")]],description:(0,d.t)("Pandas resample rule")}},{name:"resample_method",config:{type:"SelectControl",freeForm:!0,label:(0,d.t)("Method"),default:null,choices:[["asfreq",(0,d.t)("asfreq")],["bfill",(0,d.t)("bfill")],["ffill",(0,d.t)("ffill")],["median",(0,d.t)("median")],["mean",(0,d.t)("mean")],["sum",(0,d.t)("sum")]],description:(0,d.t)("Pandas resample method")}}]]}],_=(0,o.A)(((e,t)=>{const{sectionOverrides:r={},controlOverrides:o,controlPanelSections:i=[]}=t,c={...n};Object.entries(r).forEach((([e,t])=>{"object"==typeof t&&t.constructor===Object?c[e]={...c[e],...t}:c[e]=t}));const{datasourceAndVizType:d}=c,u=[a.cT.Query,a.cT.Table].includes(e)?["granularity"]:["granularity_sqla","time_grain_sqla"];return[d].concat(i.filter(s.lW)).map((e=>{const{controlSetRows:t}=e;return{...e,controlSetRows:(null==t?void 0:t.map((e=>e.filter((e=>"string"!=typeof e||!u.includes(e))).map((e=>(0,l.s)(e,o))))))||[]}}))}));function y(e,t){const r=(0,i.A)().get(e)||{};return _(t,r)}const v=(0,o.A)(((e,t)=>{const{controlOverrides:r={},controlPanelSections:n=[]}=t,o=(0,l.s)(function(e,t){var r;return null!=(r=e.filter(s.lW).map((e=>e.controlSetRows)).flat(2).find((e=>t===e||null!==e&&"object"==typeof e&&"name"in e&&e.name===t)))?r:null}(n,e),r);return o&&"config"in o?o.config:o})),b=function(e,t){const r=(0,i.A)().get(t)||{};return v(e,r)};var E=r(90924);function S(e,t){const{mapStateToProps:r}=e;let n={...e},{value:o}=n;return r&&t&&(n={...e,...r.call(e,t,e)},o=o||n.value),"function"==typeof n.initialValue&&(n.initialValue=n.initialValue(n,t),"function"==typeof n.initialValue&&delete n.initialValue),n.initialValue&&(o=n.initialValue,delete n.initialValue),"function"==typeof n.default&&(n.default=n.default(n,t),"function"==typeof n.default&&delete n.default),n.default&&void 0===o&&(o=n.default),o&&n.multi&&!Array.isArray(o)&&(o=[o]),n.value=o,function(e,t){const r=e.validators,{externalValidationErrors:n=[]}=e,o=[];r&&r.length>0&&r.forEach((r=>{const n=r.call(e,e.value,t);n&&o.push(n)}));const a=[...o,...n];return{...e,validationErrors:a}}(function(e){if("SelectControl"===e.type&&!e.freeForm&&e.choices&&e.value){const t={...e},r=e.choices,n=(0,E.A)(e.value),o=r.map((e=>e[0]));if(e.multi&&n.length>0)return t.value=n.filter((e=>o.includes(e))),t;if(!e.multi&&!o.includes(n[0]))return t.value=null,t}return e}(n),n)}function T(e,t,r){if(!e)return null;const n={...e,value:r};return null!=t&&t.controls||null===t?S(n,t):n}function A(e,t,r,n){const o={};return y(e,t).forEach((e=>e.controlSetRows.forEach((e=>e.forEach((e=>{if(null!=e&&e.config&&e.name){const{config:t,name:a}=e;o[a]=T(t,r,n[a])}})))))),o}function C(e){const t={};return Object.keys(e).forEach((r=>{const n=e[r];t[r]=n.value})),t}var w=r(62193),R=r.n(w),I=r(1734),O=r(58180);const D=(e,t,r)=>t.options&&"string"==typeof r&&(!R()(t.options)&&t.options.some((e=>Array.isArray(e)?e[0]===r:e.column_name===r))||!R()(null==e?void 0:e.columns))?e.columns.some((e=>e.column_name===r)):t.savedMetrics&&(0,I.S_)(r)&&(t.savedMetrics.some((e=>e.metric_name===r))||!R()(null==e?void 0:e.metrics))?e.metrics.some((e=>e.metric_name===r)):t.columns&&((0,I.IN)(r)||(0,O.md)(r))&&(!R()(t.columns)&&t.columns.some((e=>{var t;return e.column_name===(null==(t=r.column)?void 0:t.column_name)||e.column_name===r.subject}))||!R()(null==e?void 0:e.columns))?e.columns.some((e=>{var t;return e.column_name===(null==(t=r.column)?void 0:t.column_name)||e.column_name===r.subject})):!!(0,I.WL)(r)&&(Object.assign(r,{datasourceWarning:!0}),!0),x=(e,t,r)=>{if(null!=r){if(Array.isArray(r)){const n=r.filter((r=>D(e,t,r)));return n.length>0?n:t.default}return D(e,t,r)?r:t.default}};var N=r(90179),L=r.n(N),P=r(76892),F=r(31912);const M=["metric","metrics","metric_2","size","x","y","secondary_metric"],k=["groupby","columns","groupbyColumns","groupbyRows","entity","series","series_columns"],q=["granularity_sqla","time_grain_sqla","time_range","adhoc_filters","limit","timeseries_limit_metric","series_limit_metric","order_desc","row_limit","x_axis","rolling_type","rolling_periods","min_periods","time_compare","comparison_type","resample_rule","resample_method","dashboardId"];class z{constructor(e){var t,r;this.sfd=void 0;const n=Object.freeze(e),o=null==n||null==(t=n.standardizedFormData)?void 0:t.memorizedFormData,a=n.viz_type;let i,s=new Map;if(Array.isArray(o)&&o.length>0&&n.datasource===(null==(r=o.slice(-1)[0][1])?void 0:r.datasource))s=new Map(n.standardizedFormData.memorizedFormData),s.has(a)&&s.delete(a),s.set(a,n),i=z.getStandardizedControls(n);else{const e=L()(n,"standardizedFormData");s.set(a,e),i=z.getStandardizedControls(e)}this.sfd={controls:i,memorizedFormData:s}}static getStandardizedControls(e){const t={metrics:[],columns:[]};if(Object.entries(e).forEach((([e,r])=>{M.includes(e)&&t.metrics.push(...(0,E.A)(r)),k.includes(e)&&t.columns.push(...(0,E.A)(r))})),(0,s.Wk)(e)){const{metrics:r,columns:n}=e.standardizedFormData.controls;t.metrics.push(...r),t.columns.push(...n)}return t}getLatestFormData(e){return this.has(e)?this.get(e):this.memorizedFormData.slice(-1)[0][1]}get standardizedControls(){return this.sfd.controls}get memorizedFormData(){return Array.from(this.sfd.memorizedFormData.entries())}serialize(){return{controls:this.standardizedControls,memorizedFormData:this.memorizedFormData}}has(e){return this.sfd.memorizedFormData.has(e)}get(e){return this.sfd.memorizedFormData.get(e)}transform(e,t){const r=this.getLatestFormData(e),n={};q.forEach((e=>{e in t.form_data&&(n[e]=t.form_data[e])}));const o=(0,F.Eu)(t,{...r,...n,viz_type:e}),a={...C(o),...n.dashboardId&&{dashboardId:n.dashboardId},standardizedFormData:this.serialize()};let s={formData:a,controlsState:o};const l=(0,i.A)().get(e);if(null!=l&&l.formDataOverrides){(0,P.a)().setStandardizedControls(a);const e={...l.formDataOverrides(a),standardizedFormData:{controls:{...(0,P.a)().controls},memorizedFormData:this.memorizedFormData}};(0,P.a)().clear(),s={formData:e,controlsState:(0,F.Eu)(t,e)}}return s.controlsState=(0,F.Eu)({...t,controls:s.controlsState},s.formData),s}}},91402:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(74098),o=r(82689),a=r(65432),i=r(34142),s=r(17658);function l(e,t){const r={metric:"metrics",metric_2:"metrics",secondary_metric:"metrics",x:"metrics",y:"metrics",size:"metrics",all_columns:"columns",series:"groupby",order_by_cols:"orderby",...t},{query_mode:l,...c}=e;let d=[],u=[],h=[];return Object.entries(c).forEach((([e,t])=>{if(null==t)return;let n=r[e]||e;l===s.g.Aggregate&&"columns"===n||(l!==s.g.Raw||"groupby"!==n&&"metrics"!==n)&&("groupby"===n&&(n="columns"),"metrics"===n?u=u.concat(t):"columns"===n?d=d.concat(t):"orderby"===n&&(h=h.concat(t)))})),{columns:(0,o.A)(d.filter((e=>""!==e)),a.A),metrics:l===s.g.Raw?void 0:(0,o.A)(u,i.A),orderby:h.length>0?h.map((e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){throw new Error((0,n.t)("Found invalid orderby options"))}return e})):void 0}}},91412:(e,t,r)=>{"use strict";r.d(t,{Q$:()=>a,WR:()=>d,Zd:()=>u,Zt:()=>c,h$:()=>p,iB:()=>h,l4:()=>s,uU:()=>l});var n=r(43561),o=r(81670);const a="ADD_TOAST";function i({toastType:e,text:t,duration:r=8e3,noDuplicate:o=!1}){return{type:a,payload:{id:(i=e,`${i}-${(0,n.Ak)()}`),toastType:e,text:t,duration:r,noDuplicate:o}};var i}const s="REMOVE_TOAST";function l(e){return{type:s,payload:{id:e}}}function c(e,t){return i({text:e,toastType:o.C.Info,duration:4e3,...t})}function d(e,t){return i({text:e,toastType:o.C.Success,duration:4e3,...t})}function u(e,t){return i({text:e,toastType:o.C.Warning,duration:6e3,...t})}function h(e,t){return i({text:e,toastType:o.C.Danger,duration:8e3,...t})}const p={addInfoToast:c,addSuccessToast:d,addWarningToast:u,addDangerToast:h}},91448:(e,t,r)=>{"use strict";r.d(t,{r9:()=>Y,pO:()=>te,im:()=>Se,mk:()=>Te,_q:()=>we,u4:()=>Ce,sn:()=>ne,m4:()=>$,Mm:()=>ue,ff:()=>de,aj:()=>Fe,Nl:()=>ke,n2:()=>xe,ww:()=>pe,fs:()=>me,tz:()=>fe,G7:()=>ge,qO:()=>Ve,TF:()=>Le,kw:()=>Z,Zh:()=>qe,S4:()=>$e,eZ:()=>He,dv:()=>le,EI:()=>ae,Cw:()=>z,zU:()=>Ie,bY:()=>W,hL:()=>B,Hk:()=>k,gH:()=>V,Yx:()=>Ue,eK:()=>X,ft:()=>Oe,eu:()=>Ke,Xz:()=>Xe,zM:()=>Je,a9:()=>be,Xk:()=>j,yG:()=>Qe,k9:()=>re,Xd:()=>Ae,d1:()=>Re,t_:()=>oe,Zc:()=>We,Hg:()=>De,JA:()=>ve,cv:()=>Q,sE:()=>G,YF:()=>Me,r7:()=>Ne,Qn:()=>ye,wh:()=>Ge,I:()=>Pe,op:()=>ee,ib:()=>ze,GM:()=>Be,G5:()=>je,zT:()=>ce,qK:()=>ie,MR:()=>U,jX:()=>K,Qw:()=>q,ZX:()=>Ye,Jr:()=>J,sC:()=>Ze});var n=r(2404),o=r.n(n),a=r(84700),i=r(58561),s=r.n(i),l=r(79378),c=r(74098),d=r(90924),u=r(99106),h=r(59744),p=r(14240),m=r(96548),f=r(87875),g=r(92083),_=r(64942),y=r(31912),v=r(91003),b=r(5147),E=r(91412),S=r(57135),T=r(15830),A=r(91518),C=r(25875),w=r(50816),R=r(56879),I=r(2341),O=r(68617),D=r(30483),x=r(85179),N=r(19835),L=r(79104);const P=new Set(["json_metadata","position_json"]);function F(e,t){return t.split(".").reduce(((e,t)=>{const r=null==e?void 0:e[t];return P.has(t)&&r?JSON.parse(r):r}),e)}var M=r(78752);const k="TOGGLE_NATIVE_FILTERS_BAR";function q(e){return{type:k,isOpen:e}}const z="SET_UNSAVED_CHANGES";function U(e){return{type:z,payload:{hasUnsavedChanges:e}}}const Y="ADD_SLICE",$="REMOVE_SLICE",B="TOGGLE_FAVE_STAR";function H(e){return{type:B,isStarred:e}}function j(e){return function(t){return l.A.get({endpoint:`/api/v1/dashboard/favorite_status/?q=${s().encode([e])}`}).then((({json:e})=>{var r;t(H(!(null==e||null==(r=e.result)||null==(r=r[0])||!r.value)))})).catch((()=>t((0,E.iB)((0,c.t)("There was an issue fetching the favorite status of this dashboard.")))))}}function Q(e,t){return function(r){const n=`/api/v1/dashboard/${e}/favorites/`;return(t?l.A.delete({endpoint:n}):l.A.post({endpoint:n})).then((()=>{r(H(!t))})).catch((()=>r((0,E.iB)((0,c.t)("There was an issue favoriting this dashboard.")))))}}const V="TOGGLE_PUBLISHED";function G(e,t){return function(r){return l.A.put({endpoint:`/api/v1/dashboard/${e}`,headers:{"Content-Type":"application/json"},body:JSON.stringify({published:t})}).then((()=>{r((0,E.WR)(t?(0,c.t)("This dashboard is now published"):(0,c.t)("This dashboard is now hidden"))),r(function(e){return{type:V,isPublished:e}}(t))})).catch((()=>{r((0,E.iB)((0,c.t)("You do not have permissions to edit this dashboard.")))}))}}const W="TOGGLE_EXPAND_SLICE";function K(e){return{type:W,sliceId:e}}const X="UPDATE_CSS";function J(e){return{type:X,css:e}}const Z="SET_EDIT_MODE";function ee(e){return{type:Z,editMode:e}}const te="ON_CHANGE";function re(){return{type:te}}const ne="ON_SAVE";function oe(e){return{type:ne,lastModifiedTime:e}}const ae="SET_REFRESH_FREQUENCY";function ie(e,t=!1){return{type:ae,refreshFrequency:e,isPersistent:t}}function se(e){return t=>{t(oe(e)),t(a.IE.clearHistory())}}const le="SET_OVERRIDE_CONFIRM";function ce(e){return{type:le,overwriteConfirmMetadata:e}}const de="SAVE_DASHBOARD_STARTED",ue="SAVE_DASHBOARD_FINISHED";function he(){return{type:ue}}const pe="SET_DASHBOARD_LABELS_COLORMAP_SYNCABLE",me="SET_DASHBOARD_LABELS_COLORMAP_SYNCED",fe="SET_DASHBOARD_SHARED_LABELS_COLORS_SYNCABLE",ge="SET_DASHBOARD_SHARED_LABELS_COLORS_SYNCED";function _e(){return{type:pe}}const ye=e=>async(t,r)=>{const{dashboardInfo:n}=r();t((0,O.PD)({metadata:{...(null==n?void 0:n.metadata)||{},...e}}))};function ve(e,t,r){return(n,o)=>{var a,i,s,p,m,f,g,_;n({type:I.YX}),n({type:de});const{dashboardFilters:y,dashboardLayout:k}=o(),q=k.present;Object.values(y).forEach((e=>{var t;const{chartId:r}=e,o=e.directPathToFilter.slice().pop(),a=((null==(t=q[o])?void 0:t.parents)||[]).slice();a.push(o),n((0,x.Zg)(r,a))}));const z=(0,S.A)((0,T.ug)()),U=function(e){return Object.values(e).reduce(((e,{chartId:t,scopes:r})=>{const n=Object.keys(r).reduce(((e,t)=>({...e,[t]:r[t]})),{});return{...e,[t]:n}}),{})}(y),{certified_by:Y,certification_details:$,css:B,dashboard_title:H,owners:j,roles:Q,slug:V,tags:G}=e,W=e=>void 0!==e.id,K=null==(a=e.metadata)?void 0:a.cross_filters_enabled,X=null==(i=e.metadata)?void 0:i.color_scheme,J=(null==(s=e.metadata)?void 0:s.label_colors)||{},Z=(0,M.ik)(null==(p=e.metadata)?void 0:p.shared_label_colors),ee={...e,certified_by:Y||"",certification_details:Y&&$?$:"",css:B||"",dashboard_title:H||(0,c.t)("[ untitled dashboard ]"),owners:(0,d.A)(j).map((e=>W(e)?e.id:e)),roles:(0,u.G7)(u.TO.DashboardRbac)?(0,d.A)(Q).map((e=>W(e)?e.id:e)):void 0,slug:V||null,tags:(0,u.G7)(u.TO.TaggingSystem)?(0,d.A)(G||[]).map((e=>W(e)?e.id:e)):void 0,metadata:{...e.metadata,color_namespace:(0,M.Z6)(null==(m=e.metadata)?void 0:m.color_namespace),color_scheme:X||"",color_scheme_domain:X?(0,M.bp)(X):[],expanded_slices:(null==(f=e.metadata)?void 0:f.expanded_slices)||{},label_colors:J,shared_label_colors:(0,M.t7)(Z),map_label_colors:(0,M.xV)(J),refresh_frequency:(null==(g=e.metadata)?void 0:g.refresh_frequency)||0,timed_refresh_immune_slices:(null==(_=e.metadata)?void 0:_.timed_refresh_immune_slices)||[],cross_filters_enabled:(0,b.b)(K)}},te=()=>{const{dashboardLayout:e,charts:t,dashboardInfo:{metadata:r}}=o();return(0,b.k)(e.present,r,t)},re=async e=>{const{error:t,message:r}=await(0,h.h4)(e);let o=(0,c.t)("Sorry, an unknown error occurred");t&&(o=(0,c.t)("Sorry, there was an error saving this dashboard: %s",t)),"string"==typeof r&&"Forbidden"===r&&(o=(0,c.t)("You do not have permission to edit this dashboard")),n(he()),n((0,E.iB)(o))};if([v.LA,v.Fq].includes(r)){const{chartConfiguration:o,globalChartConfiguration:a}=te(),i=r===v.Fq?e:{certified_by:ee.certified_by,certification_details:ee.certification_details,css:ee.css,dashboard_title:ee.dashboard_title,slug:ee.slug,owners:ee.owners,roles:ee.roles,tags:ee.tags||[],json_metadata:(0,A.J)({...(null==ee?void 0:ee.metadata)||{},default_filters:(0,A.J)(z),filter_scopes:U,chart_configuration:o,global_chart_configuration:a})},s=()=>l.A.put({endpoint:`/api/v1/dashboard/${t}`,headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((e=>(e=>{const r=e.json.result,o=e.json.last_modified_time;if(r.json_metadata){const e=JSON.parse(r.json_metadata);n(ye(e)),e.chart_configuration&&n({type:O.iI,chartConfiguration:e.chart_configuration}),e.native_filter_configuration&&n({type:N.Xf,filterConfig:e.native_filter_configuration}),l.A.get({endpoint:`/api/v1/dashboard/${t}/datasets`,headers:{"Content-Type":"application/json"}}).then((({json:e})=>{var t;const r=null!=(t=null==e?void 0:e.result)?t:[];r.length&&n((0,D.nC)(r))}))}return o&&n(se(o)),n(he()),(0,R.d)(`/superset/dashboard/${V||t}/`,{event:"dashboard_properties_changed"}),n((0,E.WR)((0,c.t)("This dashboard was saved successfully."))),n(ce(void 0)),e})(e))).catch((e=>re(e)));return new Promise(((e,o)=>{(0,u.G7)(u.TO.ConfirmDashboardDiff)&&r!==v.Fq?l.A.get({endpoint:`/api/v1/dashboard/${t}`}).then((r=>{const a=r.json.result,s=(l=a,c=i,L.Zd.map((e=>({keyPath:e,...e.split(".").find((e=>P.has(e)))?{oldValue:JSON.stringify(F(l,e),null,2)||"{}",newValue:JSON.stringify(F(c,e),null,2)||"{}"}:{oldValue:F(l,e)||"",newValue:F(c,e)||""}}))).filter((({oldValue:e,newValue:t})=>e!==t)));var l,c;return s.length>0?(n(ce({updatedAt:a.changed_on,updatedBy:a.changed_by_name,overwriteConfirmItems:s,dashboardId:t,data:i})),o(s)):e()})):e()})).then(s).catch((e=>{const r=(0,c.t)("Please confirm the overwrite values.");n((0,C.logEvent)(w.HH,{dashboard_id:t,items:e})),n((0,E.iB)(r))}))}"positions"in ee&&!("positions"in ee.metadata)&&(ee.metadata.positions=ee.positions),ee.metadata.default_filters=(0,A.J)(z),ee.metadata.filter_scopes=U;const ne={dashboard_title:ee.dashboard_title,css:ee.css,duplicate_slices:ee.duplicate_slices,json_metadata:JSON.stringify(ee.metadata)};return l.A.post({endpoint:`/api/v1/dashboard/${t}/copy/`,jsonPayload:ne}).then((e=>(e=>{const t=e.json.result.last_modified_time;t&&n(se(t));const{chartConfiguration:r,globalChartConfiguration:o}=te();return n((0,O.Iw)({chartConfiguration:r,globalChartConfiguration:o})),n(he()),(0,R.V)(`/superset/dashboard/${e.json.result.id}/`),n((0,E.WR)((0,c.t)("This dashboard was saved successfully."))),e})(e))).catch((e=>re(e)))}}function be(e=[],t=!1,r=0,n){return(o,a)=>{if(!r)return void e.forEach((e=>o((0,g.refreshChart)(e,t,n))));const{metadata:i}=a().dashboardInfo,s=Math.max(r,i.stagger_time||5e3);"boolean"!=typeof i.stagger_refresh&&(i.stagger_refresh=void 0===i.stagger_refresh||"true"===i.stagger_refresh);const l=i.stagger_refresh?s/(e.length-1):0;e.forEach(((e,r)=>{setTimeout((()=>o((0,g.refreshChart)(e,t,n))),l*r)}))}}const Ee=(e,t,r,n,o)=>new Promise((a=>{o(be(e,t,r,n)),a()})),Se="ON_FILTERS_REFRESH",Te="ON_FILTERS_REFRESH_SUCCESS";function Ae(){return{type:Te}}const Ce="ON_REFRESH_SUCCESS",we="ON_REFRESH";function Re(e=[],t=!1,r=0,n){return o=>{o({type:we}),Ee(e,t,r,n,o).then((()=>{o({type:Ce}),o({type:Se})}))}}const Ie="SHOW_BUILDER_PANE";function Oe(e){return(t,r)=>{const{sliceEntities:n}=r(),o=n.slices[e];if(!o)return t((0,E.Zd)("Sorry, there is no chart definition associated with the chart trying to be added."));const a={...o.form_data,slice_id:o.slice_id},i={..._.b,id:e,form_data:(0,y.S7)(a)};return Promise.all([t((0,g.addChart)(i,e)),t((0,D.VZ)(a.datasource))]).then((()=>{t({type:Y,slice:o})}))}}function De(e){return t=>{t({type:$,sliceId:e}),t((0,g.removeChart)(e)),(0,p.Ay)().removeSlice(e)}}const xe="SET_COLOR_SCHEME";function Ne(e){return{type:xe,colorScheme:e}}const Le="SET_DIRECT_PATH";function Pe(e){return{type:Le,path:e}}const Fe="SET_ACTIVE_TAB";function Me(e,t){return(r,n)=>{const{dashboardLayout:o,dashboardState:a}=n(),{activeTabs:i,inactiveTabs:s}=function(e,t,r,n){const{activeTabs:o,inactiveTabs:a}=r,{present:i}=n,s=[],l=[e],c=new Set;for(;l.length>0;){const e=l.shift();if(!c.has(e)){var d;c.add(e);const t=null!=(d=null==a?void 0:a.filter((t=>{var r;return null==(r=i[t])?void 0:r.parents.filter((e=>e.startsWith("TAB-"))).slice(-1).includes(e)})))?d:[];s.push(...t),l.push(...t)}}return{activeTabs:s?[e].concat(s):[e],inactiveTabs:Boolean(t)&&e!==t?o.filter((e=>{var r;return e!==t&&(null==(r=i[e])?void 0:r.parents.includes(t))})):[]}}(e,t,a,o);return r({type:Fe,activeTabs:i,prevTabId:t,inactiveTabs:s})}}const ke="SET_ACTIVE_TABS",qe="SET_FOCUSED_FILTER_FIELD";function ze(e,t){return{type:qe,chartId:e,column:t}}const Ue="UNSET_FOCUSED_FILTER_FIELD";function Ye(e,t){return{type:Ue,chartId:e,column:t}}const $e="SET_FULL_SIZE_CHART_ID";function Be(e){return{type:$e,chartId:e}}const He="SET_MAX_UNDO_HISTORY_EXCEEDED";function je(e=!0){return{type:He,payload:{maxUndoHistoryExceeded:e}}}function Qe(){return(e,t)=>{const{dashboardLayout:r}=t(),n=r.past.length;return e((0,E.Zd)((0,c.t)("You have used all %(historyLength)s undo slots and will not be able to fully undo subsequent actions. You may save your current state to reset the history.",{historyLength:n})))}}const Ve="SET_DATASETS_STATUS";function Ge(e){return{type:Ve,status:e}}const We=()=>async(e,t)=>{const{dashboardInfo:{id:r,metadata:n},dashboardState:{labelsColorMapMustSync:o,sharedLabelsColorsMustSync:a}}=t();(o||a)&&(e({type:me}),e({type:ge}),(async(e,t)=>{l.A.put({endpoint:`/api/v1/dashboard/${e}/colors?mark_updated=false`,headers:{"Content-Type":"application/json"},body:JSON.stringify({color_namespace:t.color_namespace,color_scheme:t.color_scheme,color_scheme_domain:t.color_scheme_domain||[],shared_label_colors:t.shared_label_colors||[],map_label_colors:t.map_label_colors||{},label_colors:t.label_colors||{}})})})(r,n))},Ke=e=>async t=>{try{const r=e.label_colors||{};let n=!1;const a=e.shared_label_colors||[];!Array.isArray(a)&&Object.keys(a).length>0&&(n=!0,t(ye({shared_label_colors:[]})));const i=!!e.map_label_colors;let s=e.color_scheme;const l=(0,m.A)(),c=l.get(s,!0),d=!!s&&!c;if(d){const e=l.defaultKey,r=(null==e?void 0:e.toString())||"supersetColors";n=!0,s=r,t(Ne(s)),t(ye({color_scheme:s}))}const u=s?(0,M.bp)(s):[],h=e.color_scheme_domain||[];o()(u,h)||(n=!0,t(ye({color_scheme_domain:u})));const p=!i||d;(0,M.D2)(e,p),p&&(n=!0,t(ye({map_label_colors:(0,M.xV)(r)}))),n&&t(_e())}catch(e){console.error("Failed to update dashboard color on load:",e)}},Xe=e=>(t,r)=>{(0,f.A)((()=>{const{dashboardState:{labelsColorMapMustSync:n}}=r(),o=e.label_colors||{},a=(0,M.Hq)(e.map_label_colors||{},o),i=(0,M.xV)(o),s=(0,M.pb)(a,i,o);s||t(ye({map_label_colors:i})),s||n||t(_e())}),500)},Je=(e,t=!1)=>(r,n)=>{(0,f.A)((()=>{const{dashboardState:{sharedLabelsColorsMustSync:a}}=n(),i=(0,M.ik)(e.shared_label_colors),s=(0,M.t7)(t?[]:i),l=!o()(i.sort(),s.sort());l&&r(ye({shared_label_colors:s})),l&&!a&&r({type:fe})}),500)},Ze=e=>(t,r)=>{try{const{dashboardInfo:{metadata:t},charts:n}=r(),o=t.color_scheme,a=(0,p.Ay)(),i=(0,M.ik)(t.shared_label_colors),s=t.label_colors||{},l=(0,M.Hq)(t.map_label_colors||{},s),c=[];if(e.length>0){const t=new Set(i);e.forEach((e=>{const r=n[e],i=r.form_data||r.latestQueryFormData;if(a.setOwnColorScheme(i.slice_id,i.color_scheme),o)return;const d=i.color_scheme,u=a.chartsLabelsMap.get(i.slice_id),h=((null==u?void 0:u.labels)||[]).filter((e=>!t.has(e)&&!s.hasOwnProperty(e))),p=new Set(h.map((e=>l[e])).filter(Boolean)),m=new Set((0,M.bp)(d));[...p].some((e=>!m.has(e)))&&c.push(...h)}))}const d=c.length>0&&c,u=!d;(0,M.D2)(t,d,u)}catch(e){console.error("Failed to update colors for new charts and labels:",e)}}},91466:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Ck:()=>u,eX:()=>d});var n=r(74098),o=r(88396),a=r(90924),i=r(31463),s=r(81500);const l=e=>"horizontal"===(null==e?void 0:e.orientation)?{label:(0,n.t)("Y-axis"),description:(0,n.t)("Dimension to use on y-axis.")}:{label:(0,n.t)("X-axis"),description:(0,n.t)("Dimension to use on x-axis.")},c={label:e=>l(null==e?void 0:e.form_data).label,multi:!1,description:e=>l(null==e?void 0:e.form_data).description,validators:[o.A],initialValue:(e,t)=>{var r,n;if(null!=t&&null!=(r=t.form_data)&&r.granularity_sqla&&(null==(n=t.form_data)||!n.x_axis)&&(null==e||!e.value))return t.form_data.granularity_sqla},default:void 0},d={isTemporal:!0,mapStateToProps:({datasource:e})=>{const t=(0,s.W)(e);return{options:t.temporalColumns,default:t.defaultTemporalColumn}}},u={initialValue:(e,t)=>{var r,n,o;if(null!=t&&null!=(r=t.controls)&&null!=(r=r.time_range)&&r.value||(0,a.A)(e.value).findIndex((e=>"TEMPORAL_RANGE"===(null==e?void 0:e.operator)))>-1)return;if(null!=t&&null!=(n=t.form_data)&&n.granularity_sqla&&null!=t&&null!=(o=t.form_data)&&o.time_range)return[...(0,a.A)(e.value),{clause:"WHERE",subject:t.form_data.granularity_sqla,operator:"TEMPORAL_RANGE",comparator:t.form_data.time_range,expressionType:"SIMPLE"}];const l=(null==t?void 0:t.datasource)&&(0,s.W)(t.datasource).defaultTemporalColumn;var c;return l?[...(0,a.A)(e.value),{clause:"WHERE",subject:l,operator:"TEMPORAL_RANGE",comparator:(null==t||null==(c=t.common)||null==(c=c.conf)?void 0:c.DEFAULT_TIME_FILTER)||i.WC,expressionType:"SIMPLE"}]:void 0}}},91518:(e,t,r)=>{"use strict";function n(e){const t=new Set;return JSON.stringify(e,((e,r)=>{if("object"==typeof r&&null!==r){if(t.has(r))try{return JSON.parse(JSON.stringify(r))}catch(e){return}t.add(r)}return r}))}r.d(t,{J:()=>n})},91920:(e,t,r)=>{"use strict";function n(e){return"string"==typeof e}function o(e){return"string"!=typeof e&&void 0!==(null==e?void 0:e.sqlExpression)&&void 0!==(null==e?void 0:e.label)&&(void 0===(null==e?void 0:e.expressionType)||"SQL"===(null==e?void 0:e.expressionType))}function a(e){return o(e)&&!0===(null==e?void 0:e.isColumnReference)}function i(e){return n(e)||o(e)}r.d(t,{Ay:()=>s,LF:()=>a,eh:()=>n,q0:()=>o,x$:()=>i});const s={}},92083:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ADD_CHART:()=>Z,ANNOTATION_QUERY_FAILED:()=>k,ANNOTATION_QUERY_STARTED:()=>F,ANNOTATION_QUERY_SUCCESS:()=>L,CHART_RENDERING_FAILED:()=>R,CHART_RENDERING_SUCCEEDED:()=>O,CHART_UPDATE_FAILED:()=>C,CHART_UPDATE_STARTED:()=>v,CHART_UPDATE_STOPPED:()=>T,CHART_UPDATE_SUCCEEDED:()=>E,DYNAMIC_PLUGIN_CONTROLS_READY:()=>z,POST_CHART_FORM_DATA:()=>ne,REMOVE_CHART:()=>x,RENDER_TRIGGERED:()=>V,TRIGGER_QUERY:()=>j,UPDATE_CHART_ID:()=>X,UPDATE_QUERY_FORM_DATA:()=>W,addChart:()=>ee,annotationQueryFailed:()=>q,annotationQueryStarted:()=>M,annotationQuerySuccess:()=>P,chartRenderingFailed:()=>I,chartRenderingSucceeded:()=>D,chartUpdateFailed:()=>w,chartUpdateStarted:()=>b,chartUpdateStopped:()=>A,chartUpdateSucceeded:()=>S,dynamicPluginControlsReady:()=>U,exploreJSON:()=>re,getChartDataRequest:()=>B,getDatasourceSamples:()=>se,handleChartDataResponse:()=>te,postChartFormData:()=>oe,redirectSQLLab:()=>ae,refreshChart:()=>ie,removeChart:()=>N,renderTriggered:()=>G,runAnnotationQuery:()=>H,triggerQuery:()=>Q,updateChartId:()=>J,updateQueryFormData:()=>K});var n=r(79378),o=r(59744),a=r(99106),i=r(74098),s=r(74842),l=r(31912),c=r(28674),d=r(91412),u=r(25875),h=r(50816),p=r(65803),m=r(35352),f=r(61103),g=r(5376),_=r(91518),y=r(59674);const v="CHART_UPDATE_STARTED";function b(e,t,r){return{type:v,queryController:e,latestQueryFormData:t,key:r}}const E="CHART_UPDATE_SUCCEEDED";function S(e,t){return{type:E,queriesResponse:e,key:t}}const T="CHART_UPDATE_STOPPED";function A(e){return{type:T,key:e}}const C="CHART_UPDATE_FAILED";function w(e,t){return{type:C,queriesResponse:e,key:t}}const R="CHART_RENDERING_FAILED";function I(e,t,r){return{type:R,error:e,key:t,stackTrace:r}}const O="CHART_RENDERING_SUCCEEDED";function D(e){return{type:O,key:e}}const x="REMOVE_CHART";function N(e){return{type:x,key:e}}const L="ANNOTATION_QUERY_SUCCESS";function P(e,t,r){return{type:L,annotation:e,queryResponse:t,key:r}}const F="ANNOTATION_QUERY_STARTED";function M(e,t,r){return{type:F,annotation:e,queryController:t,key:r}}const k="ANNOTATION_QUERY_FAILED";function q(e,t,r){return{type:k,annotation:e,queryResponse:t,key:r}}const z="DYNAMIC_PLUGIN_CONTROLS_READY",U=()=>(e,t)=>{const r=t(),n=(0,l.Eu)(r.explore,r.explore.form_data);e({type:z,key:n.slice_id.value,controlsState:n})},Y=async(e,t,r,o,a="POST",i={},s)=>{const l=(0,c.TL)({resultFormat:t,resultType:r}),d=p.m&&(null==i?void 0:i.dashboard_id),u=(0,c.Xe)({formData:e,endpointType:l,force:o,allowDomainSharding:d,method:a,requestParams:i.dashboard_id?{dashboard_id:i.dashboard_id}:{}}),h={...i,url:u,postPayload:{form_data:e},parseMethod:s};return n.A.post(h).then((({json:e,response:t})=>({response:t,json:{result:[e]}})))},$=async(e,t,r,o,a,i,s,l)=>{const d=await(0,c.sx)({formData:e,resultType:r,resultFormat:t,force:o,setDataMask:i,ownState:s}),{slice_id:u}=e,{dashboard_id:h}=a,m={};void 0!==u&&(m.form_data=`{"slice_id":${u}}`),void 0!==h&&(m.dashboard_id=h),o&&(m.force=o);const f=p.m&&(null==a?void 0:a.dashboard_id),g=(0,c.Hh)({path:"/api/v1/chart/data",qs:m,allowDomainSharding:f}).toString(),_={...a,url:g,headers:{"Content-Type":"application/json"},body:JSON.stringify(d),parseMethod:l};return n.A.post(_)};async function B({formData:e,setDataMask:t=()=>{},resultFormat:r="json",resultType:n="full",force:o=!1,method:a="POST",requestParams:i={},ownState:s={}}){let l={...i};p.m&&(l={...l,mode:"cors",credentials:"include"});const[d,u]=(0,c.Mp)(e);return d?Y(e,r,n,o,a,l,u):$(e,r,n,o,l,t,s,u)}function H({annotation:e,timeout:t,formData:r,key:a,isDashboardRequest:i=!1,force:s=!1}){return async function(l,d){var u;const{charts:h,common:p}=d(),m=a||Object.keys(h)[0],f=t||p.conf.SUPERSET_WEBSERVER_TIMEOUT,g={...r||h[m].latestQueryFormData};if(!e.sourceType)return Promise.resolve();g.time_grain_sqla=g.time_grain_sqla||g.granularity,g.granularity=g.granularity_sqla;const _=Object.keys(e.overrides);(_.includes("since")||_.includes("until"))&&(e.overrides={...e.overrides,time_range:null});const y=Object.keys(e.overrides).reduce(((t,r)=>({...t,[r]:e.overrides[r]||g[r]})),{});if(!i&&g){const e=g.extra_filters&&g.extra_filters.length>0;y.extra_filters=e?g.extra_filters:void 0}const v=(0,c.Ze)(e.value,s),b=new AbortController,{signal:E}=b;l(M(e,b,m));const S=null==g||null==(u=g.annotation_layers)?void 0:u.findIndex((t=>t.name===e.name));S>=0&&(g.annotation_layers[S].overrides=y);const T=await(0,c.sx)({formData:g,force:s,resultFormat:"json",resultType:"full"});return n.A.post({url:v,signal:E,timeout:1e3*f,headers:{"Content-Type":"application/json"},jsonPayload:T}).then((({json:t})=>{var r;const n=null==t||null==(r=t.result)||null==(r=r[0])||null==(r=r.annotation_data)?void 0:r[e.name];return l(P(e,{data:n},m))})).catch((t=>(0,o.h4)(t).then((t=>{"timeout"===t.statusText?l(q(e,{error:"Query timeout"},m)):(t.error||"").toLowerCase().includes("no data")?l(P(e,t,m)):"abort"!==t.statusText&&l(q(e,t,m))}))))}}const j="TRIGGER_QUERY";function Q(e=!0,t){return{type:j,value:e,key:t}}const V="RENDER_TRIGGERED";function G(e,t){return{type:V,value:e,key:t}}const W="UPDATE_QUERY_FORM_DATA";function K(e,t){return{type:W,value:e,key:t}}const X="UPDATE_CHART_ID";function J(e,t=0){return{type:X,newId:e,key:t}}const Z="ADD_CHART";function ee(e,t){return{type:Z,chart:e,key:t}}function te(e,t,r){if((0,a.G7)(a.TO.GlobalAsyncQueries)){const n="result"in t?t.result:t;switch(e.status){case 200:return Promise.resolve(n);case 202:return r?(0,f.fv)(n[0]):(0,f.fv)(n);default:throw new Error(`Received unexpected response status (${e.status}) while fetching chart data`)}}return t.result}function re(e,t=!1,r,n,i,s){return async(l,d)=>{var p;const f=d(),g=h.Vy.getTimestamp(),_=new AbortController,v=null==(p=f.charts)||null==(p=p[n])?void 0:p.queryController,E=r||f.common.conf.SUPERSET_WEBSERVER_TIMEOUT,T={signal:_.signal,timeout:1e3*E};i&&(T.dashboard_id=i),l(b(_,e,n)),v&&setTimeout((()=>v.abort()),0);const C=B({setDataMask:t=>{l((0,m.Mv)(e.slice_id,t))},formData:e,resultFormat:"json",resultType:"full",force:t,method:"POST",requestParams:T,ownState:s}),[R]=(0,c.Mp)(e),I=C.then((({response:e,json:t})=>te(e,t,R))).then((r=>(r.forEach((r=>l((0,u.logEvent)(h.tO,{slice_id:n,applied_filters:r.applied_filters,is_cached:r.is_cached,force_refresh:t,row_count:r.rowcount,datasource:e.datasource,start_offset:g,ts:(new Date).getTime(),duration:h.Vy.getTimestamp()-g,has_extra_filters:e.extra_filters&&e.extra_filters.length>0,viz_type:e.viz_type,data_age:r.is_cached?(0,y.XV)(new Date).diff(y.XV.utc(r.cached_dttm)):null})))),l(S(r,n))))).catch((t=>{if((0,a.G7)(a.TO.GlobalAsyncQueries))return l(w([t],n));const r=(t,r)=>{l((0,u.logEvent)(h.tO,{slice_id:n,has_err:!0,is_cached:r,error_details:t,datasource:e.datasource,start_offset:g,ts:(new Date).getTime(),duration:h.Vy.getTimestamp()-g}))};return"AbortError"===t.name?(r("abort"),l(A(n))):(0,o.h4)(t).then((e=>("timeout"===t.statusText?r("timeout"):r(e.error,e.is_cached),l(w([e],n)))))})),O=R&&e.annotation_layers||[],D=i>0;return Promise.all([I,l(Q(!1,n)),l(K(e,n)),...O.map((o=>l(H({annotation:o,timeout:r,formData:e,key:n,isDashboardRequest:D,force:t}))))])}}const ne="POST_CHART_FORM_DATA";function oe(e,t=!1,r,n,o,a){return re(e,t,r,n,o,a)}function ae(e,t){return r=>{B({formData:e,resultFormat:"json",resultType:"query"}).then((({json:r})=>{const o="/sqllab/",a={datasourceKey:e.datasource,sql:r.result[0].query};t?t.push({pathname:o,state:{requestedQuery:a}}):n.A.postForm((0,g.A)(o),{form_data:(0,_.J)(a)})})).catch((()=>r((0,d.iB)((0,i.t)("An error occurred while loading the SQL")))))}}function ie(e,t,r){return(n,o)=>{var a;const i=(o().charts||{})[e],s=o().dashboardInfo.common.conf.SUPERSET_WEBSERVER_TIMEOUT;i.latestQueryFormData&&0!==Object.keys(i.latestQueryFormData).length&&n(oe(i.latestQueryFormData,t,s,i.id,r,null==(a=o().dataMask[i.id])?void 0:a.ownState))}}const se=async(e,t,r,a,l,c,d)=>{try{const o={force:r,datasource_type:e,datasource_id:t};return(0,s.A)(d)&&(o.dashboard_id=d),(0,s.A)(l)&&(0,s.A)(c)&&(o.per_page=l,o.page=c),(await n.A.post({endpoint:"/datasource/samples",jsonPayload:a,searchParams:o,parseMethod:"json-bigint"})).json.result}catch(e){const t=await(0,o.h4)(e);throw new Error(t.message||t.error||(0,i.t)("Sorry, an error occurred"),{cause:e})}}},92998:(e,t,r)=>{"use strict";r.d(t,{R:()=>c});var n=r(2445),o=r(50290),a=r(46942),i=r.n(a);const s=r.p+"loading.cff8a5da.gif",l=o.I4.img`
  z-index: 99;
  width: 50px;
  height: unset;
  position: relative;
  margin: 10px;
  &.inline {
    margin: 0px;
    width: 30px;
  }
  &.inline-centered {
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  &.floating {
    padding: 0;
    margin: 0;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
  }
`;function c({position:e="floating",image:t,className:r}){return(0,n.Y)(l,{className:i()("loading",e,r),alt:"Loading...",src:t||s,role:"status","aria-live":"polite","aria-label":"Loading"})}},93590:(e,t,r)=>{"use strict";r.d(t,{L:()=>p,PU:()=>l,UX:()=>g,bE:()=>m,ed:()=>u,fZ:()=>f,mu:()=>s,nr:()=>_,qC:()=>c});var n=r(58083),o=r(15222),a=r(90924);const i="<empty string>",s="<NULL>",l="TRUE",c="FALSE",d=(0,n.mo)(o.A.DATABASE_DATETIME);function u(e){return null===e?s:""===e?i:!0===e?l:!1===e?c:"string"!=typeof e&&e.toString?e.toString():e}function h(e){return e.name||e}function p(e,t){let r=t.length?`${t.map(h).join("\t")}\n`:"";for(let n=0;n<e.length;n+=1){const o={};for(let r=0;r<t.length;r+=1){const a=h(t[r]);a in e[n]?o[r]=e[n][a]:o[r]=e[n][parseFloat(a)]}r+=`${Object.values(o).join("\t")}\n`}return r}function m(e,t){return e&&0!==e.length&&0!==(0,a.A)(t).length?e.map((e=>({...e,...t.reduce(((t,r)=>(null!==e[r]&&void 0!==e[r]&&(t[r]=d(e[r])),t)),{})}))):e}const f=()=>{},g=()=>{const{appVersion:e}=navigator;return e.includes("Win")?"Windows":e.includes("Mac")?"MacOS":e.includes("X11")?"UNIX":e.includes("Linux")?"Linux":"Unknown OS"},_=()=>{const{userAgent:e}=navigator;return e&&/^((?!chrome|android).)*safari/i.test(e)}},93606:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});const n={};function o(e){let t=null;if(e){const{childId:o,layout:a={}}=e,i=n[o];if(i){var r;const e=(null==a?void 0:a[i])||{};if(null!=e&&e.children&&null!=e&&null!=(r=e.children)&&null!=r.includes&&r.includes(o))return e.id}t=function(e){let t=null;if(e){const{childId:n,layout:o={}}=e;if(o){const e=Object.keys(o);for(let a=0;a<=e.length-1;a+=1){var r;const i=e[a],s=o[i]||{};if(i!==n&&null!=s&&null!=(r=s.children)&&null!=r.includes&&r.includes(n)){t=i;break}}}}return t}({childId:o,layout:a}),n[o]=t}return t}},94122:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(35625),o=r(39892);class a extends n.A{constructor(){super({name:"ChartBuildQuery",overwritePolicy:n.m.Warn})}}const i=(0,o.A)(a)},94185:(e,t,r)=>{"use strict";r.d(t,{F:()=>a});var n=r(2445),o=r(17260);const a=e=>{const{type:t="info",description:r,showIcon:a=!0,closable:i=!0,children:s,...l}=e;return(0,n.Y)(o.A,{role:"alert","aria-live":"error"===t?"assertive":"polite",type:t,showIcon:a,closable:i,message:s||"Default message",description:r,...l})}},95018:(e,t,r)=>{"use strict";r.d(t,{m:()=>a});var n=r(2445),o=r(37977);const a=({overlayStyle:e,...t})=>(0,n.Y)(o.A,{styles:{body:{overflow:"hidden",textOverflow:"ellipsis"},root:null!=e?e:{}},...t})},95347:(e,t,r)=>{"use strict";r.d(t,{IX:()=>l,Ip:()=>u});var n=r(96540),o=r(66991);const a=r(40115).F.injectEndpoints({endpoints:e=>({schemas:e.query({providesTags:[{type:"Schemas",id:"LIST"}],query:({dbId:e,catalog:t,forceRefresh:r})=>({endpoint:`/api/v1/database/${e}/schemas/`,urlParams:{force:r,...void 0!==t&&{catalog:t}},transformResponse:({json:e})=>e.result.sort().map((e=>({value:e,label:e,title:e})))}),serializeQueryArgs:({queryArgs:{dbId:e,catalog:t}})=>({dbId:e,catalog:t})})})}),{useLazySchemasQuery:i,useSchemasQuery:s,endpoints:l,util:c}=a,d=[];function u(e){const{dbId:t,catalog:r,onSuccess:a,onError:l}=e||{},[c]=i(),u=s({dbId:t,catalog:r||void 0,forceRefresh:!1},{skip:!t});(0,n.useEffect)((()=>{u.isError&&(null==l||l(u.error))}),[u.isError,u.error,l]);const h=(0,o.A)(((e,t,r=!1)=>{!e||u.currentData&&!r||c({dbId:e,catalog:t,forceRefresh:r}).then((({isSuccess:e,isError:t,data:n})=>{e&&(null==a||a(n||d,r)),t&&(null==l||l(u.error))}))}));(0,n.useEffect)((()=>{h(t,r,!1)}),[t,r,h]);const p=(0,n.useCallback)((()=>{h(t,r,!0)}),[t,r,h]);return{...u,refetch:p}}},95553:(e,t,r)=>{"use strict";function n(){return(window.location.hash||"#").substring(1)}r.d(t,{A:()=>n})},96790:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(43561),o=r(74098),a=r(29624),i=r(91003);const s={[a.oT]:{width:i.nm,height:50},[a.QP]:{width:i.nm,background:i.kn},[a.n6]:null,[a.PP]:{text:(0,o.t)("New header"),headerSize:i.W9,background:i.kn},[a.xY]:{width:i.nm,height:50},[a._8]:{background:i.kn},[a.wc]:null,[a.B8]:{text:"",defaultText:(0,o.t)("Tab title"),placeholder:(0,o.t)("Tab title")},[a.rG]:{width:i.cV,background:i.kn}};function l(e){return`${e}-${(0,n.Ak)()}`}function c(e,t,r=[]){return{type:e,id:l(e),children:[],parents:r,meta:{...s[e],...t}}}},96905:(e,t,r)=>{"use strict";r.d(t,{O0:()=>d,ZS:()=>s});var n=r(79378),o=r(59744),a=r(91412),i=r(29910);const s="SET_DATASOURCE";function l(e){return{type:s,datasource:e}}function c(e){return function(t,r){const{explore:{datasource:n}}=r();t(l(e)),t((0,i.updateFormDataByDatasource)(n,e))}}const d={setDatasource:l,changeDatasource:c,saveDataset:function({schema:e,sql:t,database:r,templateParams:i,datasourceName:s,columns:l}){return async function(d){try{const{json:{data:o}}=await n.A.post({endpoint:"/api/v1/dataset/",headers:{"Content-Type":"application/json"},body:JSON.stringify({database:null==r?void 0:r.id,table_name:s,schema:e,sql:t,template_params:i,columns:l})});return d(c(o)),o}catch(e){throw(0,o.h4)(e).then((e=>{d((0,a.iB)(e.error))})),e}}}}},97163:(e,t,r)=>{"use strict";r.d(t,{aF:()=>v,vq:()=>g});var n=r(69843),o=r.n(n),a=r(2445),i=r(96540),s=r(50290),l=r(17437),c=r(74098),d=r(49222),u=r(84564),h=r(55794),p=r.n(h),m=r(8558),f=r(88217);const g=(0,s.I4)((e=>(0,a.Y)(d.A,{...e,maskTransitionName:""})))`
  ${({theme:e,responsive:t,maxWidth:r,resizable:n,height:o,draggable:a,hideFooter:i})=>l.AH`
    ${t&&l.AH`
      max-width: ${null!=r?r:"900px"};
      padding-left: ${3*e.sizeUnit}px;
      padding-right: ${3*e.sizeUnit}px;
      padding-bottom: 0;
      top: 0;
    `}

    .ant-modal-content {
      background-color: ${e.colorBgContainer};
      display: flex;
      flex-direction: column;
      max-height: calc(100vh - ${8*e.sizeUnit}px);
      margin-bottom: ${4*e.sizeUnit}px;
      margin-top: ${4*e.sizeUnit}px;
      padding: 0;
    }

    .ant-modal-header {
      flex: 0 0 auto;
      border-radius: ${e.borderRadius}px ${e.borderRadius}px 0 0;
      padding: ${4*e.sizeUnit}px ${4*e.sizeUnit}px;

      .ant-modal-title {
        font-weight: ${e.fontWeightStrong};
      }

      .ant-modal-title h4 {
        display: flex;
        margin: 0;
        align-items: center;
      }
    }

    .ant-modal-close {
      width: ${14*e.sizeUnit}px;
      height: ${14*e.sizeUnit}px;
      padding: ${6*e.sizeUnit}px ${4*e.sizeUnit}px
        ${4*e.sizeUnit}px;
      top: 0;
      right: 0;
      display: flex;
      justify-content: center;
    }

    .ant-modal-close:hover {
      background: transparent;
    }

    .ant-modal-close-x {
      display: flex;
      align-items: center;
      [data-test='close-modal-btn'] {
        justify-content: center;
      }
      .close {
        flex: 1 1 auto;
        margin-bottom: ${e.sizeUnit}px;
        color: ${e.colorPrimaryText};
        font-weight: ${e.fontWeightLight};
      }
    }

    .ant-modal-body {
      flex: 0 1 auto;
      padding: ${4*e.sizeUnit}px ${6*e.sizeUnit}px;

      overflow: auto;
      ${!n&&o&&`height: ${o};`}
    }

    .ant-modal-footer {
      flex: 0 0 1;
      border-top: ${e.sizeUnit/4}px solid ${e.colorSplit};
      padding: ${4*e.sizeUnit}px;
      margin-top: 0;

      .btn {
        font-size: 12px;
      }

      .btn + .btn {
        margin-left: ${2*e.sizeUnit}px;
      }
    }

    &.no-content-padding .ant-modal-body {
      padding: 0;
    }

    ${a&&l.AH`
      .ant-modal-header {
        padding: 0;

        .draggable-trigger {
          cursor: move;
          padding: ${4*e.sizeUnit}px;
          width: 100%;
        }
      }
    `}

    ${n&&l.AH`
      .resizable {
        pointer-events: all;

        .resizable-wrapper {
          height: 100%;
        }

        .ant-modal-content {
          height: 100%;

          .ant-modal-body {
            height: ${i?"calc(100% - 55px)":"calc(100% - 55px - 65px)"};
          }
        }
      }
    `}
  `}
`,_=e=>({maxHeight:"100vh",maxWidth:"100vw",minHeight:e?109:174,minWidth:"380px",enable:{bottom:!0,bottomLeft:!1,bottomRight:!0,left:!1,top:!1,topLeft:!1,topRight:!1,right:!0}}),y=({children:e,disablePrimaryButton:t=!1,primaryTooltipMessage:r,primaryButtonLoading:n=!1,onHide:l,onHandledPrimaryAction:d,primaryButtonName:h=(0,c.t)("OK"),primaryButtonStyle:y="primary",show:v,name:b,title:E,width:S,maxWidth:T,responsive:A=!1,centered:C,footer:w,hideFooter:R,wrapProps:I,draggable:O=!1,resizable:D=!1,resizableConfig:x=_(R),draggableConfig:N,destroyOnHidden:L,openerRef:P,...F})=>{const M=(0,i.useRef)(null),[k,q]=(0,i.useState)(),[z,U]=(0,i.useState)(!0),Y=(0,s.DP)(),$=()=>{var e;null==P||null==(e=P.current)||e.focus(),l()};let B;B=(0,i.isValidElement)(w)&&"function"==typeof w.type?(0,i.cloneElement)(w,{closeModal:$}):w;const H=o()(B)?[(0,a.Y)(f.$,{cta:!0,buttonStyle:"secondary",onClick:$,children:(0,c.t)("Cancel")},"back"),(0,a.Y)(f.$,{buttonStyle:y,disabled:t,tooltip:r,loading:n,onClick:d,cta:!0,children:h},"submit")]:B,j=S||(A?"100vw":"600px"),Q=!(D||O),V=(0,i.useMemo)((()=>0===Object.keys(x).length?_(R):x),[R,x]);return(0,a.Y)(g,{centered:!!C,onOk:d,onCancel:$,width:j,maxWidth:T,responsive:A,open:v,title:(0,a.Y)((()=>O?(0,a.Y)("div",{className:"draggable-trigger",onMouseOver:()=>z&&U(!1),onMouseOut:()=>!z&&U(!0),children:E}):(0,a.Y)(a.FK,{children:E})),{}),closeIcon:(0,a.Y)(m.F.CloseOutlined,{iconColor:Y.colorText,iconSize:"l",className:"close","aria-hidden":"true"}),footer:R?null:H,hideFooter:R,wrapProps:{...I},modalRender:e=>D||O?(0,a.Y)(p(),{disabled:!O||z,bounds:k,onStart:(e,t)=>((e,t)=>{var r,n;const{clientWidth:o,clientHeight:a}=null==(r=window)||null==(r=r.document)?void 0:r.documentElement,i=null==M||null==(n=M.current)?void 0:n.getBoundingClientRect();i&&q({left:-(null==i?void 0:i.left)+(null==t?void 0:t.x),right:o-((null==i?void 0:i.right)-(null==t?void 0:t.x)),top:-(null==i?void 0:i.top)+(null==t?void 0:t.y),bottom:a-((null==i?void 0:i.bottom)-(null==t?void 0:t.y))})})(0,t),...N,children:D?(0,a.Y)(u.c,{className:"resizable",...V,children:(0,a.Y)("div",{className:"resizable-wrapper",ref:M,children:e})}):(0,a.Y)("div",{ref:M,children:e})}):e,mask:Q,draggable:O,resizable:D,destroyOnHidden:L,...F,children:e})};y.displayName="Modal";const v=Object.assign(y,{error:d.A.error,warning:d.A.warning,confirm:d.A.confirm,useModal:d.A.useModal})},97206:(e,t,r)=>{"use strict";r.d(t,{aN:()=>f,S4:()=>m,Db:()=>h,Vl:()=>v,Ay:()=>b});var n=r(29624),o=r(91003);const a=o.W3+1,i=o.W3+3,s=o.W3+4,l=o.W3+5,c={[n.tq]:{[n.wc]:o.W3,[n.$9]:o.W3},[n.$9]:{[n.oT]:a,[n.rG]:a,[n.xY]:a,[n.QP]:a,[n.n6]:a,[n.PP]:a,[n._8]:a,[n.wc]:a},[n._8]:{[n.oT]:s,[n.rG]:s,[n.xY]:s,[n.QP]:s},[n.wc]:{[n.B8]:i},[n.B8]:{[n.oT]:l,[n.rG]:l,[n.xY]:l,[n.QP]:i,[n.n6]:l,[n.PP]:l,[n._8]:i,[n.wc]:i},[n.QP]:{[n.oT]:l,[n.PP]:l,[n.xY]:l,[n._8]:i,[n.n6]:i,[n.wc]:i},[n.oT]:{},[n.rG]:{},[n.n6]:{},[n.PP]:{},[n.xY]:{}};function d(e){var t;const{parentType:r,childType:n,parentDepth:o}=e;if(!r||!n||"number"!=typeof o)return!1;const a=null==(t=c[r])?void 0:t[n];return"number"==typeof a&&o<=a}const u="DROP_TOP",h="DROP_RIGHT",p="DROP_BOTTOM",m="DROP_LEFT",f="DROP_FORBIDDEN",g=20,_=20;let y={};function v(){y={}}function b(e,t){const{depth:r,parentComponent:o,component:a,orientation:i,isDraggingOverShallow:s}=t.props,l=e.getItem();if(!l||l.id===a.id)return null;const c=d({parentType:a.type,parentDepth:r,childType:l.type}),v=o&&o.type,b=d({parentType:v,parentDepth:r+(v===n.B8||v===n.wc?0:-1),childType:l.type});if(!c&&!b)return f;const E=(a.children||[]).length>0,S="row"===i?"vertical":"horizontal",T="row"===i?"horizontal":"vertical";if(c&&!b)return"vertical"===S?E?h:m:E?p:u;const A=t.ref.getBoundingClientRect(),C=e.getClientOffset()||y[a.id];if(!C||!A)return null;y[a.id]=C;const w=Math.abs(C.y-A.top),R=Math.abs(C.y-A.bottom),I=Math.abs(C.x-A.left),O=Math.abs(C.x-A.right);if(!s&&[w,R,I,O].every((e=>e>_)))return null;if(b&&!c){if("vertical"===T){const e=A.left+(A.right-A.left)/2;return C.x<e?m:h}const e=A.top+(A.bottom-A.top)/2;return C.y<e?u:p}if(b&&c){if("vertical"===T){if(I<g)return m;if(O<g)return h}else{if(w<g)return u;if(R<g)return p}return"vertical"===S?E?h:m:E?p:u}return null}},97253:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,C:()=>a});var n=r(19835),o=r(48813);function a({filterConfig:e,state:t}){const r={},n={};var o;return e?(e.forEach((e=>{const{id:t}=e;n[t]=e})),r.filters=n):r.filters=null!=(o=null==t?void 0:t.filters)?o:{},r.focusedFilterId=void 0,r}function i(e={filters:{}},t){switch(t.type){case o.n:return{filters:t.data.nativeFilters.filters};case n.Xf:return a({filterConfig:t.filterConfig,state:e});case n.OM:return function(e,t){const r={...e.filters};return t.forEach((e=>{if(null!=e.chartsInScope&&null!=e.tabsInScope)r[e.id]=e;else{var t,n;const o=r[e.id];r[e.id]={...e,chartsInScope:null!=(t=e.chartsInScope)?t:null==o?void 0:o.chartsInScope,tabsInScope:null!=(n=e.tabsInScope)?n:null==o?void 0:o.tabsInScope}}})),{...e,filters:r}}(e,t.filterChanges);case n.Y$:return{...e,focusedFilterId:t.id};case n.R4:return{...e,focusedFilterId:void 0};case n.ow:return{...e,hoveredFilterId:t.id};case n.zE:return{...e,hoveredFilterId:void 0};case n.tX:return{...e,filters:{...e.filters,[t.id]:{...e.filters[t.id],cascadeParentIds:t.parentIds}}};default:return e}}},98244:(e,t,r)=>{"use strict";r.d(t,{IX:()=>T.IX,hT:()=>n.hT,z7:()=>S.z7,PG:()=>S.PG,oh:()=>m,RG:()=>y,MZ:()=>v,DT:()=>b,RO:()=>E,IV:()=>C,Ip:()=>T.Ip,ii:()=>S.ii,rq:()=>S.rq,ty:()=>S.ty});var n=r(51066),o=r(59246),a=r(96540),i=r(66991),s=r(40115);const l=s.F.injectEndpoints({endpoints:e=>({catalogs:e.query({providesTags:[{type:"Catalogs",id:"LIST"}],query:({dbId:e,forceRefresh:t})=>({endpoint:`/api/v1/database/${e}/catalogs/`,urlParams:{force:t},transformResponse:({json:e})=>e.result.sort().map((e=>({value:e,label:e,title:e})))}),serializeQueryArgs:({queryArgs:{dbId:e}})=>({dbId:e})})})}),{useLazyCatalogsQuery:c,useCatalogsQuery:d,endpoints:u,util:h}=l,p=[];function m(e){const{dbId:t,onSuccess:r,onError:n}=e||{},[o]=c(),s=d({dbId:t,forceRefresh:!1},{skip:!t});(0,a.useEffect)((()=>{s.isError&&(null==n||n(s.error))}),[s.isError,s.error,n]);const l=(0,i.A)(((e,t=!1)=>{!e||s.currentData&&!t||o({dbId:e,forceRefresh:t}).then((({isSuccess:e,isError:o,data:a})=>{e&&(null==r||r(a||p,t)),o&&(null==n||n(s.error))}))})),u=(0,a.useCallback)((()=>{l(t,!0)}),[t,l]);return(0,a.useEffect)((()=>{l(t,!1)}),[t,l]),{...s,refetch:u}}var f=r(58561);function g({owners:e}){return e?e.map((e=>`${e.first_name} ${e.last_name}`)):null}const _=r.n(f)().encode({columns:["owners.first_name","owners.last_name"],keys:["none"]});function y(e){return(0,o.vL)((0,o.b5)(`/api/v1/chart/${e}?q=${_}`),g)}const v=e=>(0,o.vL)((0,o.b5)(`/api/v1/dashboard/${e}`),(e=>({...e,metadata:e.json_metadata&&JSON.parse(e.json_metadata)||{},position_data:e.position_json&&JSON.parse(e.position_json),owners:e.owners||[]}))),b=e=>(0,o.b5)(`/api/v1/dashboard/${e}/charts`),E=e=>(0,o.vL)((0,o.b5)(`/api/v1/dashboard/${e}/datasets`),(e=>e.map((e=>{var t;return{...e,currencyFormats:Object.fromEntries((null!=(t=e.metrics)?t:[]).filter((e=>!!e.currency)).map((e=>[e.metric_name,e.currency])))}}))));var S=r(37318),T=r(95347);const A=s.F.injectEndpoints({endpoints:e=>({queryValidations:e.query({providesTags:["QueryValidations"],query:({dbId:e,catalog:t,schema:r,sql:n,templateParams:o})=>{let a=o;try{a=JSON.parse(o||"")}catch(e){a=void 0}const i={catalog:t,schema:r,sql:n,...a&&{template_params:a}};return{method:"post",endpoint:`/api/v1/database/${e}/validate_sql/`,headers:{"Content-Type":"application/json"},body:JSON.stringify(i),transformResponse:({json:e})=>e.result}}})})}),{useQueryValidationsQuery:C}=A},99027:(e,t,r)=>{"use strict";r.d(t,{r:()=>s});var n=r(2445),o=r(95018),a=r(50290),i=r(17437);const s=({label:e,tooltip:t,placement:r,icon:s,onClick:l})=>{const c=(0,a.DP)(),d=(0,n.Y)("span",{role:"button",tabIndex:0,css:i.AH`
        cursor: pointer;
        color: ${c.colorIcon};
        margin-right: ${c.sizeUnit}px;
        &:hover {
          path {
            fill: ${c.colorPrimary};
          }
        }
      `,className:"action-button",onClick:l,children:s}),u=`${e.replaceAll(" ","-").toLowerCase()}-tooltip`;return t?(0,n.Y)(o.m,{id:u,title:t,placement:r,children:d}):d}},99183:(e,t,r)=>{"use strict";r.d(t,{EL:()=>h,IO:()=>p,Iu:()=>d,UX:()=>u,Vg:()=>m,Ws:()=>y,_A:()=>g,h9:()=>l,jQ:()=>_,rf:()=>c,tK:()=>f});var n=r(50290),o=r(36492),a=r(8558),i=r(29029),s=r(76576);const l=n.I4.span`
  ${({theme:e,headerPosition:t})=>`\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    margin-right: ${"left"===t?2*e.sizeUnit:0}px;\n    font-size: ${e.fontSizeSM}px;\n  `}
`,c=n.I4.div`
  ${({headerPosition:e,theme:t})=>`\n    display: flex;\n    gap: ${t.sizeUnit}px;\n    flex-direction: ${"top"===e?"column":"row"};\n    align-items: ${"left"===e?"center":void 0};\n    width: 100%;\n  `}
`,d=(0,n.I4)(o.A,{shouldForwardProp:e=>"headerPosition"!==e&&"oneLine"!==e})`
  ${({theme:e,headerPosition:t,oneLine:r})=>`\n    .ant-select-item-option-active:not(.ant-select-item-option-disabled) {\n      outline: 2px solid ${e.colorPrimary};\n      outline-offset: -2px;\n    }\n    flex: ${"left"===t?1:0};\n    line-height: ${e.sizeXL}px;\n\n    && .ant-select-selection-search {\n      left: 0px;\n    }\n\n    && .ant-select-selection-item, .ant-select-selection-placeholder {\n      max-height: ${e.sizeXL}px;\n    }\n    .ant-select-selection-item::after {\n      height: 0;\n      display: block !important;\n    }\n    ${r&&`\n        .ant-select-selection-overflow {\n          flex-wrap: nowrap;\n        }\n\n        .ant-select-selection-overflow-item:not(.ant-select-selection-overflow-item-rest):not(.ant-select-selection-overflow-item-suffix) {\n          flex-shrink: 1;\n          min-width: ${13*e.sizeUnit}px;\n        }\n\n        .ant-select-selection-overflow-item-suffix {\n          flex: unset;\n          min-width: 0px;\n        }\n      `};\n `}
`,u=(n.I4.span`
  display: none;
`,(0,n.I4)(a.F.StopOutlined)`
  vertical-align: 0;
`),h=(0,n.I4)(a.F.CheckOutlined)`
  vertical-align: 0;
`,p=(0,n.I4)(i.A)`
  margin-top: ${({theme:e})=>-e.sizeUnit}px;
`,m=n.I4.div`
  ${({theme:e})=>`\n   margin-left: ${3*e.sizeUnit}px;\n   line-height: ${8*e.sizeUnit}px;\n   color: ${e.colorTextSecondary};\n `}
`,f=n.I4.div`
  ${({theme:e})=>`\n   padding: ${2*e.sizeUnit}px ${3*e.sizeUnit}px;\n   color: ${e.colorText};\n   font-size: ${e.fontSizeSM}px;\n   cursor: default;\n   border-bottom: 1px solid ${e.colorBorderSecondary};\n `}
`,g=n.I4.div`
  ${({theme:e})=>`\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n    width: 100%;\n    padding: ${2*e.sizeUnit}px;\n    color: ${e.colorError};\n    & svg {\n      margin-right: ${2*e.sizeUnit}px;\n    }\n  `}
`,_=n.I4.div`
  overflow: hidden;
  text-overflow: ellipsis;
`,y=(0,n.I4)(s.s)`
  ${({theme:e})=>`\n    padding: ${e.sizeUnit}px;\n    border-top: 1px solid ${e.colorSplit};\n  `}
`},99467:(e,t,r)=>{"use strict";function n(e){return String(e).trim()}r.d(t,{A:()=>n})},99578:(e,t,r)=>{"use strict";var n,o;r.d(t,{AA:()=>n,Ay:()=>a,g1:()=>o}),function(e){e.Mean="mean",e.Sum="sum",e.Std="std",e.Cumsum="cumsum"}(n||(n={})),function(e){e.Values="values",e.Difference="difference",e.Percentage="percentage",e.Ratio="ratio"}(o||(o={}));const a={}}}]);